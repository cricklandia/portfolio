if (!
  function(t, g) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = t.document ? g(t, !0) : function(t) {
      if (!t.document) throw new Error("jQuery requires a window with a document");
      return g(t)
    } : g(t)
  }("undefined" != typeof window ? window : this,
    function(u, t) {
      function g(t, g) {
        return g.toUpperCase()
      }
      var r = [],
        s = r.slice,
        d = r.concat,
        A = r.push,
        I = r.indexOf,
        e = {},
        n = e.toString,
        h = e.hasOwnProperty,
        B = {},
        i = "1.11.1",
        y = function(t, g) {
          return new y.fn.init(t, g)
        },
        C = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        a = /^-ms-/,
        o = /-([\da-z])/gi;

      function l(t) {
        var g = t.length,
          e = y.type(t);
        return "function" !== e && !y.isWindow(t) && (!(1 !== t.nodeType || !g) || ("array" === e || 0 === g || "number" == typeof g && 0 < g && g - 1 in t))
      }
      y.fn = y.prototype = {
          jquery: i,
          constructor: y,
          selector: "",
          length: 0,
          toArray: function() {
            return s.call(this)
          },
          get: function(t) {
            return null != t ? t < 0 ? this[t + this.length] : this[t] : s.call(this)
          },
          pushStack: function(t) {
            t = y.merge(this.constructor(), t);
            return t.prevObject = this,
              t.context = this.context,
              t
          },
          each: function(t, g) {
            return y.each(this, t, g)
          },
          map: function(e) {
            return this.pushStack(y.map(this,
              function(t, g) {
                return e.call(t, g, t)
              }))
          },
          slice: function() {
            return this.pushStack(s.apply(this, arguments))
          },
          first: function() {
            return this.eq(0)
          },
          last: function() {
            return this.eq(-1)
          },
          eq: function(t) {
            var g = this.length,
              t = +t + (t < 0 ? g : 0);
            return this.pushStack(0 <= t && t < g ? [this[t]] : [])
          },
          end: function() {
            return this.prevObject || this.constructor(null)
          },
          push: A,
          sort: r.sort,
          splice: r.splice
        },
        y.extend = y.fn.extend = function() {
          var t, g, e, n, I, i = arguments[0] || {},
            C = 1,
            A = arguments.length,
            a = !1;
          for ("boolean" == typeof i && (a = i, i = arguments[C] || {},
              C++), "object" == typeof i || y.isFunction(i) || (i = {}), C === A && (i = this, C--); C < A; C++)
            if (null != (n = arguments[C]))
              for (e in n) I = i[e],
                i !== (g = n[e]) && (a && g && (y.isPlainObject(g) || (t = y.isArray(g))) ? (I = t ? (t = !1, I && y.isArray(I) ? I : []) : I && y.isPlainObject(I) ? I : {},
                  i[e] = y.extend(a, I, g)) : void 0 !== g && (i[e] = g));
          return i
        },
        y.extend({
          expando: "jQuery" + (i + Math.random()).replace(/\D/g, ""),
          isReady: !0,
          error: function(t) {
            throw new Error(t)
          },
          noop: function() {},
          isFunction: function(t) {
            return "function" === y.type(t)
          },
          isArray: Array.isArray ||
            function(t) {
              return "array" === y.type(t)
            },
          isWindow: function(t) {
            return null != t && t == t.window
          },
          isNumeric: function(t) {
            return !y.isArray(t) && 0 <= t - parseFloat(t)
          },
          isEmptyObject: function(t) {
            for (var g in t) return !1;
            return !0
          },
          isPlainObject: function(t) {
            if (!t || "object" !== y.type(t) || t.nodeType || y.isWindow(t)) return !1;
            try {
              if (t.constructor && !h.call(t, "constructor") && !h.call(t.constructor.prototype, "isPrototypeOf")) return !1
            } catch (t) {
              return !1
            }
            if (B.ownLast)
              for (var g in t) return h.call(t, g);
            for (g in t);
            return void 0 === g || h.call(t, g)
          },
          type: function(t) {
            return null == t ? t + "" : "object" == typeof t || "function" == typeof t ? e[n.call(t)] || "object" : typeof t
          },
          globalEval: function(t) {
            t && y.trim(t) && (u.execScript ||
              function(t) {
                u.eval.call(u, t)
              })(t)
          },
          camelCase: function(t) {
            return t.replace(a, "ms-").replace(o, g)
          },
          nodeName: function(t, g) {
            return t.nodeName && t.nodeName.toLowerCase() === g.toLowerCase()
          },
          each: function(t, g, e) {
            var n = 0,
              I = t.length,
              i = l(t);
            if (e) {
              if (i)
                for (; n < I && !1 !== g.apply(t[n], e); n++);
              else
                for (n in t)
                  if (!1 === g.apply(t[n], e)) break
            } else if (i)
              for (; n < I && !1 !== g.call(t[n], n, t[n]); n++);
            else
              for (n in t)
                if (!1 === g.call(t[n], n, t[n])) break;
            return t
          },
          trim: function(t) {
            return null == t ? "" : (t + "").replace(C, "")
          },
          makeArray: function(t, g) {
            g = g || [];
            return null != t && (l(Object(t)) ? y.merge(g, "string" == typeof t ? [t] : t) : A.call(g, t)),
              g
          },
          inArray: function(t, g, e) {
            var n;
            if (g) {
              if (I) return I.call(g, t, e);
              for (n = g.length, e = e ? e < 0 ? Math.max(0, n + e) : e : 0; e < n; e++)
                if (e in g && g[e] === t) return e
            }
            return -1
          },
          merge: function(t, g) {
            for (var e = +g.length,
                n = 0,
                I = t.length; n < e;) t[I++] = g[n++];
            if (e != e)
              for (; void 0 !== g[n];) t[I++] = g[n++];
            return t.length = I,
              t
          },
          grep: function(t, g, e) {
            for (var n = [], I = 0, i = t.length, C = !e; I < i; I++) !g(t[I], I) != C && n.push(t[I]);
            return n
          },
          map: function(t, g, e) {
            var n, I = 0,
              i = t.length,
              C = [];
            if (l(t))
              for (; I < i; I++) null != (n = g(t[I], I, e)) && C.push(n);
            else
              for (I in t) null != (n = g(t[I], I, e)) && C.push(n);
            return d.apply([], C)
          },
          guid: 1,
          proxy: function(t, g) {
            var e, n;
            if ("string" == typeof g && (n = t[g], g = t, t = n), y.isFunction(t)) return e = s.call(arguments, 2),
              (n = function() {
                return t.apply(g || this, e.concat(s.call(arguments)))
              }).guid = t.guid = t.guid || y.guid++,
              n
          },
          now: function() {
            return +new Date
          },
          support: B
        }),
        y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
          function(t, g) {
            e["[object " + g + "]"] = g.toLowerCase()
          });
      var c = function(e) {
        function r(t, g, e) {
          var n = "0x" + g - 65536;
          return n != n || e ? g : n < 0 ? String.fromCharCode(65536 + n) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320)
        }
        var t, l, m, i, g, c, u, d, y, o, s, h, Q, n, B, b, I, C, p, G = "sizzle" + -new Date,
          F = e.document,
          f = 0,
          X = 0,
          A = It(),
          x = It(),
          a = It(),
          Z = function(t, g) {
            return t === g && (s = !0),
              0
          },
          U = "undefined",
          v = {}.hasOwnProperty,
          S = [],
          W = S.pop,
          w = S.push,
          N = S.push,
          H = S.slice,
          D = S.indexOf ||
          function(t) {
            for (var g = 0,
                e = this.length; g < e; g++)
              if (this[g] === t) return g;
            return -1
          },
          V = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
          Y = "[\\x20\\t\\r\\n\\f]",
          R = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
          T = R.replace("w", "w#"),
          k = "\\[" + Y + "*(" + R + ")(?:" + Y + "*([*^$|!~]?=)" + Y + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + T + "))|)" + Y + "*\\]",
          E = ":(" + R + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + k + ")*)|.*)\\)|)",
          O = new RegExp("^" + Y + "+|((?:^|[^\\\\])(?:\\\\.)*)" + Y + "+$", "g"),
          L = new RegExp("^" + Y + "*," + Y + "*"),
          J = new RegExp("^" + Y + "*([>+~]|" + Y + ")" + Y + "*"),
          K = new RegExp("=" + Y + "*([^\\]'\"]*?)" + Y + "*\\]", "g"),
          M = new RegExp(E),
          z = new RegExp("^" + T + "$"),
          j = {
            ID: new RegExp("^#(" + R + ")"),
            CLASS: new RegExp("^\\.(" + R + ")"),
            TAG: new RegExp("^(" + R.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + k),
            PSEUDO: new RegExp("^" + E),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + Y + "*(even|odd|(([+-]|)(\\d*)n|)" + Y + "*(?:([+-]|)" + Y + "*(\\d+)|))" + Y + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + V + ")$", "i"),
            needsContext: new RegExp("^" + Y + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + Y + "*((?:-\\d)?\\d*)" + Y + "*\\)|)(?=[^-]|$)", "i")
          },
          _ = /^(?:input|select|textarea|button)$/i,
          P = /^h\d$/i,
          q = /^[^{]+\{\s*\[native \w/,
          $ = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
          tt = /[+~]/,
          gt = /'|\\/g,
          et = new RegExp("\\\\([\\da-f]{1,6}" + Y + "?|(" + Y + ")|.)", "ig");
        try {
          N.apply(S = H.call(F.childNodes), F.childNodes),
            S[F.childNodes.length].nodeType
        } catch (t) {
          N = {
            apply: S.length ?
              function(t, g) {
                w.apply(t, H.call(g))
              } : function(t, g) {
                for (var e = t.length,
                    n = 0; t[e++] = g[n++];);
                t.length = e - 1
              }
          }
        }

        function nt(t, g, e, n) {
          var I, i, C, A, a, o, s;
          if ((g ? g.ownerDocument || g : F) !== Q && h(g), e = e || [], !t || "string" != typeof t) return e;
          if (1 !== (I = (g = g || Q).nodeType) && 9 !== I) return [];
          if (B && !n) {
            if (o = $.exec(t))
              if (s = o[1]) {
                if (9 === I) {
                  if (!(A = g.getElementById(s)) || !A.parentNode) return e;
                  if (A.id === s) return e.push(A),
                    e
                } else if (g.ownerDocument && (A = g.ownerDocument.getElementById(s)) && p(g, A) && A.id === s) return e.push(A),
                  e
              } else {
                if (o[2]) return N.apply(e, g.getElementsByTagName(t)),
                  e;
                if ((s = o[3]) && l.getElementsByClassName && g.getElementsByClassName) return N.apply(e, g.getElementsByClassName(s)),
                  e
              }
            if (l.qsa && (!b || !b.test(t))) {
              if (a = A = G, o = g, s = 9 === I && t, 1 === I && "object" !== g.nodeName.toLowerCase()) {
                for (C = c(t), (A = g.getAttribute("id")) ? a = A.replace(gt, "\\$&") : g.setAttribute("id", a), a = "[id='" + a + "'] ", i = C.length; i--;) C[i] = a + lt(C[i]);
                o = tt.test(t) && st(g.parentNode) || g,
                  s = C.join(",")
              }
              if (s) try {
                return N.apply(e, o.querySelectorAll(s)),
                  e
              } catch (t) {} finally {
                A || g.removeAttribute("id")
              }
            }
          }
          return d(t.replace(O, "$1"), g, e, n)
        }

        function It() {
          var e = [];

          function n(t, g) {
            return e.push(t + " ") > m.cacheLength && delete n[e.shift()],
              n[t + " "] = g
          }
          return n
        }

        function it(t) {
          return t[G] = !0,
            t
        }

        function Ct(t) {
          var g = Q.createElement("div");
          try {
            return !!t(g)
          } catch (t) {
            return !1
          } finally {
            g.parentNode && g.parentNode.removeChild(g)
          }
        }

        function At(t, g) {
          for (var e = t.split("|"), n = t.length; n--;) m.attrHandle[e[n]] = g
        }

        function at(t, g) {
          var e = g && t,
            n = e && 1 === t.nodeType && 1 === g.nodeType && (~g.sourceIndex || 1 << 31) - (~t.sourceIndex || 1 << 31);
          if (n) return n;
          if (e)
            for (; e = e.nextSibling;)
              if (e === g) return -1;
          return t ? 1 : -1
        }

        function ot(C) {
          return it(function(i) {
            return i = +i,
              it(function(t, g) {
                for (var e, n = C([], t.length, i), I = n.length; I--;) t[e = n[I]] && (t[e] = !(g[e] = t[e]))
              })
          })
        }

        function st(t) {
          return t && typeof t.getElementsByTagName !== U && t
        }
        for (t in l = nt.support = {},
          g = nt.isXML = function(t) {
            t = t && (t.ownerDocument || t).documentElement;
            return !!t && "HTML" !== t.nodeName
          },
          h = nt.setDocument = function(t) {
            var a = t ? t.ownerDocument || t : F,
              t = a.defaultView;
            return a !== Q && 9 === a.nodeType && a.documentElement ? (n = (Q = a).documentElement, B = !g(a), t && t !== t.top && (t.addEventListener ? t.addEventListener("unload",
                function() {
                  h()
                },
                !1) : t.attachEvent && t.attachEvent("onunload",
                function() {
                  h()
                })), l.attributes = Ct(function(t) {
                return t.className = "i",
                  !t.getAttribute("className")
              }), l.getElementsByTagName = Ct(function(t) {
                return t.appendChild(a.createComment("")),
                  !t.getElementsByTagName("*").length
              }), l.getElementsByClassName = q.test(a.getElementsByClassName) && Ct(function(t) {
                return t.innerHTML = "<div class='a'></div><div class='a i'></div>",
                  t.firstChild.className = "i",
                  2 === t.getElementsByClassName("i").length
              }), l.getById = Ct(function(t) {
                return n.appendChild(t).id = G,
                  !a.getElementsByName || !a.getElementsByName(G).length
              }), l.getById ? (m.find.ID = function(t, g) {
                  if (typeof g.getElementById !== U && B) {
                    t = g.getElementById(t);
                    return t && t.parentNode ? [t] : []
                  }
                },
                m.filter.ID = function(t) {
                  var g = t.replace(et, r);
                  return function(t) {
                    return t.getAttribute("id") === g
                  }
                }) : (delete m.find.ID, m.filter.ID = function(t) {
                var g = t.replace(et, r);
                return function(t) {
                  t = typeof t.getAttributeNode !== U && t.getAttributeNode("id");
                  return t && t.value === g
                }
              }), m.find.TAG = l.getElementsByTagName ?
              function(t, g) {
                if (typeof g.getElementsByTagName !== U) return g.getElementsByTagName(t)
              } : function(t, g) {
                var e, n = [],
                  I = 0,
                  i = g.getElementsByTagName(t);
                if ("*" !== t) return i;
                for (; e = i[I++];) 1 === e.nodeType && n.push(e);
                return n
              },
              m.find.CLASS = l.getElementsByClassName &&
              function(t, g) {
                if (typeof g.getElementsByClassName !== U && B) return g.getElementsByClassName(t)
              },
              I = [], b = [], (l.qsa = q.test(a.querySelectorAll)) && (Ct(function(t) {
                t.innerHTML = "<select msallowclip=''><option selected=''></option></select>",
                  t.querySelectorAll("[msallowclip^='']").length && b.push("[*^$]=" + Y + "*(?:''|\"\")"),
                  t.querySelectorAll("[selected]").length || b.push("\\[" + Y + "*(?:value|" + V + ")"),
                  t.querySelectorAll(":checked").length || b.push(":checked")
              }), Ct(function(t) {
                var g = a.createElement("input");
                g.setAttribute("type", "hidden"),
                  t.appendChild(g).setAttribute("name", "D"),
                  t.querySelectorAll("[name=d]").length && b.push("name" + Y + "*[*^$|!~]?="),
                  t.querySelectorAll(":enabled").length || b.push(":enabled", ":disabled"),
                  t.querySelectorAll("*,:x"),
                  b.push(",.*:")
              })), (l.matchesSelector = q.test(C = n.matches || n.webkitMatchesSelector || n.mozMatchesSelector || n.oMatchesSelector || n.msMatchesSelector)) && Ct(function(t) {
                l.disconnectedMatch = C.call(t, "div"),
                  C.call(t, "[s!='']:x"),
                  I.push("!=", E)
              }), b = b.length && new RegExp(b.join("|")), I = I.length && new RegExp(I.join("|")), t = q.test(n.compareDocumentPosition), p = t || q.test(n.contains) ?
              function(t, g) {
                var e = 9 === t.nodeType ? t.documentElement : t,
                  g = g && g.parentNode;
                return t === g || !(!g || 1 !== g.nodeType || !(e.contains ? e.contains(g) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(g)))
              } : function(t, g) {
                if (g)
                  for (; g = g.parentNode;)
                    if (g === t) return !0;
                return !1
              },
              Z = t ?
              function(t, g) {
                if (t === g) return s = !0,
                  0;
                var e = !t.compareDocumentPosition - !g.compareDocumentPosition;
                return e || (1 & (e = (t.ownerDocument || t) === (g.ownerDocument || g) ? t.compareDocumentPosition(g) : 1) || !l.sortDetached && g.compareDocumentPosition(t) === e ? t === a || t.ownerDocument === F && p(F, t) ? -1 : g === a || g.ownerDocument === F && p(F, g) ? 1 : o ? D.call(o, t) - D.call(o, g) : 0 : 4 & e ? -1 : 1)
              } : function(t, g) {
                if (t === g) return s = !0,
                  0;
                var e, n = 0,
                  I = t.parentNode,
                  i = g.parentNode,
                  C = [t],
                  A = [g];
                if (!I || !i) return t === a ? -1 : g === a ? 1 : I ? -1 : i ? 1 : o ? D.call(o, t) - D.call(o, g) : 0;
                if (I === i) return at(t, g);
                for (e = t; e = e.parentNode;) C.unshift(e);
                for (e = g; e = e.parentNode;) A.unshift(e);
                for (; C[n] === A[n];) n++;
                return n ? at(C[n], A[n]) : C[n] === F ? -1 : A[n] === F ? 1 : 0
              },
              a) : Q
          },
          nt.matches = function(t, g) {
            return nt(t, null, null, g)
          },
          nt.matchesSelector = function(t, g) {
            if ((t.ownerDocument || t) !== Q && h(t), g = g.replace(K, "='$1']"), l.matchesSelector && B && (!I || !I.test(g)) && (!b || !b.test(g))) try {
              var e = C.call(t, g);
              if (e || l.disconnectedMatch || t.document && 11 !== t.document.nodeType) return e
            } catch (t) {}
            return 0 < nt(g, Q, null, [t]).length
          },
          nt.contains = function(t, g) {
            return (t.ownerDocument || t) !== Q && h(t),
              p(t, g)
          },
          nt.attr = function(t, g) {
            (t.ownerDocument || t) !== Q && h(t);
            var e = m.attrHandle[g.toLowerCase()],
              e = e && v.call(m.attrHandle, g.toLowerCase()) ? e(t, g, !B) : void 0;
            return void 0 !== e ? e : l.attributes || !B ? t.getAttribute(g) : (e = t.getAttributeNode(g)) && e.specified ? e.value : null
          },
          nt.error = function(t) {
            throw new Error("Syntax error, unrecognized expression: " + t)
          },
          nt.uniqueSort = function(t) {
            var g, e = [],
              n = 0,
              I = 0;
            if (s = !l.detectDuplicates, o = !l.sortStable && t.slice(0), t.sort(Z), s) {
              for (; g = t[I++];) g === t[I] && (n = e.push(I));
              for (; n--;) t.splice(e[n], 1)
            }
            return o = null,
              t
          },
          i = nt.getText = function(t) {
            var g, e = "",
              n = 0,
              I = t.nodeType;
            if (I) {
              if (1 === I || 9 === I || 11 === I) {
                if ("string" == typeof t.textContent) return t.textContent;
                for (t = t.firstChild; t; t = t.nextSibling) e += i(t)
              } else if (3 === I || 4 === I) return t.nodeValue
            } else
              for (; g = t[n++];) e += i(g);
            return e
          },
          (m = nt.selectors = {
            cacheLength: 50,
            createPseudo: it,
            match: j,
            attrHandle: {},
            find: {},
            relative: {
              ">": {
                dir: "parentNode",
                first: !0
              },
              " ": {
                dir: "parentNode"
              },
              "+": {
                dir: "previousSibling",
                first: !0
              },
              "~": {
                dir: "previousSibling"
              }
            },
            preFilter: {
              ATTR: function(t) {
                return t[1] = t[1].replace(et, r),
                  t[3] = (t[3] || t[4] || t[5] || "").replace(et, r),
                  "~=" === t[2] && (t[3] = " " + t[3] + " "),
                  t.slice(0, 4)
              },
              CHILD: function(t) {
                return t[1] = t[1].toLowerCase(),
                  "nth" === t[1].slice(0, 3) ? (t[3] || nt.error(t[0]), t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3])), t[5] = +(t[7] + t[8] || "odd" === t[3])) : t[3] && nt.error(t[0]),
                  t
              },
              PSEUDO: function(t) {
                var g, e = !t[6] && t[2];
                return j.CHILD.test(t[0]) ? null : (t[3] ? t[2] = t[4] || t[5] || "" : e && M.test(e) && (g = c(e, !0)) && (g = e.indexOf(")", e.length - g) - e.length) && (t[0] = t[0].slice(0, g), t[2] = e.slice(0, g)), t.slice(0, 3))
              }
            },
            filter: {
              TAG: function(t) {
                var g = t.replace(et, r).toLowerCase();
                return "*" === t ?
                  function() {
                    return !0
                  } : function(t) {
                    return t.nodeName && t.nodeName.toLowerCase() === g
                  }
              },
              CLASS: function(t) {
                var g = A[t + " "];
                return g || (g = new RegExp("(^|" + Y + ")" + t + "(" + Y + "|$)")) && A(t,
                  function(t) {
                    return g.test("string" == typeof t.className && t.className || typeof t.getAttribute !== U && t.getAttribute("class") || "")
                  })
              },
              ATTR: function(g, e, n) {
                return function(t) {
                  t = nt.attr(t, g);
                  return null == t ? "!=" === e : !e || (t += "", "=" === e ? t === n : "!=" === e ? t !== n : "^=" === e ? n && 0 === t.indexOf(n) : "*=" === e ? n && -1 < t.indexOf(n) : "$=" === e ? n && t.slice(-n.length) === n : "~=" === e ? -1 < (" " + t + " ").indexOf(n) : "|=" === e && (t === n || t.slice(0, n.length + 1) === n + "-"))
                }
              },
              CHILD: function(c, t, g, u, d) {
                var h = "nth" !== c.slice(0, 3),
                  B = "last" !== c.slice(-4),
                  b = "of-type" === t;
                return 1 === u && 0 === d ?
                  function(t) {
                    return !!t.parentNode
                  } : function(t, g, e) {
                    var n, I, i, C, A, a, o = h != B ? "nextSibling" : "previousSibling",
                      s = t.parentNode,
                      r = b && t.nodeName.toLowerCase(),
                      l = !e && !b;
                    if (s) {
                      if (h) {
                        for (; o;) {
                          for (i = t; i = i[o];)
                            if (b ? i.nodeName.toLowerCase() === r : 1 === i.nodeType) return !1;
                          a = o = "only" === c && !a && "nextSibling"
                        }
                        return !0
                      }
                      if (a = [B ? s.firstChild : s.lastChild], B && l) {
                        for (A = (n = (I = s[G] || (s[G] = {}))[c] || [])[0] === f && n[1], C = n[0] === f && n[2], i = A && s.childNodes[A]; i = ++A && i && i[o] || (C = A = 0) || a.pop();)
                          if (1 === i.nodeType && ++C && i === t) {
                            I[c] = [f, A, C];
                            break
                          }
                      } else if (l && (n = (t[G] || (t[G] = {}))[c]) && n[0] === f) C = n[1];
                      else
                        for (;
                          (i = ++A && i && i[o] || (C = A = 0) || a.pop()) && ((b ? i.nodeName.toLowerCase() !== r : 1 !== i.nodeType) || !++C || (l && ((i[G] || (i[G] = {}))[c] = [f, C]), i !== t)););
                      return (C -= d) === u || C % u == 0 && 0 <= C / u
                    }
                  }
              },
              PSEUDO: function(t, i) {
                var g, C = m.pseudos[t] || m.setFilters[t.toLowerCase()] || nt.error("unsupported pseudo: " + t);
                return C[G] ? C(i) : 1 < C.length ? (g = [t, t, "", i], m.setFilters.hasOwnProperty(t.toLowerCase()) ? it(function(t, g) {
                  for (var e, n = C(t, i), I = n.length; I--;) t[e = D.call(t, n[I])] = !(g[e] = n[I])
                }) : function(t) {
                  return C(t, 0, g)
                }) : C
              }
            },
            pseudos: {
              not: it(function(t) {
                var n = [],
                  I = [],
                  A = u(t.replace(O, "$1"));
                return A[G] ? it(function(t, g, e, n) {
                  for (var I, i = A(t, null, n, []), C = t.length; C--;)(I = i[C]) && (t[C] = !(g[C] = I))
                }) : function(t, g, e) {
                  return n[0] = t,
                    A(n, null, e, I),
                    !I.pop()
                }
              }),
              has: it(function(g) {
                return function(t) {
                  return 0 < nt(g, t).length
                }
              }),
              contains: it(function(g) {
                return function(t) {
                  return -1 < (t.textContent || t.innerText || i(t)).indexOf(g)
                }
              }),
              lang: it(function(e) {
                return z.test(e || "") || nt.error("unsupported lang: " + e),
                  e = e.replace(et, r).toLowerCase(),
                  function(t) {
                    var g;
                    do {
                      if (g = B ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (g = g.toLowerCase()) === e || 0 === g.indexOf(e + "-")
                    } while ((t = t.parentNode) && 1 === t.nodeType);
                    return !1
                  }
              }),
              target: function(t) {
                var g = e.location && e.location.hash;
                return g && g.slice(1) === t.id
              },
              root: function(t) {
                return t === n
              },
              focus: function(t) {
                return t === Q.activeElement && (!Q.hasFocus || Q.hasFocus()) && !!(t.type || t.href || ~t.tabIndex)
              },
              enabled: function(t) {
                return !1 === t.disabled
              },
              disabled: function(t) {
                return !0 === t.disabled
              },
              checked: function(t) {
                var g = t.nodeName.toLowerCase();
                return "input" === g && !!t.checked || "option" === g && !!t.selected
              },
              selected: function(t) {
                return t.parentNode && t.parentNode.selectedIndex,
                  !0 === t.selected
              },
              empty: function(t) {
                for (t = t.firstChild; t; t = t.nextSibling)
                  if (t.nodeType < 6) return !1;
                return !0
              },
              parent: function(t) {
                return !m.pseudos.empty(t)
              },
              header: function(t) {
                return P.test(t.nodeName)
              },
              input: function(t) {
                return _.test(t.nodeName)
              },
              button: function(t) {
                var g = t.nodeName.toLowerCase();
                return "input" === g && "button" === t.type || "button" === g
              },
              text: function(t) {
                return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (t = t.getAttribute("type")) || "text" === t.toLowerCase())
              },
              first: ot(function() {
                return [0]
              }),
              last: ot(function(t, g) {
                return [g - 1]
              }),
              eq: ot(function(t, g, e) {
                return [e < 0 ? e + g : e]
              }),
              even: ot(function(t, g) {
                for (var e = 0; e < g; e += 2) t.push(e);
                return t
              }),
              odd: ot(function(t, g) {
                for (var e = 1; e < g; e += 2) t.push(e);
                return t
              }),
              lt: ot(function(t, g, e) {
                for (var n = e < 0 ? e + g : e; 0 <= --n;) t.push(n);
                return t
              }),
              gt: ot(function(t, g, e) {
                for (var n = e < 0 ? e + g : e; ++n < g;) t.push(n);
                return t
              })
            }
          }).pseudos.nth = m.pseudos.eq, {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
          }) m.pseudos[t] = function(g) {
          return function(t) {
            return "input" === t.nodeName.toLowerCase() && t.type === g
          }
        }(t);
        for (t in {
            submit: !0,
            reset: !0
          }) m.pseudos[t] = function(e) {
          return function(t) {
            var g = t.nodeName.toLowerCase();
            return ("input" === g || "button" === g) && t.type === e
          }
        }(t);

        function rt() {}

        function lt(t) {
          for (var g = 0,
              e = t.length,
              n = ""; g < e; g++) n += t[g].value;
          return n
        }

        function ct(C, t, g) {
          var A = t.dir,
            a = g && "parentNode" === A,
            o = X++;
          return t.first ?
            function(t, g, e) {
              for (; t = t[A];)
                if (1 === t.nodeType || a) return C(t, g, e)
            } : function(t, g, e) {
              var n, I, i = [f, o];
              if (e) {
                for (; t = t[A];)
                  if ((1 === t.nodeType || a) && C(t, g, e)) return !0
              } else
                for (; t = t[A];)
                  if (1 === t.nodeType || a) {
                    if ((n = (I = t[G] || (t[G] = {}))[A]) && n[0] === f && n[1] === o) return i[2] = n[2];
                    if ((I[A] = i)[2] = C(t, g, e)) return !0
                  }
            }
        }

        function ut(I) {
          return 1 < I.length ?
            function(t, g, e) {
              for (var n = I.length; n--;)
                if (!I[n](t, g, e)) return !1;
              return !0
            } : I[0]
        }

        function dt(t, g, e, n, I) {
          for (var i, C = [], A = 0, a = t.length, o = null != g; A < a; A++)(i = t[A]) && (e && !e(i, n, I) || (C.push(i), o && g.push(A)));
          return C
        }

        function ht(c, u, d, h, B, t) {
          return h && !h[G] && (h = ht(h)),
            B && !B[G] && (B = ht(B, t)),
            it(function(t, g, e, n) {
              var I, i, C, A = [],
                a = [],
                o = g.length,
                s = t ||
                function(t, g, e) {
                  for (var n = 0,
                      I = g.length; n < I; n++) nt(t, g[n], e);
                  return e
                }(u || "*", e.nodeType ? [e] : e, []),
                r = !c || !t && u ? s : dt(s, A, c, e, n),
                l = d ? B || (t ? c : o || h) ? [] : g : r;
              if (d && d(r, l, e, n), h)
                for (I = dt(l, a), h(I, [], e, n), i = I.length; i--;)(C = I[i]) && (l[a[i]] = !(r[a[i]] = C));
              if (t) {
                if (B || c) {
                  if (B) {
                    for (I = [], i = l.length; i--;)(C = l[i]) && I.push(r[i] = C);
                    B(null, l = [], I, n)
                  }
                  for (i = l.length; i--;)(C = l[i]) && -1 < (I = B ? D.call(t, C) : A[i]) && (t[I] = !(g[I] = C))
                }
              } else l = dt(l === g ? l.splice(o, l.length) : l),
                B ? B(null, g, l, n) : N.apply(g, l)
            })
        }

        function Bt(h, B) {
          function t(t, g, e, n, I) {
            var i, C, A, a = 0,
              o = "0",
              s = t && [],
              r = [],
              l = y,
              c = t || p && m.find.TAG("*", I),
              u = f += null == l ? 1 : Math.random() || .1,
              d = c.length;
            for (I && (y = g !== Q && g); o !== d && null != (i = c[o]); o++) {
              if (p && i) {
                for (C = 0; A = h[C++];)
                  if (A(i, g, e)) {
                    n.push(i);
                    break
                  }
                I && (f = u)
              }
              b && ((i = !A && i) && a--, t && s.push(i))
            }
            if (a += o, b && o !== a) {
              for (C = 0; A = B[C++];) A(s, r, g, e);
              if (t) {
                if (0 < a)
                  for (; o--;) s[o] || r[o] || (r[o] = W.call(n));
                r = dt(r)
              }
              N.apply(n, r),
                I && !t && 0 < r.length && 1 < a + B.length && nt.uniqueSort(n)
            }
            return I && (f = u, y = l),
              s
          }
          var b = 0 < B.length,
            p = 0 < h.length;
          return b ? it(t) : t
        }
        return rt.prototype = m.filters = m.pseudos,
          m.setFilters = new rt,
          c = nt.tokenize = function(t, g) {
            var e, n, I, i, C, A, a, o = x[t + " "];
            if (o) return g ? 0 : o.slice(0);
            for (C = t, A = [], a = m.preFilter; C;) {
              for (i in e && !(n = L.exec(C)) || (n && (C = C.slice(n[0].length) || C), A.push(I = [])), e = !1, (n = J.exec(C)) && (e = n.shift(), I.push({
                  value: e,
                  type: n[0].replace(O, " ")
                }), C = C.slice(e.length)), m.filter) !(n = j[i].exec(C)) || a[i] && !(n = a[i](n)) || (e = n.shift(), I.push({
                value: e,
                type: i,
                matches: n
              }), C = C.slice(e.length));
              if (!e) break
            }
            return g ? C.length : C ? nt.error(t) : x(t, A).slice(0)
          },
          u = nt.compile = function(t, g) {
            var e, n = [],
              I = [],
              i = a[t + " "];
            if (!i) {
              for (e = (g = g || c(t)).length; e--;)((i = function t(g) {
                for (var n, e, I, i = g.length,
                    C = m.relative[g[0].type], A = C || m.relative[" "], a = C ? 1 : 0, o = ct(function(t) {
                        return t === n
                      },
                      A, !0), s = ct(function(t) {
                        return -1 < D.call(n, t)
                      },
                      A, !0), r = [function(t, g, e) {
                      return !C && (e || g !== y) || ((n = g).nodeType ? o : s)(t, g, e)
                    }]; a < i; a++)
                  if (e = m.relative[g[a].type]) r = [ct(ut(r), e)];
                  else {
                    if ((e = m.filter[g[a].type].apply(null, g[a].matches))[G]) {
                      for (I = ++a; I < i && !m.relative[g[I].type]; I++);
                      return ht(1 < a && ut(r), 1 < a && lt(g.slice(0, a - 1).concat({
                        value: " " === g[a - 2].type ? "*" : ""
                      })).replace(O, "$1"), e, a < I && t(g.slice(a, I)), I < i && t(g = g.slice(I)), I < i && lt(g))
                    }
                    r.push(e)
                  }
                return ut(r)
              }(g[e]))[G] ? n : I).push(i);
              (i = a(t, Bt(I, n))).selector = t
            }
            return i
          },
          d = nt.select = function(t, g, e, n) {
            var I, i, C, A, a, o = "function" == typeof t && t,
              s = !n && c(t = o.selector || t);
            if (e = e || [], 1 === s.length) {
              if (2 < (i = s[0] = s[0].slice(0)).length && "ID" === (C = i[0]).type && l.getById && 9 === g.nodeType && B && m.relative[i[1].type]) {
                if (!(g = (m.find.ID(C.matches[0].replace(et, r), g) || [])[0])) return e;
                o && (g = g.parentNode),
                  t = t.slice(i.shift().value.length)
              }
              for (I = j.needsContext.test(t) ? 0 : i.length; I-- && (C = i[I], !m.relative[A = C.type]);)
                if ((a = m.find[A]) && (n = a(C.matches[0].replace(et, r), tt.test(i[0].type) && st(g.parentNode) || g))) {
                  if (i.splice(I, 1), !(t = n.length && lt(i))) return N.apply(e, n),
                    e;
                  break
                }
            }
            return (o || u(t, s))(n, g, !B, e, tt.test(t) && st(g.parentNode) || g),
              e
          },
          l.sortStable = G.split("").sort(Z).join("") === G,
          l.detectDuplicates = !!s,
          h(),
          l.sortDetached = Ct(function(t) {
            return 1 & t.compareDocumentPosition(Q.createElement("div"))
          }),
          Ct(function(t) {
            return t.innerHTML = "<a href='#'></a>",
              "#" === t.firstChild.getAttribute("href")
          }) || At("type|href|height|width",
            function(t, g, e) {
              if (!e) return t.getAttribute(g, "type" === g.toLowerCase() ? 1 : 2)
            }),
          l.attributes && Ct(function(t) {
            return t.innerHTML = "<input/>",
              t.firstChild.setAttribute("value", ""),
              "" === t.firstChild.getAttribute("value")
          }) || At("value",
            function(t, g, e) {
              if (!e && "input" === t.nodeName.toLowerCase()) return t.defaultValue
            }),
          Ct(function(t) {
            return null == t.getAttribute("disabled")
          }) || At(V,
            function(t, g, e) {
              if (!e) return !0 === t[g] ? g.toLowerCase() : (g = t.getAttributeNode(g)) && g.specified ? g.value : null
            }),
          nt
      }(u);
      y.find = c,
        y.expr = c.selectors,
        y.expr[":"] = y.expr.pseudos,
        y.unique = c.uniqueSort,
        y.text = c.getText,
        y.isXMLDoc = c.isXML,
        y.contains = c.contains;
      var b = y.expr.match.needsContext,
        p = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        m = /^.[^:#\[\.,]*$/;

      function Q(t, e, n) {
        if (y.isFunction(e)) return y.grep(t,
          function(t, g) {
            return !!e.call(t, g, t) !== n
          });
        if (e.nodeType) return y.grep(t,
          function(t) {
            return t === e !== n
          });
        if ("string" == typeof e) {
          if (m.test(e)) return y.filter(e, t, n);
          e = y.filter(e, t)
        }
        return y.grep(t,
          function(t) {
            return 0 <= y.inArray(t, e) !== n
          })
      }
      y.filter = function(t, g, e) {
          var n = g[0];
          return e && (t = ":not(" + t + ")"),
            1 === g.length && 1 === n.nodeType ? y.find.matchesSelector(n, t) ? [n] : [] : y.find.matches(t, y.grep(g,
              function(t) {
                return 1 === t.nodeType
              }))
        },
        y.fn.extend({
          find: function(t) {
            var g, e = [],
              n = this,
              I = n.length;
            if ("string" != typeof t) return this.pushStack(y(t).filter(function() {
              for (g = 0; g < I; g++)
                if (y.contains(n[g], this)) return !0
            }));
            for (g = 0; g < I; g++) y.find(t, n[g], e);
            return (e = this.pushStack(1 < I ? y.unique(e) : e)).selector = this.selector ? this.selector + " " + t : t,
              e
          },
          filter: function(t) {
            return this.pushStack(Q(this, t || [], !1))
          },
          not: function(t) {
            return this.pushStack(Q(this, t || [], !0))
          },
          is: function(t) {
            return !!Q(this, "string" == typeof t && b.test(t) ? y(t) : t || [], !1).length
          }
        });
      var G = u.document,
        F = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
      (y.fn.init = function(t, g) {
        var e, n;
        if (!t) return this;
        if ("string" != typeof t) return t.nodeType ? (this.context = this[0] = t, this.length = 1, this) : y.isFunction(t) ? void 0 !== f.ready ? f.ready(t) : t(y) : (void 0 !== t.selector && (this.selector = t.selector, this.context = t.context), y.makeArray(t, this));
        if (!(e = "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && 3 <= t.length ? [null, t, null] : F.exec(t)) || !e[1] && g) return (!g || g.jquery ? g || f : this.constructor(g)).find(t);
        if (e[1]) {
          if (g = g instanceof y ? g[0] : g, y.merge(this, y.parseHTML(e[1], g && g.nodeType ? g.ownerDocument || g : G, !0)), p.test(e[1]) && y.isPlainObject(g))
            for (e in g) y.isFunction(this[e]) ? this[e](g[e]) : this.attr(e, g[e]);
          return this
        }
        if ((n = G.getElementById(e[2])) && n.parentNode) {
          if (n.id !== e[2]) return f.find(t);
          this.length = 1,
            this[0] = n
        }
        return this.context = G,
          this.selector = t,
          this
      }).prototype = y.fn;
      var f = y(G),
        X = /^(?:parents|prev(?:Until|All))/,
        x = {
          children: !0,
          contents: !0,
          next: !0,
          prev: !0
        };

      function Z(t, g) {
        for (;
          (t = t[g]) && 1 !== t.nodeType;);
        return t
      }
      y.extend({
          dir: function(t, g, e) {
            for (var n = [], I = t[g]; I && 9 !== I.nodeType && (void 0 === e || 1 !== I.nodeType || !y(I).is(e));) 1 === I.nodeType && n.push(I),
              I = I[g];
            return n
          },
          sibling: function(t, g) {
            for (var e = []; t; t = t.nextSibling) 1 === t.nodeType && t !== g && e.push(t);
            return e
          }
        }),
        y.fn.extend({
          has: function(t) {
            var g, e = y(t, this),
              n = e.length;
            return this.filter(function() {
              for (g = 0; g < n; g++)
                if (y.contains(this, e[g])) return !0
            })
          },
          closest: function(t, g) {
            for (var e, n = 0,
                I = this.length,
                i = [], C = b.test(t) || "string" != typeof t ? y(t, g || this.context) : 0; n < I; n++)
              for (e = this[n]; e && e !== g; e = e.parentNode)
                if (e.nodeType < 11 && (C ? -1 < C.index(e) : 1 === e.nodeType && y.find.matchesSelector(e, t))) {
                  i.push(e);
                  break
                }
            return this.pushStack(1 < i.length ? y.unique(i) : i)
          },
          index: function(t) {
            return t ? "string" == typeof t ? y.inArray(this[0], y(t)) : y.inArray(t.jquery ? t[0] : t, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
          },
          add: function(t, g) {
            return this.pushStack(y.unique(y.merge(this.get(), y(t, g))))
          },
          addBack: function(t) {
            return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
          }
        }),
        y.each({
            parent: function(t) {
              t = t.parentNode;
              return t && 11 !== t.nodeType ? t : null
            },
            parents: function(t) {
              return y.dir(t, "parentNode")
            },
            parentsUntil: function(t, g, e) {
              return y.dir(t, "parentNode", e)
            },
            next: function(t) {
              return Z(t, "nextSibling")
            },
            prev: function(t) {
              return Z(t, "previousSibling")
            },
            nextAll: function(t) {
              return y.dir(t, "nextSibling")
            },
            prevAll: function(t) {
              return y.dir(t, "previousSibling")
            },
            nextUntil: function(t, g, e) {
              return y.dir(t, "nextSibling", e)
            },
            prevUntil: function(t, g, e) {
              return y.dir(t, "previousSibling", e)
            },
            siblings: function(t) {
              return y.sibling((t.parentNode || {}).firstChild, t)
            },
            children: function(t) {
              return y.sibling(t.firstChild)
            },
            contents: function(t) {
              return y.nodeName(t, "iframe") ? t.contentDocument || t.contentWindow.document : y.merge([], t.childNodes)
            }
          },
          function(n, I) {
            y.fn[n] = function(t, g) {
              var e = y.map(this, I, t);
              return (g = "Until" !== n.slice(-5) ? t : g) && "string" == typeof g && (e = y.filter(g, e)),
                1 < this.length && (x[n] || (e = y.unique(e)), X.test(n) && (e = e.reverse())),
                this.pushStack(e)
            }
          });
      var U, v = /\S+/g,
        S = {};

      function W() {
        G.addEventListener ? (G.removeEventListener("DOMContentLoaded", w, !1), u.removeEventListener("load", w, !1)) : (G.detachEvent("onreadystatechange", w), u.detachEvent("onload", w))
      }

      function w() {
        !G.addEventListener && "load" !== event.type && "complete" !== G.readyState || (W(), y.ready())
      }
      y.Callbacks = function(I) {
          var t, e;
          I = "string" == typeof I ? S[I] || (e = S[t = I] = {},
            y.each(t.match(v) || [],
              function(t, g) {
                e[g] = !0
              }), e) : y.extend({},
            I);

          function n(t) {
            for (g = I.memory && t, C = !0, a = o || 0, o = 0, A = s.length, i = !0; s && a < A; a++)
              if (!1 === s[a].apply(t[0], t[1]) && I.stopOnFalse) {
                g = !1;
                break
              }
            i = !1,
              s && (r ? r.length && n(r.shift()) : g ? s = [] : l.disable())
          }
          var i, g, C, A, a, o, s = [],
            r = !I.once && [],
            l = {
              add: function() {
                var t;
                return s && (t = s.length,
                    function n(t) {
                      y.each(t,
                        function(t, g) {
                          var e = y.type(g);
                          "function" === e ? I.unique && l.has(g) || s.push(g) : g && g.length && "string" !== e && n(g)
                        })
                    }(arguments), i ? A = s.length : g && (o = t, n(g))),
                  this
              },
              remove: function() {
                return s && y.each(arguments,
                    function(t, g) {
                      for (var e; - 1 < (e = y.inArray(g, s, e));) s.splice(e, 1),
                        i && (e <= A && A--, e <= a && a--)
                    }),
                  this
              },
              has: function(t) {
                return t ? -1 < y.inArray(t, s) : !(!s || !s.length)
              },
              empty: function() {
                return s = [],
                  A = 0,
                  this
              },
              disable: function() {
                return s = r = g = void 0,
                  this
              },
              disabled: function() {
                return !s
              },
              lock: function() {
                return r = void 0,
                  g || l.disable(),
                  this
              },
              locked: function() {
                return !r
              },
              fireWith: function(t, g) {
                return !s || C && !r || (g = [t, (g = g || []).slice ? g.slice() : g], i ? r.push(g) : n(g)),
                  this
              },
              fire: function() {
                return l.fireWith(this, arguments),
                  this
              },
              fired: function() {
                return !!C
              }
            };
          return l
        },
        y.extend({
          Deferred: function(t) {
            var i = [
                ["resolve", "done", y.Callbacks("once memory"), "resolved"],
                ["reject", "fail", y.Callbacks("once memory"), "rejected"],
                ["notify", "progress", y.Callbacks("memory")]
              ],
              I = "pending",
              C = {
                state: function() {
                  return I
                },
                always: function() {
                  return A.done(arguments).fail(arguments),
                    this
                },
                then: function() {
                  var I = arguments;
                  return y.Deferred(function(n) {
                    y.each(i,
                        function(t, g) {
                          var e = y.isFunction(I[t]) && I[t];
                          A[g[1]](function() {
                            var t = e && e.apply(this, arguments);
                            t && y.isFunction(t.promise) ? t.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[g[0] + "With"](this === C ? n.promise() : this, e ? [t] : arguments)
                          })
                        }),
                      I = null
                  }).promise()
                },
                promise: function(t) {
                  return null != t ? y.extend(t, C) : C
                }
              },
              A = {};
            return C.pipe = C.then,
              y.each(i,
                function(t, g) {
                  var e = g[2],
                    n = g[3];
                  C[g[1]] = e.add,
                    n && e.add(function() {
                        I = n
                      },
                      i[1 ^ t][2].disable, i[2][2].lock),
                    A[g[0]] = function() {
                      return A[g[0] + "With"](this === A ? C : this, arguments),
                        this
                    },
                    A[g[0] + "With"] = e.fireWith
                }),
              C.promise(A),
              t && t.call(A, A),
              A
          },
          when: function(t) {
            function g(g, e, n) {
              return function(t) {
                e[g] = this,
                  n[g] = 1 < arguments.length ? s.call(arguments) : t,
                  n === I ? o.notifyWith(e, n) : --a || o.resolveWith(e, n)
              }
            }
            var I, e, n, i = 0,
              C = s.call(arguments),
              A = C.length,
              a = 1 !== A || t && y.isFunction(t.promise) ? A : 0,
              o = 1 === a ? t : y.Deferred();
            if (1 < A)
              for (I = new Array(A), e = new Array(A), n = new Array(A); i < A; i++) C[i] && y.isFunction(C[i].promise) ? C[i].promise().done(g(i, n, C)).fail(o.reject).progress(g(i, e, I)) : --a;
            return a || o.resolveWith(n, C),
              o.promise()
          }
        }),
        y.fn.ready = function(t) {
          return y.ready.promise().done(t),
            this
        },
        y.extend({
          isReady: !1,
          readyWait: 1,
          holdReady: function(t) {
            t ? y.readyWait++ : y.ready(!0)
          },
          ready: function(t) {
            if (!0 === t ? !--y.readyWait : !y.isReady) {
              if (!G.body) return setTimeout(y.ready);
              (y.isReady = !0) !== t && 0 < --y.readyWait || (U.resolveWith(G, [y]), y.fn.triggerHandler && (y(G).triggerHandler("ready"), y(G).off("ready")))
            }
          }
        }),
        y.ready.promise = function(t) {
          if (!U)
            if (U = y.Deferred(), "complete" === G.readyState) setTimeout(y.ready);
            else if (G.addEventListener) G.addEventListener("DOMContentLoaded", w, !1),
            u.addEventListener("load", w, !1);
          else {
            G.attachEvent("onreadystatechange", w),
              u.attachEvent("onload", w);
            var e = !1;
            try {
              e = null == u.frameElement && G.documentElement
            } catch (t) {}
            e && e.doScroll && !
              function g() {
                if (!y.isReady) {
                  try {
                    e.doScroll("left")
                  } catch (t) {
                    return setTimeout(g, 50)
                  }
                  W(),
                    y.ready()
                }
              }()
          }
          return U.promise(t)
        };
      var N, H = "undefined";
      for (N in y(B)) break;
      B.ownLast = "0" !== N,
        B.inlineBlockNeedsLayout = !1,
        y(function() {
          var t, g, e = G.getElementsByTagName("body")[0];
          e && e.style && (t = G.createElement("div"), (g = G.createElement("div")).style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", e.appendChild(g).appendChild(t), typeof t.style.zoom != H && (t.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1", B.inlineBlockNeedsLayout = t = 3 === t.offsetWidth, t && (e.style.zoom = 1)), e.removeChild(g))
        }),
        function() {
          var t = G.createElement("div");
          if (null == B.deleteExpando) {
            B.deleteExpando = !0;
            try {
              delete t.test
            } catch (t) {
              B.deleteExpando = !1
            }
          }
        }(),
        y.acceptData = function(t) {
          var g = y.noData[(t.nodeName + " ").toLowerCase()],
            e = +t.nodeType || 1;
          return (1 === e || 9 === e) && (!g || !0 !== g && t.getAttribute("classid") === g)
        };
      var D = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        V = /([A-Z])/g;

      function Y(t, g, e) {
        if (void 0 === e && 1 === t.nodeType) {
          var n = "data-" + g.replace(V, "-$1").toLowerCase();
          if ("string" == typeof(e = t.getAttribute(n))) {
            try {
              e = "true" === e || "false" !== e && ("null" === e ? null : +e + "" === e ? +e : D.test(e) ? y.parseJSON(e) : e)
            } catch (t) {}
            y.data(t, g, e)
          } else e = void 0
        }
        return e
      }

      function R(t) {
        for (var g in t)
          if (("data" !== g || !y.isEmptyObject(t[g])) && "toJSON" !== g) return;
        return 1
      }

      function T(t, g, e, n) {
        if (y.acceptData(t)) {
          var I, i = y.expando,
            C = t.nodeType,
            A = C ? y.cache : t,
            a = C ? t[i] : t[i] && i;
          if (a && A[a] && (n || A[a].data) || void 0 !== e || "string" != typeof g) return A[a = a || (C ? t[i] = r.pop() || y.guid++ : i)] || (A[a] = C ? {} : {
              toJSON: y.noop
            }),
            "object" != typeof g && "function" != typeof g || (n ? A[a] = y.extend(A[a], g) : A[a].data = y.extend(A[a].data, g)),
            a = A[a],
            n || (a.data || (a.data = {}), a = a.data),
            void 0 !== e && (a[y.camelCase(g)] = e),
            "string" == typeof g ? null == (I = a[g]) && (I = a[y.camelCase(g)]) : I = a,
            I
        }
      }

      function k(t, g, e) {
        if (y.acceptData(t)) {
          var n, I, i = t.nodeType,
            C = i ? y.cache : t,
            A = i ? t[y.expando] : y.expando;
          if (C[A]) {
            if (g && (n = e ? C[A] : C[A].data)) {
              I = (g = y.isArray(g) ? g.concat(y.map(g, y.camelCase)) : g in n || (g = y.camelCase(g)) in n ? [g] : g.split(" ")).length;
              for (; I--;) delete n[g[I]];
              if (e ? !R(n) : !y.isEmptyObject(n)) return
            }(e || (delete C[A].data, R(C[A]))) && (i ? y.cleanData([t], !0) : B.deleteExpando || C != C.window ? delete C[A] : C[A] = null)
          }
        }
      }
      y.extend({
          cache: {},
          noData: {
            "applet ": !0,
            "embed ": !0,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
          },
          hasData: function(t) {
            return !!(t = t.nodeType ? y.cache[t[y.expando]] : t[y.expando]) && !R(t)
          },
          data: function(t, g, e) {
            return T(t, g, e)
          },
          removeData: function(t, g) {
            return k(t, g)
          },
          _data: function(t, g, e) {
            return T(t, g, e, !0)
          },
          _removeData: function(t, g) {
            return k(t, g, !0)
          }
        }),
        y.fn.extend({
          data: function(t, g) {
            var e, n, I, i = this[0],
              C = i && i.attributes;
            if (void 0 !== t) return "object" == typeof t ? this.each(function() {
              y.data(this, t)
            }) : 1 < arguments.length ? this.each(function() {
              y.data(this, t, g)
            }) : i ? Y(i, t, y.data(i, t)) : void 0;
            if (this.length && (I = y.data(i), 1 === i.nodeType && !y._data(i, "parsedAttrs"))) {
              for (e = C.length; e--;) C[e] && 0 === (n = C[e].name).indexOf("data-") && Y(i, n = y.camelCase(n.slice(5)), I[n]);
              y._data(i, "parsedAttrs", !0)
            }
            return I
          },
          removeData: function(t) {
            return this.each(function() {
              y.removeData(this, t)
            })
          }
        }),
        y.extend({
          queue: function(t, g, e) {
            var n;
            if (t) return n = y._data(t, g = (g || "fx") + "queue"),
              e && (!n || y.isArray(e) ? n = y._data(t, g, y.makeArray(e)) : n.push(e)),
              n || []
          },
          dequeue: function(t, g) {
            g = g || "fx";
            var e = y.queue(t, g),
              n = e.length,
              I = e.shift(),
              i = y._queueHooks(t, g);
            "inprogress" === I && (I = e.shift(), n--),
              I && ("fx" === g && e.unshift("inprogress"), delete i.stop, I.call(t,
                function() {
                  y.dequeue(t, g)
                },
                i)),
              !n && i && i.empty.fire()
          },
          _queueHooks: function(t, g) {
            var e = g + "queueHooks";
            return y._data(t, e) || y._data(t, e, {
              empty: y.Callbacks("once memory").add(function() {
                y._removeData(t, g + "queue"),
                  y._removeData(t, e)
              })
            })
          }
        }),
        y.fn.extend({
          queue: function(g, e) {
            var t = 2;
            return "string" != typeof g && (e = g, g = "fx", t--),
              arguments.length < t ? y.queue(this[0], g) : void 0 === e ? this : this.each(function() {
                var t = y.queue(this, g, e);
                y._queueHooks(this, g),
                  "fx" === g && "inprogress" !== t[0] && y.dequeue(this, g)
              })
          },
          dequeue: function(t) {
            return this.each(function() {
              y.dequeue(this, t)
            })
          },
          clearQueue: function(t) {
            return this.queue(t || "fx", [])
          },
          promise: function(t, g) {
            function e() {
              --I || i.resolveWith(C, [C])
            }
            var n, I = 1,
              i = y.Deferred(),
              C = this,
              A = this.length;
            for ("string" != typeof t && (g = t, t = void 0), t = t || "fx"; A--;)(n = y._data(C[A], t + "queueHooks")) && n.empty && (I++, n.empty.add(e));
            return e(),
              i.promise(g)
          }
        });

      function E(t, g) {
        return "none" === y.css(t = g || t, "display") || !y.contains(t.ownerDocument, t)
      }
      var O = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        L = ["Top", "Right", "Bottom", "Left"],
        J = y.access = function(t, g, e, n, I, i, C) {
          var A = 0,
            a = t.length,
            o = null == e;
          if ("object" === y.type(e))
            for (A in I = !0, e) y.access(t, g, A, e[A], !0, i, C);
          else if (void 0 !== n && (I = !0, y.isFunction(n) || (C = !0), g = o ? C ? (g.call(t, n), null) : (o = g,
              function(t, g, e) {
                return o.call(y(t), e)
              }) : g))
            for (; A < a; A++) g(t[A], e, C ? n : n.call(t[A], A, g(t[A], e)));
          return I ? t : o ? g.call(t) : a ? g(t[0], e) : i
        },
        K = /^(?:checkbox|radio)$/i;
      !
      function() {
        var t = G.createElement("input"),
          g = G.createElement("div"),
          e = G.createDocumentFragment();
        if (g.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", B.leadingWhitespace = 3 === g.firstChild.nodeType, B.tbody = !g.getElementsByTagName("tbody").length, B.htmlSerialize = !!g.getElementsByTagName("link").length, B.html5Clone = "<:nav></:nav>" !== G.createElement("nav").cloneNode(!0).outerHTML, t.type = "checkbox", t.checked = !0, e.appendChild(t), B.appendChecked = t.checked, g.innerHTML = "<textarea>x</textarea>", B.noCloneChecked = !!g.cloneNode(!0).lastChild.defaultValue, e.appendChild(g), g.innerHTML = "<input type='radio' checked='checked' name='t'/>", B.checkClone = g.cloneNode(!0).cloneNode(!0).lastChild.checked, B.noCloneEvent = !0, g.attachEvent && (g.attachEvent("onclick",
            function() {
              B.noCloneEvent = !1
            }), g.cloneNode(!0).click()), null == B.deleteExpando) {
          B.deleteExpando = !0;
          try {
            delete g.test
          } catch (t) {
            B.deleteExpando = !1
          }
        }
      }(),
      function() {
        var t, g, e = G.createElement("div");
        for (t in {
            submit: !0,
            change: !0,
            focusin: !0
          })(B[t + "Bubbles"] = (g = "on" + t) in u) || (e.setAttribute(g, "t"), B[t + "Bubbles"] = !1 === e.attributes[g].expando)
      }();
      var M = /^(?:input|select|textarea)$/i,
        z = /^key/,
        j = /^(?:mouse|pointer|contextmenu)|click/,
        _ = /^(?:focusinfocus|focusoutblur)$/,
        P = /^([^.]*)(?:\.(.+)|)$/;

      function q() {
        return !0
      }

      function $() {
        return !1
      }

      function tt() {
        try {
          return G.activeElement
        } catch (t) {}
      }

      function gt(t) {
        var g = et.split("|"),
          e = t.createDocumentFragment();
        if (e.createElement)
          for (; g.length;) e.createElement(g.pop());
        return e
      }
      y.event = {
          global: {},
          add: function(t, g, e, n, I) {
            var i, C, A, a, o, s, r, l, c, u = y._data(t);
            if (u)
              for (e.handler && (e = (A = e).handler, I = A.selector), e.guid || (e.guid = y.guid++), (i = u.events) || (i = u.events = {}), (o = u.handle) || ((o = u.handle = function(t) {
                  return typeof y == H || t && y.event.triggered === t.type ? void 0 : y.event.dispatch.apply(o.elem, arguments)
                }).elem = t), C = (g = (g || "").match(v) || [""]).length; C--;) r = c = (s = P.exec(g[C]) || [])[1],
                l = (s[2] || "").split(".").sort(),
                r && (a = y.event.special[r] || {},
                  r = (I ? a.delegateType : a.bindType) || r, a = y.event.special[r] || {},
                  s = y.extend({
                      type: r,
                      origType: c,
                      data: n,
                      handler: e,
                      guid: e.guid,
                      selector: I,
                      needsContext: I && y.expr.match.needsContext.test(I),
                      namespace: l.join(".")
                    },
                    A), (c = i[r]) || ((c = i[r] = []).delegateCount = 0, a.setup && !1 !== a.setup.call(t, n, l, o) || (t.addEventListener ? t.addEventListener(r, o, !1) : t.attachEvent && t.attachEvent("on" + r, o))), a.add && (a.add.call(t, s), s.handler.guid || (s.handler.guid = e.guid)), I ? c.splice(c.delegateCount++, 0, s) : c.push(s), y.event.global[r] = !0)
          },
          remove: function(t, g, e, n, I) {
            var i, C, A, a, o, s, r, l, c, u, d, h = y.hasData(t) && y._data(t);
            if (h && (s = h.events)) {
              for (o = (g = (g || "").match(v) || [""]).length; o--;)
                if (c = d = (A = P.exec(g[o]) || [])[1], u = (A[2] || "").split(".").sort(), c) {
                  for (r = y.event.special[c] || {},
                    l = s[c = (n ? r.delegateType : r.bindType) || c] || [], A = A[2] && new RegExp("(^|\\.)" + u.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = i = l.length; i--;) C = l[i],
                    !I && d !== C.origType || e && e.guid !== C.guid || A && !A.test(C.namespace) || n && n !== C.selector && ("**" !== n || !C.selector) || (l.splice(i, 1), C.selector && l.delegateCount--, r.remove && r.remove.call(t, C));
                  a && !l.length && (r.teardown && !1 !== r.teardown.call(t, u, h.handle) || y.removeEvent(t, c, h.handle), delete s[c])
                } else
                  for (c in s) y.event.remove(t, c + g[o], e, n, !0);
              y.isEmptyObject(s) && (delete h.handle, y._removeData(t, "events"))
            }
          },
          trigger: function(t, g, e, n) {
            var I, i, C, A, a, o, s = [e || G],
              r = h.call(t, "type") ? t.type : t,
              l = h.call(t, "namespace") ? t.namespace.split(".") : [],
              c = a = e = e || G;
            if (3 !== e.nodeType && 8 !== e.nodeType && !_.test(r + y.event.triggered) && (0 <= r.indexOf(".") && (r = (l = r.split(".")).shift(), l.sort()), i = r.indexOf(":") < 0 && "on" + r, (t = t[y.expando] ? t : new y.Event(r, "object" == typeof t && t)).isTrigger = n ? 2 : 3, t.namespace = l.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + l.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = e), g = null == g ? [t] : y.makeArray(g, [t]), A = y.event.special[r] || {},
                n || !A.trigger || !1 !== A.trigger.apply(e, g))) {
              if (!n && !A.noBubble && !y.isWindow(e)) {
                for (C = A.delegateType || r, _.test(C + r) || (c = c.parentNode); c; c = c.parentNode) s.push(c),
                  a = c;
                a === (e.ownerDocument || G) && s.push(a.defaultView || a.parentWindow || u)
              }
              for (o = 0;
                (c = s[o++]) && !t.isPropagationStopped();) t.type = 1 < o ? C : A.bindType || r,
                (I = (y._data(c, "events") || {})[t.type] && y._data(c, "handle")) && I.apply(c, g),
                (I = i && c[i]) && I.apply && y.acceptData(c) && (t.result = I.apply(c, g), !1 === t.result && t.preventDefault());
              if (t.type = r, !n && !t.isDefaultPrevented() && (!A._default || !1 === A._default.apply(s.pop(), g)) && y.acceptData(e) && i && e[r] && !y.isWindow(e)) {
                (a = e[i]) && (e[i] = null),
                y.event.triggered = r;
                try {
                  e[r]()
                } catch (t) {}
                y.event.triggered = void 0,
                  a && (e[i] = a)
              }
              return t.result
            }
          },
          dispatch: function(t) {
            t = y.event.fix(t);
            var g, e, n, I, i, C = s.call(arguments),
              A = (y._data(this, "events") || {})[t.type] || [],
              a = y.event.special[t.type] || {};
            if ((C[0] = t).delegateTarget = this, !a.preDispatch || !1 !== a.preDispatch.call(this, t)) {
              for (i = y.event.handlers.call(this, t, A), g = 0;
                (n = i[g++]) && !t.isPropagationStopped();)
                for (t.currentTarget = n.elem, I = 0;
                  (e = n.handlers[I++]) && !t.isImmediatePropagationStopped();) t.namespace_re && !t.namespace_re.test(e.namespace) || (t.handleObj = e, t.data = e.data, void 0 !== (e = ((y.event.special[e.origType] || {}).handle || e.handler).apply(n.elem, C)) && !1 === (t.result = e) && (t.preventDefault(), t.stopPropagation()));
              return a.postDispatch && a.postDispatch.call(this, t),
                t.result
            }
          },
          handlers: function(t, g) {
            var e, n, I, i, C = [],
              A = g.delegateCount,
              a = t.target;
            if (A && a.nodeType && (!t.button || "click" !== t.type))
              for (; a != this; a = a.parentNode || this)
                if (1 === a.nodeType && (!0 !== a.disabled || "click" !== t.type)) {
                  for (I = [], i = 0; i < A; i++) void 0 === I[e = (n = g[i]).selector + " "] && (I[e] = n.needsContext ? 0 <= y(e, this).index(a) : y.find(e, this, null, [a]).length),
                    I[e] && I.push(n);
                  I.length && C.push({
                    elem: a,
                    handlers: I
                  })
                }
            return A < g.length && C.push({
                elem: this,
                handlers: g.slice(A)
              }),
              C
          },
          fix: function(t) {
            if (t[y.expando]) return t;
            var g, e, n, I = t.type,
              i = t,
              C = this.fixHooks[I];
            for (C || (this.fixHooks[I] = C = j.test(I) ? this.mouseHooks : z.test(I) ? this.keyHooks : {}), n = C.props ? this.props.concat(C.props) : this.props, t = new y.Event(i), g = n.length; g--;) t[e = n[g]] = i[e];
            return t.target || (t.target = i.srcElement || G),
              3 === t.target.nodeType && (t.target = t.target.parentNode),
              t.metaKey = !!t.metaKey,
              C.filter ? C.filter(t, i) : t
          },
          props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
          fixHooks: {},
          keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(t, g) {
              return null == t.which && (t.which = null != g.charCode ? g.charCode : g.keyCode),
                t
            }
          },
          mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(t, g) {
              var e, n, I = g.button,
                i = g.fromElement;
              return null == t.pageX && null != g.clientX && (n = (e = t.target.ownerDocument || G).documentElement, e = e.body, t.pageX = g.clientX + (n && n.scrollLeft || e && e.scrollLeft || 0) - (n && n.clientLeft || e && e.clientLeft || 0), t.pageY = g.clientY + (n && n.scrollTop || e && e.scrollTop || 0) - (n && n.clientTop || e && e.clientTop || 0)),
                !t.relatedTarget && i && (t.relatedTarget = i === t.target ? g.toElement : i),
                t.which || void 0 === I || (t.which = 1 & I ? 1 : 2 & I ? 3 : 4 & I ? 2 : 0),
                t
            }
          },
          special: {
            load: {
              noBubble: !0
            },
            focus: {
              trigger: function() {
                if (this !== tt() && this.focus) try {
                  return this.focus(),
                    !1
                } catch (t) {}
              },
              delegateType: "focusin"
            },
            blur: {
              trigger: function() {
                if (this === tt() && this.blur) return this.blur(),
                  !1
              },
              delegateType: "focusout"
            },
            click: {
              trigger: function() {
                if (y.nodeName(this, "input") && "checkbox" === this.type && this.click) return this.click(),
                  !1
              },
              _default: function(t) {
                return y.nodeName(t.target, "a")
              }
            },
            beforeunload: {
              postDispatch: function(t) {
                void 0 !== t.result && t.originalEvent && (t.originalEvent.returnValue = t.result)
              }
            }
          },
          simulate: function(t, g, e, n) {
            t = y.extend(new y.Event, e, {
              type: t,
              isSimulated: !0,
              originalEvent: {}
            });
            n ? y.event.trigger(t, null, g) : y.event.dispatch.call(g, t),
              t.isDefaultPrevented() && e.preventDefault()
          }
        },
        y.removeEvent = G.removeEventListener ?
        function(t, g, e) {
          t.removeEventListener && t.removeEventListener(g, e, !1)
        } : function(t, g, e) {
          g = "on" + g;
          t.detachEvent && (typeof t[g] == H && (t[g] = null), t.detachEvent(g, e))
        },
        y.Event = function(t, g) {
          if (!(this instanceof y.Event)) return new y.Event(t, g);
          t && t.type ? (this.originalEvent = t, this.type = t.type, this.isDefaultPrevented = t.defaultPrevented || void 0 === t.defaultPrevented && !1 === t.returnValue ? q : $) : this.type = t,
            g && y.extend(this, g),
            this.timeStamp = t && t.timeStamp || y.now(),
            this[y.expando] = !0
        },
        y.Event.prototype = {
          isDefaultPrevented: $,
          isPropagationStopped: $,
          isImmediatePropagationStopped: $,
          preventDefault: function() {
            var t = this.originalEvent;
            this.isDefaultPrevented = q,
              t && (t.preventDefault ? t.preventDefault() : t.returnValue = !1)
          },
          stopPropagation: function() {
            var t = this.originalEvent;
            this.isPropagationStopped = q,
              t && (t.stopPropagation && t.stopPropagation(), t.cancelBubble = !0)
          },
          stopImmediatePropagation: function() {
            var t = this.originalEvent;
            this.isImmediatePropagationStopped = q,
              t && t.stopImmediatePropagation && t.stopImmediatePropagation(),
              this.stopPropagation()
          }
        },
        y.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
          },
          function(t, I) {
            y.event.special[t] = {
              delegateType: I,
              bindType: I,
              handle: function(t) {
                var g, e = t.relatedTarget,
                  n = t.handleObj;
                return e && (e === this || y.contains(this, e)) || (t.type = n.origType, g = n.handler.apply(this, arguments), t.type = I),
                  g
              }
            }
          }),
        B.submitBubbles || (y.event.special.submit = {
          setup: function() {
            if (y.nodeName(this, "form")) return !1;
            y.event.add(this, "click._submit keypress._submit",
              function(t) {
                t = t.target,
                  t = y.nodeName(t, "input") || y.nodeName(t, "button") ? t.form : void 0;
                t && !y._data(t, "submitBubbles") && (y.event.add(t, "submit._submit",
                  function(t) {
                    t._submit_bubble = !0
                  }), y._data(t, "submitBubbles", !0))
              })
          },
          postDispatch: function(t) {
            t._submit_bubble && (delete t._submit_bubble, this.parentNode && !t.isTrigger && y.event.simulate("submit", this.parentNode, t, !0))
          },
          teardown: function() {
            if (y.nodeName(this, "form")) return !1;
            y.event.remove(this, "._submit")
          }
        }),
        B.changeBubbles || (y.event.special.change = {
          setup: function() {
            if (M.test(this.nodeName)) return "checkbox" !== this.type && "radio" !== this.type || (y.event.add(this, "propertychange._change",
                function(t) {
                  "checked" === t.originalEvent.propertyName && (this._just_changed = !0)
                }), y.event.add(this, "click._change",
                function(t) {
                  this._just_changed && !t.isTrigger && (this._just_changed = !1),
                    y.event.simulate("change", this, t, !0)
                })),
              !1;
            y.event.add(this, "beforeactivate._change",
              function(t) {
                t = t.target;
                M.test(t.nodeName) && !y._data(t, "changeBubbles") && (y.event.add(t, "change._change",
                  function(t) {
                    !this.parentNode || t.isSimulated || t.isTrigger || y.event.simulate("change", this.parentNode, t, !0)
                  }), y._data(t, "changeBubbles", !0))
              })
          },
          handle: function(t) {
            var g = t.target;
            if (this !== g || t.isSimulated || t.isTrigger || "radio" !== g.type && "checkbox" !== g.type) return t.handleObj.handler.apply(this, arguments)
          },
          teardown: function() {
            return y.event.remove(this, "._change"),
              !M.test(this.nodeName)
          }
        }),
        B.focusinBubbles || y.each({
            focus: "focusin",
            blur: "focusout"
          },
          function(e, n) {
            function I(t) {
              y.event.simulate(n, t.target, y.event.fix(t), !0)
            }
            y.event.special[n] = {
              setup: function() {
                var t = this.ownerDocument || this,
                  g = y._data(t, n);
                g || t.addEventListener(e, I, !0),
                  y._data(t, n, (g || 0) + 1)
              },
              teardown: function() {
                var t = this.ownerDocument || this,
                  g = y._data(t, n) - 1;
                g ? y._data(t, n, g) : (t.removeEventListener(e, I, !0), y._removeData(t, n))
              }
            }
          }),
        y.fn.extend({
          on: function(t, g, e, n, I) {
            var i, C;
            if ("object" == typeof t) {
              for (i in "string" != typeof g && (e = e || g, g = void 0), t) this.on(i, g, e, t[i], I);
              return this
            }
            if (null == e && null == n ? (n = g, e = g = void 0) : null == n && ("string" == typeof g ? (n = e, e = void 0) : (n = e, e = g, g = void 0)), !1 === n) n = $;
            else if (!n) return this;
            return 1 === I && (C = n, (n = function(t) {
                return y().off(t),
                  C.apply(this, arguments)
              }).guid = C.guid || (C.guid = y.guid++)),
              this.each(function() {
                y.event.add(this, t, n, e, g)
              })
          },
          one: function(t, g, e, n) {
            return this.on(t, g, e, n, 1)
          },
          off: function(t, g, e) {
            var n, I;
            if (t && t.preventDefault && t.handleObj) return n = t.handleObj,
              y(t.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler),
              this;
            if ("object" != typeof t) return !1 !== g && "function" != typeof g || (e = g, g = void 0),
              !1 === e && (e = $),
              this.each(function() {
                y.event.remove(this, t, e, g)
              });
            for (I in t) this.off(I, g, t[I]);
            return this
          },
          trigger: function(t, g) {
            return this.each(function() {
              y.event.trigger(t, g, this)
            })
          },
          triggerHandler: function(t, g) {
            var e = this[0];
            if (e) return y.event.trigger(t, g, e, !0)
          }
        });
      var et = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        nt = / jQuery\d+="(?:null|\d+)"/g,
        It = new RegExp("<(?:" + et + ")[\\s/>]", "i"),
        it = /^\s+/,
        Ct = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        At = /<([\w:]+)/,
        at = /<tbody/i,
        ot = /<|&#?\w+;/,
        st = /<(?:script|style|link)/i,
        rt = /checked\s*(?:[^=]|=\s*.checked.)/i,
        lt = /^$|\/(?:java|ecma)script/i,
        ct = /^true\/(.*)/,
        ut = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        dt = {
          option: [1, "<select multiple='multiple'>", "</select>"],
          legend: [1, "<fieldset>", "</fieldset>"],
          area: [1, "<map>", "</map>"],
          param: [1, "<object>", "</object>"],
          thead: [1, "<table>", "</table>"],
          tr: [2, "<table><tbody>", "</tbody></table>"],
          col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
          td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
          _default: B.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
        },
        ht = gt(G).appendChild(G.createElement("div"));

      function Bt(t, g) {
        var e, n, I = 0,
          i = typeof t.getElementsByTagName != H ? t.getElementsByTagName(g || "*") : typeof t.querySelectorAll != H ? t.querySelectorAll(g || "*") : void 0;
        if (!i)
          for (i = [], e = t.childNodes || t; null != (n = e[I]); I++) !g || y.nodeName(n, g) ? i.push(n) : y.merge(i, Bt(n, g));
        return void 0 === g || g && y.nodeName(t, g) ? y.merge([t], i) : i
      }

      function bt(t) {
        K.test(t.type) && (t.defaultChecked = t.checked)
      }

      function pt(t, g) {
        return y.nodeName(t, "table") && y.nodeName(11 !== g.nodeType ? g : g.firstChild, "tr") ? t.getElementsByTagName("tbody")[0] || t.appendChild(t.ownerDocument.createElement("tbody")) : t
      }

      function mt(t) {
        return t.type = (null !== y.find.attr(t, "type")) + "/" + t.type,
          t
      }

      function yt(t) {
        var g = ct.exec(t.type);
        return g ? t.type = g[1] : t.removeAttribute("type"),
          t
      }

      function Qt(t, g) {
        for (var e, n = 0; null != (e = t[n]); n++) y._data(e, "globalEval", !g || y._data(g[n], "globalEval"))
      }

      function Gt(t, g) {
        if (1 === g.nodeType && y.hasData(t)) {
          var e, n, I, i = y._data(t),
            t = y._data(g, i),
            C = i.events;
          if (C)
            for (e in delete t.handle, t.events = {},
              C)
              for (n = 0, I = C[e].length; n < I; n++) y.event.add(g, e, C[e][n]);
          t.data && (t.data = y.extend({},
            t.data))
        }
      }
      dt.optgroup = dt.option,
        dt.tbody = dt.tfoot = dt.colgroup = dt.caption = dt.thead,
        dt.th = dt.td,
        y.extend({
          clone: function(t, g, e) {
            var n, I, i, C, A, a = y.contains(t.ownerDocument, t);
            if (B.html5Clone || y.isXMLDoc(t) || !It.test("<" + t.nodeName + ">") ? i = t.cloneNode(!0) : (ht.innerHTML = t.outerHTML, ht.removeChild(i = ht.firstChild)), !(B.noCloneEvent && B.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || y.isXMLDoc(t)))
              for (n = Bt(i), A = Bt(t), C = 0; null != (I = A[C]); ++C) n[C] &&
                function(t, g) {
                  var e, n, I;
                  if (1 === g.nodeType) {
                    if (e = g.nodeName.toLowerCase(), !B.noCloneEvent && g[y.expando]) {
                      for (n in (I = y._data(g)).events) y.removeEvent(g, n, I.handle);
                      g.removeAttribute(y.expando)
                    }
                    "script" === e && g.text !== t.text ? (mt(g).text = t.text, yt(g)) : "object" === e ? (g.parentNode && (g.outerHTML = t.outerHTML), B.html5Clone && t.innerHTML && !y.trim(g.innerHTML) && (g.innerHTML = t.innerHTML)) : "input" === e && K.test(t.type) ? (g.defaultChecked = g.checked = t.checked, g.value !== t.value && (g.value = t.value)) : "option" === e ? g.defaultSelected = g.selected = t.defaultSelected : "input" !== e && "textarea" !== e || (g.defaultValue = t.defaultValue)
                  }
                }(I, n[C]);
            if (g)
              if (e)
                for (A = A || Bt(t), n = n || Bt(i), C = 0; null != (I = A[C]); C++) Gt(I, n[C]);
              else Gt(t, i);
            return 0 < (n = Bt(i, "script")).length && Qt(n, !a && Bt(t, "script")),
              n = A = I = null,
              i
          },
          buildFragment: function(t, g, e, n) {
            for (var I, i, C, A, a, o, s, r = t.length,
                l = gt(g), c = [], u = 0; u < r; u++)
              if ((i = t[u]) || 0 === i)
                if ("object" === y.type(i)) y.merge(c, i.nodeType ? [i] : i);
                else if (ot.test(i)) {
              for (A = A || l.appendChild(g.createElement("div")), a = (At.exec(i) || ["", ""])[1].toLowerCase(), s = dt[a] || dt._default, A.innerHTML = s[1] + i.replace(Ct, "<$1></$2>") + s[2], I = s[0]; I--;) A = A.lastChild;
              if (!B.leadingWhitespace && it.test(i) && c.push(g.createTextNode(it.exec(i)[0])), !B.tbody)
                for (I = (i = "table" !== a || at.test(i) ? "<table>" !== s[1] || at.test(i) ? 0 : A : A.firstChild) && i.childNodes.length; I--;) y.nodeName(o = i.childNodes[I], "tbody") && !o.childNodes.length && i.removeChild(o);
              for (y.merge(c, A.childNodes), A.textContent = ""; A.firstChild;) A.removeChild(A.firstChild);
              A = l.lastChild
            } else c.push(g.createTextNode(i));
            for (A && l.removeChild(A), B.appendChecked || y.grep(Bt(c, "input"), bt), u = 0; i = c[u++];)
              if ((!n || -1 === y.inArray(i, n)) && (C = y.contains(i.ownerDocument, i), A = Bt(l.appendChild(i), "script"), C && Qt(A), e))
                for (I = 0; i = A[I++];) lt.test(i.type || "") && e.push(i);
            return A = null,
              l
          },
          cleanData: function(t, g) {
            for (var e, n, I, i, C = 0,
                A = y.expando,
                a = y.cache,
                o = B.deleteExpando,
                s = y.event.special; null != (e = t[C]); C++)
              if ((g || y.acceptData(e)) && (i = (I = e[A]) && a[I])) {
                if (i.events)
                  for (n in i.events) s[n] ? y.event.remove(e, n) : y.removeEvent(e, n, i.handle);
                a[I] && (delete a[I], o ? delete e[A] : typeof e.removeAttribute != H ? e.removeAttribute(A) : e[A] = null, r.push(I))
              }
          }
        }),
        y.fn.extend({
          text: function(t) {
            return J(this,
              function(t) {
                return void 0 === t ? y.text(this) : this.empty().append((this[0] && this[0].ownerDocument || G).createTextNode(t))
              },
              null, t, arguments.length)
          },
          append: function() {
            return this.domManip(arguments,
              function(t) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || pt(this, t).appendChild(t)
              })
          },
          prepend: function() {
            return this.domManip(arguments,
              function(t) {
                var g;
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (g = pt(this, t)).insertBefore(t, g.firstChild)
              })
          },
          before: function() {
            return this.domManip(arguments,
              function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this)
              })
          },
          after: function() {
            return this.domManip(arguments,
              function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this.nextSibling)
              })
          },
          remove: function(t, g) {
            for (var e, n = t ? y.filter(t, this) : this, I = 0; null != (e = n[I]); I++) g || 1 !== e.nodeType || y.cleanData(Bt(e)),
              e.parentNode && (g && y.contains(e.ownerDocument, e) && Qt(Bt(e, "script")), e.parentNode.removeChild(e));
            return this
          },
          empty: function() {
            for (var t, g = 0; null != (t = this[g]); g++) {
              for (1 === t.nodeType && y.cleanData(Bt(t, !1)); t.firstChild;) t.removeChild(t.firstChild);
              t.options && y.nodeName(t, "select") && (t.options.length = 0)
            }
            return this
          },
          clone: function(t, g) {
            return t = null != t && t,
              g = null == g ? t : g,
              this.map(function() {
                return y.clone(this, t, g)
              })
          },
          html: function(t) {
            return J(this,
              function(t) {
                var g = this[0] || {},
                  e = 0,
                  n = this.length;
                if (void 0 === t) return 1 === g.nodeType ? g.innerHTML.replace(nt, "") : void 0;
                if ("string" == typeof t && !st.test(t) && (B.htmlSerialize || !It.test(t)) && (B.leadingWhitespace || !it.test(t)) && !dt[(At.exec(t) || ["", ""])[1].toLowerCase()]) {
                  t = t.replace(Ct, "<$1></$2>");
                  try {
                    for (; e < n; e++) 1 === (g = this[e] || {}).nodeType && (y.cleanData(Bt(g, !1)), g.innerHTML = t);
                    g = 0
                  } catch (t) {}
                }
                g && this.empty().append(t)
              },
              null, t, arguments.length)
          },
          replaceWith: function() {
            var g = arguments[0];
            return this.domManip(arguments,
                function(t) {
                  g = this.parentNode,
                    y.cleanData(Bt(this)),
                    g && g.replaceChild(t, this)
                }),
              g && (g.length || g.nodeType) ? this : this.remove()
          },
          detach: function(t) {
            return this.remove(t, !0)
          },
          domManip: function(e, n) {
            e = d.apply([], e);
            var t, g, I, i, C, A, a = 0,
              o = this.length,
              s = this,
              r = o - 1,
              l = e[0],
              c = y.isFunction(l);
            if (c || 1 < o && "string" == typeof l && !B.checkClone && rt.test(l)) return this.each(function(t) {
              var g = s.eq(t);
              c && (e[0] = l.call(this, t, g.html())),
                g.domManip(e, n)
            });
            if (o && (t = (A = y.buildFragment(e, this[0].ownerDocument, !1, this)).firstChild, 1 === A.childNodes.length && (A = t), t)) {
              for (I = (i = y.map(Bt(A, "script"), mt)).length; a < o; a++) g = A,
                a !== r && (g = y.clone(g, !0, !0), I && y.merge(i, Bt(g, "script"))),
                n.call(this[a], g, a);
              if (I)
                for (C = i[i.length - 1].ownerDocument, y.map(i, yt), a = 0; a < I; a++) g = i[a],
                  lt.test(g.type || "") && !y._data(g, "globalEval") && y.contains(C, g) && (g.src ? y._evalUrl && y._evalUrl(g.src) : y.globalEval((g.text || g.textContent || g.innerHTML || "").replace(ut, "")));
              A = t = null
            }
            return this
          }
        }),
        y.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
          },
          function(t, C) {
            y.fn[t] = function(t) {
              for (var g, e = 0,
                  n = [], I = y(t), i = I.length - 1; e <= i; e++) g = e === i ? this : this.clone(!0),
                y(I[e])[C](g),
                A.apply(n, g.get());
              return this.pushStack(n)
            }
          });
      var Ft, ft, Xt = {};

      function xt(t, g) {
        var g = y(g.createElement(t)).appendTo(g.body),
          e = u.getDefaultComputedStyle && (e = u.getDefaultComputedStyle(g[0])) ? e.display : y.css(g[0], "display");
        return g.detach(),
          e
      }

      function Zt(t) {
        var g = G,
          e = Xt[t];
        return e || ("none" !== (e = xt(t, g)) && e || ((g = ((Ft = (Ft || y("<iframe frameborder='0' width='0' height='0'/>")).appendTo(g.documentElement))[0].contentWindow || Ft[0].contentDocument).document).write(), g.close(), e = xt(t, g), Ft.detach()), Xt[t] = e),
          e
      }
      B.shrinkWrapBlocks = function() {
        return null != ft ? ft : (ft = !1, (g = G.getElementsByTagName("body")[0]) && g.style ? (t = G.createElement("div"), (e = G.createElement("div")).style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", g.appendChild(e).appendChild(t), typeof t.style.zoom != H && (t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1", t.appendChild(G.createElement("div")).style.width = "5px", ft = 3 !== t.offsetWidth), g.removeChild(e), ft) : void 0);
        var t, g, e
      };
      var Ut, vt, St, Wt, wt, Nt, Ht = /^margin/,
        Dt = new RegExp("^(" + O + ")(?!px)[a-z%]+$", "i"),
        Vt = /^(top|right|bottom|left)$/;

      function Yt(g, e) {
        return {
          get: function() {
            var t = g();
            if (null != t) {
              if (!t) return (this.get = e).apply(this, arguments);
              delete this.get
            }
          }
        }
      }

      function Rt() {
        var t, g, e, n = G.getElementsByTagName("body")[0];
        n && n.style && (t = G.createElement("div"), (g = G.createElement("div")).style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", n.appendChild(g).appendChild(t), t.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", St = Wt = !1, Nt = !0, u.getComputedStyle && (St = "1%" !== (u.getComputedStyle(t, null) || {}).top, Wt = "4px" === (u.getComputedStyle(t, null) || {
          width: "4px"
        }).width, (e = t.appendChild(G.createElement("div"))).style.cssText = t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", e.style.marginRight = e.style.width = "0", t.style.width = "1px", Nt = !parseFloat((u.getComputedStyle(e, null) || {}).marginRight)), t.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", (e = t.getElementsByTagName("td"))[0].style.cssText = "margin:0;border:0;padding:0;display:none", (wt = 0 === e[0].offsetHeight) && (e[0].style.display = "", e[1].style.display = "none", wt = 0 === e[0].offsetHeight), n.removeChild(g))
      }
      u.getComputedStyle ? (Ut = function(t) {
            return t.ownerDocument.defaultView.getComputedStyle(t, null)
          },
          vt = function(t, g, e) {
            var n, I = t.style,
              i = (e = e || Ut(t)) ? e.getPropertyValue(g) || e[g] : void 0;
            return e && ("" !== i || y.contains(t.ownerDocument, t) || (i = y.style(t, g)), Dt.test(i) && Ht.test(g) && (n = I.width, t = I.minWidth, g = I.maxWidth, I.minWidth = I.maxWidth = I.width = i, i = e.width, I.width = n, I.minWidth = t, I.maxWidth = g)),
              void 0 === i ? i : i + ""
          }) : G.documentElement.currentStyle && (Ut = function(t) {
            return t.currentStyle
          },
          vt = function(t, g, e) {
            var n, I, i, C = t.style;
            return null == (i = (e = e || Ut(t)) ? e[g] : void 0) && C && C[g] && (i = C[g]),
              Dt.test(i) && !Vt.test(g) && (n = C.left, (e = (I = t.runtimeStyle) && I.left) && (I.left = t.currentStyle.left), C.left = "fontSize" === g ? "1em" : i, i = C.pixelLeft + "px", C.left = n, e && (I.left = e)),
              void 0 === i ? i : i + "" || "auto"
          }),
        (eg = G.createElement("div")).innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        (ng = (ng = eg.getElementsByTagName("a")[0]) && ng.style) && (ng.cssText = "float:left;opacity:.5", B.opacity = "0.5" === ng.opacity, B.cssFloat = !!ng.cssFloat, eg.style.backgroundClip = "content-box", eg.cloneNode(!0).style.backgroundClip = "", B.clearCloneStyle = "content-box" === eg.style.backgroundClip, B.boxSizing = "" === ng.boxSizing || "" === ng.MozBoxSizing || "" === ng.WebkitBoxSizing, y.extend(B, {
          reliableHiddenOffsets: function() {
            return null == wt && Rt(),
              wt
          },
          boxSizingReliable: function() {
            return null == Wt && Rt(),
              Wt
          },
          pixelPosition: function() {
            return null == St && Rt(),
              St
          },
          reliableMarginRight: function() {
            return null == Nt && Rt(),
              Nt
          }
        })),
        y.swap = function(t, g, e, n) {
          var I, i = {};
          for (I in g) i[I] = t.style[I],
            t.style[I] = g[I];
          for (I in n = e.apply(t, n || []), g) t.style[I] = i[I];
          return n
        };
      var Tt = /alpha\([^)]*\)/i,
        kt = /opacity\s*=\s*([^)]*)/,
        Et = /^(none|table(?!-c[ea]).+)/,
        Ot = new RegExp("^(" + O + ")(.*)$", "i"),
        Lt = new RegExp("^([+-])=(" + O + ")", "i"),
        Jt = {
          position: "absolute",
          visibility: "hidden",
          display: "block"
        },
        Kt = {
          letterSpacing: "0",
          fontWeight: "400"
        },
        Mt = ["Webkit", "O", "Moz", "ms"];

      function zt(t, g) {
        if (g in t) return g;
        for (var e = g.charAt(0).toUpperCase() + g.slice(1), n = g, I = Mt.length; I--;)
          if ((g = Mt[I] + e) in t) return g;
        return n
      }

      function jt(t, g) {
        for (var e, n, I, i = [], C = 0, A = t.length; C < A; C++)(n = t[C]).style && (i[C] = y._data(n, "olddisplay"), e = n.style.display, g ? (i[C] || "none" !== e || (n.style.display = ""), "" === n.style.display && E(n) && (i[C] = y._data(n, "olddisplay", Zt(n.nodeName)))) : (I = E(n), (e && "none" !== e || !I) && y._data(n, "olddisplay", I ? e : y.css(n, "display"))));
        for (C = 0; C < A; C++)(n = t[C]).style && (g && "none" !== n.style.display && "" !== n.style.display || (n.style.display = g ? i[C] || "" : "none"));
        return t
      }

      function _t(t, g, e) {
        var n = Ot.exec(g);
        return n ? Math.max(0, n[1] - (e || 0)) + (n[2] || "px") : g
      }

      function Pt(t, g, e, n, I) {
        for (var i = e === (n ? "border" : "content") ? 4 : "width" === g ? 1 : 0, C = 0; i < 4; i += 2) "margin" === e && (C += y.css(t, e + L[i], !0, I)),
          n ? ("content" === e && (C -= y.css(t, "padding" + L[i], !0, I)), "margin" !== e && (C -= y.css(t, "border" + L[i] + "Width", !0, I))) : (C += y.css(t, "padding" + L[i], !0, I), "padding" !== e && (C += y.css(t, "border" + L[i] + "Width", !0, I)));
        return C
      }

      function qt(t, g, e) {
        var n = !0,
          I = "width" === g ? t.offsetWidth : t.offsetHeight,
          i = Ut(t),
          C = B.boxSizing && "border-box" === y.css(t, "boxSizing", !1, i);
        if (I <= 0 || null == I) {
          if (((I = vt(t, g, i)) < 0 || null == I) && (I = t.style[g]), Dt.test(I)) return I;
          n = C && (B.boxSizingReliable() || I === t.style[g]),
            I = parseFloat(I) || 0
        }
        return I + Pt(t, g, e || (C ? "border" : "content"), n, i) + "px"
      }

      function $t(t, g, e, n, I) {
        return new $t.prototype.init(t, g, e, n, I)
      }
      y.extend({
          cssHooks: {
            opacity: {
              get: function(t, g) {
                if (g) {
                  t = vt(t, "opacity");
                  return "" === t ? "1" : t
                }
              }
            }
          },
          cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
          },
          cssProps: {
            float: B.cssFloat ? "cssFloat" : "styleFloat"
          },
          style: function(t, g, e, n) {
            if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
              var I, i, C, A = y.camelCase(g),
                a = t.style;
              if (g = y.cssProps[A] || (y.cssProps[A] = zt(a, A)), C = y.cssHooks[g] || y.cssHooks[A], void 0 === e) return C && "get" in C && void 0 !== (I = C.get(t, !1, n)) ? I : a[g];
              if ("string" === (i = typeof e) && (I = Lt.exec(e)) && (e = (I[1] + 1) * I[2] + parseFloat(y.css(t, g)), i = "number"), null != e && e == e && ("number" !== i || y.cssNumber[A] || (e += "px"), B.clearCloneStyle || "" !== e || 0 !== g.indexOf("background") || (a[g] = "inherit"), !(C && "set" in C && void 0 === (e = C.set(t, e, n))))) try {
                a[g] = e
              } catch (t) {}
            }
          },
          css: function(t, g, e, n) {
            var I, i = y.camelCase(g);
            return g = y.cssProps[i] || (y.cssProps[i] = zt(t.style, i)),
              "normal" === (I = void 0 === (I = (i = y.cssHooks[g] || y.cssHooks[i]) && "get" in i ? i.get(t, !0, e) : I) ? vt(t, g, n) : I) && g in Kt && (I = Kt[g]),
              "" === e || e ? (g = parseFloat(I), !0 === e || y.isNumeric(g) ? g || 0 : I) : I
          }
        }),
        y.each(["height", "width"],
          function(t, I) {
            y.cssHooks[I] = {
              get: function(t, g, e) {
                if (g) return Et.test(y.css(t, "display")) && 0 === t.offsetWidth ? y.swap(t, Jt,
                  function() {
                    return qt(t, I, e)
                  }) : qt(t, I, e)
              },
              set: function(t, g, e) {
                var n = e && Ut(t);
                return _t(0, g, e ? Pt(t, I, e, B.boxSizing && "border-box" === y.css(t, "boxSizing", !1, n), n) : 0)
              }
            }
          }),
        B.opacity || (y.cssHooks.opacity = {
          get: function(t, g) {
            return kt.test((g && t.currentStyle ? t.currentStyle : t.style).filter || "") ? .01 * parseFloat(RegExp.$1) + "" : g ? "1" : ""
          },
          set: function(t, g) {
            var e = t.style,
              n = t.currentStyle,
              I = y.isNumeric(g) ? "alpha(opacity=" + 100 * g + ")" : "",
              t = n && n.filter || e.filter || "";
            ((e.zoom = 1) <= g || "" === g) && "" === y.trim(t.replace(Tt, "")) && e.removeAttribute && (e.removeAttribute("filter"), "" === g || n && !n.filter) || (e.filter = Tt.test(t) ? t.replace(Tt, I) : t + " " + I)
          }
        }),
        y.cssHooks.marginRight = Yt(B.reliableMarginRight,
          function(t, g) {
            if (g) return y.swap(t, {
                display: "inline-block"
              },
              vt, [t, "marginRight"])
          }),
        y.each({
            margin: "",
            padding: "",
            border: "Width"
          },
          function(I, i) {
            y.cssHooks[I + i] = {
                expand: function(t) {
                  for (var g = 0,
                      e = {},
                      n = "string" == typeof t ? t.split(" ") : [t]; g < 4; g++) e[I + L[g] + i] = n[g] || n[g - 2] || n[0];
                  return e
                }
              },
              Ht.test(I) || (y.cssHooks[I + i].set = _t)
          }),
        y.fn.extend({
          css: function(t, g) {
            return J(this,
              function(t, g, e) {
                var n, I, i = {},
                  C = 0;
                if (y.isArray(g)) {
                  for (n = Ut(t), I = g.length; C < I; C++) i[g[C]] = y.css(t, g[C], !1, n);
                  return i
                }
                return void 0 !== e ? y.style(t, g, e) : y.css(t, g)
              },
              t, g, 1 < arguments.length)
          },
          show: function() {
            return jt(this, !0)
          },
          hide: function() {
            return jt(this)
          },
          toggle: function(t) {
            return "boolean" == typeof t ? t ? this.show() : this.hide() : this.each(function() {
              E(this) ? y(this).show() : y(this).hide()
            })
          }
        }),
        ((y.Tween = $t).prototype = {
          constructor: $t,
          init: function(t, g, e, n, I, i) {
            this.elem = t,
              this.prop = e,
              this.easing = I || "swing",
              this.options = g,
              this.start = this.now = this.cur(),
              this.end = n,
              this.unit = i || (y.cssNumber[e] ? "" : "px")
          },
          cur: function() {
            var t = $t.propHooks[this.prop];
            return (t && t.get ? t : $t.propHooks._default).get(this)
          },
          run: function(t) {
            var g, e = $t.propHooks[this.prop];
            return this.options.duration ? this.pos = g = y.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : this.pos = g = t,
              this.now = (this.end - this.start) * g + this.start,
              this.options.step && this.options.step.call(this.elem, this.now, this),
              (e && e.set ? e : $t.propHooks._default).set(this),
              this
          }
        }).init.prototype = $t.prototype,
        ($t.propHooks = {
          _default: {
            get: function(t) {
              var g;
              return null == t.elem[t.prop] || t.elem.style && null != t.elem.style[t.prop] ? (g = y.css(t.elem, t.prop, "")) && "auto" !== g ? g : 0 : t.elem[t.prop]
            },
            set: function(t) {
              y.fx.step[t.prop] ? y.fx.step[t.prop](t) : t.elem.style && (null != t.elem.style[y.cssProps[t.prop]] || y.cssHooks[t.prop]) ? y.style(t.elem, t.prop, t.now + t.unit) : t.elem[t.prop] = t.now
            }
          }
        }).scrollTop = $t.propHooks.scrollLeft = {
          set: function(t) {
            t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now)
          }
        },
        y.easing = {
          linear: function(t) {
            return t
          },
          swing: function(t) {
            return .5 - Math.cos(t * Math.PI) / 2
          }
        },
        y.fx = $t.prototype.init,
        y.fx.step = {};
      var tg, gg, eg, ng, Ig = /^(?:toggle|show|hide)$/,
        ig = new RegExp("^(?:([+-])=|)(" + O + ")([a-z%]*)$", "i"),
        Cg = /queueHooks$/,
        Ag = [function(g, t, e) {
          var n, I, i, C, A, a, o, s = this,
            r = {},
            l = g.style,
            c = g.nodeType && E(g),
            u = y._data(g, "fxshow");
          e.queue || (null == (A = y._queueHooks(g, "fx")).unqueued && (A.unqueued = 0, a = A.empty.fire, A.empty.fire = function() {
            A.unqueued || a()
          }), A.unqueued++, s.always(function() {
            s.always(function() {
              A.unqueued--,
                y.queue(g, "fx").length || A.empty.fire()
            })
          }));
          1 === g.nodeType && ("height" in t || "width" in t) && (e.overflow = [l.overflow, l.overflowX, l.overflowY], o = y.css(g, "display"), "inline" === ("none" === o ? y._data(g, "olddisplay") || Zt(g.nodeName) : o) && "none" === y.css(g, "float") && (B.inlineBlockNeedsLayout && "inline" !== Zt(g.nodeName) ? l.zoom = 1 : l.display = "inline-block"));
          e.overflow && (l.overflow = "hidden", B.shrinkWrapBlocks() || s.always(function() {
            l.overflow = e.overflow[0],
              l.overflowX = e.overflow[1],
              l.overflowY = e.overflow[2]
          }));
          for (n in t)
            if (I = t[n], Ig.exec(I)) {
              if (delete t[n], i = i || "toggle" === I, I === (c ? "hide" : "show")) {
                if ("show" !== I || !u || void 0 === u[n]) continue;
                c = !0
              }
              r[n] = u && u[n] || y.style(g, n)
            } else o = void 0;
          if (y.isEmptyObject(r)) "inline" === ("none" === o ? Zt(g.nodeName) : o) && (l.display = o);
          else
            for (n in u ? "hidden" in u && (c = u.hidden) : u = y._data(g, "fxshow", {}), i && (u.hidden = !c), c ? y(g).show() : s.done(function() {
                y(g).hide()
              }), s.done(function() {
                for (var t in y._removeData(g, "fxshow"), r) y.style(g, t, r[t])
              }), r) C = rg(c ? u[n] : 0, n, s),
              n in u || (u[n] = C.start, c && (C.end = C.start, C.start = "width" === n || "height" === n ? 1 : 0))
        }],
        ag = {
          "*": [function(t, g) {
            var e = this.createTween(t, g),
              n = e.cur(),
              g = ig.exec(g),
              I = g && g[3] || (y.cssNumber[t] ? "" : "px"),
              i = (y.cssNumber[t] || "px" !== I && +n) && ig.exec(y.css(e.elem, t)),
              C = 1,
              A = 20;
            if (i && i[3] !== I)
              for (I = I || i[3], g = g || [], i = +n || 1; i /= C = C || ".5", y.style(e.elem, t, i + I), C !== (C = e.cur() / n) && 1 !== C && --A;);
            return g && (i = e.start = +i || +n || 0, e.unit = I, e.end = g[1] ? i + (g[1] + 1) * g[2] : +g[2]),
              e
          }]
        };

      function og() {
        return setTimeout(function() {
            tg = void 0
          }),
          tg = y.now()
      }

      function sg(t, g) {
        var e, n = {
            height: t
          },
          I = 0;
        for (g = g ? 1 : 0; I < 4; I += 2 - g) n["margin" + (e = L[I])] = n["padding" + e] = t;
        return g && (n.opacity = n.width = t),
          n
      }

      function rg(t, g, e) {
        for (var n, I = (ag[g] || []).concat(ag["*"]), i = 0, C = I.length; i < C; i++)
          if (n = I[i].call(e, g, t)) return n
      }

      function lg(I, t, g) {
        var e, i, n = 0,
          C = Ag.length,
          A = y.Deferred().always(function() {
            delete a.elem
          }),
          a = function() {
            if (i) return !1;
            for (var t = tg || og(), t = Math.max(0, o.startTime + o.duration - t), g = 1 - (t / o.duration || 0), e = 0, n = o.tweens.length; e < n; e++) o.tweens[e].run(g);
            return A.notifyWith(I, [o, g, t]),
              g < 1 && n ? t : (A.resolveWith(I, [o]), !1)
          },
          o = A.promise({
            elem: I,
            props: y.extend({},
              t),
            opts: y.extend(!0, {
                specialEasing: {}
              },
              g),
            originalProperties: t,
            originalOptions: g,
            startTime: tg || og(),
            duration: g.duration,
            tweens: [],
            createTween: function(t, g) {
              t = y.Tween(I, o.opts, t, g, o.opts.specialEasing[t] || o.opts.easing);
              return o.tweens.push(t),
                t
            },
            stop: function(t) {
              var g = 0,
                e = t ? o.tweens.length : 0;
              if (i) return this;
              for (i = !0; g < e; g++) o.tweens[g].run(1);
              return t ? A.resolveWith(I, [o, t]) : A.rejectWith(I, [o, t]),
                this
            }
          }),
          s = o.props;
        for (!
          function(t, g) {
            var e, n, I, i, C;
            for (e in t)
              if (I = g[n = y.camelCase(e)], i = t[e], y.isArray(i) && (I = i[1], i = t[e] = i[0]), e !== n && (t[n] = i, delete t[e]), (C = y.cssHooks[n]) && "expand" in C)
                for (e in i = C.expand(i), delete t[n], i) e in t || (t[e] = i[e], g[e] = I);
              else g[n] = I
          }(s, o.opts.specialEasing); n < C; n++)
          if (e = Ag[n].call(o, I, s, o.opts)) return e;
        return y.map(s, rg, o),
          y.isFunction(o.opts.start) && o.opts.start.call(I, o),
          y.fx.timer(y.extend(a, {
            elem: I,
            anim: o,
            queue: o.opts.queue
          })),
          o.progress(o.opts.progress).done(o.opts.done, o.opts.complete).fail(o.opts.fail).always(o.opts.always)
      }
      y.Animation = y.extend(lg, {
          tweener: function(t, g) {
            for (var e, n = 0,
                I = (t = y.isFunction(t) ? (g = t, ["*"]) : t.split(" ")).length; n < I; n++) e = t[n],
              ag[e] = ag[e] || [],
              ag[e].unshift(g)
          },
          prefilter: function(t, g) {
            g ? Ag.unshift(t) : Ag.push(t)
          }
        }),
        y.speed = function(t, g, e) {
          var n = t && "object" == typeof t ? y.extend({},
            t) : {
            complete: e || !e && g || y.isFunction(t) && t,
            duration: t,
            easing: e && g || g && !y.isFunction(g) && g
          };
          return n.duration = y.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in y.fx.speeds ? y.fx.speeds[n.duration] : y.fx.speeds._default,
            null != n.queue && !0 !== n.queue || (n.queue = "fx"),
            n.old = n.complete,
            n.complete = function() {
              y.isFunction(n.old) && n.old.call(this),
                n.queue && y.dequeue(this, n.queue)
            },
            n
        },
        y.fn.extend({
          fadeTo: function(t, g, e, n) {
            return this.filter(E).css("opacity", 0).show().end().animate({
                opacity: g
              },
              t, e, n)
          },
          animate: function(g, t, e, n) {
            var I = y.isEmptyObject(g),
              i = y.speed(t, e, n),
              n = function() {
                var t = lg(this, y.extend({},
                  g), i);
                (I || y._data(this, "finish")) && t.stop(!0)
              };
            return n.finish = n,
              I || !1 === i.queue ? this.each(n) : this.queue(i.queue, n)
          },
          stop: function(I, t, i) {
            function C(t) {
              var g = t.stop;
              delete t.stop,
                g(i)
            }
            return "string" != typeof I && (i = t, t = I, I = void 0),
              t && !1 !== I && this.queue(I || "fx", []),
              this.each(function() {
                var t = !0,
                  g = null != I && I + "queueHooks",
                  e = y.timers,
                  n = y._data(this);
                if (g) n[g] && n[g].stop && C(n[g]);
                else
                  for (g in n) n[g] && n[g].stop && Cg.test(g) && C(n[g]);
                for (g = e.length; g--;) e[g].elem !== this || null != I && e[g].queue !== I || (e[g].anim.stop(i), t = !1, e.splice(g, 1));
                !t && i || y.dequeue(this, I)
              })
          },
          finish: function(C) {
            return !1 !== C && (C = C || "fx"),
              this.each(function() {
                var t, g = y._data(this),
                  e = g[C + "queue"],
                  n = g[C + "queueHooks"],
                  I = y.timers,
                  i = e ? e.length : 0;
                for (g.finish = !0, y.queue(this, C, []), n && n.stop && n.stop.call(this, !0), t = I.length; t--;) I[t].elem === this && I[t].queue === C && (I[t].anim.stop(!0), I.splice(t, 1));
                for (t = 0; t < i; t++) e[t] && e[t].finish && e[t].finish.call(this);
                delete g.finish
              })
          }
        }),
        y.each(["toggle", "show", "hide"],
          function(t, n) {
            var I = y.fn[n];
            y.fn[n] = function(t, g, e) {
              return null == t || "boolean" == typeof t ? I.apply(this, arguments) : this.animate(sg(n, !0), t, g, e)
            }
          }),
        y.each({
            slideDown: sg("show"),
            slideUp: sg("hide"),
            slideToggle: sg("toggle"),
            fadeIn: {
              opacity: "show"
            },
            fadeOut: {
              opacity: "hide"
            },
            fadeToggle: {
              opacity: "toggle"
            }
          },
          function(t, n) {
            y.fn[t] = function(t, g, e) {
              return this.animate(n, t, g, e)
            }
          }),
        y.timers = [],
        y.fx.tick = function() {
          var t, g = y.timers,
            e = 0;
          for (tg = y.now(); e < g.length; e++)(t = g[e])() || g[e] !== t || g.splice(e--, 1);
          g.length || y.fx.stop(),
            tg = void 0
        },
        y.fx.timer = function(t) {
          y.timers.push(t),
            t() ? y.fx.start() : y.timers.pop()
        },
        y.fx.interval = 13,
        y.fx.start = function() {
          gg = gg || setInterval(y.fx.tick, y.fx.interval)
        },
        y.fx.stop = function() {
          clearInterval(gg),
            gg = null
        },
        y.fx.speeds = {
          slow: 600,
          fast: 200,
          _default: 400
        },
        y.fn.delay = function(n, t) {
          return n = y.fx && y.fx.speeds[n] || n,
            this.queue(t = t || "fx",
              function(t, g) {
                var e = setTimeout(t, n);
                g.stop = function() {
                  clearTimeout(e)
                }
              })
        },
        (i = G.createElement("div")).setAttribute("className", "t"),
        i.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        c = i.getElementsByTagName("a")[0],
        ng = (eg = G.createElement("select")).appendChild(G.createElement("option")),
        O = i.getElementsByTagName("input")[0],
        c.style.cssText = "top:1px",
        B.getSetAttribute = "t" !== i.className,
        B.style = /top/.test(c.getAttribute("style")),
        B.hrefNormalized = "/a" === c.getAttribute("href"),
        B.checkOn = !!O.value,
        B.optSelected = ng.selected,
        B.enctype = !!G.createElement("form").enctype,
        eg.disabled = !0,
        B.optDisabled = !ng.disabled,
        (O = G.createElement("input")).setAttribute("value", ""),
        B.input = "" === O.getAttribute("value"),
        O.value = "t",
        O.setAttribute("type", "radio"),
        B.radioValue = "t" === O.value;
      var cg = /\r/g;
      y.fn.extend({
          val: function(g) {
            var e, t, n, I = this[0];
            return arguments.length ? (n = y.isFunction(g), this.each(function(t) {
              1 === this.nodeType && (null == (t = n ? g.call(this, t, y(this).val()) : g) ? t = "" : "number" == typeof t ? t += "" : y.isArray(t) && (t = y.map(t,
                function(t) {
                  return null == t ? "" : t + ""
                })), (e = y.valHooks[this.type] || y.valHooks[this.nodeName.toLowerCase()]) && "set" in e && void 0 !== e.set(this, t, "value") || (this.value = t))
            })) : I ? (e = y.valHooks[I.type] || y.valHooks[I.nodeName.toLowerCase()]) && "get" in e && void 0 !== (t = e.get(I, "value")) ? t : "string" == typeof(t = I.value) ? t.replace(cg, "") : null == t ? "" : t : void 0
          }
        }),
        y.extend({
          valHooks: {
            option: {
              get: function(t) {
                var g = y.find.attr(t, "value");
                return null != g ? g : y.trim(y.text(t))
              }
            },
            select: {
              get: function(t) {
                for (var g, e = t.options,
                    n = t.selectedIndex,
                    I = "select-one" === t.type || n < 0,
                    i = I ? null : [], C = I ? n + 1 : e.length, A = n < 0 ? C : I ? n : 0; A < C; A++)
                  if (((g = e[A]).selected || A === n) && (B.optDisabled ? !g.disabled : null === g.getAttribute("disabled")) && (!g.parentNode.disabled || !y.nodeName(g.parentNode, "optgroup"))) {
                    if (g = y(g).val(), I) return g;
                    i.push(g)
                  }
                return i
              },
              set: function(t, g) {
                for (var e, n, I = t.options,
                    i = y.makeArray(g), C = I.length; C--;)
                  if (n = I[C], 0 <= y.inArray(y.valHooks.option.get(n), i)) try {
                    n.selected = e = !0
                  } catch (t) {
                    n.scrollHeight
                  } else n.selected = !1;
                return e || (t.selectedIndex = -1),
                  I
              }
            }
          }
        }),
        y.each(["radio", "checkbox"],
          function() {
            y.valHooks[this] = {
                set: function(t, g) {
                  if (y.isArray(g)) return t.checked = 0 <= y.inArray(y(t).val(), g)
                }
              },
              B.checkOn || (y.valHooks[this].get = function(t) {
                return null === t.getAttribute("value") ? "on" : t.value
              })
          });
      var ug, dg, hg = y.expr.attrHandle,
        Bg = /^(?:checked|selected)$/i,
        bg = B.getSetAttribute,
        pg = B.input;
      y.fn.extend({
          attr: function(t, g) {
            return J(this, y.attr, t, g, 1 < arguments.length)
          },
          removeAttr: function(t) {
            return this.each(function() {
              y.removeAttr(this, t)
            })
          }
        }),
        y.extend({
          attr: function(t, g, e) {
            var n, I, i = t.nodeType;
            if (t && 3 !== i && 8 !== i && 2 !== i) return typeof t.getAttribute == H ? y.prop(t, g, e) : (1 === i && y.isXMLDoc(t) || (g = g.toLowerCase(), n = y.attrHooks[g] || (y.expr.match.bool.test(g) ? dg : ug)), void 0 === e ? !(n && "get" in n && null !== (I = n.get(t, g))) && null == (I = y.find.attr(t, g)) ? void 0 : I : null !== e ? n && "set" in n && void 0 !== (I = n.set(t, e, g)) ? I : (t.setAttribute(g, e + ""), e) : void y.removeAttr(t, g))
          },
          removeAttr: function(t, g) {
            var e, n, I = 0,
              i = g && g.match(v);
            if (i && 1 === t.nodeType)
              for (; e = i[I++];) n = y.propFix[e] || e,
                y.expr.match.bool.test(e) ? pg && bg || !Bg.test(e) ? t[n] = !1 : t[y.camelCase("default-" + e)] = t[n] = !1 : y.attr(t, e, ""),
                t.removeAttribute(bg ? e : n)
          },
          attrHooks: {
            type: {
              set: function(t, g) {
                if (!B.radioValue && "radio" === g && y.nodeName(t, "input")) {
                  var e = t.value;
                  return t.setAttribute("type", g),
                    e && (t.value = e),
                    g
                }
              }
            }
          }
        }),
        dg = {
          set: function(t, g, e) {
            return !1 === g ? y.removeAttr(t, e) : pg && bg || !Bg.test(e) ? t.setAttribute(!bg && y.propFix[e] || e, e) : t[y.camelCase("default-" + e)] = t[e] = !0,
              e
          }
        },
        y.each(y.expr.match.bool.source.match(/\w+/g),
          function(t, g) {
            var i = hg[g] || y.find.attr;
            hg[g] = pg && bg || !Bg.test(g) ?
              function(t, g, e) {
                var n, I;
                return e || (I = hg[g], hg[g] = n, n = null != i(t, g, e) ? g.toLowerCase() : null, hg[g] = I),
                  n
              } : function(t, g, e) {
                if (!e) return t[y.camelCase("default-" + g)] ? g.toLowerCase() : null
              }
          }),
        pg && bg || (y.attrHooks.value = {
          set: function(t, g, e) {
            if (!y.nodeName(t, "input")) return ug && ug.set(t, g, e);
            t.defaultValue = g
          }
        }),
        bg || (ug = {
            set: function(t, g, e) {
              var n = t.getAttributeNode(e);
              if (n || t.setAttributeNode(n = t.ownerDocument.createAttribute(e)), n.value = g += "", "value" === e || g === t.getAttribute(e)) return g
            }
          },
          hg.id = hg.name = hg.coords = function(t, g, e) {
            if (!e) return (g = t.getAttributeNode(g)) && "" !== g.value ? g.value : null
          },
          y.valHooks.button = {
            get: function(t, g) {
              g = t.getAttributeNode(g);
              if (g && g.specified) return g.value
            },
            set: ug.set
          },
          y.attrHooks.contenteditable = {
            set: function(t, g, e) {
              ug.set(t, "" !== g && g, e)
            }
          },
          y.each(["width", "height"],
            function(t, e) {
              y.attrHooks[e] = {
                set: function(t, g) {
                  if ("" === g) return t.setAttribute(e, "auto"),
                    g
                }
              }
            })),
        B.style || (y.attrHooks.style = {
          get: function(t) {
            return t.style.cssText || void 0
          },
          set: function(t, g) {
            return t.style.cssText = g + ""
          }
        });
      var mg = /^(?:input|select|textarea|button|object)$/i,
        yg = /^(?:a|area)$/i;
      y.fn.extend({
          prop: function(t, g) {
            return J(this, y.prop, t, g, 1 < arguments.length)
          },
          removeProp: function(t) {
            return t = y.propFix[t] || t,
              this.each(function() {
                try {
                  this[t] = void 0,
                    delete this[t]
                } catch (t) {}
              })
          }
        }),
        y.extend({
          propFix: {
            for: "htmlFor",
            class: "className"
          },
          prop: function(t, g, e) {
            var n, I, i = t.nodeType;
            if (t && 3 !== i && 8 !== i && 2 !== i) return (1 !== i || !y.isXMLDoc(t)) && (g = y.propFix[g] || g, I = y.propHooks[g]),
              void 0 !== e ? I && "set" in I && void 0 !== (n = I.set(t, e, g)) ? n : t[g] = e : I && "get" in I && null !== (n = I.get(t, g)) ? n : t[g]
          },
          propHooks: {
            tabIndex: {
              get: function(t) {
                var g = y.find.attr(t, "tabindex");
                return g ? parseInt(g, 10) : mg.test(t.nodeName) || yg.test(t.nodeName) && t.href ? 0 : -1
              }
            }
          }
        }),
        B.hrefNormalized || y.each(["href", "src"],
          function(t, g) {
            y.propHooks[g] = {
              get: function(t) {
                return t.getAttribute(g, 4)
              }
            }
          }),
        B.optSelected || (y.propHooks.selected = {
          get: function(t) {
            t = t.parentNode;
            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex),
              null
          }
        }),
        y.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"],
          function() {
            y.propFix[this.toLowerCase()] = this
          }),
        B.enctype || (y.propFix.enctype = "encoding");
      var Qg = /[\t\r\n\f]/g;
      y.fn.extend({
          addClass: function(g) {
            var t, e, n, I, i, C, A = 0,
              a = this.length,
              o = "string" == typeof g && g;
            if (y.isFunction(g)) return this.each(function(t) {
              y(this).addClass(g.call(this, t, this.className))
            });
            if (o)
              for (t = (g || "").match(v) || []; A < a; A++)
                if (n = 1 === (e = this[A]).nodeType && (e.className ? (" " + e.className + " ").replace(Qg, " ") : " ")) {
                  for (i = 0; I = t[i++];) n.indexOf(" " + I + " ") < 0 && (n += I + " ");
                  C = y.trim(n),
                    e.className !== C && (e.className = C)
                }
            return this
          },
          removeClass: function(g) {
            var t, e, n, I, i, C, A = 0,
              a = this.length,
              o = 0 === arguments.length || "string" == typeof g && g;
            if (y.isFunction(g)) return this.each(function(t) {
              y(this).removeClass(g.call(this, t, this.className))
            });
            if (o)
              for (t = (g || "").match(v) || []; A < a; A++)
                if (n = 1 === (e = this[A]).nodeType && (e.className ? (" " + e.className + " ").replace(Qg, " ") : "")) {
                  for (i = 0; I = t[i++];)
                    for (; 0 <= n.indexOf(" " + I + " ");) n = n.replace(" " + I + " ", " ");
                  C = g ? y.trim(n) : "",
                    e.className !== C && (e.className = C)
                }
            return this
          },
          toggleClass: function(I, g) {
            var i = typeof I;
            return "boolean" == typeof g && "string" == i ? g ? this.addClass(I) : this.removeClass(I) : y.isFunction(I) ? this.each(function(t) {
              y(this).toggleClass(I.call(this, t, this.className, g), g)
            }) : this.each(function() {
              if ("string" == i)
                for (var t, g = 0,
                    e = y(this), n = I.match(v) || []; t = n[g++];) e.hasClass(t) ? e.removeClass(t) : e.addClass(t);
              else i != H && "boolean" != i || (this.className && y._data(this, "__className__", this.className), this.className = !this.className && !1 !== I && y._data(this, "__className__") || "")
            })
          },
          hasClass: function(t) {
            for (var g = " " + t + " ",
                e = 0,
                n = this.length; e < n; e++)
              if (1 === this[e].nodeType && 0 <= (" " + this[e].className + " ").replace(Qg, " ").indexOf(g)) return !0;
            return !1
          }
        }),
        y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
          function(t, e) {
            y.fn[e] = function(t, g) {
              return 0 < arguments.length ? this.on(e, null, t, g) : this.trigger(e)
            }
          }),
        y.fn.extend({
          hover: function(t, g) {
            return this.mouseenter(t).mouseleave(g || t)
          },
          bind: function(t, g, e) {
            return this.on(t, null, g, e)
          },
          unbind: function(t, g) {
            return this.off(t, null, g)
          },
          delegate: function(t, g, e, n) {
            return this.on(g, t, e, n)
          },
          undelegate: function(t, g, e) {
            return 1 === arguments.length ? this.off(t, "**") : this.off(g, t || "**", e)
          }
        });
      var Gg = y.now(),
        Fg = /\?/,
        fg = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
      y.parseJSON = function(t) {
          if (u.JSON && u.JSON.parse) return u.JSON.parse(t + "");
          var I, i = null,
            g = y.trim(t + "");
          return g && !y.trim(g.replace(fg,
            function(t, g, e, n) {
              return 0 === (i = I && g ? 0 : i) ? t : (I = e || g, i += !n - !e, "")
            })) ? Function("return " + g)() : y.error("Invalid JSON: " + t)
        },
        y.parseXML = function(t) {
          var g;
          if (!t || "string" != typeof t) return null;
          try {
            u.DOMParser ? g = (new DOMParser).parseFromString(t, "text/xml") : ((g = new ActiveXObject("Microsoft.XMLDOM")).async = "false", g.loadXML(t))
          } catch (t) {
            g = void 0
          }
          return g && g.documentElement && !g.getElementsByTagName("parsererror").length || y.error("Invalid XML: " + t),
            g
        };
      var Xg, xg, Zg = /#.*$/,
        Ug = /([?&])_=[^&]*/,
        vg = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
        Sg = /^(?:GET|HEAD)$/,
        Wg = /^\/\//,
        wg = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
        Ng = {},
        Hg = {},
        Dg = "*/".concat("*");
      try {
        xg = location.href
      } catch (t) {
        (xg = G.createElement("a")).href = "",
          xg = xg.href
      }

      function Vg(i) {
        return function(t, g) {
          "string" != typeof t && (g = t, t = "*");
          var e, n = 0,
            I = t.toLowerCase().match(v) || [];
          if (y.isFunction(g))
            for (; e = I[n++];) "+" === e.charAt(0) ? (e = e.slice(1) || "*", (i[e] = i[e] || []).unshift(g)) : (i[e] = i[e] || []).push(g)
        }
      }

      function Yg(g, n, I, i) {
        var C = {},
          A = g === Hg;

        function a(t) {
          var e;
          return C[t] = !0,
            y.each(g[t] || [],
              function(t, g) {
                g = g(n, I, i);
                return "string" != typeof g || A || C[g] ? A ? !(e = g) : void 0 : (n.dataTypes.unshift(g), a(g), !1)
              }),
            e
        }
        return a(n.dataTypes[0]) || !C["*"] && a("*")
      }

      function Rg(t, g) {
        var e, n, I = y.ajaxSettings.flatOptions || {};
        for (n in g) void 0 !== g[n] && ((I[n] ? t : e = e || {})[n] = g[n]);
        return e && y.extend(!0, t, e),
          t
      }
      Xg = wg.exec(xg.toLowerCase()) || [],
        y.extend({
          active: 0,
          lastModified: {},
          etag: {},
          ajaxSettings: {
            url: xg,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Xg[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
              "*": Dg,
              text: "text/plain",
              html: "text/html",
              xml: "application/xml, text/xml",
              json: "application/json, text/javascript"
            },
            contents: {
              xml: /xml/,
              html: /html/,
              json: /json/
            },
            responseFields: {
              xml: "responseXML",
              text: "responseText",
              json: "responseJSON"
            },
            converters: {
              "* text": String,
              "text html": !0,
              "text json": y.parseJSON,
              "text xml": y.parseXML
            },
            flatOptions: {
              url: !0,
              context: !0
            }
          },
          ajaxSetup: function(t, g) {
            return g ? Rg(Rg(t, y.ajaxSettings), g) : Rg(y.ajaxSettings, t)
          },
          ajaxPrefilter: Vg(Ng),
          ajaxTransport: Vg(Hg),
          ajax: function(t, g) {
            "object" == typeof t && (g = t, t = void 0);
            var e, a, o, s, r, l, n, c = y.ajaxSetup({},
                g = g || {}),
              u = c.context || c,
              d = c.context && (u.nodeType || u.jquery) ? y(u) : y.event,
              h = y.Deferred(),
              B = y.Callbacks("once memory"),
              b = c.statusCode || {},
              I = {},
              i = {},
              p = 0,
              C = "canceled",
              m = {
                readyState: 0,
                getResponseHeader: function(t) {
                  var g;
                  if (2 === p) {
                    if (!n)
                      for (n = {}; g = vg.exec(o);) n[g[1].toLowerCase()] = g[2];
                    g = n[t.toLowerCase()]
                  }
                  return null == g ? null : g
                },
                getAllResponseHeaders: function() {
                  return 2 === p ? o : null
                },
                setRequestHeader: function(t, g) {
                  var e = t.toLowerCase();
                  return p || (t = i[e] = i[e] || t, I[t] = g),
                    this
                },
                overrideMimeType: function(t) {
                  return p || (c.mimeType = t),
                    this
                },
                statusCode: function(t) {
                  if (t)
                    if (p < 2)
                      for (var g in t) b[g] = [b[g], t[g]];
                    else m.always(t[m.status]);
                  return this
                },
                abort: function(t) {
                  t = t || C;
                  return l && l.abort(t),
                    A(0, t),
                    this
                }
              };
            if (h.promise(m).complete = B.add, m.success = m.done, m.error = m.fail, c.url = ((t || c.url || xg) + "").replace(Zg, "").replace(Wg, Xg[1] + "//"), c.type = g.method || g.type || c.method || c.type, c.dataTypes = y.trim(c.dataType || "*").toLowerCase().match(v) || [""], null == c.crossDomain && (t = wg.exec(c.url.toLowerCase()), c.crossDomain = !(!t || t[1] === Xg[1] && t[2] === Xg[2] && (t[3] || ("http:" === t[1] ? "80" : "443")) === (Xg[3] || ("http:" === Xg[1] ? "80" : "443")))), c.data && c.processData && "string" != typeof c.data && (c.data = y.param(c.data, c.traditional)), Yg(Ng, c, g, m), 2 === p) return m;
            for (e in (r = c.global) && 0 == y.active++ && y.event.trigger("ajaxStart"), c.type = c.type.toUpperCase(), c.hasContent = !Sg.test(c.type), a = c.url, c.hasContent || (c.data && (a = c.url += (Fg.test(a) ? "&" : "?") + c.data, delete c.data), !1 === c.cache && (c.url = Ug.test(a) ? a.replace(Ug, "$1_=" + Gg++) : a + (Fg.test(a) ? "&" : "?") + "_=" + Gg++)), c.ifModified && (y.lastModified[a] && m.setRequestHeader("If-Modified-Since", y.lastModified[a]), y.etag[a] && m.setRequestHeader("If-None-Match", y.etag[a])), (c.data && c.hasContent && !1 !== c.contentType || g.contentType) && m.setRequestHeader("Content-Type", c.contentType), m.setRequestHeader("Accept", c.dataTypes[0] && c.accepts[c.dataTypes[0]] ? c.accepts[c.dataTypes[0]] + ("*" !== c.dataTypes[0] ? ", " + Dg + "; q=0.01" : "") : c.accepts["*"]), c.headers) m.setRequestHeader(e, c.headers[e]);
            if (c.beforeSend && (!1 === c.beforeSend.call(u, m, c) || 2 === p)) return m.abort();
            for (e in C = "abort", {
                success: 1,
                error: 1,
                complete: 1
              }) m[e](c[e]);
            if (l = Yg(Hg, c, g, m)) {
              m.readyState = 1,
                r && d.trigger("ajaxSend", [m, c]),
                c.async && 0 < c.timeout && (s = setTimeout(function() {
                    m.abort("timeout")
                  },
                  c.timeout));
              try {
                p = 1,
                  l.send(I, A)
              } catch (t) {
                if (!(p < 2)) throw t;
                A(-1, t)
              }
            } else A(-1, "No Transport");

            function A(t, g, e, n) {
              var I, i, C, A = g;
              2 !== p && (p = 2, s && clearTimeout(s), l = void 0, o = n || "", m.readyState = 0 < t ? 4 : 0, n = 200 <= t && t < 300 || 304 === t, e && (C = function(t, g, e) {
                for (var n, I, i, C, A = t.contents,
                    a = t.dataTypes;
                  "*" === a[0];) a.shift(),
                  void 0 === I && (I = t.mimeType || g.getResponseHeader("Content-Type"));
                if (I)
                  for (C in A)
                    if (A[C] && A[C].test(I)) {
                      a.unshift(C);
                      break
                    }
                if (a[0] in e) i = a[0];
                else {
                  for (C in e) {
                    if (!a[0] || t.converters[C + " " + a[0]]) {
                      i = C;
                      break
                    }
                    n = n || C
                  }
                  i = i || n
                }
                if (i) return i !== a[0] && a.unshift(i),
                  e[i]
              }(c, m, e)), C = function(t, g, e, n) {
                var I, i, C, A, a, o = {},
                  s = t.dataTypes.slice();
                if (s[1])
                  for (C in t.converters) o[C.toLowerCase()] = t.converters[C];
                for (i = s.shift(); i;)
                  if (t.responseFields[i] && (e[t.responseFields[i]] = g), !a && n && t.dataFilter && (g = t.dataFilter(g, t.dataType)), a = i, i = s.shift())
                    if ("*" === i) i = a;
                    else if ("*" !== a && a !== i) {
                  if (!(C = o[a + " " + i] || o["* " + i]))
                    for (I in o)
                      if ((A = I.split(" "))[1] === i && (C = o[a + " " + A[0]] || o["* " + A[0]])) {
                        !0 === C ? C = o[I] : !0 !== o[I] && (i = A[0], s.unshift(A[1]));
                        break
                      }
                  if (!0 !== C)
                    if (C && t.throws) g = C(g);
                    else try {
                      g = C(g)
                    } catch (t) {
                      return {
                        state: "parsererror",
                        error: C ? t : "No conversion from " + a + " to " + i
                      }
                    }
                }
                return {
                  state: "success",
                  data: g
                }
              }(c, C, m, n), n ? (c.ifModified && ((e = m.getResponseHeader("Last-Modified")) && (y.lastModified[a] = e), (e = m.getResponseHeader("etag")) && (y.etag[a] = e)), 204 === t || "HEAD" === c.type ? A = "nocontent" : 304 === t ? A = "notmodified" : (A = C.state, I = C.data, n = !(i = C.error))) : (i = A, !t && A || (A = "error", t < 0 && (t = 0))), m.status = t, m.statusText = (g || A) + "", n ? h.resolveWith(u, [I, A, m]) : h.rejectWith(u, [m, A, i]), m.statusCode(b), b = void 0, r && d.trigger(n ? "ajaxSuccess" : "ajaxError", [m, c, n ? I : i]), B.fireWith(u, [m, A]), r && (d.trigger("ajaxComplete", [m, c]), --y.active || y.event.trigger("ajaxStop")))
            }
            return m
          },
          getJSON: function(t, g, e) {
            console.log("getJSON");
            console.log(y.get(t, g, e, "json"));
            return y.get(t, g, e, "json")
          },

          // getJSON: function(t, g, e) {
          //   console.log("getJSON");
          //   // console.log(y.get(t, g, e, "json"));
          //   return y.get(t, "json")
          //   console.log(y, "json");
            
          // },
          getScript: function(t, g) {
            return y.get(t, void 0, g, "script")
          }
        }),
        y.each(["get", "post"],
          function(t, I) {
            y[I] = function(t, g, e, n) {
              return y.isFunction(g) && (n = n || e, e = g, g = void 0),
                y.ajax({
                  url: t,
                  type: I,
                  dataType: n,
                  data: g,
                  success: e
                })
            }
          }),
        y.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"],
          function(t, g) {
            y.fn[g] = function(t) {
              return this.on(g, t)
            }
          }),
        y._evalUrl = function(t) {
          return y.ajax({
            url: t,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            throws: !0
          })
        },
        y.fn.extend({
          wrapAll: function(g) {
            return y.isFunction(g) ? this.each(function(t) {
              y(this).wrapAll(g.call(this, t))
            }) : (this[0] && (t = y(g, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
              for (var t = this; t.firstChild && 1 === t.firstChild.nodeType;) t = t.firstChild;
              return t
            }).append(this)), this);
            var t
          },
          wrapInner: function(e) {
            return y.isFunction(e) ? this.each(function(t) {
              y(this).wrapInner(e.call(this, t))
            }) : this.each(function() {
              var t = y(this),
                g = t.contents();
              g.length ? g.wrapAll(e) : t.append(e)
            })
          },
          wrap: function(g) {
            var e = y.isFunction(g);
            return this.each(function(t) {
              y(this).wrapAll(e ? g.call(this, t) : g)
            })
          },
          unwrap: function() {
            return this.parent().each(function() {
              y.nodeName(this, "body") || y(this).replaceWith(this.childNodes)
            }).end()
          }
        }),
        y.expr.filters.hidden = function(t) {
          return t.offsetWidth <= 0 && t.offsetHeight <= 0 || !B.reliableHiddenOffsets() && "none" === (t.style && t.style.display || y.css(t, "display"))
        },
        y.expr.filters.visible = function(t) {
          return !y.expr.filters.hidden(t)
        };
      var Tg = /%20/g,
        kg = /\[\]$/,
        Eg = /\r?\n/g,
        Og = /^(?:submit|button|image|reset|file)$/i,
        Lg = /^(?:input|select|textarea|keygen)/i;
      y.param = function(t, g) {
          function e(t, g) {
            g = y.isFunction(g) ? g() : null == g ? "" : g,
              I[I.length] = encodeURIComponent(t) + "=" + encodeURIComponent(g)
          }
          var n, I = [];
          if (void 0 === g && (g = y.ajaxSettings && y.ajaxSettings.traditional), y.isArray(t) || t.jquery && !y.isPlainObject(t)) y.each(t,
            function() {
              e(this.name, this.value)
            });
          else
            for (n in t) !
              function e(n, t, I, i) {
                if (y.isArray(t)) y.each(t,
                  function(t, g) {
                    I || kg.test(n) ? i(n, g) : e(n + "[" + ("object" == typeof g ? t : "") + "]", g, I, i)
                  });
                else if (I || "object" !== y.type(t)) i(n, t);
                else
                  for (var g in t) e(n + "[" + g + "]", t[g], I, i)
              }(n, t[n], g, e);
          return I.join("&").replace(Tg, "+")
        },
        y.fn.extend({
          serialize: function() {
            return y.param(this.serializeArray())
          },
          serializeArray: function() {
            return this.map(function() {
              var t = y.prop(this, "elements");
              return t ? y.makeArray(t) : this
            }).filter(function() {
              var t = this.type;
              return this.name && !y(this).is(":disabled") && Lg.test(this.nodeName) && !Og.test(t) && (this.checked || !K.test(t))
            }).map(function(t, g) {
              var e = y(this).val();
              return null == e ? null : y.isArray(e) ? y.map(e,
                function(t) {
                  return {
                    name: g.name,
                    value: t.replace(Eg, "\r\n")
                  }
                }) : {
                name: g.name,
                value: e.replace(Eg, "\r\n")
              }
            }).get()
          }
        }),
        y.ajaxSettings.xhr = void 0 !== u.ActiveXObject ?
        function() {
          return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && Mg() ||
            function() {
              try {
                return new u.ActiveXObject("Microsoft.XMLHTTP")
              } catch (t) {}
            }()
        } : Mg;
      var Jg = 0,
        Kg = {},
        O = y.ajaxSettings.xhr();

      function Mg() {
        try {
          return new u.XMLHttpRequest
        } catch (t) {}
      }
      u.ActiveXObject && y(u).on("unload",
          function() {
            for (var t in Kg) Kg[t](void 0, !0)
          }),
        B.cors = !!O && "withCredentials" in O,
        (O = B.ajax = !!O) && y.ajaxTransport(function(a) {
          var o;
          if (!a.crossDomain || B.cors) return {
            send: function(t, i) {
              var g, C = a.xhr(),
                A = ++Jg;
              if (C.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
                for (g in a.xhrFields) C[g] = a.xhrFields[g];
              for (g in a.mimeType && C.overrideMimeType && C.overrideMimeType(a.mimeType), a.crossDomain || t["X-Requested-With"] || (t["X-Requested-With"] = "XMLHttpRequest"), t) void 0 !== t[g] && C.setRequestHeader(g, t[g] + "");
              C.send(a.hasContent && a.data || null),
                o = function(t, g) {
                  var e, n, I;
                  if (o && (g || 4 === C.readyState))
                    if (delete Kg[A], o = void 0, C.onreadystatechange = y.noop, g) 4 !== C.readyState && C.abort();
                    else {
                      I = {},
                        e = C.status,
                        "string" == typeof C.responseText && (I.text = C.responseText);
                      try {
                        n = C.statusText
                      } catch (t) {
                        n = ""
                      }
                      e || !a.isLocal || a.crossDomain ? 1223 === e && (e = 204) : e = I.text ? 200 : 404
                    }
                  I && i(e, n, I, C.getAllResponseHeaders())
                },
                a.async ? 4 === C.readyState ? setTimeout(o) : C.onreadystatechange = Kg[A] = o : o()
            },
            abort: function() {
              o && o(void 0, !0)
            }
          }
        }),
        y.ajaxSetup({
          accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
          },
          contents: {
            script: /(?:java|ecma)script/
          },
          converters: {
            "text script": function(t) {
              return y.globalEval(t),
                t
            }
          }
        }),
        y.ajaxPrefilter("script",
          function(t) {
            void 0 === t.cache && (t.cache = !1),
              t.crossDomain && (t.type = "GET", t.global = !1)
          }),
        y.ajaxTransport("script",
          function(g) {
            if (g.crossDomain) {
              var n, I = G.head || y("head")[0] || G.documentElement;
              return {
                send: function(t, e) {
                  (n = G.createElement("script")).async = !0,
                    g.scriptCharset && (n.charset = g.scriptCharset),
                    n.src = g.url,
                    n.onload = n.onreadystatechange = function(t, g) {
                      !g && n.readyState && !/loaded|complete/.test(n.readyState) || (n.onload = n.onreadystatechange = null, n.parentNode && n.parentNode.removeChild(n), n = null, g || e(200, "success"))
                    },
                    I.insertBefore(n, I.firstChild)
                },
                abort: function() {
                  n && n.onload(void 0, !0)
                }
              }
            }
          });
      var zg = [],
        jg = /(=)\?(?=&|$)|\?\?/;
      y.ajaxSetup({
          jsonp: "callback",
          jsonpCallback: function() {
            var t = zg.pop() || y.expando + "_" + Gg++;
            return this[t] = !0,
              t
          }
        }),
        y.ajaxPrefilter("json jsonp",
          function(t, g, e) {
            var n, I, i, C = !1 !== t.jsonp && (jg.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && jg.test(t.data) && "data");
            if (C || "jsonp" === t.dataTypes[0]) return n = t.jsonpCallback = y.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
              C ? t[C] = t[C].replace(jg, "$1" + n) : !1 !== t.jsonp && (t.url += (Fg.test(t.url) ? "&" : "?") + t.jsonp + "=" + n),
              t.converters["script json"] = function() {
                return i || y.error(n + " was not called"),
                  i[0]
              },
              t.dataTypes[0] = "json",
              I = u[n],
              u[n] = function() {
                i = arguments
              },
              e.always(function() {
                u[n] = I,
                  t[n] && (t.jsonpCallback = g.jsonpCallback, zg.push(n)),
                  i && y.isFunction(I) && I(i[0]),
                  i = I = void 0
              }),
              "script"
          }),
        y.parseHTML = function(t, g, e) {
          if (!t || "string" != typeof t) return null;
          "boolean" == typeof g && (e = g, g = !1),
            g = g || G;
          var n = p.exec(t),
            e = !e && [];
          return n ? [g.createElement(n[1])] : (n = y.buildFragment([t], g, e), e && e.length && y(e).remove(), y.merge([], n.childNodes))
        };
      var _g = y.fn.load;
      y.fn.load = function(t, g, e) {
          if ("string" != typeof t && _g) return _g.apply(this, arguments);
          var n, I, i, C = this,
            A = t.indexOf(" ");
          return 0 <= A && (n = y.trim(t.slice(A, t.length)), t = t.slice(0, A)),
            y.isFunction(g) ? (e = g, g = void 0) : g && "object" == typeof g && (i = "POST"),
            0 < C.length && y.ajax({
              url: t,
              type: i,
              dataType: "html",
              data: g
            }).done(function(t) {
              I = arguments,
                C.html(n ? y("<div>").append(y.parseHTML(t)).find(n) : t)
            }).complete(e &&
              function(t, g) {
                C.each(e, I || [t.responseText, g, t])
              }),
            this
        },
        y.expr.filters.animated = function(g) {
          return y.grep(y.timers,
            function(t) {
              return g === t.elem
            }).length
        };
      var Pg = u.document.documentElement;

      function qg(t) {
        return y.isWindow(t) ? t : 9 === t.nodeType && (t.defaultView || t.parentWindow)
      }
      y.offset = {
          setOffset: function(t, g, e) {
            var n, I, i, C, A = y.css(t, "position"),
              a = y(t),
              o = {};
            "static" === A && (t.style.position = "relative"),
              i = a.offset(),
              n = y.css(t, "top"),
              C = y.css(t, "left"),
              C = ("absolute" === A || "fixed" === A) && -1 < y.inArray("auto", [n, C]) ? (I = (A = a.position()).top, A.left) : (I = parseFloat(n) || 0, parseFloat(C) || 0),
              null != (g = y.isFunction(g) ? g.call(t, e, i) : g).top && (o.top = g.top - i.top + I),
              null != g.left && (o.left = g.left - i.left + C),
              "using" in g ? g.using.call(t, o) : a.css(o)
          }
        },
        y.fn.extend({
          offset: function(g) {
            if (arguments.length) return void 0 === g ? this : this.each(function(t) {
              y.offset.setOffset(this, g, t)
            });
            var t, e = {
                top: 0,
                left: 0
              },
              n = this[0],
              I = n && n.ownerDocument;
            return I ? (t = I.documentElement, y.contains(t, n) ? (typeof n.getBoundingClientRect != H && (e = n.getBoundingClientRect()), I = qg(I), {
              top: e.top + (I.pageYOffset || t.scrollTop) - (t.clientTop || 0),
              left: e.left + (I.pageXOffset || t.scrollLeft) - (t.clientLeft || 0)
            }) : e) : void 0
          },
          position: function() {
            if (this[0]) {
              var t, g, e = {
                  top: 0,
                  left: 0
                },
                n = this[0];
              return "fixed" === y.css(n, "position") ? g = n.getBoundingClientRect() : (t = this.offsetParent(), g = this.offset(), (e = !y.nodeName(t[0], "html") ? t.offset() : e).top += y.css(t[0], "borderTopWidth", !0), e.left += y.css(t[0], "borderLeftWidth", !0)), {
                top: g.top - e.top - y.css(n, "marginTop", !0),
                left: g.left - e.left - y.css(n, "marginLeft", !0)
              }
            }
          },
          offsetParent: function() {
            return this.map(function() {
              for (var t = this.offsetParent || Pg; t && !y.nodeName(t, "html") && "static" === y.css(t, "position");) t = t.offsetParent;
              return t || Pg
            })
          }
        }),
        y.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
          },
          function(g, I) {
            var i = /Y/.test(I);
            y.fn[g] = function(t) {
              return J(this,
                function(t, g, e) {
                  var n = qg(t);
                  if (void 0 === e) return n ? I in n ? n[I] : n.document.documentElement[g] : t[g];
                  n ? n.scrollTo(i ? y(n).scrollLeft() : e, i ? e : y(n).scrollTop()) : t[g] = e
                },
                g, t, arguments.length, null)
            }
          }),
        y.each(["top", "left"],
          function(t, e) {
            y.cssHooks[e] = Yt(B.pixelPosition,
              function(t, g) {
                if (g) return g = vt(t, e),
                  Dt.test(g) ? y(t).position()[e] + "px" : g
              })
          }),
        y.each({
            Height: "height",
            Width: "width"
          },
          function(i, C) {
            y.each({
                padding: "inner" + i,
                content: C,
                "": "outer" + i
              },
              function(n, t) {
                y.fn[t] = function(t, g) {
                  var e = arguments.length && (n || "boolean" != typeof t),
                    I = n || (!0 === t || !0 === g ? "margin" : "border");
                  return J(this,
                    function(t, g, e) {
                      var n;
                      return y.isWindow(t) ? t.document.documentElement["client" + i] : 9 === t.nodeType ? (n = t.documentElement, Math.max(t.body["scroll" + i], n["scroll" + i], t.body["offset" + i], n["offset" + i], n["client" + i])) : void 0 === e ? y.css(t, g, I) : y.style(t, g, e, I)
                    },
                    C, e ? t : void 0, e, null)
                }
              })
          }),
        y.fn.size = function() {
          return this.length
        },
        y.fn.andSelf = y.fn.addBack,
        "function" == typeof define && define.amd && define("jquery", [],
          function() {
            return y
          });
      var $g = u.jQuery = u.jQuery_custom,
        te = u.$;
      return y.noConflict = function(t) {
          return u.$ === y && (u.$ = te),
            t && u.jQuery === y && (u.jQuery = u.jQuery_custom = $g),
            y
        },
        typeof t == H && (u.jQuery = u.jQuery_custom = u.$ = y),
        y
    }),
  function() {
    var t = this,
      g = t._,
      C = {},
      I = Array.prototype,
      e = Object.prototype,
      n = Function.prototype,
      i = I.push,
      A = I.slice,
      a = I.concat,
      r = e.toString,
      o = e.hasOwnProperty,
      s = I.forEach,
      l = I.map,
      c = I.reduce,
      u = I.reduceRight,
      d = I.filter,
      h = I.every,
      B = I.some,
      b = I.indexOf,
      p = I.lastIndexOf,
      e = Array.isArray,
      m = Object.keys,
      y = n.bind,
      Q = function(t) {
        return t instanceof Q ? t : this instanceof Q ? void(this._wrapped = t) : new Q(t)
      };
    "undefined" != typeof exports ? (exports = "undefined" != typeof module && module.exports ? module.exports = Q : exports)._ = Q : t._ = Q,
      Q.VERSION = "1.6.0";
    var G = Q.each = Q.forEach = function(t, g, e) {
      if (null == t) return t;
      if (s && t.forEach === s) t.forEach(g, e);
      else if (t.length === +t.length) {
        for (var n = 0,
            I = t.length; n < I; n++)
          if (g.call(e, t[n], n, t) === C) return
      } else
        for (var i = Q.keys(t), n = 0, I = i.length; n < I; n++)
          if (g.call(e, t[i[n]], i[n], t) === C) return;
      return t
    };
    Q.map = Q.collect = function(t, n, I) {
      var i = [];
      return null == t ? i : l && t.map === l ? t.map(n, I) : (G(t,
        function(t, g, e) {
          i.push(n.call(I, t, g, e))
        }), i)
    };
    var F = "Reduce of empty array with no initial value";
    Q.reduce = Q.foldl = Q.inject = function(t, n, I, i) {
        var C = 2 < arguments.length;
        if (null == t && (t = []), c && t.reduce === c) return i && (n = Q.bind(n, i)),
          C ? t.reduce(n, I) : t.reduce(n);
        if (G(t,
            function(t, g, e) {
              C ? I = n.call(i, I, t, g, e) : (I = t, C = !0)
            }), !C) throw new TypeError(F);
        return I
      },
      Q.reduceRight = Q.foldr = function(n, I, i, C) {
        var A = 2 < arguments.length;
        if (null == n && (n = []), u && n.reduceRight === u) return C && (I = Q.bind(I, C)),
          A ? n.reduceRight(I, i) : n.reduceRight(I);
        var a, o = n.length;
        if (o !== +o && (a = Q.keys(n), o = a.length), G(n,
            function(t, g, e) {
              g = a ? a[--o] : --o,
                A ? i = I.call(C, i, n[g], g, e) : (i = n[g], A = !0)
            }), !A) throw new TypeError(F);
        return i
      },
      Q.find = Q.detect = function(t, n, I) {
        var i;
        return f(t,
            function(t, g, e) {
              if (n.call(I, t, g, e)) return i = t,
                !0
            }),
          i
      },
      Q.filter = Q.select = function(t, n, I) {
        var i = [];
        return null == t ? i : d && t.filter === d ? t.filter(n, I) : (G(t,
          function(t, g, e) {
            n.call(I, t, g, e) && i.push(t)
          }), i)
      },
      Q.reject = function(t, n, I) {
        return Q.filter(t,
          function(t, g, e) {
            return !n.call(I, t, g, e)
          },
          I)
      },
      Q.every = Q.all = function(t, n, I) {
        n = n || Q.identity;
        var i = !0;
        return null == t ? i : h && t.every === h ? t.every(n, I) : (G(t,
          function(t, g, e) {
            if (!(i = i && n.call(I, t, g, e))) return C
          }), !!i)
      };
    var f = Q.some = Q.any = function(t, n, I) {
      n = n || Q.identity;
      var i = !1;
      return null == t ? i : B && t.some === B ? t.some(n, I) : (G(t,
        function(t, g, e) {
          if (i = i || n.call(I, t, g, e)) return C
        }), !!i)
    };
    Q.contains = Q.include = function(t, g) {
        return null != t && (b && t.indexOf === b ? -1 != t.indexOf(g) : f(t,
          function(t) {
            return t === g
          }))
      },
      Q.invoke = function(t, g) {
        var e = A.call(arguments, 2),
          n = Q.isFunction(g);
        return Q.map(t,
          function(t) {
            return (n ? g : t[g]).apply(t, e)
          })
      },
      Q.pluck = function(t, g) {
        return Q.map(t, Q.property(g))
      },
      Q.where = function(t, g) {
        return Q.filter(t, Q.matches(g))
      },
      Q.findWhere = function(t, g) {
        return Q.find(t, Q.matches(g))
      },
      Q.max = function(t, n, I) {
        if (!n && Q.isArray(t) && t[0] === +t[0] && t.length < 65535) return Math.max.apply(Math, t);
        var i = -1 / 0,
          C = -1 / 0;
        return G(t,
            function(t, g, e) {
              e = n ? n.call(I, t, g, e) : t;
              C < e && (i = t, C = e)
            }),
          i
      },
      Q.min = function(t, n, I) {
        if (!n && Q.isArray(t) && t[0] === +t[0] && t.length < 65535) return Math.min.apply(Math, t);
        var i = 1 / 0,
          C = 1 / 0;
        return G(t,
            function(t, g, e) {
              e = n ? n.call(I, t, g, e) : t;
              e < C && (i = t, C = e)
            }),
          i
      },
      Q.shuffle = function(t) {
        var g, e = 0,
          n = [];
        return G(t,
            function(t) {
              g = Q.random(e++),
                n[e - 1] = n[g],
                n[g] = t
            }),
          n
      },
      Q.sample = function(t, g, e) {
        return null == g || e ? (t = t.length !== +t.length ? Q.values(t) : t)[Q.random(t.length - 1)] : Q.shuffle(t).slice(0, Math.max(0, g))
      };

    function X(t) {
      return null == t ? Q.identity : Q.isFunction(t) ? t : Q.property(t)
    }
    Q.sortBy = function(t, n, I) {
      return n = X(n),
        Q.pluck(Q.map(t,
          function(t, g, e) {
            return {
              value: t,
              index: g,
              criteria: n.call(I, t, g, e)
            }
          }).sort(function(t, g) {
          var e = t.criteria,
            n = g.criteria;
          if (e !== n) {
            if (n < e || void 0 === e) return 1;
            if (e < n || void 0 === n) return -1
          }
          return t.index - g.index
        }), "value")
    };
    n = function(C) {
      return function(e, n, I) {
        var i = {};
        return n = X(n),
          G(e,
            function(t, g) {
              g = n.call(I, t, g, e);
              C(i, g, t)
            }),
          i
      }
    };
    Q.groupBy = n(function(t, g, e) {
        Q.has(t, g) ? t[g].push(e) : t[g] = [e]
      }),
      Q.indexBy = n(function(t, g, e) {
        t[g] = e
      }),
      Q.countBy = n(function(t, g) {
        Q.has(t, g) ? t[g]++ : t[g] = 1
      }),
      Q.sortedIndex = function(t, g, e, n) {
        for (var I = (e = X(e)).call(n, g), i = 0, C = t.length; i < C;) {
          var A = i + C >>> 1;
          e.call(n, t[A]) < I ? i = 1 + A : C = A
        }
        return i
      },
      Q.toArray = function(t) {
        return t ? Q.isArray(t) ? A.call(t) : t.length === +t.length ? Q.map(t, Q.identity) : Q.values(t) : []
      },
      Q.size = function(t) {
        return null == t ? 0 : (t.length === +t.length ? t : Q.keys(t)).length
      },
      Q.first = Q.head = Q.take = function(t, g, e) {
        if (null != t) return null == g || e ? t[0] : g < 0 ? [] : A.call(t, 0, g)
      },
      Q.initial = function(t, g, e) {
        return A.call(t, 0, t.length - (null == g || e ? 1 : g))
      },
      Q.last = function(t, g, e) {
        if (null != t) return null == g || e ? t[t.length - 1] : A.call(t, Math.max(t.length - g, 0))
      },
      Q.rest = Q.tail = Q.drop = function(t, g, e) {
        return A.call(t, null == g || e ? 1 : g)
      },
      Q.compact = function(t) {
        return Q.filter(t, Q.identity)
      };

    function x(t, g, e) {
      return g && Q.every(t, Q.isArray) ? a.apply(e, t) : (G(t,
        function(t) {
          Q.isArray(t) || Q.isArguments(t) ? g ? i.apply(e, t) : x(t, g, e) : e.push(t)
        }), e)
    }
    Q.flatten = function(t, g) {
        return x(t, g, [])
      },
      Q.without = function(t) {
        return Q.difference(t, A.call(arguments, 1))
      },
      Q.partition = function(t, g) {
        var e = [],
          n = [];
        return G(t,
            function(t) {
              (g(t) ? e : n).push(t)
            }),
          [e, n]
      },
      Q.uniq = Q.unique = function(e, n, t, g) {
        Q.isFunction(n) && (g = t, t = n, n = !1);
        var g = t ? Q.map(e, t, g) : e,
          I = [],
          i = [];
        return G(g,
            function(t, g) {
              (n ? g && i[i.length - 1] === t : Q.contains(i, t)) || (i.push(t), I.push(e[g]))
            }),
          I
      },
      Q.union = function() {
        return Q.uniq(Q.flatten(arguments, !0))
      },
      Q.intersection = function(t) {
        var e = A.call(arguments, 1);
        return Q.filter(Q.uniq(t),
          function(g) {
            return Q.every(e,
              function(t) {
                return Q.contains(t, g)
              })
          })
      },
      Q.difference = function(t) {
        var g = a.apply(I, A.call(arguments, 1));
        return Q.filter(t,
          function(t) {
            return !Q.contains(g, t)
          })
      },
      Q.zip = function() {
        for (var t = Q.max(Q.pluck(arguments, "length").concat(0)), g = new Array(t), e = 0; e < t; e++) g[e] = Q.pluck(arguments, "" + e);
        return g
      },
      Q.object = function(t, g) {
        if (null == t) return {};
        for (var e = {},
            n = 0,
            I = t.length; n < I; n++) g ? e[t[n]] = g[n] : e[t[n][0]] = t[n][1];
        return e
      },
      Q.indexOf = function(t, g, e) {
        if (null == t) return -1;
        var n = 0,
          I = t.length;
        if (e) {
          if ("number" != typeof e) return t[n = Q.sortedIndex(t, g)] === g ? n : -1;
          n = e < 0 ? Math.max(0, I + e) : e
        }
        if (b && t.indexOf === b) return t.indexOf(g, e);
        for (; n < I; n++)
          if (t[n] === g) return n;
        return -1
      },
      Q.lastIndexOf = function(t, g, e) {
        if (null == t) return -1;
        var n = null != e;
        if (p && t.lastIndexOf === p) return n ? t.lastIndexOf(g, e) : t.lastIndexOf(g);
        for (var I = n ? e : t.length; I--;)
          if (t[I] === g) return I;
        return -1
      },
      Q.range = function(t, g, e) {
        arguments.length <= 1 && (g = t || 0, t = 0),
          e = arguments[2] || 1;
        for (var n = Math.max(Math.ceil((g - t) / e), 0), I = 0, i = new Array(n); I < n;) i[I++] = t,
          t += e;
        return i
      };

    function Z() {}
    Q.bind = function(e, n) {
        var I, i;
        if (y && e.bind === y) return y.apply(e, A.call(arguments, 1));
        if (!Q.isFunction(e)) throw new TypeError;
        return I = A.call(arguments, 2),
          i = function() {
            if (!(this instanceof i)) return e.apply(n, I.concat(A.call(arguments)));
            Z.prototype = e.prototype;
            var t = new Z;
            Z.prototype = null;
            var g = e.apply(t, I.concat(A.call(arguments)));
            return Object(g) === g ? g : t
          }
      },
      Q.partial = function(I) {
        var i = A.call(arguments, 1);
        return function() {
          for (var t = 0,
              g = i.slice(), e = 0, n = g.length; e < n; e++) g[e] === Q && (g[e] = arguments[t++]);
          for (; t < arguments.length;) g.push(arguments[t++]);
          return I.apply(this, g)
        }
      },
      Q.bindAll = function(g) {
        var t = A.call(arguments, 1);
        if (0 === t.length) throw new Error("bindAll must be passed function names");
        return G(t,
            function(t) {
              g[t] = Q.bind(g[t], g)
            }),
          g
      },
      Q.memoize = function(g, e) {
        var n = {};
        return e = e || Q.identity,
          function() {
            var t = e.apply(this, arguments);
            return Q.has(n, t) ? n[t] : n[t] = g.apply(this, arguments)
          }
      },
      Q.delay = function(t, g) {
        var e = A.call(arguments, 2);
        return setTimeout(function() {
            return t.apply(null, e)
          },
          g)
      },
      Q.defer = function(t) {
        return Q.delay.apply(Q, [t, 1].concat(A.call(arguments, 1)))
      },
      Q.throttle = function(e, n, I) {
        var i, C, A, a = null,
          o = 0;
        I = I || {};

        function s() {
          o = !1 === I.leading ? 0 : Q.now(),
            a = null,
            A = e.apply(i, C),
            i = C = null
        }
        return function() {
          var t = Q.now();
          o || !1 !== I.leading || (o = t);
          var g = n - (t - o);
          return i = this,
            C = arguments,
            g <= 0 ? (clearTimeout(a), a = null, o = t, A = e.apply(i, C), i = C = null) : a || !1 === I.trailing || (a = setTimeout(s, g)),
            A
        }
      },
      Q.debounce = function(g, e, n) {
        function I() {
          var t = Q.now() - a;
          t < e ? i = setTimeout(I, e - t) : (i = null, n || (o = g.apply(A, C), A = C = null))
        }
        var i, C, A, a, o;
        return function() {
          A = this,
            C = arguments,
            a = Q.now();
          var t = n && !i;
          return i = i || setTimeout(I, e),
            t && (o = g.apply(A, C), A = C = null),
            o
        }
      },
      Q.once = function(t) {
        var g, e = !1;
        return function() {
          return e || (e = !0, g = t.apply(this, arguments), t = null),
            g
        }
      },
      Q.wrap = function(t, g) {
        return Q.partial(g, t)
      },
      Q.compose = function() {
        var e = arguments;
        return function() {
          for (var t = arguments,
              g = e.length - 1; 0 <= g; g--) t = [e[g].apply(this, t)];
          return t[0]
        }
      },
      Q.after = function(t, g) {
        return function() {
          if (--t < 1) return g.apply(this, arguments)
        }
      },
      Q.keys = function(t) {
        if (!Q.isObject(t)) return [];
        if (m) return m(t);
        var g, e = [];
        for (g in t) Q.has(t, g) && e.push(g);
        return e
      },
      Q.values = function(t) {
        for (var g = Q.keys(t), e = g.length, n = new Array(e), I = 0; I < e; I++) n[I] = t[g[I]];
        return n
      },
      Q.pairs = function(t) {
        for (var g = Q.keys(t), e = g.length, n = new Array(e), I = 0; I < e; I++) n[I] = [g[I], t[g[I]]];
        return n
      },
      Q.invert = function(t) {
        for (var g = {},
            e = Q.keys(t), n = 0, I = e.length; n < I; n++) g[t[e[n]]] = e[n];
        return g
      },
      Q.functions = Q.methods = function(t) {
        var g, e = [];
        for (g in t) Q.isFunction(t[g]) && e.push(g);
        return e.sort()
      },
      Q.extend = function(e) {
        return G(A.call(arguments, 1),
            function(t) {
              if (t)
                for (var g in t) e[g] = t[g]
            }),
          e
      },
      Q.pick = function(g) {
        var e = {},
          t = a.apply(I, A.call(arguments, 1));
        return G(t,
            function(t) {
              t in g && (e[t] = g[t])
            }),
          e
      },
      Q.omit = function(t) {
        var g, e = {},
          n = a.apply(I, A.call(arguments, 1));
        for (g in t) Q.contains(n, g) || (e[g] = t[g]);
        return e
      },
      Q.defaults = function(e) {
        return G(A.call(arguments, 1),
            function(t) {
              if (t)
                for (var g in t) void 0 === e[g] && (e[g] = t[g])
            }),
          e
      },
      Q.clone = function(t) {
        return Q.isObject(t) ? Q.isArray(t) ? t.slice() : Q.extend({},
          t) : t
      },
      Q.tap = function(t, g) {
        return g(t),
          t
      };

    function U(t, g, e, n) {
      if (t === g) return 0 !== t || 1 / t == 1 / g;
      if (null == t || null == g) return t === g;
      t instanceof Q && (t = t._wrapped),
        g instanceof Q && (g = g._wrapped);
      var I = r.call(t);
      if (I != r.call(g)) return !1;
      switch (I) {
        case "[object String]":
          return t == String(g);
        case "[object Number]":
          return t != +t ? g != +g : 0 == t ? 1 / t == 1 / g : t == +g;
        case "[object Date]":
        case "[object Boolean]":
          return +t == +g;
        case "[object RegExp]":
          return t.source == g.source && t.global == g.global && t.multiline == g.multiline && t.ignoreCase == g.ignoreCase
      }
      if ("object" != typeof t || "object" != typeof g) return !1;
      for (var i = e.length; i--;)
        if (e[i] == t) return n[i] == g;
      var C = t.constructor,
        A = g.constructor;
      if (C !== A && !(Q.isFunction(C) && C instanceof C && Q.isFunction(A) && A instanceof A) && "constructor" in t && "constructor" in g) return !1;
      e.push(t),
        n.push(g);
      var a = 0,
        o = !0;
      if ("[object Array]" == I) {
        if (o = (a = t.length) == g.length)
          for (; a-- && (o = U(t[a], g[a], e, n)););
      } else {
        for (var s in t)
          if (Q.has(t, s) && (a++, !(o = Q.has(g, s) && U(t[s], g[s], e, n)))) break;
        if (o) {
          for (s in g)
            if (Q.has(g, s) && !a--) break;
          o = !a
        }
      }
      return e.pop(),
        n.pop(),
        o
    }
    Q.isEqual = function(t, g) {
        return U(t, g, [], [])
      },
      Q.isEmpty = function(t) {
        if (null == t) return !0;
        if (Q.isArray(t) || Q.isString(t)) return 0 === t.length;
        for (var g in t)
          if (Q.has(t, g)) return !1;
        return !0
      },
      Q.isElement = function(t) {
        return !(!t || 1 !== t.nodeType)
      },
      Q.isArray = e ||
      function(t) {
        return "[object Array]" == r.call(t)
      },
      Q.isObject = function(t) {
        return t === Object(t)
      },
      G(["Arguments", "Function", "String", "Number", "Date", "RegExp"],
        function(g) {
          Q["is" + g] = function(t) {
            return r.call(t) == "[object " + g + "]"
          }
        }),
      Q.isArguments(arguments) || (Q.isArguments = function(t) {
        return !(!t || !Q.has(t, "callee"))
      }),
      "function" != typeof / . / && (Q.isFunction = function(t) {
        return "function" == typeof t
      }),
      Q.isFinite = function(t) {
        return isFinite(t) && !isNaN(parseFloat(t))
      },
      Q.isNaN = function(t) {
        return Q.isNumber(t) && t != +t
      },
      Q.isBoolean = function(t) {
        return !0 === t || !1 === t || "[object Boolean]" == r.call(t)
      },
      Q.isNull = function(t) {
        return null === t
      },
      Q.isUndefined = function(t) {
        return void 0 === t
      },
      Q.has = function(t, g) {
        return o.call(t, g)
      },
      Q.noConflict = function() {
        return t._ = g,
          this
      },
      Q.identity = function(t) {
        return t
      },
      Q.constant = function(t) {
        return function() {
          return t
        }
      },
      Q.property = function(g) {
        return function(t) {
          return t[g]
        }
      },
      Q.matches = function(e) {
        return function(t) {
          if (t === e) return !0;
          for (var g in e)
            if (e[g] !== t[g]) return !1;
          return !0
        }
      },
      Q.times = function(t, g, e) {
        for (var n = Array(Math.max(0, t)), I = 0; I < t; I++) n[I] = g.call(e, I);
        return n
      },
      Q.random = function(t, g) {
        return null == g && (g = t, t = 0),
          t + Math.floor(Math.random() * (g - t + 1))
      },
      Q.now = Date.now ||
      function() {
        return (new Date).getTime()
      };
    var v = {
      escape: {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;"
      }
    };
    v.unescape = Q.invert(v.escape);
    var S = {
      escape: new RegExp("[" + Q.keys(v.escape).join("") + "]", "g"),
      unescape: new RegExp("(" + Q.keys(v.unescape).join("|") + ")", "g")
    };
    Q.each(["escape", "unescape"],
        function(g) {
          Q[g] = function(t) {
            return null == t ? "" : ("" + t).replace(S[g],
              function(t) {
                return v[g][t]
              })
          }
        }),
      Q.result = function(t, g) {
        if (null != t) {
          g = t[g];
          return Q.isFunction(g) ? g.call(t) : g
        }
      },
      Q.mixin = function(e) {
        G(Q.functions(e),
          function(t) {
            var g = Q[t] = e[t];
            Q.prototype[t] = function() {
              var t = [this._wrapped];
              return i.apply(t, arguments),
                D.call(this, g.apply(Q, t))
            }
          })
      };
    var W = 0;
    Q.uniqueId = function(t) {
        var g = ++W + "";
        return t ? t + g : g
      },
      Q.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
      };
    var w = /(.)^/,
      N = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "\t": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
      },
      H = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    Q.template = function(i, t, g) {
        var e;
        g = Q.defaults({},
          g, Q.templateSettings);
        var n = new RegExp([(g.escape || w).source, (g.interpolate || w).source, (g.evaluate || w).source].join("|") + "|$", "g"),
          C = 0,
          A = "__p+='";
        i.replace(n,
            function(t, g, e, n, I) {
              return A += i.slice(C, I).replace(H,
                  function(t) {
                    return "\\" + N[t]
                  }),
                g && (A += "'+\n((__t=(" + g + "))==null?'':_.escape(__t))+\n'"),
                e && (A += "'+\n((__t=(" + e + "))==null?'':__t)+\n'"),
                n && (A += "';\n" + n + "\n__p+='"),
                C = I + t.length,
                t
            }),
          A += "';\n",
          A = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + (A = !g.variable ? "with(obj||{}){\n" + A + "}\n" : A) + "return __p;\n";
        try {
          e = new Function(g.variable || "obj", "_", A)
        } catch (t) {
          throw t.source = A,
            t
        }
        if (t) return e(t, Q);
        t = function(t) {
          return e.call(this, t, Q)
        };
        return t.source = "function(" + (g.variable || "obj") + "){\n" + A + "}",
          t
      },
      Q.chain = function(t) {
        return Q(t).chain()
      };
    var D = function(t) {
      return this._chain ? Q(t).chain() : t
    };
    Q.mixin(Q),
      G(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"],
        function(g) {
          var e = I[g];
          Q.prototype[g] = function() {
            var t = this._wrapped;
            return e.apply(t, arguments),
              "shift" != g && "splice" != g || 0 !== t.length || delete t[0],
              D.call(this, t)
          }
        }),
      G(["concat", "join", "slice"],
        function(t) {
          var g = I[t];
          Q.prototype[t] = function() {
            return D.call(this, g.apply(this._wrapped, arguments))
          }
        }),
      Q.extend(Q.prototype, {
        chain: function() {
          return this._chain = !0,
            this
        },
        value: function() {
          return this._wrapped
        }
      }),
      "function" == typeof define && define.amd && define("underscore", [],
        function() {
          return Q
        })
  }.call(this),
  function(A) {
    var t, g, e = 0,
      n = /^ui-id-\d+$/;

    function I(t, g) {
      var e, n, I = t.nodeName.toLowerCase();
      return "area" === I ? (n = (e = t.parentNode).name, !(!t.href || !n || "map" !== e.nodeName.toLowerCase()) && (!!(n = A("img[usemap=#" + n + "]")[0]) && i(n))) : (/input|select|textarea|button|object/.test(I) ? !t.disabled : "a" === I && t.href || g) && i(t)
    }

    function i(t) {
      return A.expr.filters.visible(t) && !A(t).parents().addBack().filter(function() {
        return "hidden" === A.css(this, "visibility")
      }).length
    }
    A.ui = A.ui || {},
      A.extend(A.ui, {
        version: "1.10.4",
        keyCode: {
          BACKSPACE: 8,
          COMMA: 188,
          DELETE: 46,
          DOWN: 40,
          END: 35,
          ENTER: 13,
          ESCAPE: 27,
          HOME: 36,
          LEFT: 37,
          NUMPAD_ADD: 107,
          NUMPAD_DECIMAL: 110,
          NUMPAD_DIVIDE: 111,
          NUMPAD_ENTER: 108,
          NUMPAD_MULTIPLY: 106,
          NUMPAD_SUBTRACT: 109,
          PAGE_DOWN: 34,
          PAGE_UP: 33,
          PERIOD: 190,
          RIGHT: 39,
          SPACE: 32,
          TAB: 9,
          UP: 38
        }
      }),
      A.fn.extend({
        focus: (t = A.fn.focus,
          function(g, e) {
            return "number" == typeof g ? this.each(function() {
              var t = this;
              setTimeout(function() {
                  A(t).focus(),
                    e && e.call(t)
                },
                g)
            }) : t.apply(this, arguments)
          }),
        scrollParent: function() {
          var t = (A.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
            return /(relative|absolute|fixed)/.test(A.css(this, "position")) && /(auto|scroll)/.test(A.css(this, "overflow") + A.css(this, "overflow-y") + A.css(this, "overflow-x"))
          }) : this.parents().filter(function() {
            return /(auto|scroll)/.test(A.css(this, "overflow") + A.css(this, "overflow-y") + A.css(this, "overflow-x"))
          })).eq(0);
          return /fixed/.test(this.css("position")) || !t.length ? A(document) : t
        },
        zIndex: function(t) {
          if (void 0 !== t) return this.css("zIndex", t);
          if (this.length)
            for (var g, e, n = A(this[0]); n.length && n[0] !== document;) {
              if (("absolute" === (g = n.css("position")) || "relative" === g || "fixed" === g) && (e = parseInt(n.css("zIndex"), 10), !isNaN(e) && 0 !== e)) return e;
              n = n.parent()
            }
          return 0
        },
        uniqueId: function() {
          return this.each(function() {
            this.id || (this.id = "ui-id-" + ++e)
          })
        },
        removeUniqueId: function() {
          return this.each(function() {
            n.test(this.id) && A(this).removeAttr("id")
          })
        }
      }),
      A.extend(A.expr[":"], {
        data: A.expr.createPseudo ? A.expr.createPseudo(function(g) {
          return function(t) {
            return !!A.data(t, g)
          }
        }) : function(t, g, e) {
          return !!A.data(t, e[3])
        },
        focusable: function(t) {
          return I(t, !isNaN(A.attr(t, "tabindex")))
        },
        tabbable: function(t) {
          var g = A.attr(t, "tabindex"),
            e = isNaN(g);
          return (e || 0 <= g) && I(t, !e)
        }
      }),
      A("<a>").outerWidth(1).jquery || A.each(["Width", "Height"],
        function(t, e) {
          var I = "Width" === e ? ["Left", "Right"] : ["Top", "Bottom"],
            n = e.toLowerCase(),
            i = {
              innerWidth: A.fn.innerWidth,
              innerHeight: A.fn.innerHeight,
              outerWidth: A.fn.outerWidth,
              outerHeight: A.fn.outerHeight
            };

          function C(t, g, e, n) {
            return A.each(I,
                function() {
                  g -= parseFloat(A.css(t, "padding" + this)) || 0,
                    e && (g -= parseFloat(A.css(t, "border" + this + "Width")) || 0),
                    n && (g -= parseFloat(A.css(t, "margin" + this)) || 0)
                }),
              g
          }
          A.fn["inner" + e] = function(t) {
              return void 0 === t ? i["inner" + e].call(this) : this.each(function() {
                A(this).css(n, C(this, t) + "px")
              })
            },
            A.fn["outer" + e] = function(t, g) {
              return "number" != typeof t ? i["outer" + e].call(this, t) : this.each(function() {
                A(this).css(n, C(this, t, !0, g) + "px")
              })
            }
        }),
      A.fn.addBack || (A.fn.addBack = function(t) {
        return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
      }),
      A("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (A.fn.removeData = (g = A.fn.removeData,
        function(t) {
          return arguments.length ? g.call(this, A.camelCase(t)) : g.call(this)
        })),
      A.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),
      A.support.selectstart = "onselectstart" in document.createElement("div"),
      A.fn.extend({
        disableSelection: function() {
          return this.bind((A.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection",
            function(t) {
              t.preventDefault()
            })
        },
        enableSelection: function() {
          return this.unbind(".ui-disableSelection")
        }
      }),
      A.extend(A.ui, {
        plugin: {
          add: function(t, g, e) {
            var n, I = A.ui[t].prototype;
            for (n in e) I.plugins[n] = I.plugins[n] || [],
              I.plugins[n].push([g, e[n]])
          },
          call: function(t, g, e) {
            var n, I = t.plugins[g];
            if (I && t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType)
              for (n = 0; n < I.length; n++) t.options[I[n][0]] && I[n][1].apply(t.element, e)
          }
        },
        hasScroll: function(t, g) {
          if ("hidden" === A(t).css("overflow")) return !1;
          var e = g && "left" === g ? "scrollLeft" : "scrollTop",
            g = !1;
          return 0 < t[e] || (t[e] = 1, g = 0 < t[e], t[e] = 0, g)
        }
      })
  }(jQuery),
  function(o, A) {
    var e = 0,
      a = Array.prototype.slice,
      n = o.cleanData;
    o.cleanData = function(t) {
        for (var g, e = 0; null != (g = t[e]); e++) try {
          o(g).triggerHandler("remove")
        } catch (t) {}
        n(t)
      },
      o.widget = function(t, e, g) {
        var n, I, i, C, A = {},
          a = t.split(".")[0];
        t = t.split(".")[1],
          n = a + "-" + t,
          g || (g = e, e = o.Widget),
          o.expr[":"][n.toLowerCase()] = function(t) {
            return !!o.data(t, n)
          },
          o[a] = o[a] || {},
          I = o[a][t],
          i = o[a][t] = function(t, g) {
            if (!this._createWidget) return new i(t, g);
            arguments.length && this._createWidget(t, g)
          },
          o.extend(i, I, {
            version: g.version,
            _proto: o.extend({},
              g),
            _childConstructors: []
          }),
          (C = new e).options = o.widget.extend({},
            C.options),
          o.each(g,
            function(g, n) {
              function I() {
                return e.prototype[g].apply(this, arguments)
              }

              function i(t) {
                return e.prototype[g].apply(this, t)
              }
              o.isFunction(n) ? A[g] = function() {
                var t, g = this._super,
                  e = this._superApply;
                return this._super = I,
                  this._superApply = i,
                  t = n.apply(this, arguments),
                  this._super = g,
                  this._superApply = e,
                  t
              } : A[g] = n
            }),
          i.prototype = o.widget.extend(C, {
              widgetEventPrefix: I && C.widgetEventPrefix || t
            },
            A, {
              constructor: i,
              namespace: a,
              widgetName: t,
              widgetFullName: n
            }),
          I ? (o.each(I._childConstructors,
            function(t, g) {
              var e = g.prototype;
              o.widget(e.namespace + "." + e.widgetName, i, g._proto)
            }), delete I._childConstructors) : e._childConstructors.push(i),
          o.widget.bridge(t, i)
      },
      o.widget.extend = function(t) {
        for (var g, e, n = a.call(arguments, 1), I = 0, i = n.length; I < i; I++)
          for (g in n[I]) e = n[I][g],
            n[I].hasOwnProperty(g) && e !== A && (o.isPlainObject(e) ? t[g] = o.isPlainObject(t[g]) ? o.widget.extend({},
              t[g], e) : o.widget.extend({},
              e) : t[g] = e);
        return t
      },
      o.widget.bridge = function(i, g) {
        var C = g.prototype.widgetFullName || i;
        o.fn[i] = function(e) {
          var t = "string" == typeof e,
            n = a.call(arguments, 1),
            I = this;
          return e = !t && n.length ? o.widget.extend.apply(null, [e].concat(n)) : e,
            t ? this.each(function() {
              var t, g = o.data(this, C);
              return g ? o.isFunction(g[e]) && "_" !== e.charAt(0) ? (t = g[e].apply(g, n)) !== g && t !== A ? (I = t && t.jquery ? I.pushStack(t.get()) : t, !1) : void 0 : o.error("no such method '" + e + "' for " + i + " widget instance") : o.error("cannot call methods on " + i + " prior to initialization; attempted to call method '" + e + "'")
            }) : this.each(function() {
              var t = o.data(this, C);
              t ? t.option(e || {})._init() : o.data(this, C, new g(e, this))
            }),
            I
        }
      },
      o.Widget = function() {},
      o.Widget._childConstructors = [],
      o.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
          disabled: !1,
          create: null
        },
        _createWidget: function(t, g) {
          g = o(g || this.defaultElement || this)[0],
            this.element = o(g),
            this.uuid = e++,
            this.eventNamespace = "." + this.widgetName + this.uuid,
            this.options = o.widget.extend({},
              this.options, this._getCreateOptions(), t),
            this.bindings = o(),
            this.hoverable = o(),
            this.focusable = o(),
            g !== this && (o.data(g, this.widgetFullName, this), this._on(!0, this.element, {
              remove: function(t) {
                t.target === g && this.destroy()
              }
            }), this.document = o(g.style ? g.ownerDocument : g.document || g), this.window = o(this.document[0].defaultView || this.document[0].parentWindow)),
            this._create(),
            this._trigger("create", null, this._getCreateEventData()),
            this._init()
        },
        _getCreateOptions: o.noop,
        _getCreateEventData: o.noop,
        _create: o.noop,
        _init: o.noop,
        destroy: function() {
          this._destroy(),
            this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(o.camelCase(this.widgetFullName)),
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"),
            this.bindings.unbind(this.eventNamespace),
            this.hoverable.removeClass("ui-state-hover"),
            this.focusable.removeClass("ui-state-focus")
        },
        _destroy: o.noop,
        widget: function() {
          return this.element
        },
        option: function(t, g) {
          var e, n, I, i = t;
          if (0 === arguments.length) return o.widget.extend({},
            this.options);
          if ("string" == typeof t)
            if (i = {},
              t = (e = t.split(".")).shift(), e.length) {
              for (n = i[t] = o.widget.extend({},
                  this.options[t]), I = 0; I < e.length - 1; I++) n[e[I]] = n[e[I]] || {},
                n = n[e[I]];
              if (t = e.pop(), 1 === arguments.length) return n[t] === A ? null : n[t];
              n[t] = g
            } else {
              if (1 === arguments.length) return this.options[t] === A ? null : this.options[t];
              i[t] = g
            }
          return this._setOptions(i),
            this
        },
        _setOptions: function(t) {
          for (var g in t) this._setOption(g, t[g]);
          return this
        },
        _setOption: function(t, g) {
          return this.options[t] = g,
            "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!g).attr("aria-disabled", g), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")),
            this
        },
        enable: function() {
          return this._setOption("disabled", !1)
        },
        disable: function() {
          return this._setOption("disabled", !0)
        },
        _on: function(I, i, t) {
          var C, A = this;
          "boolean" != typeof I && (t = i, i = I, I = !1),
            t ? (i = C = o(i), this.bindings = this.bindings.add(i)) : (t = i, i = this.element, C = this.widget()),
            o.each(t,
              function(t, g) {
                function e() {
                  if (I || !0 !== A.options.disabled && !o(this).hasClass("ui-state-disabled")) return ("string" == typeof g ? A[g] : g).apply(A, arguments)
                }
                "string" != typeof g && (e.guid = g.guid = g.guid || e.guid || o.guid++);
                var n = t.match(/^(\w+)\s*(.*)$/),
                  t = n[1] + A.eventNamespace,
                  n = n[2];
                n ? C.delegate(n, t, e) : i.bind(t, e)
              })
        },
        _off: function(t, g) {
          g = (g || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace,
            t.unbind(g).undelegate(g)
        },
        _delay: function(t, g) {
          var e = this;
          return setTimeout(function() {
              return ("string" == typeof t ? e[t] : t).apply(e, arguments)
            },
            g || 0)
        },
        _hoverable: function(t) {
          this.hoverable = this.hoverable.add(t),
            this._on(t, {
              mouseenter: function(t) {
                o(t.currentTarget).addClass("ui-state-hover")
              },
              mouseleave: function(t) {
                o(t.currentTarget).removeClass("ui-state-hover")
              }
            })
        },
        _focusable: function(t) {
          this.focusable = this.focusable.add(t),
            this._on(t, {
              focusin: function(t) {
                o(t.currentTarget).addClass("ui-state-focus")
              },
              focusout: function(t) {
                o(t.currentTarget).removeClass("ui-state-focus")
              }
            })
        },
        _trigger: function(t, g, e) {
          var n, I, i = this.options[t];
          if (e = e || {},
            (g = o.Event(g)).type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), g.target = this.element[0], I = g.originalEvent)
            for (n in I) n in g || (g[n] = I[n]);
          return this.element.trigger(g, e),
            !(o.isFunction(i) && !1 === i.apply(this.element[0], [g].concat(e)) || g.isDefaultPrevented())
        }
      },
      o.each({
          show: "fadeIn",
          hide: "fadeOut"
        },
        function(i, C) {
          o.Widget.prototype["_" + i] = function(g, t, e) {
            var n = (t = "string" == typeof t ? {
                effect: t
              } : t) ? !0 !== t && "number" != typeof t && t.effect || C : i,
              I = !o.isEmptyObject(t = "number" == typeof(t = t || {}) ? {
                duration: t
              } : t);
            t.complete = e,
              t.delay && g.delay(t.delay),
              I && o.effects && o.effects.effect[n] ? g[i](t) : n !== i && g[n] ? g[n](t.duration, t.easing, e) : g.queue(function(t) {
                o(this)[i](),
                  e && e.call(g[0]),
                  t()
              })
          }
        })
  }(jQuery),
  function(I) {
    var i = !1;
    I(document).mouseup(function() {
        i = !1
      }),
      I.widget("ui.mouse", {
        version: "1.10.4",
        options: {
          cancel: "input,textarea,button,select,option",
          distance: 1,
          delay: 0
        },
        _mouseInit: function() {
          var g = this;
          this.element.bind("mousedown." + this.widgetName,
              function(t) {
                return g._mouseDown(t)
              }).bind("click." + this.widgetName,
              function(t) {
                if (!0 === I.data(t.target, g.widgetName + ".preventClickEvent")) return I.removeData(t.target, g.widgetName + ".preventClickEvent"),
                  t.stopImmediatePropagation(),
                  !1
              }),
            this.started = !1
        },
        _mouseDestroy: function() {
          this.element.unbind("." + this.widgetName),
            this._mouseMoveDelegate && I(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(t) {
          if (!i) {
            this._mouseStarted && this._mouseUp(t),
              this._mouseDownEvent = t;
            var g = this,
              e = 1 === t.which,
              n = !("string" != typeof this.options.cancel || !t.target.nodeName) && I(t.target).closest(this.options.cancel).length;
            return e && !n && this._mouseCapture(t) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                g.mouseDelayMet = !0
              },
              this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(t), !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === I.data(t.target, this.widgetName + ".preventClickEvent") && I.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(t) {
                return g._mouseMove(t)
              },
              this._mouseUpDelegate = function(t) {
                return g._mouseUp(t)
              },
              I(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), i = !0)) : !0
          }
        },
        _mouseMove: function(t) {
          return I.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, t), this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
        },
        _mouseUp: function(t) {
          return I(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate),
            this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && I.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)),
            !1
        },
        _mouseDistanceMet: function(t) {
          return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
          return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
          return !0
        }
      })
  }(jQuery),
  function(Q) {
    Q.ui = Q.ui || {};
    var n, G = Math.max,
      F = Math.abs,
      f = Math.round,
      I = /left|center|right/,
      i = /top|center|bottom/,
      C = /[\+\-]\d+(\.[\d]+)?%?/,
      A = /^\w+/,
      a = /%$/,
      e = Q.fn.position;

    function X(t, g, e) {
      return [parseFloat(t[0]) * (a.test(t[0]) ? g / 100 : 1), parseFloat(t[1]) * (a.test(t[1]) ? e / 100 : 1)]
    }

    function x(t, g) {
      return parseInt(Q.css(t, g), 10) || 0
    }
    Q.position = {
        scrollbarWidth: function() {
          if (void 0 !== n) return n;
          var t, g = Q("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
            e = g.children()[0];
          return Q("body").append(g),
            t = e.offsetWidth,
            g.css("overflow", "scroll"),
            t === (e = e.offsetWidth) && (e = g[0].clientWidth),
            g.remove(),
            n = t - e
        },
        getScrollInfo: function(t) {
          var g = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
            e = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
            g = "scroll" === g || "auto" === g && t.width < t.element[0].scrollWidth;
          return {
            width: "scroll" === e || "auto" === e && t.height < t.element[0].scrollHeight ? Q.position.scrollbarWidth() : 0,
            height: g ? Q.position.scrollbarWidth() : 0
          }
        },
        getWithinInfo: function(t) {
          var g = Q(t || window),
            t = Q.isWindow(g[0]);
          return {
            element: g,
            isWindow: t,
            isDocument: !!g[0] && 9 === g[0].nodeType,
            offset: g.offset() || {
              left: 0,
              top: 0
            },
            scrollLeft: g.scrollLeft(),
            scrollTop: g.scrollTop(),
            width: t ? g.width() : g.outerWidth(),
            height: t ? g.height() : g.outerHeight()
          }
        }
      },
      Q.fn.position = function(r) {
        if (!r || !r.of) return e.apply(this, arguments);
        r = Q.extend({},
          r);
        var l, c, u, d, h, t, B = Q(r.of),
          b = Q.position.getWithinInfo(r.within),
          p = Q.position.getScrollInfo(b),
          m = (r.collision || "flip").split(" "),
          y = {},
          g = 9 === (t = (g = B)[0]).nodeType ? {
            width: g.width(),
            height: g.height(),
            offset: {
              top: 0,
              left: 0
            }
          } : Q.isWindow(t) ? {
            width: g.width(),
            height: g.height(),
            offset: {
              top: g.scrollTop(),
              left: g.scrollLeft()
            }
          } : t.preventDefault ? {
            width: 0,
            height: 0,
            offset: {
              top: t.pageY,
              left: t.pageX
            }
          } : {
            width: g.outerWidth(),
            height: g.outerHeight(),
            offset: g.offset()
          };
        return B[0].preventDefault && (r.at = "left top"),
          c = g.width,
          u = g.height,
          h = Q.extend({},
            d = g.offset),
          Q.each(["my", "at"],
            function() {
              var t, g, e = (r[this] || "").split(" ");
              (e = 1 === e.length ? I.test(e[0]) ? e.concat(["center"]) : i.test(e[0]) ? ["center"].concat(e) : ["center", "center"] : e)[0] = I.test(e[0]) ? e[0] : "center",
                e[1] = i.test(e[1]) ? e[1] : "center",
                t = C.exec(e[0]),
                g = C.exec(e[1]),
                y[this] = [t ? t[0] : 0, g ? g[0] : 0],
                r[this] = [A.exec(e[0])[0], A.exec(e[1])[0]]
            }),
          1 === m.length && (m[1] = m[0]),
          "right" === r.at[0] ? h.left += c : "center" === r.at[0] && (h.left += c / 2),
          "bottom" === r.at[1] ? h.top += u : "center" === r.at[1] && (h.top += u / 2),
          l = X(y.at, c, u),
          h.left += l[0],
          h.top += l[1],
          this.each(function() {
            var e, t, C = Q(this),
              A = C.outerWidth(),
              a = C.outerHeight(),
              g = x(this, "marginLeft"),
              n = x(this, "marginTop"),
              I = A + g + x(this, "marginRight") + p.width,
              i = a + n + x(this, "marginBottom") + p.height,
              o = Q.extend({},
                h),
              s = X(y.my, C.outerWidth(), C.outerHeight());
            "right" === r.my[0] ? o.left -= A : "center" === r.my[0] && (o.left -= A / 2),
              "bottom" === r.my[1] ? o.top -= a : "center" === r.my[1] && (o.top -= a / 2),
              o.left += s[0],
              o.top += s[1],
              Q.support.offsetFractions || (o.left = f(o.left), o.top = f(o.top)),
              e = {
                marginLeft: g,
                marginTop: n
              },
              Q.each(["left", "top"],
                function(t, g) {
                  Q.ui.position[m[t]] && Q.ui.position[m[t]][g](o, {
                    targetWidth: c,
                    targetHeight: u,
                    elemWidth: A,
                    elemHeight: a,
                    collisionPosition: e,
                    collisionWidth: I,
                    collisionHeight: i,
                    offset: [l[0] + s[0], l[1] + s[1]],
                    my: r.my,
                    at: r.at,
                    within: b,
                    elem: C
                  })
                }),
              r.using && (t = function(t) {
                var g = d.left - o.left,
                  e = g + c - A,
                  n = d.top - o.top,
                  I = n + u - a,
                  i = {
                    target: {
                      element: B,
                      left: d.left,
                      top: d.top,
                      width: c,
                      height: u
                    },
                    element: {
                      element: C,
                      left: o.left,
                      top: o.top,
                      width: A,
                      height: a
                    },
                    horizontal: e < 0 ? "left" : 0 < g ? "right" : "center",
                    vertical: I < 0 ? "top" : 0 < n ? "bottom" : "middle"
                  };
                c < A && F(g + e) < c && (i.horizontal = "center"),
                  u < a && F(n + I) < u && (i.vertical = "middle"),
                  G(F(g), F(e)) > G(F(n), F(I)) ? i.important = "horizontal" : i.important = "vertical",
                  r.using.call(this, t, i)
              }),
              C.offset(Q.extend(o, {
                using: t
              }))
          })
      },
      Q.ui.position = {
        fit: {
          left: function(t, g) {
            var e = g.within,
              n = e.isWindow ? e.scrollLeft : e.offset.left,
              I = e.width,
              i = t.left - g.collisionPosition.marginLeft,
              C = n - i,
              A = i + g.collisionWidth - I - n;
            g.collisionWidth > I ? 0 < C && A <= 0 ? (e = t.left + C + g.collisionWidth - I - n, t.left += C - e) : t.left = !(0 < A && C <= 0) && A < C ? n + I - g.collisionWidth : n : 0 < C ? t.left += C : 0 < A ? t.left -= A : t.left = G(t.left - i, t.left)
          },
          top: function(t, g) {
            var e = g.within,
              n = e.isWindow ? e.scrollTop : e.offset.top,
              I = g.within.height,
              i = t.top - g.collisionPosition.marginTop,
              C = n - i,
              A = i + g.collisionHeight - I - n;
            g.collisionHeight > I ? 0 < C && A <= 0 ? (e = t.top + C + g.collisionHeight - I - n, t.top += C - e) : t.top = !(0 < A && C <= 0) && A < C ? n + I - g.collisionHeight : n : 0 < C ? t.top += C : 0 < A ? t.top -= A : t.top = G(t.top - i, t.top)
          }
        },
        flip: {
          left: function(t, g) {
            var e = g.within,
              n = e.offset.left + e.scrollLeft,
              I = e.width,
              i = e.isWindow ? e.scrollLeft : e.offset.left,
              C = t.left - g.collisionPosition.marginLeft,
              A = C - i,
              a = C + g.collisionWidth - I - i,
              o = "left" === g.my[0] ? -g.elemWidth : "right" === g.my[0] ? g.elemWidth : 0,
              e = "left" === g.at[0] ? g.targetWidth : "right" === g.at[0] ? -g.targetWidth : 0,
              C = -2 * g.offset[0];
            A < 0 ? ((n = t.left + o + e + C + g.collisionWidth - I - n) < 0 || n < F(A)) && (t.left += o + e + C) : 0 < a && (0 < (i = t.left - g.collisionPosition.marginLeft + o + e + C - i) || F(i) < a) && (t.left += o + e + C)
          },
          top: function(t, g) {
            var e = g.within,
              n = e.offset.top + e.scrollTop,
              I = e.height,
              i = e.isWindow ? e.scrollTop : e.offset.top,
              C = t.top - g.collisionPosition.marginTop,
              A = C - i,
              a = C + g.collisionHeight - I - i,
              o = "top" === g.my[1] ? -g.elemHeight : "bottom" === g.my[1] ? g.elemHeight : 0,
              e = "top" === g.at[1] ? g.targetHeight : "bottom" === g.at[1] ? -g.targetHeight : 0,
              C = -2 * g.offset[1];
            A < 0 ? (n = t.top + o + e + C + g.collisionHeight - I - n, t.top + o + e + C > A && (n < 0 || n < F(A)) && (t.top += o + e + C)) : 0 < a && (i = t.top - g.collisionPosition.marginTop + o + e + C - i, t.top + o + e + C > a && (0 < i || F(i) < a) && (t.top += o + e + C))
          }
        },
        flipfit: {
          left: function() {
            Q.ui.position.flip.left.apply(this, arguments),
              Q.ui.position.fit.left.apply(this, arguments)
          },
          top: function() {
            Q.ui.position.flip.top.apply(this, arguments),
              Q.ui.position.fit.top.apply(this, arguments)
          }
        }
      }
  }(jQuery),
  function(i) {
    function I() {
      var t = i(this);
      setTimeout(function() {
          t.find(":ui-button").button("refresh")
        },
        1)
    }

    function C(t) {
      var g = t.name,
        e = t.form,
        n = i([]);
      return g && (g = g.replace(/'/g, "\\'"), n = e ? i(e).find("[name='" + g + "']") : i("[name='" + g + "']", t.ownerDocument).filter(function() {
          return !this.form
        })),
        n
    }
    var A, a = "ui-button ui-widget ui-state-default ui-corner-all",
      o = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only";
    i.widget("ui.button", {
        version: "1.10.4",
        defaultElement: "<button>",
        options: {
          disabled: null,
          text: !0,
          label: null,
          icons: {
            primary: null,
            secondary: null
          }
        },
        _create: function() {
          this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, I),
            "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled),
            this._determineButtonType(),
            this.hasTitle = !!this.buttonElement.attr("title");
          var g = this,
            e = this.options,
            t = "checkbox" === this.type || "radio" === this.type,
            n = t ? "" : "ui-state-active";
          null === e.label && (e.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()),
            this._hoverable(this.buttonElement),
            this.buttonElement.addClass(a).attr("role", "button").bind("mouseenter" + this.eventNamespace,
              function() {
                e.disabled || this === A && i(this).addClass("ui-state-active")
              }).bind("mouseleave" + this.eventNamespace,
              function() {
                e.disabled || i(this).removeClass(n)
              }).bind("click" + this.eventNamespace,
              function(t) {
                e.disabled && (t.preventDefault(), t.stopImmediatePropagation())
              }),
            this._on({
              focus: function() {
                this.buttonElement.addClass("ui-state-focus")
              },
              blur: function() {
                this.buttonElement.removeClass("ui-state-focus")
              }
            }),
            t && this.element.bind("change" + this.eventNamespace,
              function() {
                g.refresh()
              }),
            "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace,
              function() {
                if (e.disabled) return !1
              }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace,
              function() {
                if (e.disabled) return !1;
                i(this).addClass("ui-state-active"),
                  g.buttonElement.attr("aria-pressed", "true");
                var t = g.element[0];
                C(t).not(t).map(function() {
                  return i(this).button("widget")[0]
                }).removeClass("ui-state-active").attr("aria-pressed", "false")
              }) : (this.buttonElement.bind("mousedown" + this.eventNamespace,
              function() {
                return !e.disabled && (i(this).addClass("ui-state-active"), A = this, void g.document.one("mouseup",
                  function() {
                    A = null
                  }))
              }).bind("mouseup" + this.eventNamespace,
              function() {
                return !e.disabled && void i(this).removeClass("ui-state-active")
              }).bind("keydown" + this.eventNamespace,
              function(t) {
                return !e.disabled && void(t.keyCode !== i.ui.keyCode.SPACE && t.keyCode !== i.ui.keyCode.ENTER || i(this).addClass("ui-state-active"))
              }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace,
              function() {
                i(this).removeClass("ui-state-active")
              }), this.buttonElement.is("a") && this.buttonElement.keyup(function(t) {
              t.keyCode === i.ui.keyCode.SPACE && i(this).click()
            })),
            this._setOption("disabled", e.disabled),
            this._resetButton()
        },
        _determineButtonType: function() {
          var t, g;
          this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button",
            "checkbox" === this.type || "radio" === this.type ? (t = this.element.parents().last(), g = "label[for='" + this.element.attr("id") + "']", this.buttonElement = t.find(g), this.buttonElement.length || (t = (t.length ? t : this.element).siblings(), this.buttonElement = t.filter(g), this.buttonElement.length || (this.buttonElement = t.find(g))), this.element.addClass("ui-helper-hidden-accessible"), (g = this.element.is(":checked")) && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", g)) : this.buttonElement = this.element
        },
        widget: function() {
          return this.buttonElement
        },
        _destroy: function() {
          this.element.removeClass("ui-helper-hidden-accessible"),
            this.buttonElement.removeClass(a + " ui-state-active " + o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),
            this.hasTitle || this.buttonElement.removeAttr("title")
        },
        _setOption: function(t, g) {
          if (this._super(t, g), "disabled" === t) return this.element.prop("disabled", !!g),
            void(g && this.buttonElement.removeClass("ui-state-focus"));
          this._resetButton()
        },
        refresh: function() {
          var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
          t !== this.options.disabled && this._setOption("disabled", t),
            "radio" === this.type ? C(this.element[0]).each(function() {
              i(this).is(":checked") ? i(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : i(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
        },
        _resetButton: function() {
          var t, g, e, n, I;
          "input" !== this.type ? (t = this.buttonElement.removeClass(o), g = i("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(), n = (e = this.options.icons).primary && e.secondary, I = [], e.primary || e.secondary ? (this.options.text && I.push("ui-button-text-icon" + (n ? "s" : e.primary ? "-primary" : "-secondary")), e.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + e.primary + "'></span>"), e.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + e.secondary + "'></span>"), this.options.text || (I.push(n ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || t.attr("title", i.trim(g)))) : I.push("ui-button-text-only"), t.addClass(I.join(" "))) : this.options.label && this.element.val(this.options.label)
        }
      }),
      i.widget("ui.buttonset", {
        version: "1.10.4",
        options: {
          items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        _create: function() {
          this.element.addClass("ui-buttonset")
        },
        _init: function() {
          this.refresh()
        },
        _setOption: function(t, g) {
          "disabled" === t && this.buttons.button("option", t, g),
            this._super(t, g)
        },
        refresh: function() {
          var t = "rtl" === this.element.css("direction");
          this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
            return i(this).button("widget")[0]
          }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end()
        },
        _destroy: function() {
          this.element.removeClass("ui-buttonset"),
            this.buttons.map(function() {
              return i(this).button("widget")[0]
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }
      })
  }(jQuery),
  function(s) {
    s.widget("ui.slider", s.ui.mouse, {
      version: "1.10.4",
      widgetEventPrefix: "slide",
      options: {
        animate: !1,
        distance: 0,
        max: 100,
        min: 0,
        orientation: "horizontal",
        range: !1,
        step: 1,
        value: 0,
        values: null,
        change: null,
        slide: null,
        start: null,
        stop: null
      },
      _create: function() {
        this._keySliding = !1,
          this._mouseSliding = !1,
          this._animateOff = !0,
          this._handleIndex = null,
          this._detectOrientation(),
          this._mouseInit(),
          this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"),
          this._refresh(),
          this._setOption("disabled", this.options.disabled),
          this._animateOff = !1
      },
      _refresh: function() {
        this._createRange(),
          this._createHandles(),
          this._setupEvents(),
          this._refreshValue()
      },
      _createHandles: function() {
        var t, g = this.options,
          e = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
          n = [],
          I = g.values && g.values.length || 1;
        for (e.length > I && (e.slice(I).remove(), e = e.slice(0, I)), t = e.length; t < I; t++) n.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
        this.handles = e.add(s(n.join("")).appendTo(this.element)),
          this.handle = this.handles.eq(0),
          this.handles.each(function(t) {
            s(this).data("ui-slider-handle-index", t)
          })
      },
      _createRange: function() {
        var t = this.options,
          g = "";
        t.range ? (!0 === t.range && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : s.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
          left: "",
          bottom: ""
        }) : (this.range = s("<div></div>").appendTo(this.element), g = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(g + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), this.range = null)
      },
      _setupEvents: function() {
        var t = this.handles.add(this.range).filter("a");
        this._off(t),
          this._on(t, this._handleEvents),
          this._hoverable(t),
          this._focusable(t)
      },
      _destroy: function() {
        this.handles.remove(),
          this.range && this.range.remove(),
          this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),
          this._mouseDestroy()
      },
      _mouseCapture: function(t) {
        var e, n, I, i, g, C, A = this,
          a = this.options;
        return !a.disabled && (this.elementSize = {
            width: this.element.outerWidth(),
            height: this.element.outerHeight()
          },
          this.elementOffset = this.element.offset(), C = {
            x: t.pageX,
            y: t.pageY
          },
          e = this._normValueFromMouse(C), n = this._valueMax() - this._valueMin() + 1, this.handles.each(function(t) {
            var g = Math.abs(e - A.values(t));
            (g < n || n === g && (t === A._lastChangedValue || A.values(t) === a.min)) && (n = g, I = s(this), i = t)
          }), !1 !== this._start(t, i) && (this._mouseSliding = !0, this._handleIndex = i, I.addClass("ui-state-active").focus(), g = I.offset(), C = !s(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = C ? {
              left: 0,
              top: 0
            } : {
              left: t.pageX - g.left - I.width() / 2,
              top: t.pageY - g.top - I.height() / 2 - (parseInt(I.css("borderTopWidth"), 10) || 0) - (parseInt(I.css("borderBottomWidth"), 10) || 0) + (parseInt(I.css("marginTop"), 10) || 0)
            },
            this.handles.hasClass("ui-state-hover") || this._slide(t, i, e), this._animateOff = !0))
      },
      _mouseStart: function() {
        return !0
      },
      _mouseDrag: function(t) {
        var g = {
            x: t.pageX,
            y: t.pageY
          },
          g = this._normValueFromMouse(g);
        return this._slide(t, this._handleIndex, g),
          !1
      },
      _mouseStop: function(t) {
        return this.handles.removeClass("ui-state-active"),
          this._mouseSliding = !1,
          this._stop(t, this._handleIndex),
          this._change(t, this._handleIndex),
          this._handleIndex = null,
          this._clickOffset = null,
          this._animateOff = !1
      },
      _detectOrientation: function() {
        this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
      },
      _normValueFromMouse: function(t) {
        var g, t = "horizontal" === this.orientation ? (g = this.elementSize.width, t.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (g = this.elementSize.height, t.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)),
          t = t / g;
        return (t = 1 < t ? 1 : t) < 0 && (t = 0),
          "vertical" === this.orientation && (t = 1 - t),
          g = this._valueMax() - this._valueMin(),
          g = this._valueMin() + t * g,
          this._trimAlignValue(g)
      },
      _start: function(t, g) {
        var e = {
          handle: this.handles[g],
          value: this.value()
        };
        return this.options.values && this.options.values.length && (e.value = this.values(g), e.values = this.values()),
          this._trigger("start", t, e)
      },
      _slide: function(t, g, e) {
        var n, I;
        this.options.values && this.options.values.length ? (n = this.values(g ? 0 : 1), (e = 2 === this.options.values.length && !0 === this.options.range && (0 === g && n < e || 1 === g && e < n) ? n : e) !== this.values(g) && ((I = this.values())[g] = e, I = this._trigger("slide", t, {
          handle: this.handles[g],
          value: e,
          values: I
        }), n = this.values(g ? 0 : 1), !1 !== I && this.values(g, e))) : e !== this.value() && !1 !== (I = this._trigger("slide", t, {
          handle: this.handles[g],
          value: e
        })) && this.value(e)
      },
      _stop: function(t, g) {
        var e = {
          handle: this.handles[g],
          value: this.value()
        };
        this.options.values && this.options.values.length && (e.value = this.values(g), e.values = this.values()),
          this._trigger("stop", t, e)
      },
      _change: function(t, g) {
        var e;
        this._keySliding || this._mouseSliding || (e = {
            handle: this.handles[g],
            value: this.value()
          },
          this.options.values && this.options.values.length && (e.value = this.values(g), e.values = this.values()), this._lastChangedValue = g, this._trigger("change", t, e))
      },
      value: function(t) {
        return arguments.length ? (this.options.value = this._trimAlignValue(t), this._refreshValue(), void this._change(null, 0)) : this._value()
      },
      values: function(t, g) {
        var e, n, I;
        if (1 < arguments.length) return this.options.values[t] = this._trimAlignValue(g),
          this._refreshValue(),
          void this._change(null, t);
        if (!arguments.length) return this._values();
        if (!s.isArray(t)) return this.options.values && this.options.values.length ? this._values(t) : this.value();
        for (e = this.options.values, n = t, I = 0; I < e.length; I += 1) e[I] = this._trimAlignValue(n[I]),
          this._change(null, I);
        this._refreshValue()
      },
      _setOption: function(t, g) {
        var e, n = 0;
        switch ("range" === t && !0 === this.options.range && ("min" === g ? (this.options.value = this._values(0), this.options.values = null) : "max" === g && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), s.isArray(this.options.values) && (n = this.options.values.length), s.Widget.prototype._setOption.apply(this, arguments), t) {
          case "orientation":
            this._detectOrientation(),
              this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation),
              this._refreshValue();
            break;
          case "value":
            this._animateOff = !0,
              this._refreshValue(),
              this._change(null, 0),
              this._animateOff = !1;
            break;
          case "values":
            for (this._animateOff = !0, this._refreshValue(), e = 0; e < n; e += 1) this._change(null, e);
            this._animateOff = !1;
            break;
          case "min":
          case "max":
            this._animateOff = !0,
              this._refreshValue(),
              this._animateOff = !1;
            break;
          case "range":
            this._animateOff = !0,
              this._refresh(),
              this._animateOff = !1
        }
      },
      _value: function() {
        var t = this.options.value;
        return t = this._trimAlignValue(t)
      },
      _values: function(t) {
        var g, e, n;
        if (arguments.length) return g = this.options.values[t],
          this._trimAlignValue(g);
        if (this.options.values && this.options.values.length) {
          for (e = this.options.values.slice(), n = 0; n < e.length; n += 1) e[n] = this._trimAlignValue(e[n]);
          return e
        }
        return []
      },
      _trimAlignValue: function(t) {
        if (t <= this._valueMin()) return this._valueMin();
        if (t >= this._valueMax()) return this._valueMax();
        var g = 0 < this.options.step ? this.options.step : 1,
          e = (t - this._valueMin()) % g,
          t = t - e;
        return 2 * Math.abs(e) >= g && (t += 0 < e ? g : -g),
          parseFloat(t.toFixed(5))
      },
      _valueMin: function() {
        return this.options.min
      },
      _valueMax: function() {
        return this.options.max
      },
      _refreshValue: function() {
        var g, e, t, n, I, i = this.options.range,
          C = this.options,
          A = this,
          a = !this._animateOff && C.animate,
          o = {};
        this.options.values && this.options.values.length ? this.handles.each(function(t) {
          e = (A.values(t) - A._valueMin()) / (A._valueMax() - A._valueMin()) * 100,
            o["horizontal" === A.orientation ? "left" : "bottom"] = e + "%",
            s(this).stop(1, 1)[a ? "animate" : "css"](o, C.animate),
            !0 === A.options.range && ("horizontal" === A.orientation ? (0 === t && A.range.stop(1, 1)[a ? "animate" : "css"]({
                left: e + "%"
              },
              C.animate), 1 === t && A.range[a ? "animate" : "css"]({
              width: e - g + "%"
            }, {
              queue: !1,
              duration: C.animate
            })) : (0 === t && A.range.stop(1, 1)[a ? "animate" : "css"]({
                bottom: e + "%"
              },
              C.animate), 1 === t && A.range[a ? "animate" : "css"]({
              height: e - g + "%"
            }, {
              queue: !1,
              duration: C.animate
            }))),
            g = e
        }) : (t = this.value(), n = this._valueMin(), I = this._valueMax(), e = I !== n ? (t - n) / (I - n) * 100 : 0, o["horizontal" === this.orientation ? "left" : "bottom"] = e + "%", this.handle.stop(1, 1)[a ? "animate" : "css"](o, C.animate), "min" === i && "horizontal" === this.orientation && this.range.stop(1, 1)[a ? "animate" : "css"]({
            width: e + "%"
          },
          C.animate), "max" === i && "horizontal" === this.orientation && this.range[a ? "animate" : "css"]({
          width: 100 - e + "%"
        }, {
          queue: !1,
          duration: C.animate
        }), "min" === i && "vertical" === this.orientation && this.range.stop(1, 1)[a ? "animate" : "css"]({
            height: e + "%"
          },
          C.animate), "max" === i && "vertical" === this.orientation && this.range[a ? "animate" : "css"]({
          height: 100 - e + "%"
        }, {
          queue: !1,
          duration: C.animate
        }))
      },
      _handleEvents: {
        keydown: function(t) {
          var g, e, n, I = s(t.target).data("ui-slider-handle-index");
          switch (t.keyCode) {
            case s.ui.keyCode.HOME:
            case s.ui.keyCode.END:
            case s.ui.keyCode.PAGE_UP:
            case s.ui.keyCode.PAGE_DOWN:
            case s.ui.keyCode.UP:
            case s.ui.keyCode.RIGHT:
            case s.ui.keyCode.DOWN:
            case s.ui.keyCode.LEFT:
              if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, s(t.target).addClass("ui-state-active"), !1 === this._start(t, I))) return
          }
          switch (n = this.options.step, g = e = this.options.values && this.options.values.length ? this.values(I) : this.value(), t.keyCode) {
            case s.ui.keyCode.HOME:
              e = this._valueMin();
              break;
            case s.ui.keyCode.END:
              e = this._valueMax();
              break;
            case s.ui.keyCode.PAGE_UP:
              e = this._trimAlignValue(g + (this._valueMax() - this._valueMin()) / 5);
              break;
            case s.ui.keyCode.PAGE_DOWN:
              e = this._trimAlignValue(g - (this._valueMax() - this._valueMin()) / 5);
              break;
            case s.ui.keyCode.UP:
            case s.ui.keyCode.RIGHT:
              if (g === this._valueMax()) return;
              e = this._trimAlignValue(g + n);
              break;
            case s.ui.keyCode.DOWN:
            case s.ui.keyCode.LEFT:
              if (g === this._valueMin()) return;
              e = this._trimAlignValue(g - n)
          }
          this._slide(t, I, e)
        },
        click: function(t) {
          t.preventDefault()
        },
        keyup: function(t) {
          var g = s(t.target).data("ui-slider-handle-index");
          this._keySliding && (this._keySliding = !1, this._stop(t, g), this._change(t, g), s(t.target).removeClass("ui-state-active"))
        }
      }
    })
  }(jQuery),
  function(A) {
    var s, r, a, l, t, c, u, d, C, g, h, i, I, o, B, b, e, n, p, m, y = "ui-effects-";

    function Q(t, g, e) {
      var n = d[g.type] || {};
      return null == t ? e || !g.def ? null : g.def : (t = n.floor ? ~~t : parseFloat(t), isNaN(t) ? g.def : n.mod ? (t + n.mod) % n.mod : t < 0 ? 0 : n.max < t ? n.max : t)
    }

    function G(n) {
      var I = c(),
        i = I._rgba = [];
      return n = n.toLowerCase(),
        h(t,
          function(t, g) {
            var e = g.re.exec(n),
              e = e && g.parse(e),
              g = g.space || "rgba";
            if (e) return e = I[g](e),
              I[u[g].cache] = e[u[g].cache],
              i = I._rgba = e._rgba,
              !1
          }),
        i.length ? ("0,0,0,0" === i.join() && s.extend(i, a.transparent), I) : a[n]
    }

    function F(t, g, e) {
      return 6 * (e = (e + 1) % 1) < 1 ? t + (g - t) * e * 6 : 2 * e < 1 ? g : 3 * e < 2 ? t + (g - t) * (2 / 3 - e) * 6 : t
    }

    function f(t) {
      var g, e, n = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
        I = {};
      if (n && n.length && n[0] && n[n[0]])
        for (e = n.length; e--;) "string" == typeof n[g = n[e]] && (I[A.camelCase(g)] = n[g]);
      else
        for (g in n) "string" == typeof n[g] && (I[g] = n[g]);
      return I
    }

    function X(t, g, e, n) {
      return t = {
          effect: t = A.isPlainObject(t) ? (g = t).effect : t
        },
        A.isFunction(g = null == g ? {} : g) && (n = g, e = null, g = {}),
        "number" != typeof g && !A.fx.speeds[g] || (n = e, e = g, g = {}),
        A.isFunction(e) && (n = e, e = null),
        g && A.extend(t, g),
        e = e || g.duration,
        t.duration = A.fx.off ? 0 : "number" == typeof e ? e : e in A.fx.speeds ? A.fx.speeds[e] : A.fx.speeds._default,
        t.complete = n || g.complete,
        t
    }

    function x(t) {
      return !t || "number" == typeof t || A.fx.speeds[t] || ("string" == typeof t && !A.effects.effect[t] || (A.isFunction(t) || "object" == typeof t && !t.effect))
    }
    A.effects = {
        effect: {}
      },
      s = jQuery,
      l = /^([\-+])=\s*(\d+\.?\d*)/,
      t = [{
          re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
          parse: function(t) {
            return [t[1], t[2], t[3], t[4]]
          }
        },
        {
          re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
          parse: function(t) {
            return [2.55 * t[1], 2.55 * t[2], 2.55 * t[3], t[4]]
          }
        },
        {
          re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
          parse: function(t) {
            return [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)]
          }
        },
        {
          re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
          parse: function(t) {
            return [parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16)]
          }
        },
        {
          re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
          space: "hsla",
          parse: function(t) {
            return [t[1], t[2] / 100, t[3] / 100, t[4]]
          }
        }
      ],
      c = s.Color = function(t, g, e, n) {
        return new s.Color.fn.parse(t, g, e, n)
      },
      u = {
        rgba: {
          props: {
            red: {
              idx: 0,
              type: "byte"
            },
            green: {
              idx: 1,
              type: "byte"
            },
            blue: {
              idx: 2,
              type: "byte"
            }
          }
        },
        hsla: {
          props: {
            hue: {
              idx: 0,
              type: "degrees"
            },
            saturation: {
              idx: 1,
              type: "percent"
            },
            lightness: {
              idx: 2,
              type: "percent"
            }
          }
        }
      },
      d = {
        byte: {
          floor: !0,
          max: 255
        },
        percent: {
          max: 1
        },
        degrees: {
          mod: 360,
          floor: !0
        }
      },
      C = c.support = {},
      g = s("<p>")[0],
      h = s.each,
      g.style.cssText = "background-color:rgba(1,1,1,.5)",
      C.rgba = -1 < g.style.backgroundColor.indexOf("rgba"),
      h(u,
        function(t, g) {
          g.cache = "_" + t,
            g.props.alpha = {
              idx: 3,
              type: "percent",
              def: 1
            }
        }),
      (c.fn = s.extend(c.prototype, {
        parse: function(I, t, g, e) {
          if (I === r) return this._rgba = [null, null, null, null],
            this;
          (I.jquery || I.nodeType) && (I = s(I).css(t), t = r);
          var i = this,
            n = s.type(I),
            C = this._rgba = [];
          return t !== r && (I = [I, t, g, e], n = "array"),
            "string" === n ? this.parse(G(I) || a._default) : "array" === n ? (h(u.rgba.props,
              function(t, g) {
                C[g.idx] = Q(I[g.idx], g)
              }), this) : "object" === n ? (h(u, I instanceof c ?
              function(t, g) {
                I[g.cache] && (i[g.cache] = I[g.cache].slice())
              } : function(t, e) {
                var n = e.cache;
                h(e.props,
                    function(t, g) {
                      if (!i[n] && e.to) {
                        if ("alpha" === t || null == I[t]) return;
                        i[n] = e.to(i._rgba)
                      }
                      i[n][g.idx] = Q(I[t], g, !0)
                    }),
                  i[n] && s.inArray(null, i[n].slice(0, 3)) < 0 && (i[n][3] = 1, e.from && (i._rgba = e.from(i[n])))
              }), this) : void 0
        },
        is: function(t) {
          var I = c(t),
            i = !0,
            C = this;
          return h(u,
              function(t, g) {
                var e, n = I[g.cache];
                return n && (e = C[g.cache] || g.to && g.to(C._rgba) || [], h(g.props,
                    function(t, g) {
                      if (null != n[g.idx]) return i = n[g.idx] === e[g.idx]
                    })),
                  i
              }),
            i
        },
        _space: function() {
          var e = [],
            n = this;
          return h(u,
              function(t, g) {
                n[g.cache] && e.push(t)
              }),
            e.pop()
        },
        transition: function(t, C) {
          var g = (o = c(t))._space(),
            e = u[g],
            t = 0 === this.alpha() ? c("transparent") : this,
            A = t[e.cache] || e.to(t._rgba),
            a = A.slice(),
            o = o[e.cache];
          return h(e.props,
              function(t, g) {
                var e = g.idx,
                  n = A[e],
                  I = o[e],
                  i = d[g.type] || {};
                null !== I && (null === n ? a[e] = I : (i.mod && (I - n > i.mod / 2 ? n += i.mod : n - I > i.mod / 2 && (n -= i.mod)), a[e] = Q((I - n) * C + n, g)))
              }),
            this[g](a)
        },
        blend: function(t) {
          if (1 === this._rgba[3]) return this;
          var g = this._rgba.slice(),
            e = g.pop(),
            n = c(t)._rgba;
          return c(s.map(g,
            function(t, g) {
              return (1 - e) * n[g] + e * t
            }))
        },
        toRgbaString: function() {
          var t = "rgba(",
            g = s.map(this._rgba,
              function(t, g) {
                return null == t ? 2 < g ? 1 : 0 : t
              });
          return 1 === g[3] && (g.pop(), t = "rgb("),
            t + g.join() + ")"
        },
        toHslaString: function() {
          var t = "hsla(",
            g = s.map(this.hsla(),
              function(t, g) {
                return null == t && (t = 2 < g ? 1 : 0),
                  t = g && g < 3 ? Math.round(100 * t) + "%" : t
              });
          return 1 === g[3] && (g.pop(), t = "hsl("),
            t + g.join() + ")"
        },
        toHexString: function(t) {
          var g = this._rgba.slice(),
            e = g.pop();
          return t && g.push(~~(255 * e)),
            "#" + s.map(g,
              function(t) {
                return 1 === (t = (t || 0).toString(16)).length ? "0" + t : t
              }).join("")
        },
        toString: function() {
          return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
        }
      })).parse.prototype = c.fn,
      u.hsla.to = function(t) {
        if (null == t[0] || null == t[1] || null == t[2]) return [null, null, null, t[3]];
        var g = t[0] / 255,
          e = t[1] / 255,
          n = t[2] / 255,
          I = t[3],
          i = Math.max(g, e, n),
          C = Math.min(g, e, n),
          A = i - C,
          a = i + C,
          t = .5 * a,
          e = C === i ? 0 : g === i ? 60 * (e - n) / A + 360 : e === i ? 60 * (n - g) / A + 120 : 60 * (g - e) / A + 240,
          a = 0 == A ? 0 : t <= .5 ? A / a : A / (2 - a);
        return [Math.round(e) % 360, a, t, null == I ? 1 : I]
      },
      u.hsla.from = function(t) {
        if (null == t[0] || null == t[1] || null == t[2]) return [null, null, null, t[3]];
        var g = t[0] / 360,
          e = t[1],
          n = t[2],
          t = t[3],
          e = n <= .5 ? n * (1 + e) : n + e - n * e,
          n = 2 * n - e;
        return [Math.round(255 * F(n, e, g + 1 / 3)), Math.round(255 * F(n, e, g)), Math.round(255 * F(n, e, g - 1 / 3)), t]
      },
      h(u,
        function(a, t) {
          var i = t.props,
            C = t.cache,
            A = t.to,
            o = t.from;
          c.fn[a] = function(t) {
              if (A && !this[C] && (this[C] = A(this._rgba)), t === r) return this[C].slice();
              var g, e = s.type(t),
                n = "array" === e || "object" === e ? t : arguments,
                I = this[C].slice();
              return h(i,
                  function(t, g) {
                    t = n["object" === e ? t : g.idx];
                    null == t && (t = I[g.idx]),
                      I[g.idx] = Q(t, g)
                  }),
                o ? ((g = c(o(I)))[C] = I, g) : c(I)
            },
            h(i,
              function(C, A) {
                c.fn[C] || (c.fn[C] = function(t) {
                  var g, e = s.type(t),
                    n = "alpha" === C ? this._hsla ? "hsla" : "rgba" : a,
                    I = this[n](),
                    i = I[A.idx];
                  return "undefined" === e ? i : ("function" === e && (t = t.call(this, i), e = s.type(t)), null == t && A.empty ? this : ("string" === e && (g = l.exec(t)) && (t = i + parseFloat(g[2]) * ("+" === g[1] ? 1 : -1)), I[A.idx] = t, this[n](I)))
                })
              })
        }),
      (c.hook = function(t) {
        t = t.split(" ");
        h(t,
          function(t, i) {
            s.cssHooks[i] = {
                set: function(t, g) {
                  var e, n, I = "";
                  if ("transparent" !== g && ("string" !== s.type(g) || (e = G(g)))) {
                    if (g = c(e || g), !C.rgba && 1 !== g._rgba[3]) {
                      for (n = "backgroundColor" === i ? t.parentNode : t;
                        ("" === I || "transparent" === I) && n && n.style;) try {
                        I = s.css(n, "backgroundColor"),
                          n = n.parentNode
                      } catch (t) {}
                      g = g.blend(I && "transparent" !== I ? I : "_default")
                    }
                    g = g.toRgbaString()
                  }
                  try {
                    t.style[i] = g
                  } catch (t) {}
                }
              },
              s.fx.step[i] = function(t) {
                t.colorInit || (t.start = c(t.elem, i), t.end = c(t.end), t.colorInit = !0),
                  s.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos))
              }
          })
      })("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),
      s.cssHooks.borderColor = {
        expand: function(e) {
          var n = {};
          return h(["Top", "Right", "Bottom", "Left"],
              function(t, g) {
                n["border" + g + "Color"] = e
              }),
            n
        }
      },
      a = s.Color.names = {
        aqua: "#00ffff",
        black: "#000000",
        blue: "#0000ff",
        fuchsia: "#ff00ff",
        gray: "#808080",
        green: "#008000",
        lime: "#00ff00",
        maroon: "#800000",
        navy: "#000080",
        olive: "#808000",
        purple: "#800080",
        red: "#ff0000",
        silver: "#c0c0c0",
        teal: "#008080",
        white: "#ffffff",
        yellow: "#ffff00",
        transparent: [null, null, null, 0],
        _default: "#ffffff"
      },
      B = ["add", "remove", "toggle"],
      b = {
        border: 1,
        borderBottom: 1,
        borderColor: 1,
        borderLeft: 1,
        borderRight: 1,
        borderTop: 1,
        borderWidth: 1,
        margin: 1,
        padding: 1
      },
      A.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"],
        function(t, g) {
          A.fx.step[g] = function(t) {
            ("none" !== t.end && !t.setAttr || 1 === t.pos && !t.setAttr) && (jQuery.style(t.elem, g, t.end), t.setAttr = !0)
          }
        }),
      A.fn.addBack || (A.fn.addBack = function(t) {
        return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
      }),
      A.effects.animateClass = function(I, t, g, e) {
        var i = A.speed(t, g, e);
        return this.queue(function() {
          var e = A(this),
            t = e.attr("class") || "",
            g = (g = i.children ? e.find("*").addBack() : e).map(function() {
              return {
                el: A(this),
                start: f(this)
              }
            }),
            n = function() {
              A.each(B,
                function(t, g) {
                  I[g] && e[g + "Class"](I[g])
                })
            };
          n(),
            g = g.map(function() {
              return this.end = f(this.el[0]),
                this.diff = function(t, g) {
                  var e, n, I = {};
                  for (e in g) n = g[e],
                    t[e] !== n && (b[e] || !A.fx.step[e] && isNaN(parseFloat(n)) || (I[e] = n));
                  return I
                }(this.start, this.end),
                this
            }),
            e.attr("class", t),
            g = g.map(function() {
              var t = this,
                g = A.Deferred(),
                e = A.extend({},
                  i, {
                    queue: !1,
                    complete: function() {
                      g.resolve(t)
                    }
                  });
              return this.el.animate(this.diff, e),
                g.promise()
            }),
            A.when.apply(A, g.get()).done(function() {
              n(),
                A.each(arguments,
                  function() {
                    var g = this.el;
                    A.each(this.diff,
                      function(t) {
                        g.css(t, "")
                      })
                  }),
                i.complete.call(e[0])
            })
        })
      },
      A.fn.extend({
        addClass: (o = A.fn.addClass,
          function(t, g, e, n) {
            return g ? A.effects.animateClass.call(this, {
                add: t
              },
              g, e, n) : o.apply(this, arguments)
          }),
        removeClass: (I = A.fn.removeClass,
          function(t, g, e, n) {
            return 1 < arguments.length ? A.effects.animateClass.call(this, {
                remove: t
              },
              g, e, n) : I.apply(this, arguments)
          }),
        toggleClass: (i = A.fn.toggleClass,
          function(t, g, e, n, I) {
            return "boolean" == typeof g || void 0 === g ? e ? A.effects.animateClass.call(this, g ? {
                add: t
              } : {
                remove: t
              },
              e, n, I) : i.apply(this, arguments) : A.effects.animateClass.call(this, {
                toggle: t
              },
              g, e, n)
          }),
        switchClass: function(t, g, e, n, I) {
          return A.effects.animateClass.call(this, {
              add: g,
              remove: t
            },
            e, n, I)
        }
      }),
      A.extend(A.effects, {
        version: "1.10.4",
        save: function(t, g) {
          for (var e = 0; e < g.length; e++) null !== g[e] && t.data(y + g[e], t[0].style[g[e]])
        },
        restore: function(t, g) {
          for (var e, n = 0; n < g.length; n++) null !== g[n] && (void 0 === (e = t.data(y + g[n])) && (e = ""), t.css(g[n], e))
        },
        setMode: function(t, g) {
          return g = "toggle" === g ? t.is(":hidden") ? "show" : "hide" : g
        },
        getBaseline: function(t, g) {
          var e, n;
          switch (t[0]) {
            case "top":
              e = 0;
              break;
            case "middle":
              e = .5;
              break;
            case "bottom":
              e = 1;
              break;
            default:
              e = t[0] / g.height
          }
          switch (t[1]) {
            case "left":
              n = 0;
              break;
            case "center":
              n = .5;
              break;
            case "right":
              n = 1;
              break;
            default:
              n = t[1] / g.width
          }
          return {
            x: n,
            y: e
          }
        },
        createWrapper: function(e) {
          if (e.parent().is(".ui-effects-wrapper")) return e.parent();
          var n = {
              width: e.outerWidth(!0),
              height: e.outerHeight(!0),
              float: e.css("float")
            },
            t = A("<div></div>").addClass("ui-effects-wrapper").css({
              fontSize: "100%",
              background: "transparent",
              border: "none",
              margin: 0,
              padding: 0
            }),
            g = {
              width: e.width(),
              height: e.height()
            },
            I = document.activeElement;
          try {
            I.id
          } catch (t) {
            I = document.body
          }
          return e.wrap(t),
            e[0] !== I && !A.contains(e[0], I) || A(I).focus(),
            t = e.parent(),
            "static" === e.css("position") ? (t.css({
              position: "relative"
            }), e.css({
              position: "relative"
            })) : (A.extend(n, {
              position: e.css("position"),
              zIndex: e.css("z-index")
            }), A.each(["top", "left", "bottom", "right"],
              function(t, g) {
                n[g] = e.css(g),
                  isNaN(parseInt(n[g], 10)) && (n[g] = "auto")
              }), e.css({
              position: "relative",
              top: 0,
              left: 0,
              right: "auto",
              bottom: "auto"
            })),
            e.css(g),
            t.css(n).show()
        },
        removeWrapper: function(t) {
          var g = document.activeElement;
          return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), t[0] !== g && !A.contains(t[0], g) || A(g).focus()),
            t
        },
        setTransition: function(n, t, I, i) {
          return i = i || {},
            A.each(t,
              function(t, g) {
                var e = n.cssUnit(g);
                0 < e[0] && (i[g] = e[0] * I + e[1])
              }),
            i
        }
      }),
      A.fn.extend({
        effect: function() {
          var i = X.apply(this, arguments),
            t = i.mode,
            g = i.queue,
            C = A.effects.effect[i.effect];
          return A.fx.off || !C ? t ? this[t](i.duration, i.complete) : this.each(function() {
            i.complete && i.complete.call(this)
          }) : !1 === g ? this.each(e) : this.queue(g || "fx", e);

          function e(t) {
            var g = A(this),
              e = i.complete,
              n = i.mode;

            function I() {
              A.isFunction(e) && e.call(g[0]),
                A.isFunction(t) && t()
            }(g.is(":hidden") ? "hide" === n : "show" === n) ? (g[n](), I()) : C.call(g[0], i, I)
          }
        },
        show: (p = A.fn.show,
          function(t) {
            if (x(t)) return p.apply(this, arguments);
            var g = X.apply(this, arguments);
            return g.mode = "show",
              this.effect.call(this, g)
          }),
        hide: (n = A.fn.hide,
          function(t) {
            if (x(t)) return n.apply(this, arguments);
            var g = X.apply(this, arguments);
            return g.mode = "hide",
              this.effect.call(this, g)
          }),
        toggle: (e = A.fn.toggle,
          function(t) {
            if (x(t) || "boolean" == typeof t) return e.apply(this, arguments);
            var g = X.apply(this, arguments);
            return g.mode = "toggle",
              this.effect.call(this, g)
          }),
        cssUnit: function(t) {
          var e = this.css(t),
            n = [];
          return A.each(["em", "px", "%", "pt"],
              function(t, g) {
                0 < e.indexOf(g) && (n = [parseFloat(e), g])
              }),
            n
        }
      }),
      m = {},
      A.each(["Quad", "Cubic", "Quart", "Quint", "Expo"],
        function(g, t) {
          m[t] = function(t) {
            return Math.pow(t, g + 2)
          }
        }),
      A.extend(m, {
        Sine: function(t) {
          return 1 - Math.cos(t * Math.PI / 2)
        },
        Circ: function(t) {
          return 1 - Math.sqrt(1 - t * t)
        },
        Elastic: function(t) {
          return 0 === t || 1 === t ? t : -Math.pow(2, 8 * (t - 1)) * Math.sin((80 * (t - 1) - 7.5) * Math.PI / 15)
        },
        Back: function(t) {
          return t * t * (3 * t - 2)
        },
        Bounce: function(t) {
          for (var g, e = 4; t < ((g = Math.pow(2, --e)) - 1) / 11;);
          return 1 / Math.pow(4, 3 - e) - 7.5625 * Math.pow((3 * g - 2) / 22 - t, 2)
        }
      }),
      A.each(m,
        function(t, g) {
          A.easing["easeIn" + t] = g,
            A.easing["easeOut" + t] = function(t) {
              return 1 - g(1 - t)
            },
            A.easing["easeInOut" + t] = function(t) {
              return t < .5 ? g(2 * t) / 2 : 1 - g(-2 * t + 2) / 2
            }
        })
  }(jQuery),
  function(g) {
    var t, e, n;

    function I(t, g) {
      var e, n;
      1 < t.originalEvent.touches.length || (t.preventDefault(), e = t.originalEvent.changedTouches[0], (n = document.createEvent("MouseEvents")).initMouseEvent(g, !0, !0, window, 1, e.screenX, e.screenY, e.clientX, e.clientY, !1, !1, !1, !1, 0, null), t.target.dispatchEvent(n))
    }
    g.support.touch = "ontouchend" in document,
      g.support.touch && (t = g.ui.mouse.prototype, e = t._mouseInit, t._touchStart = function(t) {
          !n && this._mouseCapture(t.originalEvent.changedTouches[0]) && (n = !0, this._touchMoved = !1, I(t, "mouseover"), I(t, "mousemove"), I(t, "mousedown"))
        },
        t._touchMove = function(t) {
          n && (this._touchMoved = !0, I(t, "mousemove"))
        },
        t._touchEnd = function(t) {
          n && (I(t, "mouseup"), I(t, "mouseout"), this._touchMoved || I(t, "click"), n = !1)
        },
        t._mouseInit = function() {
          var t = this;
          t.element.bind("touchstart", g.proxy(t, "_touchStart")).bind("touchmove", g.proxy(t, "_touchMove")).bind("touchend", g.proxy(t, "_touchEnd")),
            e.call(t)
        })
  }(jQuery), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery");
!
function(n) {
  "use strict";
  n.fn.emulateTransitionEnd = function(t) {
      var g = !1,
        e = this;
      n(this).one("bsTransitionEnd",
        function() {
          g = !0
        });
      return setTimeout(function() {
            g || n(e).trigger(n.support.transition.end)
          },
          t),
        this
    },
    n(function() {
      n.support.transition = function() {
          var t, g = document.createElement("bootstrap"),
            e = {
              WebkitTransition: "webkitTransitionEnd",
              MozTransition: "transitionend",
              OTransition: "oTransitionEnd otransitionend",
              transition: "transitionend"
            };
          for (t in e)
            if (void 0 !== g.style[t]) return {
              end: e[t]
            };
          return !1
        }(),
        n.support.transition && (n.event.special.bsTransitionEnd = {
          bindType: n.support.transition.end,
          delegateType: n.support.transition.end,
          handle: function(t) {
            if (n(t.target).is(this)) return t.handleObj.handler.apply(this, arguments)
          }
        })
    })
}(jQuery),
function(i) {
  "use strict";

  function n(t) {
    i(t).on("click", g, this.close)
  }
  var g = '[data-dismiss="alert"]';
  n.VERSION = "3.2.0",
    n.prototype.close = function(t) {
      var g = i(this),
        e = (e = g.attr("data-target")) || (e = g.attr("href")) && e.replace(/.*(?=#[^\s]*$)/, ""),
        n = i(e);

      function I() {
        n.detach().trigger("closed.bs.alert").remove()
      }
      t && t.preventDefault(),
        (n = !n.length ? g.hasClass("alert") ? g : g.parent() : n).trigger(t = i.Event("close.bs.alert")),
        t.isDefaultPrevented() || (n.removeClass("in"), i.support.transition && n.hasClass("fade") ? n.one("bsTransitionEnd", I).emulateTransitionEnd(150) : I())
    };
  var t = i.fn.alert;
  i.fn.alert = function(e) {
      return this.each(function() {
        var t = i(this),
          g = t.data("bs.alert");
        g || t.data("bs.alert", g = new n(this)),
          "string" == typeof e && g[e].call(t)
      })
    },
    i.fn.alert.Constructor = n,
    i.fn.alert.noConflict = function() {
      return i.fn.alert = t,
        this
    },
    i(document).on("click.bs.alert.data-api", g, n.prototype.close)
}(jQuery),
function(i) {
  "use strict";

  function n(t, g) {
    this.$element = i(t),
      this.options = i.extend({},
        n.DEFAULTS, g),
      this.isLoading = !1
  }

  function e(e) {
    return this.each(function() {
      var t = i(this),
        g = t.data("bs.button");
      g || t.data("bs.button", g = new n(this, "object" == typeof e && e)),
        "toggle" == e ? g.toggle() : e && g.setState(e)
    })
  }
  n.VERSION = "3.2.0",
    n.DEFAULTS = {
      loadingText: "loading..."
    },
    n.prototype.setState = function(t) {
      var g = "disabled",
        e = this.$element,
        n = e.is("input") ? "val" : "html",
        I = e.data();
      t += "Text",
        null == I.resetText && e.data("resetText", e[n]()),
        e[n]((null == I[t] ? this.options : I)[t]),
        setTimeout(i.proxy(function() {
            "loadingText" == t ? (this.isLoading = !0, e.addClass(g).attr(g, g)) : this.isLoading && (this.isLoading = !1, e.removeClass(g).removeAttr(g))
          },
          this), 0)
    },
    n.prototype.toggle = function() {
      var t, g = !0,
        e = this.$element.closest('[data-toggle="buttons"]');
      e.length && ("radio" == (t = this.$element.find("input")).prop("type") && (t.prop("checked") && this.$element.hasClass("active") ? g = !1 : e.find(".active").removeClass("active")), g && t.prop("checked", !this.$element.hasClass("active")).trigger("change")),
        g && this.$element.toggleClass("active")
    };
  var t = i.fn.button;
  i.fn.button = e,
    i.fn.button.Constructor = n,
    i.fn.button.noConflict = function() {
      return i.fn.button = t,
        this
    },
    i(document).on("click.bs.button.data-api", '[data-toggle^="button"]',
      function(t) {
        var g = i(t.target);
        g.hasClass("btn") || (g = g.closest(".btn")),
          e.call(g, "toggle"),
          t.preventDefault()
      })
}(jQuery),
function(o) {
  "use strict";

  function i(t, g) {
    this.$element = o(t).on("keydown.bs.carousel", o.proxy(this.keydown, this)),
      this.$indicators = this.$element.find(".carousel-indicators"),
      this.options = g,
      this.paused = this.sliding = this.interval = this.$active = this.$items = null,
      "hover" == this.options.pause && this.$element.on("mouseenter.bs.carousel", o.proxy(this.pause, this)).on("mouseleave.bs.carousel", o.proxy(this.cycle, this))
  }

  function I(I) {
    return this.each(function() {
      var t = o(this),
        g = t.data("bs.carousel"),
        e = o.extend({},
          i.DEFAULTS, t.data(), "object" == typeof I && I),
        n = "string" == typeof I ? I : e.slide;
      g || t.data("bs.carousel", g = new i(this, e)),
        "number" == typeof I ? g.to(I) : n ? g[n]() : e.interval && g.pause().cycle()
    })
  }
  i.VERSION = "3.2.0",
    i.DEFAULTS = {
      interval: 5e3,
      pause: "hover",
      wrap: !0
    },
    i.prototype.keydown = function(t) {
      switch (t.which) {
        case 37:
          this.prev();
          break;
        case 39:
          this.next();
          break;
        default:
          return
      }
      t.preventDefault()
    },
    i.prototype.cycle = function(t) {
      return t || (this.paused = !1),
        this.interval && clearInterval(this.interval),
        this.options.interval && !this.paused && (this.interval = setInterval(o.proxy(this.next, this), this.options.interval)),
        this
    },
    i.prototype.getItemIndex = function(t) {
      return this.$items = t.parent().children(".item"),
        this.$items.index(t || this.$active)
    },
    i.prototype.to = function(t) {
      var g = this,
        e = this.getItemIndex(this.$active = this.$element.find(".item.active"));
      if (!(t > this.$items.length - 1 || t < 0)) return this.sliding ? this.$element.one("slid.bs.carousel",
        function() {
          g.to(t)
        }) : e == t ? this.pause().cycle() : this.slide(e < t ? "next" : "prev", o(this.$items[t]))
    },
    i.prototype.pause = function(t) {
      return t || (this.paused = !0),
        this.$element.find(".next, .prev").length && o.support.transition && (this.$element.trigger(o.support.transition.end), this.cycle(!0)),
        this.interval = clearInterval(this.interval),
        this
    },
    i.prototype.next = function() {
      if (!this.sliding) return this.slide("next")
    },
    i.prototype.prev = function() {
      if (!this.sliding) return this.slide("prev")
    },
    i.prototype.slide = function(t, g) {
      var e = this.$element.find(".item.active"),
        n = g || e[t](),
        I = this.interval,
        i = "next" == t ? "left" : "right",
        C = "next" == t ? "first" : "last",
        A = this;
      if (!n.length) {
        if (!this.options.wrap) return;
        n = this.$element.find(".item")[C]()
      }
      if (n.hasClass("active")) return this.sliding = !1;
      g = n[0],
        C = o.Event("slide.bs.carousel", {
          relatedTarget: g,
          direction: i
        });
      if (this.$element.trigger(C), !C.isDefaultPrevented()) {
        this.sliding = !0,
          I && this.pause(),
          this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), (C = o(this.$indicators.children()[this.getItemIndex(n)])) && C.addClass("active"));
        var a = o.Event("slid.bs.carousel", {
          relatedTarget: g,
          direction: i
        });
        return o.support.transition && this.$element.hasClass("slide") ? (n.addClass(t), n[0].offsetWidth, e.addClass(i), n.addClass(i), e.one("bsTransitionEnd",
            function() {
              n.removeClass([t, i].join(" ")).addClass("active"),
                e.removeClass(["active", i].join(" ")),
                A.sliding = !1,
                setTimeout(function() {
                    A.$element.trigger(a)
                  },
                  0)
            }).emulateTransitionEnd(1e3 * e.css("transition-duration").slice(0, -1))) : (e.removeClass("active"), n.addClass("active"), this.sliding = !1, this.$element.trigger(a)),
          I && this.cycle(),
          this
      }
    };
  var t = o.fn.carousel;
  o.fn.carousel = I,
    o.fn.carousel.Constructor = i,
    o.fn.carousel.noConflict = function() {
      return o.fn.carousel = t,
        this
    },
    o(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]",
      function(t) {
        var g, e = o(this),
          n = o(e.attr("data-target") || (g = e.attr("href")) && g.replace(/.*(?=#[^\s]+$)/, ""));
        n.hasClass("carousel") && (g = o.extend({},
          n.data(), e.data()), (e = e.attr("data-slide-to")) && (g.interval = !1), I.call(n, g), e && n.data("bs.carousel").to(e), t.preventDefault())
      }),
    o(window).on("load",
      function() {
        o('[data-ride="carousel"]').each(function() {
          var t = o(this);
          I.call(t, t.data())
        })
      })
}(jQuery),
function(C) {
  "use strict";

  function I(t, g) {
    this.$element = C(t),
      this.options = C.extend({},
        I.DEFAULTS, g),
      this.transitioning = null,
      this.options.parent && (this.$parent = C(this.options.parent)),
      this.options.toggle && this.toggle()
  }

  function A(n) {
    return this.each(function() {
      var t = C(this),
        g = t.data("bs.collapse"),
        e = C.extend({},
          I.DEFAULTS, t.data(), "object" == typeof n && n);
      !g && e.toggle && "show" == n && (n = !n),
        g || t.data("bs.collapse", g = new I(this, e)),
        "string" == typeof n && g[n]()
    })
  }
  I.VERSION = "3.2.0",
    I.DEFAULTS = {
      toggle: !0
    },
    I.prototype.dimension = function() {
      return this.$element.hasClass("width") ? "width" : "height"
    },
    I.prototype.show = function() {
      if (!this.transitioning && !this.$element.hasClass("in")) {
        var t = C.Event("show.bs.collapse");
        if (this.$element.trigger(t), !t.isDefaultPrevented()) {
          t = this.$parent && this.$parent.find("> .panel > .in");
          if (t && t.length) {
            var g = t.data("bs.collapse");
            if (g && g.transitioning) return;
            A.call(t, "hide"),
              g || t.data("bs.collapse", null)
          }
          var e = this.dimension();
          this.$element.removeClass("collapse").addClass("collapsing")[e](0),
            this.transitioning = 1;
          g = function() {
            this.$element.removeClass("collapsing").addClass("collapse in")[e](""),
              this.transitioning = 0,
              this.$element.trigger("shown.bs.collapse")
          };
          if (!C.support.transition) return g.call(this);
          t = C.camelCase(["scroll", e].join("-"));
          this.$element.one("bsTransitionEnd", C.proxy(g, this)).emulateTransitionEnd(350)[e](this.$element[0][t])
        }
      }
    },
    I.prototype.hide = function() {
      if (!this.transitioning && this.$element.hasClass("in")) {
        var t = C.Event("hide.bs.collapse");
        if (this.$element.trigger(t), !t.isDefaultPrevented()) {
          var g = this.dimension();
          this.$element[g](this.$element[g]())[0].offsetHeight,
            this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),
            this.transitioning = 1;
          t = function() {
            this.transitioning = 0,
              this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
          };
          if (!C.support.transition) return t.call(this);
          this.$element[g](0).one("bsTransitionEnd", C.proxy(t, this)).emulateTransitionEnd(350)
        }
      }
    },
    I.prototype.toggle = function() {
      this[this.$element.hasClass("in") ? "hide" : "show"]()
    };
  var t = C.fn.collapse;
  C.fn.collapse = A,
    C.fn.collapse.Constructor = I,
    C.fn.collapse.noConflict = function() {
      return C.fn.collapse = t,
        this
    },
    C(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]',
      function(t) {
        var g = C(this),
          e = g.attr("data-target") || t.preventDefault() || (i = g.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, ""),
          n = C(e),
          I = n.data("bs.collapse"),
          t = I ? "toggle" : g.data(),
          i = g.attr("data-parent"),
          e = i && C(i);
        I && I.transitioning || (e && e.find('[data-toggle="collapse"][data-parent="' + i + '"]').not(g).addClass("collapsed"), g[n.hasClass("in") ? "addClass" : "removeClass"]("collapsed")),
          A.call(n, t)
      })
}(jQuery),
function(I) {
  "use strict";

  function n(t) {
    I(t).on("click.bs.dropdown", this.toggle)
  }
  var i = '[data-toggle="dropdown"]';

  function C(e) {
    e && 3 === e.which || (I(".dropdown-backdrop").remove(), I(i).each(function() {
      var t = A(I(this)),
        g = {
          relatedTarget: this
        };
      t.hasClass("open") && (t.trigger(e = I.Event("hide.bs.dropdown", g)), e.isDefaultPrevented() || t.removeClass("open").trigger("hidden.bs.dropdown", g))
    }))
  }

  function A(t) {
    var g = t.attr("data-target"),
      g = (g = g || (g = t.attr("href")) && /#[A-Za-z]/.test(g) && g.replace(/.*(?=#[^\s]*$)/, "")) && I(g);
    return g && g.length ? g : t.parent()
  }
  n.VERSION = "3.2.0",
    n.prototype.toggle = function(t) {
      var g = I(this);
      if (!g.is(".disabled, :disabled")) {
        var e = A(g),
          n = e.hasClass("open");
        if (C(), !n) {
          "ontouchstart" in document.documentElement && !e.closest(".navbar-nav").length && I('<div class="dropdown-backdrop"/>').insertAfter(I(this)).on("click", C);
          n = {
            relatedTarget: this
          };
          if (e.trigger(t = I.Event("show.bs.dropdown", n)), t.isDefaultPrevented()) return;
          g.trigger("focus"),
            e.toggleClass("open").trigger("shown.bs.dropdown", n)
        }
        return !1
      }
    },
    n.prototype.keydown = function(t) {
      if (/(38|40|27)/.test(t.keyCode)) {
        var g = I(this);
        if (t.preventDefault(), t.stopPropagation(), !g.is(".disabled, :disabled")) {
          var e = A(g),
            n = e.hasClass("open");
          if (!n || 27 == t.keyCode) return 27 == t.which && e.find(i).trigger("focus"),
            g.trigger("click");
          g = " li:not(.divider):visible a",
            e = e.find('[role="menu"]' + g + ', [role="listbox"]' + g);
          e.length && (g = e.index(e.filter(":focus")), 38 == t.keyCode && 0 < g && g--, 40 == t.keyCode && g < e.length - 1 && g++, e.eq(g = !~g ? 0 : g).trigger("focus"))
        }
      }
    };
  var t = I.fn.dropdown;
  I.fn.dropdown = function(e) {
      return this.each(function() {
        var t = I(this),
          g = t.data("bs.dropdown");
        g || t.data("bs.dropdown", g = new n(this)),
          "string" == typeof e && g[e].call(t)
      })
    },
    I.fn.dropdown.Constructor = n,
    I.fn.dropdown.noConflict = function() {
      return I.fn.dropdown = t,
        this
    },
    I(document).on("click.bs.dropdown.data-api", C).on("click.bs.dropdown.data-api", ".dropdown form",
      function(t) {
        t.stopPropagation()
      }).on("click.bs.dropdown.data-api", i, n.prototype.toggle).on("keydown.bs.dropdown.data-api", i + ', [role="menu"], [role="listbox"]', n.prototype.keydown)
}(jQuery),
function(i) {
  "use strict";

  function C(t, g) {
    this.options = g,
      this.$body = i(document.body),
      this.$element = i(t),
      this.$backdrop = this.isShown = null,
      this.scrollbarWidth = 0,
      this.options.remote && this.$element.find(".modal-content").load(this.options.remote, i.proxy(function() {
          this.$element.trigger("loaded.bs.modal")
        },
        this))
  }

  function I(n, I) {
    return this.each(function() {
      var t = i(this),
        g = t.data("bs.modal"),
        e = i.extend({},
          C.DEFAULTS, t.data(), "object" == typeof n && n);
      g || t.data("bs.modal", g = new C(this, e)),
        "string" == typeof n ? g[n](I) : e.show && g.show(I)
    })
  }
  C.VERSION = "3.2.0",
    C.DEFAULTS = {
      backdrop: !0,
      keyboard: !0,
      show: !0
    },
    C.prototype.toggle = function(t) {
      return this.isShown ? this.hide() : this.show(t)
    },
    C.prototype.show = function(e) {
      var n = this,
        t = i.Event("show.bs.modal", {
          relatedTarget: e
        });
      this.$element.trigger(t),
        this.isShown || t.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.$body.addClass("modal-open"), this.setScrollbar(), this.escape(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', i.proxy(this.hide, this)), this.backdrop(function() {
          var t = i.support.transition && n.$element.hasClass("fade");
          n.$element.parent().length || n.$element.appendTo(n.$body),
            n.$element.show().scrollTop(0),
            t && n.$element[0].offsetWidth,
            n.$element.addClass("in").attr("aria-hidden", !1),
            n.enforceFocus();
          var g = i.Event("shown.bs.modal", {
            relatedTarget: e
          });
          t ? n.$element.find(".modal-dialog").one("bsTransitionEnd",
            function() {
              n.$element.trigger("focus").trigger(g)
            }).emulateTransitionEnd(300) : n.$element.trigger("focus").trigger(g)
        }))
    },
    C.prototype.hide = function(t) {
      t && t.preventDefault(),
        t = i.Event("hide.bs.modal"),
        this.$element.trigger(t),
        this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.$body.removeClass("modal-open"), this.resetScrollbar(), this.escape(), i(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal"), i.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", i.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal())
    },
    C.prototype.enforceFocus = function() {
      i(document).off("focusin.bs.modal").on("focusin.bs.modal", i.proxy(function(t) {
          this.$element[0] === t.target || this.$element.has(t.target).length || this.$element.trigger("focus")
        },
        this))
    },
    C.prototype.escape = function() {
      this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", i.proxy(function(t) {
          27 == t.which && this.hide()
        },
        this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal")
    },
    C.prototype.hideModal = function() {
      var t = this;
      this.$element.hide(),
        this.backdrop(function() {
          t.$element.trigger("hidden.bs.modal")
        })
    },
    C.prototype.removeBackdrop = function() {
      this.$backdrop && this.$backdrop.remove(),
        this.$backdrop = null
    },
    C.prototype.backdrop = function(t) {
      var g, e = this,
        n = this.$element.hasClass("fade") ? "fade" : "";
      this.isShown && this.options.backdrop ? (g = i.support.transition && n, this.$backdrop = i('<div class="modal-backdrop ' + n + '" />').appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", i.proxy(function(t) {
          t.target === t.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this))
        },
        this)), g && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), t && (g ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(150) : t())) : !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), g = function() {
          e.removeBackdrop(),
            t && t()
        },
        i.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", g).emulateTransitionEnd(150) : g()) : t && t()
    },
    C.prototype.checkScrollbar = function() {
      document.body.clientWidth >= window.innerWidth || (this.scrollbarWidth = this.scrollbarWidth || this.measureScrollbar())
    },
    C.prototype.setScrollbar = function() {
      var t = parseInt(this.$body.css("padding-right") || 0, 10);
      this.scrollbarWidth && this.$body.css("padding-right", t + this.scrollbarWidth)
    },
    C.prototype.resetScrollbar = function() {
      this.$body.css("padding-right", "")
    },
    C.prototype.measureScrollbar = function() {
      var t = document.createElement("div");
      t.className = "modal-scrollbar-measure",
        this.$body.append(t);
      var g = t.offsetWidth - t.clientWidth;
      return this.$body[0].removeChild(t),
        g
    };
  var t = i.fn.modal;
  i.fn.modal = I,
    i.fn.modal.Constructor = C,
    i.fn.modal.noConflict = function() {
      return i.fn.modal = t,
        this
    },
    i(document).on("click.bs.modal.data-api", '[data-toggle="modal"]',
      function(t) {
        var g = i(this),
          e = g.attr("href"),
          n = i(g.attr("data-target") || e && e.replace(/.*(?=#[^\s]+$)/, "")),
          e = n.data("bs.modal") ? "toggle" : i.extend({
              remote: !/#/.test(e) && e
            },
            n.data(), g.data());
        g.is("a") && t.preventDefault(),
          n.one("show.bs.modal",
            function(t) {
              t.isDefaultPrevented() || n.one("hidden.bs.modal",
                function() {
                  g.is(":visible") && g.trigger("focus")
                })
            }),
          I.call(n, e, this)
      })
}(jQuery),
function(a) {
  "use strict";

  function n(t, g) {
    this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null,
      this.init("tooltip", t, g)
  }
  n.VERSION = "3.2.0",
    n.DEFAULTS = {
      animation: !0,
      placement: "top",
      selector: !1,
      template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
      trigger: "hover focus",
      title: "",
      delay: 0,
      html: !1,
      container: !1,
      viewport: {
        selector: "body",
        padding: 0
      }
    },
    n.prototype.init = function(t, g, e) {
      this.enabled = !0,
        this.type = t,
        this.$element = a(g),
        this.options = this.getOptions(e),
        this.$viewport = this.options.viewport && a(this.options.viewport.selector || this.options.viewport);
      for (var n = this.options.trigger.split(" "), I = n.length; I--;) {
        var i, C = n[I];
        "click" == C ? this.$element.on("click." + this.type, this.options.selector, a.proxy(this.toggle, this)) : "manual" != C && (i = "hover" == C ? "mouseleave" : "focusout", this.$element.on(("hover" == C ? "mouseenter" : "focusin") + "." + this.type, this.options.selector, a.proxy(this.enter, this)), this.$element.on(i + "." + this.type, this.options.selector, a.proxy(this.leave, this)))
      }
      this.options.selector ? this._options = a.extend({},
        this.options, {
          trigger: "manual",
          selector: ""
        }) : this.fixTitle()
    },
    n.prototype.getDefaults = function() {
      return n.DEFAULTS
    },
    n.prototype.getOptions = function(t) {
      return (t = a.extend({},
          this.getDefaults(), this.$element.data(), t)).delay && "number" == typeof t.delay && (t.delay = {
          show: t.delay,
          hide: t.delay
        }),
        t
    },
    n.prototype.getDelegateOptions = function() {
      var e = {},
        n = this.getDefaults();
      return this._options && a.each(this._options,
          function(t, g) {
            n[t] != g && (e[t] = g)
          }),
        e
    },
    n.prototype.enter = function(t) {
      var g = t instanceof this.constructor ? t : a(t.currentTarget).data("bs." + this.type);
      if (g || (g = new this.constructor(t.currentTarget, this.getDelegateOptions()), a(t.currentTarget).data("bs." + this.type, g)), clearTimeout(g.timeout), g.hoverState = "in", !g.options.delay || !g.options.delay.show) return g.show();
      g.timeout = setTimeout(function() {
          "in" == g.hoverState && g.show()
        },
        g.options.delay.show)
    },
    n.prototype.leave = function(t) {
      var g = t instanceof this.constructor ? t : a(t.currentTarget).data("bs." + this.type);
      if (g || (g = new this.constructor(t.currentTarget, this.getDelegateOptions()), a(t.currentTarget).data("bs." + this.type, g)), clearTimeout(g.timeout), g.hoverState = "out", !g.options.delay || !g.options.delay.hide) return g.hide();
      g.timeout = setTimeout(function() {
          "out" == g.hoverState && g.hide()
        },
        g.options.delay.hide)
    },
    n.prototype.show = function() {
      var t, g, e, n, I, i, C, A = a.Event("show.bs." + this.type);
      this.hasContent() && this.enabled && (this.$element.trigger(A), e = a.contains(document.documentElement, this.$element[0]), !A.isDefaultPrevented() && e && (g = (t = this).tip(), i = this.getUID(this.type), this.setContent(), g.attr("id", i), this.$element.attr("aria-describedby", i), this.options.animation && g.addClass("fade"), C = "function" == typeof this.options.placement ? this.options.placement.call(this, g[0], this.$element[0]) : this.options.placement, (I = (n = /\s?auto?\s?/i).test(C)) && (C = C.replace(n, "") || "top"), g.detach().css({
          top: 0,
          left: 0,
          display: "block"
        }).addClass(C).data("bs." + this.type, this), this.options.container ? g.appendTo(this.options.container) : g.insertAfter(this.$element), A = this.getPosition(), e = g[0].offsetWidth, i = g[0].offsetHeight, I && (n = C, I = this.$element.parent(), I = this.getPosition(I), C = "bottom" == C && A.top + A.height + i - I.scroll > I.height ? "top" : "top" == C && A.top - I.scroll - i < 0 ? "bottom" : "right" == C && A.right + e > I.width ? "left" : "left" == C && A.left - e < I.left ? "right" : C, g.removeClass(n).addClass(C)), i = this.getCalculatedOffset(C, A, e, i), this.applyPlacement(i, C), C = function() {
          t.$element.trigger("shown.bs." + t.type),
            t.hoverState = null
        },
        a.support.transition && this.$tip.hasClass("fade") ? g.one("bsTransitionEnd", C).emulateTransitionEnd(150) : C()))
    },
    n.prototype.applyPlacement = function(t, g) {
      var e = this.tip(),
        n = e[0].offsetWidth,
        I = e[0].offsetHeight,
        i = parseInt(e.css("margin-top"), 10),
        C = parseInt(e.css("margin-left"), 10);
      isNaN(i) && (i = 0),
        isNaN(C) && (C = 0),
        t.top = t.top + i,
        t.left = t.left + C,
        a.offset.setOffset(e[0], a.extend({
            using: function(t) {
              e.css({
                top: Math.round(t.top),
                left: Math.round(t.left)
              })
            }
          },
          t), 0),
        e.addClass("in");
      i = e[0].offsetWidth,
        C = e[0].offsetHeight;
      "top" == g && C != I && (t.top = t.top + I - C);
      g = this.getViewportAdjustedDelta(g, t, i, C);
      g.left ? t.left += g.left : t.top += g.top;
      I = g.left ? 2 * g.left - n + i : 2 * g.top - I + C,
        C = g.left ? "left" : "top",
        g = g.left ? "offsetWidth" : "offsetHeight";
      e.offset(t),
        this.replaceArrow(I, e[0][g], C)
    },
    n.prototype.replaceArrow = function(t, g, e) {
      this.arrow().css(e, t ? 50 * (1 - t / g) + "%" : "")
    },
    n.prototype.setContent = function() {
      var t = this.tip(),
        g = this.getTitle();
      t.find(".tooltip-inner")[this.options.html ? "html" : "text"](g),
        t.removeClass("fade in top bottom left right")
    },
    n.prototype.hide = function() {
      var t = this,
        g = this.tip(),
        e = a.Event("hide.bs." + this.type);

      function n() {
        "in" != t.hoverState && g.detach(),
          t.$element.trigger("hidden.bs." + t.type)
      }
      if (this.$element.removeAttr("aria-describedby"), this.$element.trigger(e), !e.isDefaultPrevented()) return g.removeClass("in"),
        a.support.transition && this.$tip.hasClass("fade") ? g.one("bsTransitionEnd", n).emulateTransitionEnd(150) : n(),
        this.hoverState = null,
        this
    },
    n.prototype.fixTitle = function() {
      var t = this.$element;
      !t.attr("title") && "string" == typeof t.attr("data-original-title") || t.attr("data-original-title", t.attr("title") || "").attr("title", "")
    },
    n.prototype.hasContent = function() {
      return this.getTitle()
    },
    n.prototype.getPosition = function(t) {
      var g = (t = t || this.$element)[0],
        e = "BODY" == g.tagName;
      return a.extend({},
        "function" == typeof g.getBoundingClientRect ? g.getBoundingClientRect() : null, {
          scroll: e ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop(),
          width: e ? a(window).width() : t.outerWidth(),
          height: e ? a(window).height() : t.outerHeight()
        },
        e ? {
          top: 0,
          left: 0
        } : t.offset())
    },
    n.prototype.getCalculatedOffset = function(t, g, e, n) {
      return "bottom" == t ? {
        top: g.top + g.height,
        left: g.left + g.width / 2 - e / 2
      } : "top" == t ? {
        top: g.top - n,
        left: g.left + g.width / 2 - e / 2
      } : "left" == t ? {
        top: g.top + g.height / 2 - n / 2,
        left: g.left - e
      } : {
        top: g.top + g.height / 2 - n / 2,
        left: g.left + g.width
      }
    },
    n.prototype.getViewportAdjustedDelta = function(t, g, e, n) {
      var I = {
        top: 0,
        left: 0
      };
      if (!this.$viewport) return I;
      var i, C = this.options.viewport && this.options.viewport.padding || 0,
        A = this.getPosition(this.$viewport);
      return /right|left/.test(t) ? (t = g.top - C - A.scroll, i = g.top + C - A.scroll + n, t < A.top ? I.top = A.top - t : i > A.top + A.height && (I.top = A.top + A.height - i)) : (i = g.left - C, e = g.left + C + e, i < A.left ? I.left = A.left - i : e > A.width && (I.left = A.left + A.width - e)),
        I
    },
    n.prototype.getTitle = function() {
      var t = this.$element,
        g = this.options;
      return t.attr("data-original-title") || ("function" == typeof g.title ? g.title.call(t[0]) : g.title)
    },
    n.prototype.getUID = function(t) {
      for (; t += ~~(1e6 * Math.random()), document.getElementById(t););
      return t
    },
    n.prototype.tip = function() {
      return this.$tip = this.$tip || a(this.options.template)
    },
    n.prototype.arrow = function() {
      return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    },
    n.prototype.validate = function() {
      this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    },
    n.prototype.enable = function() {
      this.enabled = !0
    },
    n.prototype.disable = function() {
      this.enabled = !1
    },
    n.prototype.toggleEnabled = function() {
      this.enabled = !this.enabled
    },
    n.prototype.toggle = function(t) {
      var g = this;
      t && ((g = a(t.currentTarget).data("bs." + this.type)) || (g = new this.constructor(t.currentTarget, this.getDelegateOptions()), a(t.currentTarget).data("bs." + this.type, g))),
        g.tip().hasClass("in") ? g.leave(g) : g.enter(g)
    },
    n.prototype.destroy = function() {
      clearTimeout(this.timeout),
        this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
  var t = a.fn.tooltip;
  a.fn.tooltip = function(e) {
      return this.each(function() {
        var t = a(this),
          g = t.data("bs.tooltip");
        !g && "destroy" == e || (g || t.data("bs.tooltip", g = new n(this, "object" == typeof e && e)), "string" == typeof e && g[e]())
      })
    },
    a.fn.tooltip.Constructor = n,
    a.fn.tooltip.noConflict = function() {
      return a.fn.tooltip = t,
        this
    }
}(jQuery),
function(n) {
  "use strict";

  function I(t, g) {
    this.init("popover", t, g)
  }
  if (!n.fn.tooltip) throw new Error("Popover requires tooltip.js");
  I.VERSION = "3.2.0",
    I.DEFAULTS = n.extend({},
      n.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
      }),
    ((I.prototype = n.extend({},
      n.fn.tooltip.Constructor.prototype)).constructor = I).prototype.getDefaults = function() {
      return I.DEFAULTS
    },
    I.prototype.setContent = function() {
      var t = this.tip(),
        g = this.getTitle(),
        e = this.getContent();
      t.find(".popover-title")[this.options.html ? "html" : "text"](g),
        t.find(".popover-content").empty()[this.options.html ? "string" == typeof e ? "html" : "append" : "text"](e),
        t.removeClass("fade top bottom left right in"),
        t.find(".popover-title").html() || t.find(".popover-title").hide()
    },
    I.prototype.hasContent = function() {
      return this.getTitle() || this.getContent()
    },
    I.prototype.getContent = function() {
      var t = this.$element,
        g = this.options;
      return t.attr("data-content") || ("function" == typeof g.content ? g.content.call(t[0]) : g.content)
    },
    I.prototype.arrow = function() {
      return this.$arrow = this.$arrow || this.tip().find(".arrow")
    },
    I.prototype.tip = function() {
      return this.$tip || (this.$tip = n(this.options.template)),
        this.$tip
    };
  var t = n.fn.popover;
  n.fn.popover = function(e) {
      return this.each(function() {
        var t = n(this),
          g = t.data("bs.popover");
        !g && "destroy" == e || (g || t.data("bs.popover", g = new I(this, "object" == typeof e && e)), "string" == typeof e && g[e]())
      })
    },
    n.fn.popover.Constructor = I,
    n.fn.popover.noConflict = function() {
      return n.fn.popover = t,
        this
    }
}(jQuery),
function(I) {
  "use strict";

  function n(t, g) {
    var e = I.proxy(this.process, this);
    this.$body = I("body"),
      this.$scrollElement = I(t).is("body") ? I(window) : I(t),
      this.options = I.extend({},
        n.DEFAULTS, g),
      this.selector = (this.options.target || "") + " .nav li > a",
      this.offsets = [],
      this.targets = [],
      this.activeTarget = null,
      this.scrollHeight = 0,
      this.$scrollElement.on("scroll.bs.scrollspy", e),
      this.refresh(),
      this.process()
  }

  function g(e) {
    return this.each(function() {
      var t = I(this),
        g = t.data("bs.scrollspy");
      g || t.data("bs.scrollspy", g = new n(this, "object" == typeof e && e)),
        "string" == typeof e && g[e]()
    })
  }
  n.VERSION = "3.2.0",
    n.DEFAULTS = {
      offset: 10
    },
    n.prototype.getScrollHeight = function() {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    },
    n.prototype.refresh = function() {
      var e = "offset",
        n = 0;
      I.isWindow(this.$scrollElement[0]) || (e = "position", n = this.$scrollElement.scrollTop()),
        this.offsets = [],
        this.targets = [],
        this.scrollHeight = this.getScrollHeight();
      var t = this;
      this.$body.find(this.selector).map(function() {
        var t = I(this),
          g = t.data("target") || t.attr("href"),
          t = /^#./.test(g) && I(g);
        return t && t.length && t.is(":visible") ? [
          [t[e]().top + n, g]
        ] : null
      }).sort(function(t, g) {
        return t[0] - g[0]
      }).each(function() {
        t.offsets.push(this[0]),
          t.targets.push(this[1])
      })
    },
    n.prototype.process = function() {
      var t, g = this.$scrollElement.scrollTop() + this.options.offset,
        e = this.getScrollHeight(),
        n = this.options.offset + e - this.$scrollElement.height(),
        I = this.offsets,
        i = this.targets,
        C = this.activeTarget;
      if (this.scrollHeight != e && this.refresh(), n <= g) return C != (t = i[i.length - 1]) && this.activate(t);
      if (C && g <= I[0]) return C != (t = i[0]) && this.activate(t);
      for (t = I.length; t--;) C != i[t] && g >= I[t] && (!I[t + 1] || g <= I[t + 1]) && this.activate(i[t])
    },
    n.prototype.activate = function(t) {
      this.activeTarget = t,
        I(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");
      t = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]',
        t = I(t).parents("li").addClass("active");
      (t = t.parent(".dropdown-menu").length ? t.closest("li.dropdown").addClass("active") : t).trigger("activate.bs.scrollspy")
    };
  var t = I.fn.scrollspy;
  I.fn.scrollspy = g,
    I.fn.scrollspy.Constructor = n,
    I.fn.scrollspy.noConflict = function() {
      return I.fn.scrollspy = t,
        this
    },
    I(window).on("load.bs.scrollspy.data-api",
      function() {
        I('[data-spy="scroll"]').each(function() {
          var t = I(this);
          g.call(t, t.data())
        })
      })
}(jQuery),
function(C) {
  "use strict";

  function n(t) {
    this.element = C(t)
  }

  function g(e) {
    return this.each(function() {
      var t = C(this),
        g = t.data("bs.tab");
      g || t.data("bs.tab", g = new n(this)),
        "string" == typeof e && g[e]()
    })
  }
  n.VERSION = "3.2.0",
    n.prototype.show = function() {
      var t, g, e = this.element,
        n = e.closest("ul:not(.dropdown-menu)"),
        I = (I = e.data("target")) || (I = e.attr("href")) && I.replace(/.*(?=#[^\s]*$)/, "");
      e.parent("li").hasClass("active") || (t = n.find(".active:last a")[0], g = C.Event("show.bs.tab", {
        relatedTarget: t
      }), e.trigger(g), g.isDefaultPrevented() || (I = C(I), this.activate(e.closest("li"), n), this.activate(I, I.parent(),
        function() {
          e.trigger({
            type: "shown.bs.tab",
            relatedTarget: t
          })
        })))
    },
    n.prototype.activate = function(t, g, e) {
      var n = g.find("> .active"),
        I = e && C.support.transition && n.hasClass("fade");

      function i() {
        n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),
          t.addClass("active"),
          I ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"),
          t.parent(".dropdown-menu") && t.closest("li.dropdown").addClass("active"),
          e && e()
      }
      I ? n.one("bsTransitionEnd", i).emulateTransitionEnd(150) : i(),
        n.removeClass("in")
    };
  var t = C.fn.tab;
  C.fn.tab = g,
    C.fn.tab.Constructor = n,
    C.fn.tab.noConflict = function() {
      return C.fn.tab = t,
        this
    },
    C(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]',
      function(t) {
        t.preventDefault(),
          g.call(C(this), "show")
      })
}(jQuery),
function(C) {
  "use strict";

  function A(t, g) {
    this.options = C.extend({},
        A.DEFAULTS, g),
      this.$target = C(this.options.target).on("scroll.bs.affix.data-api", C.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", C.proxy(this.checkPositionWithEventLoop, this)),
      this.$element = C(t),
      this.affixed = this.unpin = this.pinnedOffset = null,
      this.checkPosition()
  }

  function e(e) {
    return this.each(function() {
      var t = C(this),
        g = t.data("bs.affix");
      g || t.data("bs.affix", g = new A(this, "object" == typeof e && e)),
        "string" == typeof e && g[e]()
    })
  }
  A.VERSION = "3.2.0",
    A.RESET = "affix affix-top affix-bottom",
    A.DEFAULTS = {
      offset: 0,
      target: window
    },
    A.prototype.getPinnedOffset = function() {
      if (this.pinnedOffset) return this.pinnedOffset;
      this.$element.removeClass(A.RESET).addClass("affix");
      var t = this.$target.scrollTop(),
        g = this.$element.offset();
      return this.pinnedOffset = g.top - t
    },
    A.prototype.checkPositionWithEventLoop = function() {
      setTimeout(C.proxy(this.checkPosition, this), 1)
    },
    A.prototype.checkPosition = function() {
      var t, g, e, n, I, i;
      this.$element.is(":visible") && (t = C(document).height(), I = this.$target.scrollTop(), n = this.$element.offset(), i = (g = this.options.offset).top, e = g.bottom, "object" != typeof g && (e = i = g), "function" == typeof i && (i = g.top(this.$element)), "function" == typeof e && (e = g.bottom(this.$element)), n = !(null != this.unpin && I + this.unpin <= n.top) && (null != e && n.top + this.$element.height() >= t - e ? "bottom" : null != i && I <= i && "top"), this.affixed !== n && (null != this.unpin && this.$element.css("top", ""), i = C.Event((I = "affix" + (n ? "-" + n : "")) + ".bs.affix"), this.$element.trigger(i), i.isDefaultPrevented() || (this.affixed = n, this.unpin = "bottom" == n ? this.getPinnedOffset() : null, this.$element.removeClass(A.RESET).addClass(I).trigger(C.Event(I.replace("affix", "affixed"))), "bottom" == n && this.$element.offset({
        top: t - this.$element.height() - e
      }))))
    };
  var t = C.fn.affix;
  C.fn.affix = e,
    C.fn.affix.Constructor = A,
    C.fn.affix.noConflict = function() {
      return C.fn.affix = t,
        this
    },
    C(window).on("load",
      function() {
        C('[data-spy="affix"]').each(function() {
          var t = C(this),
            g = t.data();
          g.offset = g.offset || {},
            g.offsetBottom && (g.offset.bottom = g.offsetBottom),
            g.offsetTop && (g.offset.top = g.offsetTop),
            e.call(t, g)
        })
      })
}(jQuery),
function() {
  var A = [].slice;
  !
  function(i, g) {
    "use strict";
    var C;

    function t(t, g) {
      var e, n, I;
      null == g && (g = {}),
        this.$element = i(t),
        this.options = i.extend({},
          i.fn.bootstrapSwitch.defaults, {
            state: this.$element.is(":checked"),
            size: this.$element.data("size"),
            animate: this.$element.data("animate"),
            disabled: this.$element.is(":disabled"),
            readonly: this.$element.is("[readonly]"),
            indeterminate: this.$element.data("indeterminate"),
            onColor: this.$element.data("on-color"),
            offColor: this.$element.data("off-color"),
            onText: this.$element.data("on-text"),
            offText: this.$element.data("off-text"),
            labelText: this.$element.data("label-text"),
            baseClass: this.$element.data("base-class"),
            wrapperClass: this.$element.data("wrapper-class"),
            radioAllOff: this.$element.data("radio-all-off")
          },
          g),
        this.$wrapper = i("<div>", {
          class: (e = this,
            function() {
              var t = ["" + e.options.baseClass].concat(e._getClasses(e.options.wrapperClass));
              return t.push(e.options.state ? e.options.baseClass + "-on" : e.options.baseClass + "-off"),
                null != e.options.size && t.push(e.options.baseClass + "-" + e.options.size),
                e.options.animate && t.push(e.options.baseClass + "-animate"),
                e.options.disabled && t.push(e.options.baseClass + "-disabled"),
                e.options.readonly && t.push(e.options.baseClass + "-readonly"),
                e.options.indeterminate && t.push(e.options.baseClass + "-indeterminate"),
                e.$element.attr("id") && t.push(e.options.baseClass + "-id-" + e.$element.attr("id")),
                t.join(" ")
            }())
        }),
        this.$container = i("<div>", {
          class: this.options.baseClass + "-container"
        }),
        this.$on = i("<span>", {
          html: this.options.onText,
          class: this.options.baseClass + "-handle-on " + this.options.baseClass + "-" + this.options.onColor
        }),
        this.$off = i("<span>", {
          html: this.options.offText,
          class: this.options.baseClass + "-handle-off " + this.options.baseClass + "-" + this.options.offColor
        }),
        this.$label = i("<label>", {
          html: this.options.labelText,
          class: this.options.baseClass + "-label"
        }),
        this.options.indeterminate && this.$element.prop("indeterminate", !0),
        this.$element.on("init.bootstrapSwitch", (n = this,
          function() {
            return n.options.onInit.apply(t, arguments)
          })),
        this.$element.on("switchChange.bootstrapSwitch", (I = this,
          function() {
            return I.options.onSwitchChange.apply(t, arguments)
          })),
        this.$container = this.$element.wrap(this.$container).parent(),
        this.$wrapper = this.$container.wrap(this.$wrapper).parent(),
        this.$element.before(this.$on).before(this.$label).before(this.$off).trigger("init.bootstrapSwitch"),
        this._elementHandlers(),
        this._handleHandlers(),
        this._labelHandlers(),
        this._formHandler()
    }(t.prototype._constructor = t).prototype.state = function(t, g) {
        return void 0 === t ? this.options.state : (this.options.disabled || this.options.readonly || this.options.indeterminate || this.options.state && !this.options.radioAllOff && this.$element.is(":radio") || this.$element.prop("checked", t = !!t).trigger("change.bootstrapSwitch", g), this.$element)
      },
      t.prototype.toggleState = function(t) {
        return this.options.disabled || this.options.readonly || this.options.indeterminate ? this.$element : this.$element.prop("checked", !this.options.state).trigger("change.bootstrapSwitch", t)
      },
      t.prototype.size = function(t) {
        return void 0 === t ? this.options.size : (null != this.options.size && this.$wrapper.removeClass(this.options.baseClass + "-" + this.options.size), t && this.$wrapper.addClass(this.options.baseClass + "-" + t), this.options.size = t, this.$element)
      },
      t.prototype.animate = function(t) {
        return void 0 === t ? this.options.animate : (this.$wrapper[(t = !!t) ? "addClass" : "removeClass"](this.options.baseClass + "-animate"), this.options.animate = t, this.$element)
      },
      t.prototype.disabled = function(t) {
        return void 0 === t ? this.options.disabled : (this.$wrapper[(t = !!t) ? "addClass" : "removeClass"](this.options.baseClass + "-disabled"), this.$element.prop("disabled", t), this.options.disabled = t, this.$element)
      },
      t.prototype.toggleDisabled = function() {
        return this.$element.prop("disabled", !this.options.disabled),
          this.$wrapper.toggleClass(this.options.baseClass + "-disabled"),
          this.options.disabled = !this.options.disabled,
          this.$element
      },
      t.prototype.readonly = function(t) {
        return void 0 === t ? this.options.readonly : (this.$wrapper[(t = !!t) ? "addClass" : "removeClass"](this.options.baseClass + "-readonly"), this.$element.prop("readonly", t), this.options.readonly = t, this.$element)
      },
      t.prototype.toggleReadonly = function() {
        return this.$element.prop("readonly", !this.options.readonly),
          this.$wrapper.toggleClass(this.options.baseClass + "-readonly"),
          this.options.readonly = !this.options.readonly,
          this.$element
      },
      t.prototype.indeterminate = function(t) {
        return void 0 === t ? this.options.indeterminate : (this.$wrapper[(t = !!t) ? "addClass" : "removeClass"](this.options.baseClass + "-indeterminate"), this.$element.prop("indeterminate", t), this.options.indeterminate = t, this.$element)
      },
      t.prototype.toggleIndeterminate = function() {
        return this.$element.prop("indeterminate", !this.options.indeterminate),
          this.$wrapper.toggleClass(this.options.baseClass + "-indeterminate"),
          this.options.indeterminate = !this.options.indeterminate,
          this.$element
      },
      t.prototype.onColor = function(t) {
        var g = this.options.onColor;
        return void 0 === t ? g : (null != g && this.$on.removeClass(this.options.baseClass + "-" + g), this.$on.addClass(this.options.baseClass + "-" + t), this.options.onColor = t, this.$element)
      },
      t.prototype.offColor = function(t) {
        var g = this.options.offColor;
        return void 0 === t ? g : (null != g && this.$off.removeClass(this.options.baseClass + "-" + g), this.$off.addClass(this.options.baseClass + "-" + t), this.options.offColor = t, this.$element)
      },
      t.prototype.onText = function(t) {
        return void 0 === t ? this.options.onText : (this.$on.html(t), this.options.onText = t, this.$element)
      },
      t.prototype.offText = function(t) {
        return void 0 === t ? this.options.offText : (this.$off.html(t), this.options.offText = t, this.$element)
      },
      t.prototype.labelText = function(t) {
        return void 0 === t ? this.options.labelText : (this.$label.html(t), this.options.labelText = t, this.$element)
      },
      t.prototype.baseClass = function(t) {
        return this.options.baseClass
      },
      t.prototype.wrapperClass = function(t) {
        return void 0 === t ? this.options.wrapperClass : (t = t || i.fn.bootstrapSwitch.defaults.wrapperClass, this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")), this.$wrapper.addClass(this._getClasses(t).join(" ")), this.options.wrapperClass = t, this.$element)
      },
      t.prototype.radioAllOff = function(t) {
        return void 0 === t ? this.options.radioAllOff : (this.options.radioAllOff = t, this.$element)
      },
      t.prototype.onInit = function(t) {
        return void 0 === t ? this.options.onInit : (t = t || i.fn.bootstrapSwitch.defaults.onInit, this.options.onInit = t, this.$element)
      },
      t.prototype.onSwitchChange = function(t) {
        return void 0 === t ? this.options.onSwitchChange : (t = t || i.fn.bootstrapSwitch.defaults.onSwitchChange, this.options.onSwitchChange = t, this.$element)
      },
      t.prototype.destroy = function() {
        var t = this.$element.closest("form");
        return t.length && t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),
          this.$container.children().not(this.$element).remove(),
          this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),
          this.$element
      },
      t.prototype._elementHandlers = function() {
        return this.$element.on({
          "change.bootstrapSwitch": function(t, g) {
            if (t.preventDefault(), t.stopImmediatePropagation(), (t = I.$element.is(":checked")) !== I.options.state) return I.options.state = t,
              I.$wrapper.removeClass(t ? I.options.baseClass + "-off" : I.options.baseClass + "-on").addClass(t ? I.options.baseClass + "-on" : I.options.baseClass + "-off"),
              g ? void 0 : (I.$element.is(":radio") && i("[name='" + I.$element.attr("name") + "']").not(I.$element).prop("checked", !1).trigger("change.bootstrapSwitch", !0), I.$element.trigger("switchChange.bootstrapSwitch", [t]))
          },
          "focus.bootstrapSwitch": function(t) {
            return t.preventDefault(),
              n.$wrapper.addClass(n.options.baseClass + "-focused")
          },
          "blur.bootstrapSwitch": function(t) {
            return t.preventDefault(),
              e.$wrapper.removeClass(e.options.baseClass + "-focused")
          },
          "keydown.bootstrapSwitch": (g = e = n = I = this,
            function(t) {
              if (t.which && !g.options.disabled && !g.options.readonly && !g.options.indeterminate) switch (t.which) {
                case 37:
                  return t.preventDefault(),
                    t.stopImmediatePropagation(),
                    g.state(!1);
                case 39:
                  return t.preventDefault(),
                    t.stopImmediatePropagation(),
                    g.state(!0)
              }
            })
        });
        var g, e, n, I
      }, t.prototype._handleHandlers = function() {
        var g, e;
        return this.$on.on("click.bootstrapSwitch", (g = this,
            function(t) {
              return g.state(!1),
                g.$element.trigger("focus.bootstrapSwitch")
            })),
          this.$off.on("click.bootstrapSwitch", (e = this,
            function(t) {
              return e.state(!0),
                e.$element.trigger("focus.bootstrapSwitch")
            }))
      },
      t.prototype._labelHandlers = function() {
        return this.$label.on({
          "mousemove.bootstrapSwitch touchmove.bootstrapSwitch": function(t) {
            if (I.isLabelDragging) return t.preventDefault(),
              I.isLabelDragged = !0,
              t = ((t.pageX || t.originalEvent.touches[0].pageX) - I.$wrapper.offset().left) / I.$wrapper.width() * 100,
              I.options.animate && I.$wrapper.removeClass(I.options.baseClass + "-animate"),
              t < 25 ? t = 25 : 75 < t && (t = 75),
              I.$container.css("margin-left", t - 75 + "%"),
              I.$element.trigger("focus.bootstrapSwitch")
          },
          "mousedown.bootstrapSwitch touchstart.bootstrapSwitch": function(t) {
            if (!(n.isLabelDragging || n.options.disabled || n.options.readonly || n.options.indeterminate)) return t.preventDefault(),
              n.isLabelDragging = !0,
              n.$element.trigger("focus.bootstrapSwitch")
          },
          "mouseup.bootstrapSwitch touchend.bootstrapSwitch": function(t) {
            if (e.isLabelDragging) return t.preventDefault(),
              e.isLabelDragged ? (e.isLabelDragged = !1, e.state(parseInt(e.$container.css("margin-left"), 10) > -e.$container.width() / 6), e.options.animate && e.$wrapper.addClass(e.options.baseClass + "-animate"), e.$container.css("margin-left", "")) : e.state(!e.options.state),
              e.isLabelDragging = !1
          },
          "mouseleave.bootstrapSwitch": (g = e = n = I = this,
            function(t) {
              return g.$label.trigger("mouseup.bootstrapSwitch")
            })
        });
        var g, e, n, I
      }, t.prototype._formHandler = function() {
        var t = this.$element.closest("form");
        if (!t.data("bootstrap-switch")) return t.on("reset.bootstrapSwitch",
          function() {
            return g.setTimeout(function() {
                return t.find("input").filter(function() {
                  return i(this).data("bootstrap-switch")
                }).each(function() {
                  return i(this).bootstrapSwitch("state", this.checked)
                })
              },
              1)
          }).data("bootstrap-switch", !0)
      },
      t.prototype._getClasses = function(t) {
        var g, e, n, I;
        if (!i.isArray(t)) return [this.options.baseClass + "-" + t];
        for (e = [], n = 0, I = t.length; n < I; n++) g = t[n],
          e.push(this.options.baseClass + "-" + g);
        return e
      },
      C = t,
      i.fn.bootstrapSwitch = function() {
        var e = arguments[0],
          n = 2 <= arguments.length ? A.call(arguments, 1) : [],
          I = this;
        return this.each(function() {
            var t = i(this),
              g = t.data("bootstrap-switch");
            if (g || t.data("bootstrap-switch", g = new C(this, e)), "string" == typeof e) return I = g[e].apply(g, n)
          }),
          I
      },
      i.fn.bootstrapSwitch.Constructor = C,
      i.fn.bootstrapSwitch.defaults = {
        state: !0,
        size: null,
        animate: !0,
        disabled: !1,
        readonly: !1,
        indeterminate: !1,
        onColor: "primary",
        offColor: "default",
        onText: "ON",
        offText: "OFF",
        labelText: "&nbsp;",
        baseClass: "bootstrap-switch",
        wrapperClass: "wrapper",
        radioAllOff: !1,
        onInit: function() {},
        onSwitchChange: function() {}
      }
  }(window.jQuery, window)
}.call(this),
  function(s) {
    "use strict";
    var g = {
      tagClass: function(t) {
        return "label label-info"
      },
      itemValue: function(t) {
        return t && t.toString()
      },
      itemText: function(t) {
        return this.itemValue(t)
      },
      freeInput: !0,
      addOnBlur: !0,
      maxTags: void 0,
      maxChars: void 0,
      confirmKeys: [13, 44],
      onTagExists: function(t, g) {
        g.hide().fadeIn()
      },
      trimValue: !1,
      allowDuplicates: !1
    };

    function i(t, g) {
      this.itemsArray = [],
        this.$element = s(t),
        this.$element.hide(),
        this.isSelect = "SELECT" === t.tagName,
        this.multiple = this.isSelect && t.hasAttribute("multiple"),
        this.objectItems = g && g.itemValue,
        this.placeholderText = t.hasAttribute("placeholder") ? this.$element.attr("placeholder") : "",
        this.inputSize = Math.max(1, this.placeholderText.length),
        this.$container = s('<div class="bootstrap-tagsinput"></div>'),
        this.$input = s('<input type="text" placeholder="' + this.placeholderText + '"/>').appendTo(this.$container),
        this.$element.after(this.$container);
      t = (this.inputSize < 3 ? 3 : this.inputSize) + "em";
      this.$input.get(0).style.cssText = "width: " + t + " !important;",
        this.build(g)
    }

    function I(t, g) {
      var e;
      "function" != typeof t[g] && (e = t[g], t[g] = function(t) {
        return t[e]
      })
    }

    function C(t, g) {
      var e;
      "function" != typeof t[g] && (e = t[g], t[g] = function() {
        return e
      })
    }
    i.prototype = {
        constructor: i,
        add: function(t, g) {
          var e = this;
          if (!(e.options.maxTags && e.itemsArray.length >= e.options.maxTags) && (!1 === t || t)) {
            if ("object" == typeof(t = "string" == typeof t && e.options.trimValue ? s.trim(t) : t) && !e.objectItems) throw "Can't add objects when itemValue option is not set";
            if (!t.toString().match(/^\s*$/)) {
              if (e.isSelect && !e.multiple && 0 < e.itemsArray.length && e.remove(e.itemsArray[0]), "string" == typeof t && "INPUT" === this.$element[0].tagName) {
                var n = t.split(",");
                if (1 < n.length) {
                  for (var I = 0; I < n.length; I++) this.add(n[I], !0);
                  return void(g || e.pushVal())
                }
              }
              var i, C = e.options.itemValue(t),
                A = e.options.itemText(t),
                a = e.options.tagClass(t),
                o = s.grep(e.itemsArray,
                  function(t) {
                    return e.options.itemValue(t) === C
                  })[0];
              !o || e.options.allowDuplicates ? e.items().toString().length + t.length + 1 > e.options.maxInputLength || (i = s.Event("beforeItemAdd", {
                item: t,
                cancel: !1
              }), e.$element.trigger(i), i.cancel || (e.itemsArray.push(t), (a = s('<span class="tag ' + r(a) + '">' + r(A) + '<span data-role="remove"></span></span>')).data("item", t), e.findInputWrapper().before(a), a.after(" "), e.isSelect && !s('option[value="' + encodeURIComponent(C) + '"]', e.$element)[0] && ((A = s("<option selected>" + r(A) + "</option>")).data("item", t), A.attr("value", C), e.$element.append(A)), g || e.pushVal(), e.options.maxTags !== e.itemsArray.length && e.items().toString().length !== e.options.maxInputLength || e.$container.addClass("bootstrap-tagsinput-max"), e.$element.trigger(s.Event("itemAdded", {
                item: t
              })))) : e.options.onTagExists && (g = s(".tag", e.$container).filter(function() {
                return s(this).data("item") === o
              }), e.options.onTagExists(t, g))
            }
          }
        },
        remove: function(g, t) {
          var e = this;
          if (g = e.objectItems ? (g = "object" == typeof g ? s.grep(e.itemsArray,
              function(t) {
                return e.options.itemValue(t) == e.options.itemValue(g)
              }) : s.grep(e.itemsArray,
              function(t) {
                return e.options.itemValue(t) == g
              }))[g.length - 1] : g) {
            var n = s.Event("beforeItemRemove", {
              item: g,
              cancel: !1
            });
            if (e.$element.trigger(n), n.cancel) return;
            s(".tag", e.$container).filter(function() {
                return s(this).data("item") === g
              }).remove(),
              s("option", e.$element).filter(function() {
                return s(this).data("item") === g
              }).remove(),
              -1 !== s.inArray(g, e.itemsArray) && e.itemsArray.splice(s.inArray(g, e.itemsArray), 1)
          }
          t || e.pushVal(),
            e.options.maxTags > e.itemsArray.length && e.$container.removeClass("bootstrap-tagsinput-max"),
            e.$element.trigger(s.Event("itemRemoved", {
              item: g
            }))
        },
        removeAll: function() {
          for (s(".tag", this.$container).remove(), s("option", this.$element).remove(); 0 < this.itemsArray.length;) this.itemsArray.pop();
          this.pushVal()
        },
        refresh: function() {
          var i = this;
          s(".tag", i.$container).each(function() {
            var t = s(this),
              g = t.data("item"),
              e = i.options.itemValue(g),
              n = i.options.itemText(g),
              I = i.options.tagClass(g);
            t.attr("class", null),
              t.addClass("tag " + r(I)),
              t.contents().filter(function() {
                return 3 == this.nodeType
              })[0].nodeValue = r(n),
              i.isSelect && s("option", i.$element).filter(function() {
                return s(this).data("item") === g
              }).attr("value", e)
          })
        },
        items: function() {
          return this.itemsArray
        },
        pushVal: function() {
          var g = this,
            t = s.map(g.items(),
              function(t) {
                return g.options.itemValue(t).toString()
              });
          g.$element.val(t, !0).trigger("change")
        },
        build: function(t) {
          var e, n, A = this;
          A.options = s.extend({},
              g, t),
            A.objectItems && (A.options.freeInput = !1),
            I(A.options, "itemValue"),
            I(A.options, "itemText"),
            C(A.options, "tagClass"),
            A.options.typeahead && (C(e = A.options.typeahead || {},
              "source"), A.$input.typeahead(s.extend({},
              e, {
                source: function(t, I) {
                  function g(t) {
                    for (var g = [], e = 0; e < t.length; e++) {
                      var n = A.options.itemText(t[e]);
                      i[n] = t[e],
                        g.push(n)
                    }
                    I(g)
                  }
                  this.map = {};
                  var i = this.map,
                    t = e.source(t);
                  s.isFunction(t.success) ? t.success(g) : (s.isFunction(t.then) ? t : s.when(t)).then(g)
                },
                updater: function(t) {
                  A.add(this.map[t])
                },
                matcher: function(t) {
                  return -1 !== t.toLowerCase().indexOf(this.query.trim().toLowerCase())
                },
                sorter: function(t) {
                  return t.sort()
                },
                highlighter: function(t) {
                  var g = new RegExp("(" + this.query + ")", "gi");
                  return t.replace(g, "<strong>$1</strong>")
                }
              }))),
            A.options.typeaheadjs && (n = A.options.typeaheadjs || {},
              A.$input.typeahead(null, n).on("typeahead:selected", s.proxy(function(t, g) {
                  n.valueKey ? A.add(g[n.valueKey]) : A.add(g),
                    A.$input.typeahead("val", "")
                },
                A))),
            A.$container.on("click", s.proxy(function(t) {
                A.$element.attr("disabled") || A.$input.removeAttr("disabled"),
                  A.$input.focus()
              },
              A)),
            A.options.addOnBlur && A.options.freeInput && A.$input.on("focusout", s.proxy(function(t) {
                0 === s(".typeahead, .twitter-typeahead", A.$container).length && (A.add(A.$input.val()), A.$input.val(""))
              },
              A)),
            A.$container.on("keydown", "input", s.proxy(function(t) {
                var g, e = s(t.target),
                  n = A.findInputWrapper();
                if (A.$element.attr("disabled")) A.$input.attr("disabled", "disabled");
                else {
                  switch (t.which) {
                    case 8:
                      0 !== a(e[0]) || (g = n.prev()) && A.remove(g.data("item"));
                      break;
                    case 46:
                      0 !== a(e[0]) || (g = n.next()) && A.remove(g.data("item"));
                      break;
                    case 37:
                      var I = n.prev();
                      0 === e.val().length && I[0] && (I.before(n), e.focus());
                      break;
                    case 39:
                      I = n.next();
                      0 === e.val().length && I[0] && (I.after(n), e.focus())
                  }
                  t = e.val().length,
                    Math.ceil(t / 5);
                  e.attr("size", Math.max(this.inputSize, e.val().length))
                }
              },
              A)),
            A.$container.on("keypress", "input", s.proxy(function(t) {
                var g, e, I, n, i, C = s(t.target);
                A.$element.attr("disabled") ? A.$input.attr("disabled", "disabled") : (g = C.val(), e = A.options.maxChars && g.length >= A.options.maxChars, A.options.freeInput && (I = t, n = A.options.confirmKeys, i = !1, s.each(n,
                  function(t, g) {
                    if ("number" == typeof g && I.which === g) return !(i = !0);
                    if (I.which === g.which) {
                      var e = !g.hasOwnProperty("altKey") || I.altKey === g.altKey,
                        n = !g.hasOwnProperty("shiftKey") || I.shiftKey === g.shiftKey,
                        g = !g.hasOwnProperty("ctrlKey") || I.ctrlKey === g.ctrlKey;
                      if (e && n && g) return !(i = !0)
                    }
                  }), i || e) && (A.add(e ? g.substr(0, A.options.maxChars) : g), C.val(""), t.preventDefault()), t = C.val().length, Math.ceil(t / 5), C.attr("size", Math.max(this.inputSize, C.val().length)))
              },
              A)),
            A.$container.on("click", "[data-role=remove]", s.proxy(function(t) {
                A.$element.attr("disabled") || A.remove(s(t.target).closest(".tag").data("item"))
              },
              A)),
            A.options.itemValue === g.itemValue && ("INPUT" === A.$element[0].tagName ? A.add(A.$element.val()) : s("option", A.$element).each(function() {
              A.add(s(this).attr("value"), !0)
            }))
        },
        destroy: function() {
          this.$container.off("keypress", "input"),
            this.$container.off("click", "[role=remove]"),
            this.$container.remove(),
            this.$element.removeData("tagsinput"),
            this.$element.show()
        },
        focus: function() {
          this.$input.focus()
        },
        input: function() {
          return this.$input
        },
        findInputWrapper: function() {
          for (var t = this.$input[0], g = this.$container[0]; t && t.parentNode !== g;) t = t.parentNode;
          return s(t)
        }
      },
      s.fn.tagsinput = function(e, n) {
        var I = [];
        return this.each(function() {
            var t, g = s(this).data("tagsinput");
            g ? e || n ? void 0 === g[e] || void 0 !== (t = g[e](n)) && I.push(t) : I.push(g) : (g = new i(this, e), s(this).data("tagsinput", g), I.push(g), "SELECT" === this.tagName && s("option", s(this)).attr("selected", "selected"), s(this).val(s(this).val()))
          }),
          "string" != typeof e || 1 < I.length ? I : I[0]
      },
      s.fn.tagsinput.Constructor = i;
    var e = s("<div />");

    function r(t) {
      return t ? e.text(t).html() : ""
    }

    function a(t) {
      var g, e = 0;
      return document.selection ? (t.focus(), (g = document.selection.createRange()).moveStart("character", -t.value.length), e = g.text.length) : !t.selectionStart && "0" != t.selectionStart || (e = t.selectionStart),
        e
    }
    s(function() {
      s("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()
    })
  }(window.jQuery),
  function(t, g) {
    t.onDomReady = g
  }(this,
    function(t) {
      "use strict";

      function e(t) {
        if (!y) {
          if (!C.body) return I(e);
          for (y = !0; t = Q.shift();) I(t)
        }
      }

      function g(t) {
        !p && t.type !== a && C[l] !== r || (n(), e())
      }

      function n() {
        p ? (C[b](h, g, o), t[b](a, g, o)) : (C[u](B, g), t[u](s, g))
      }

      function I(t, g) {
        setTimeout(t, 0 <= +g ? g : 1)
      }

      function i(t) {
        y ? I(t) : Q.push(t)
      }
      null == document.readyState && document.addEventListener && (document.addEventListener("DOMContentLoaded",
        function t() {
          document.removeEventListener("DOMContentLoaded", t, !1),
            document.readyState = "complete"
        },
        !1), document.readyState = "loading");
      var C = t.document,
        A = C.documentElement,
        a = "load",
        o = !1,
        s = "on" + a,
        r = "complete",
        l = "readyState",
        c = "attachEvent",
        u = "detachEvent",
        d = "addEventListener",
        h = "DOMContentLoaded",
        B = "onreadystatechange",
        b = "removeEventListener",
        p = d in C,
        m = o,
        y = o,
        Q = [];
      if (C[l] === r) I(e);
      else if (p) C[d](h, g, o),
        t[d](a, g, o);
      else {
        C[c](B, g),
          t[c](s, g);
        try {
          m = null == t.frameElement && A
        } catch (t) {}
        m && m.doScroll && !
          function g() {
            if (!y) {
              try {
                m.doScroll("left")
              } catch (t) {
                return I(g, 50)
              }
              n(),
                e()
            }
          }()
      }
      return i.version = "1.4.0",
        i.isReady = function() {
          return y
        },
        i
    }(this)),
  document.querySelectorAll || (document.querySelectorAll = function(t) {
    var g, e = document.createElement("style"),
      n = [];
    for (document.documentElement.firstChild.appendChild(e), document._qsa = [], e.styleSheet.cssText = t + "{x-qsa:expression(document._qsa && document._qsa.push(this))}", window.scrollBy(0, 0), e.parentNode.removeChild(e); document._qsa.length;)(g = document._qsa.shift()).style.removeAttribute("x-qsa"),
      n.push(g);
    return document._qsa = null,
      n
  }),
  document.querySelector || (document.querySelector = function(t) {
    t = document.querySelectorAll(t);
    return t.length ? t[0] : null
  }),
  document.getElementsByClassName || (document.getElementsByClassName = function(t) {
    return t = String(t).replace(/^|\s+/g, "."),
      document.querySelectorAll(t)
  }),
  Object.keys || (Object.keys = function(t) {
    if (t !== Object(t)) throw TypeError("Object.keys called on non-object");
    var g, e = [];
    for (g in t) Object.prototype.hasOwnProperty.call(t, g) && e.push(g);
    return e
  }),
  function(t) {
    var A = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    t.atob = t.atob ||
      function(t) {
        var g = 0,
          e = [],
          n = 0,
          I = 0;
        if ((t = (t = (t = String(t)).replace(/\s/g, "")).length % 4 == 0 ? t.replace(/=+$/, "") : t).length % 4 == 1) throw Error("InvalidCharacterError");
        if (/[^+/0 - 9A - Za - z] /.test(t)) throw Error("InvalidCharacterError");
        for (; g < t.length;) n = n << 6 | A.indexOf(t.charAt(g)),
          24 === (I += 6) && (e.push(String.fromCharCode(n >> 16 & 255)), e.push(String.fromCharCode(n >> 8 & 255)), e.push(String.fromCharCode(255 & n)), n = I = 0),
          g += 1;
        return 12 === I ? (n >>= 4, e.push(String.fromCharCode(255 & n))) : 18 === I && (n >>= 2, e.push(String.fromCharCode(n >> 8 & 255)), e.push(String.fromCharCode(255 & n))),
          e.join("")
      },
      t.btoa = t.btoa ||
      function(t) {
        t = String(t);
        var g, e, n, I, i = 0,
          C = [];
        if (/[^\x00-\xFF]/.test(t)) throw Error("InvalidCharacterError");
        for (; i < t.length;) e = (3 & (g = t.charCodeAt(i++))) << 4 | (n = t.charCodeAt(i++)) >> 4,
          n = (15 & n) << 2 | (I = t.charCodeAt(i++)) >> 6,
          I = 63 & I,
          i === t.length + 2 ? I = n = 64 : i === t.length + 1 && (I = 64),
          C.push(A.charAt(g >> 2), A.charAt(e), A.charAt(n), A.charAt(I));
        return C.join("")
      }
  }(this),
  function() {
    function C(t, g, e) {
      t.document;
      var n = t.currentStyle[g].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/) || [0, 0, ""],
        I = n[1],
        n = n[2];
      return e = e && (/%|em/.test(n) && t.parentElement ? C(t.parentElement, "fontSize", null) : 16),
        t = "fontSize" == g ? e : /width/i.test(g) ? t.clientWidth : t.clientHeight,
        "%" == n ? I / 100 * t : "cm" == n ? .3937 * I * 96 : "em" == n ? I * e : "in" == n ? 96 * I : "mm" == n ? .3937 * I * 96 / 10 : "pc" == n ? 12 * I * 96 / 72 : "pt" == n ? 96 * I / 72 : I
    }

    function A(t, g) {
      var e = "border" == g ? "Width" : "",
        n = g + "Top" + e,
        I = g + "Right" + e,
        i = g + "Bottom" + e,
        e = g + "Left" + e;
      t[g] = (t[n] == t[I] && t[n] == t[i] && t[n] == t[e] ? [t[n]] : t[n] == t[i] && t[e] == t[I] ? [t[n], t[I]] : t[e] == t[I] ? [t[n], t[I], t[i]] : [t[n], t[I], t[i], t[e]]).join(" ")
    }

    function g(t) {
      function g(t) {
        return "-" + t.toLowerCase()
      }
      var e, n = this,
        I = t.currentStyle,
        i = C(t, "fontSize");
      for (e in I)
        if (Array.prototype.push.call(n, "styleFloat" == e ? "float" : e.replace(/[A-Z]/, g)), "width" == e) n[e] = t.offsetWidth + "px";
        else if ("height" == e) n[e] = t.offsetHeight + "px";
      else if ("styleFloat" == e) n.float = I[e];
      else if (/margin.|padding.|border.+W/.test(e) && "auto" != n[e]) n[e] = Math.round(C(t, e, i)) + "px";
      else if (/^outline/.test(e)) try {
        n[e] = I[e]
      } catch (t) {
        n.outlineColor = I.color,
          n.outlineStyle = n.outlineStyle || "none",
          n.outlineWidth = n.outlineWidth || "0px",
          n.outline = [n.outlineColor, n.outlineWidth, n.outlineStyle].join(" ")
      } else n[e] = I[e];
      A(n, "margin"),
        A(n, "padding"),
        A(n, "border"),
        n.fontSize = Math.round(i) + "px"
    }
    window.getComputedStyle || (g.prototype = {
        constructor: g,
        getPropertyPriority: function() {
          throw new Error("NotSupportedError: DOM Exception 9")
        },
        getPropertyValue: function(t) {
          return this[t.replace(/-\w/g,
            function(t) {
              return t[1].toUpperCase()
            })]
        },
        item: function(t) {
          return this[t]
        },
        removeProperty: function() {
          throw new Error("NoModificationAllowedError: DOM Exception 7")
        },
        setProperty: function() {
          throw new Error("NoModificationAllowedError: DOM Exception 7")
        },
        getPropertyCSSValue: function() {
          throw new Error("NotSupportedError: DOM Exception 9")
        }
      },
      window.getComputedStyle = Window.prototype.getComputedStyle = function(t) {
        return new g(t)
      })
  }(),
  Object.prototype.hasOwnProperty || (Object.prototype.hasOwnProperty = function(t) {
    var g = this.__proto__ || this.constructor.prototype;
    return t in this && (!(t in g) || g[t] !== this[t])
  }),
  function(t) {
    t.augment = function() {
      "use strict";
      var A = function() {},
        a = Array.prototype.slice,
        e = function(t, g) {
          var e = A.prototype = "function" == typeof t ? t.prototype : t,
            n = new A,
            I = g.apply(n, a.call(arguments, 2).concat(e));
          if ("object" == typeof I)
            for (var i in I) n[i] = I[i];
          if (!n.hasOwnProperty("constructor")) return n;
          var C = n.constructor;
          return C.prototype = n,
            C
        };
      return e.defclass = function(t) {
          var g = t.constructor;
          return g.prototype = t,
            g
        },
        e.extend = function(t, g) {
          return e(t,
            function(t) {
              return this.uber = t,
                g
            })
        },
        e
    }()
  }(this),
  function(Q) {
    function G(t, g, e, n) {
      t = F(e.substr(e.lastIndexOf(t.domain)), t);
      t && f(null, n, t, g)
    }

    function F(t, g) {
      for (var e = {
            theme: x(S.settings.themes.gray, null),
            stylesheets: g.stylesheets,
            holderURL: []
          },
          n = !1, I = String.fromCharCode(11), i = t.replace(/([^\\])\//g, "$1" + I).split(I), C = /%[0-9a-f]{2}/gi, A = i.length, a = 0; a < A; a++) {
        var o = i[a];
        if (o.match(C)) try {
          o = decodeURIComponent(o)
        } catch (t) {
          o = i[a]
        }
        var s, r = !1;
        S.flags.dimensions.match(o) ? (n = !0, e.dimensions = S.flags.dimensions.output(o), r = !0) : S.flags.fluid.match(o) ? (n = !0, e.dimensions = S.flags.fluid.output(o), r = e.fluid = !0) : S.flags.textmode.match(o) ? (e.textmode = S.flags.textmode.output(o), r = !0) : S.flags.colors.match(o) ? (s = S.flags.colors.output(o), e.theme = x(e.theme, s), r = !0) : g.themes[o] ? (g.themes.hasOwnProperty(o) && (e.theme = x(g.themes[o], null)), r = !0) : S.flags.font.match(o) ? (e.font = S.flags.font.output(o), r = !0) : S.flags.auto.match(o) ? r = e.auto = !0 : S.flags.text.match(o) ? (e.text = S.flags.text.output(o), r = !0) : S.flags.random.match(o) && (null == S.vars.cache.themeKeys && (S.vars.cache.themeKeys = Object.keys(g.themes)), s = S.vars.cache.themeKeys[0 | Math.random() * S.vars.cache.themeKeys.length], e.theme = x(g.themes[s], null), r = !0),
          r && e.holderURL.push(o)
      }
      return e.holderURL.unshift(g.domain),
        e.holderURL = e.holderURL.join("/"),
        !!n && e
    }

    function f(t, g, e, n) {
      var I = e.dimensions,
        i = e.theme,
        C = I.width + "x" + I.height;
      if (t = null == t ? e.fluid ? "fluid" : "image" : t, null != e.text && (i.text = e.text, "object" === g.nodeName.toLowerCase())) {
        for (var A = i.text.split("\\n"), a = 0; a < A.length; a++) A[a] = function(t) {
          for (var g = [], e = 0, n = t.length - 1; 0 <= n; n--) e = t[n].charCodeAt(),
            g.unshift(128 < e ? ["&#", e, ";"].join("") : t[n]);
          return g.join("")
        }(A[a]);
        i.text = A.join("\\n")
      }
      var o = e.holderURL,
        n = x(n, null);
      e.font && (i.font = e.font, !n.noFontFallback && "img" === g.nodeName.toLowerCase() && S.setup.supportsCanvas && "svg" === n.renderer && (n = x(n, {
          renderer: "canvas"
        }))),
        e.font && "canvas" == n.renderer && (n.reRender = !0),
        "background" == t ? null == g.getAttribute("data-background-src") && B(g, {
          "data-background-src": o
        }) : B(g, {
          "data-src": o
        }),
        e.theme = i,
        g.holderData = {
          flags: e,
          renderSettings: n
        },
        "image" != t && "fluid" != t || B(g, {
          alt: i.text ? (16 < i.text.length ? i.text.substring(0, 16) + "" : i.text) + " [" + C + "]" : C
        }),
        "image" == t ? ("html" != n.renderer && e.auto || (g.style.width = I.width + "px", g.style.height = I.height + "px"), "html" == n.renderer ? g.style.backgroundColor = i.background : (s(t, {
            dimensions: I,
            theme: i,
            flags: e
          },
          g, n), e.textmode && "exact" == e.textmode && (S.vars.resizableImages.push(g), r(g)))) : "background" == t && "html" != n.renderer ? s(t, {
            dimensions: I,
            theme: i,
            flags: e
          },
          g, n) : "fluid" == t && ("%" == I.height.slice(-1) ? g.style.height = I.height : null != e.auto && e.auto || (g.style.height = I.height + "px"), "%" == I.width.slice(-1) ? g.style.width = I.width : null != e.auto && e.auto || (g.style.width = I.width + "px"), "inline" != g.style.display && "" !== g.style.display && "none" != g.style.display || (g.style.display = "block"), l(g), "html" == n.renderer ? g.style.backgroundColor = i.background : (S.vars.resizableImages.push(g), r(g)))
    }

    function s(t, g, e, n) {
      function I() {
        var t = null;
        switch (n.renderer) {
          case "canvas":
            t = A(C);
            break;
          case "svg":
            t = w(C, n);
            break;
          default:
            throw "Holder: invalid renderer: " + n.renderer
        }
        return t
      }
      var i;
      switch (n.renderer) {
        case "svg":
          if (!S.setup.supportsSVG) return;
          break;
        case "canvas":
          if (!S.setup.supportsCanvas) return;
          break;
        default:
          return
      }
      var g = {
          width: g.dimensions.width,
          height: g.dimensions.height,
          theme: g.theme,
          flags: g.flags
        },
        C = function(t) {
          function g(t, g, e, n) {
            g.width = e,
              g.height = n,
              t.width = Math.max(t.width, g.width),
              t.height += g.height,
              t.add(g)
          }
          switch (t.font = {
              family: t.theme.font || "Arial, Helvetica, Open Sans, sans-serif",
              size: function(t, g, e) {
                g = parseInt(g, 10),
                  t = parseInt(t, 10);
                var n = Math.max(g, t),
                  t = Math.min(g, t),
                  n = Math.min(.75 * t, .75 * n * (1 / 12));
                return Math.round(Math.max(e, n))
              }(t.width, t.height, t.theme.size || 12),
              weight: t.theme.fontweight || "bold"
            },
            t.text = t.theme.text || Math.floor(t.width) + "x" + Math.floor(t.height), t.flags.textmode) {
            case "literal":
              t.text = t.flags.dimensions.width + "x" + t.flags.dimensions.height;
              break;
            case "exact":
              if (!t.flags.exactDimensions) break;
              t.text = Math.floor(t.flags.exactDimensions.width) + "x" + Math.floor(t.flags.exactDimensions.height)
          }
          var e = new U({
              width: t.width,
              height: t.height
            }),
            n = e.Shape,
            I = new n.Rect("holderBg", {
              fill: t.theme.background
            });
          I.resize(t.width, t.height),
            e.root.add(I);
          var i = new n.Group("holderTextGroup", {
            text: t.text,
            align: "center",
            font: t.font,
            fill: t.theme.foreground
          });
          i.moveTo(null, null, 1),
            e.root.add(i);
          var C = i.textPositionData = W(e);
          if (!C) throw "Holder: staging fallback not supported yet.";
          i.properties.leading = C.boundingBox.height;
          var A = null,
            a = null;
          if (1 < C.lineCount) {
            var o = 0,
              s = 0,
              r = t.width * S.setup.lineWrapRatio,
              l = 0;
            a = new n.Group("line" + l);
            for (var c, u = 0; u < C.words.length; u++) {
              var d = C.words[u];
              A = new n.Text(d.text);
              var h = "\\n" == d.text;
              (o + d.width >= r || !0 == h) && (g(i, a, o, i.properties.leading), o = 0, s += i.properties.leading, l += 1, (a = new n.Group("line" + l)).y = s),
              !0 != h && (A.moveTo(o, 0), o += C.spaceWidth + d.width, a.add(A))
            }
            for (c in g(i, a, o, i.properties.leading), i.children) a = i.children[c],
              a.moveTo((i.width - a.width) / 2, null, null);
            i.moveTo((t.width - i.width) / 2, (t.height - i.height) / 2, null),
              (t.height - i.height) / 2 < 0 && i.moveTo(null, 0, null)
          } else A = new n.Text(t.text),
            (a = new n.Group("line0")).add(A),
            i.add(a),
            i.moveTo((t.width - C.boundingBox.width) / 2, (t.height - C.boundingBox.height) / 2, null);
          return e
        }(g);
      if (g.font.size, g.font.family, g.font.weight, null == (i = I())) throw "Holder: couldn't render placeholder";
      "background" == t ? (e.style.backgroundImage = "url(" + i + ")", e.style.backgroundSize = g.width + "px " + g.height + "px") : ("img" === e.nodeName.toLowerCase() ? B(e, {
          src: i
        }) : "object" === e.nodeName.toLowerCase() && (B(e, {
          data: i
        }), B(e, {
          type: "image/svg+xml"
        })), n.reRender && setTimeout(function() {
            var t = I();
            if (null == t) throw "Holder: couldn't render placeholder";
            "img" === e.nodeName.toLowerCase() ? B(e, {
              src: t
            }) : "object" === e.nodeName.toLowerCase() && (B(e, {
              data: t
            }), B(e, {
              type: "image/svg+xml"
            }))
          },
          100)),
        B(e, {
          "data-holder-rendered": !0
        })
    }

    function r(t) {
      var g, e = null == t || null == t.nodeType ? S.vars.resizableImages : [t];
      for (g in e)
        if (e.hasOwnProperty(g)) {
          var n = e[g];
          if (n.holderData) {
            var I = n.holderData.flags,
              i = a(n, o.invisibleErrorFn(r));
            if (i) {
              if (I.fluid && I.auto) {
                var C = n.holderData.fluidConfig;
                switch (C.mode) {
                  case "width":
                    i.height = i.width / C.ratio;
                    break;
                  case "height":
                    i.width = i.height * C.ratio
                }
              }
              var A = {
                dimensions: i,
                theme: I.theme,
                flags: I
              };
              I.textmode && "exact" == I.textmode && (I.exactDimensions = i, A.dimensions = I.dimensions),
                s("image", A, n, n.holderData.renderSettings)
            }
          }
        }
    }

    function a(t, g) {
      var e = {
        height: t.clientHeight,
        width: t.clientWidth
      };
      return e.height || e.width ? (t.removeAttribute("data-holder-invisible"), e) : (B(t, {
        "data-holder-invisible": !0
      }), void g.call(this, t))
    }

    function l(t) {
      var g, e;
      !t.holderData || (e = a(t, o.invisibleErrorFn(l))) && ((e = {
        fluidHeight: "%" == (g = t.holderData.flags).dimensions.height.slice(-1),
        fluidWidth: "%" == g.dimensions.width.slice(-1),
        mode: null,
        initialDimensions: e
      }).fluidWidth && !e.fluidHeight ? (e.mode = "width", e.ratio = e.initialDimensions.width / parseFloat(g.dimensions.height)) : !e.fluidWidth && e.fluidHeight && (e.mode = "height", e.ratio = parseFloat(g.dimensions.width) / e.initialDimensions.height), t.holderData.fluidConfig = e)
    }

    function X(t, g) {
      return null == g ? y.createElement(t) : y.createElementNS(g, t)
    }

    function B(t, g) {
      for (var e in g) t.setAttribute(e, g[e])
    }

    function b(t, g, e) {
      var n;
      return null == t && (t = X("svg", m), n = X("defs", m), t.appendChild(n)),
        t.webkitMatchesSelector && t.setAttribute("xmlns", m),
        B(t, {
          width: g,
          height: e,
          viewBox: "0 0 " + g + " " + e,
          preserveAspectRatio: "none"
        }),
        t
    }

    function x(t, g) {
      var e, n = {};
      for (e in t) t.hasOwnProperty(e) && (n[e] = t[e]);
      if (null != g)
        for (var I in g) g.hasOwnProperty(I) && (n[I] = g[I]);
      return n
    }

    function p(t) {
      var g, e = [];
      for (g in t) t.hasOwnProperty(g) && e.push(g + ":" + t[g]);
      return e.join(";")
    }

    function t() {
      !
      function(t) {
        S.vars.debounceTimer || t.call(this),
          S.vars.debounceTimer && clearTimeout(S.vars.debounceTimer),
          S.vars.debounceTimer = setTimeout(function() {
              S.vars.debounceTimer = null,
                t.call(this)
            },
            S.setup.debounce)
      }(function() {
        r(null)
      })
    }

    function Z(t) {
      var g = null;
      return "string" == typeof t ? g = y.querySelectorAll(t) : Q.NodeList && t instanceof Q.NodeList ? g = t : Q.Node && t instanceof Q.Node ? g = [t] : Q.HTMLCollection && t instanceof Q.HTMLCollection ? g = t : null === t && (g = []),
        g
    }
    var m = "http://www.w3.org/2000/svg",
      y = Q.document,
      o = {
        addTheme: function(t, g) {
          return null != t && null != g && (S.settings.themes[t] = g),
            delete S.vars.cache.themeKeys,
            this
        },
        addImage: function(t, g) {
          var e = y.querySelectorAll(g);
          if (e.length)
            for (var n = 0,
                I = e.length; n < I; n++) {
              var i = X("img");
              B(i, {
                  "data-src": t
                }),
                e[n].appendChild(i)
            }
          return this
        },
        run: function(t) {
          t = t || {};
          var g = {};
          S.vars.preempted = !0;
          var e = x(S.settings, t);
          g.renderer = e.renderer || S.setup.renderer,
            -1 === S.setup.renderers.join(",").indexOf(g.renderer) && (g.renderer = S.setup.supportsSVG ? "svg" : S.setup.supportsCanvas ? "canvas" : "html"),
            e.use_canvas ? g.renderer = "canvas" : e.use_svg && (g.renderer = "svg");
          var n = Z(e.images),
            I = Z(e.bgnodes),
            i = Z(e.stylenodes),
            C = Z(e.objects);
          g.stylesheets = [],
            g.svgXMLStylesheet = !0,
            g.noFontFallback = e.noFontFallback || !1;
          for (var A = 0; A < i.length; A++) {
            var a, o = i[A];
            o.attributes.rel && o.attributes.href && "stylesheet" == o.attributes.rel.value && (a = o.attributes.href.value, (o = X("a")).href = a, o = o.protocol + "//" + o.host + o.pathname + o.search, g.stylesheets.push(o))
          }
          for (A = 0; A < I.length; A++) {
            var s = Q.getComputedStyle(I[A], null).getPropertyValue("background-image"),
              r = I[A].getAttribute("data-background-src"),
              l = null,
              l = null == r ? s : r,
              s = null,
              r = "?" + e.domain + "/";
            0 === l.indexOf(r) ? s = l.slice(1) : -1 == l.indexOf(r) || null != (r = l.substr(l.indexOf(r)).slice(1).match(/([^\"]*)"?\)/)) && (s = r[1]),
              null == s || (s = F(s, e)) && f("background", I[A], s, g)
          }
          for (A = 0; A < C.length; A++) {
            var c = C[A],
              u = {};
            try {
              u.data = c.getAttribute("data"),
                u.dataSrc = c.getAttribute("data-src")
            } catch (t) {}
            var d = null != u.data && 0 === u.data.indexOf(e.domain),
              h = null != u.dataSrc && 0 === u.dataSrc.indexOf(e.domain);
            d ? G(e, g, u.data, c) : h && G(e, g, u.dataSrc, c)
          }
          for (A = 0; A < n.length; A++) {
            var B = n[A],
              b = {};
            try {
              b.src = B.getAttribute("src"),
                b.dataSrc = B.getAttribute("data-src"),
                b.rendered = B.getAttribute("data-holder-rendered")
            } catch (t) {}
            var p = null != b.src,
              m = null != b.dataSrc && 0 === b.dataSrc.indexOf(e.domain),
              y = null != b.rendered && "true" == b.rendered;
            p ? 0 === b.src.indexOf(e.domain) ? G(e, g, b.src, B) : m && (y ? G(e, g, b.dataSrc, B) : function(t, g) {
              var e = new Image;
              e.onerror = function() {
                  g.call(this, !1, t)
                },
                e.onload = function() {
                  g.call(this, !0, t)
                },
                e.src = t.src
            }({
                src: b.src,
                options: e,
                renderSettings: g,
                dataSrc: b.dataSrc,
                image: B
              },
              function(t, g) {
                t || G(g.options, g.renderSettings, g.dataSrc, g.image)
              })) : m && G(e, g, b.dataSrc, B)
          }
          return this
        },
        invisibleErrorFn: function() {
          return function(t) {
            if (t.hasAttribute("data-holder-invisible")) throw "Holder: invisible placeholder"
          }
        }
      };
    o.add_theme = o.addTheme,
      o.add_image = o.addImage,
      o.invisible_error_fn = o.invisibleErrorFn;

    function U(g) {
      var e = 1,
        t = augment.defclass({
          constructor: function(t) {
            e++,
            this.parent = null,
              this.children = {},
              this.id = e,
              this.name = "n" + e,
              null != t && (this.name = t),
              this.x = 0,
              this.y = 0,
              this.z = 0,
              this.width = 0,
              this.height = 0
          },
          resize: function(t, g) {
            null != t && (this.width = t),
              null != g && (this.height = g)
          },
          moveTo: function(t, g, e) {
            this.x = null != t ? t : this.x,
              this.y = null != g ? g : this.y,
              this.z = null != e ? e : this.z
          },
          add: function(t) {
            var g = t.name;
            if (null != this.children[g]) throw "SceneGraph: child with that name already exists: " + g;
            (this.children[g] = t).parent = this
          }
        }),
        n = augment(t,
          function(t) {
            this.constructor = function() {
              t.constructor.call(this, "root"),
                this.properties = g
            }
          }),
        t = augment(t,
          function(e) {
            function g(t, g) {
              if (e.constructor.call(this, t), this.properties = {
                  fill: "#000"
                },
                null != g) !
                function(t, g) {
                  for (var e in g) t[e] = g[e]
                }(this.properties, g);
              else if (null != t && "string" != typeof t) throw "SceneGraph: invalid node name"
            }
            this.Group = augment.extend(this, {
                constructor: g,
                type: "group"
              }),
              this.Rect = augment.extend(this, {
                constructor: g,
                type: "rect"
              }),
              this.Text = augment.extend(this, {
                constructor: function(t) {
                  g.call(this),
                    this.properties.text = t
                },
                type: "text"
              })
          }),
        n = new n;
      return this.Shape = t,
        this.root = n,
        this
    }
    var c, u, d, h, v, g, e, n, I, i, S = {
        settings: {
          domain: "holder.js",
          images: "img",
          objects: "object",
          bgnodes: "body .holderjs",
          stylenodes: "head link.holderjs",
          stylesheets: [],
          themes: {
            gray: {
              background: "#EEEEEE",
              foreground: "#AAAAAA"
            },
            social: {
              background: "#3a5a97",
              foreground: "#FFFFFF"
            },
            industrial: {
              background: "#434A52",
              foreground: "#C2F200"
            },
            sky: {
              background: "#0D8FDB",
              foreground: "#FFFFFF"
            },
            vine: {
              background: "#39DBAC",
              foreground: "#1E292C"
            },
            lava: {
              background: "#F8591A",
              foreground: "#1C2846",
              size: 12
            }
          }
        },
        flags: {
          dimensions: {
            regex: /^(\d+)x(\d+)$/,
            output: function(t) {
              t = this.regex.exec(t);
              return {
                width: +t[1],
                height: +t[2]
              }
            }
          },
          fluid: {
            regex: /^([0-9]+%?)x([0-9]+%?)$/,
            output: function(t) {
              t = this.regex.exec(t);
              return {
                width: t[1],
                height: t[2]
              }
            }
          },
          colors: {
            regex: /(?:#|\^)([0-9a-f]{3,})\:(?:#|\^)([0-9a-f]{3,})/i,
            output: function(t) {
              t = this.regex.exec(t);
              return {
                foreground: "#" + t[2],
                background: "#" + t[1]
              }
            }
          },
          text: {
            regex: /text\:(.*)/,
            output: function(t) {
              return this.regex.exec(t)[1].replace("\\/", "/")
            }
          },
          font: {
            regex: /font\:(.*)/,
            output: function(t) {
              return this.regex.exec(t)[1]
            }
          },
          auto: {
            regex: /^auto$/
          },
          textmode: {
            regex: /textmode\:(.*)/,
            output: function(t) {
              return this.regex.exec(t)[1]
            }
          },
          random: {
            regex: /^random$/
          }
        }
      },
      W = (v = h = d = null,
        function(t) {
          var g = t.root;
          if (S.setup.supportsSVG) {
            var e = !1;
            null == d && (e = !0),
              d = b(d, g.properties.width, g.properties.height),
              e && (h = X("text", m), v = y.createTextNode(null), B(h, {
                x: 0
              }), h.appendChild(v), d.appendChild(h), y.body.appendChild(d), d.style.visibility = "hidden", d.style.position = "absolute", d.style.top = "-100%", d.style.left = "-100%");
            var n = g.children.holderTextGroup.properties;
            B(h, {
                y: n.font.size,
                style: p({
                  "font-weight": n.font.weight,
                  "font-size": n.font.size + "px",
                  "font-family": n.font.family,
                  "dominant-baseline": "middle"
                })
              }),
              v.nodeValue = n.text;
            var t = h.getBBox(),
              e = Math.ceil(t.width / (g.properties.width * S.setup.lineWrapRatio)),
              I = n.text.split(" "),
              g = n.text.match(/\\n/g);
            e += null == g ? 0 : g.length,
              v.nodeValue = n.text.replace(/[ ]+/g, "");
            var n = h.getComputedTextLength(),
              n = t.width - n,
              n = Math.round(n / Math.max(1, I.length - 1)),
              i = [];
            if (1 < e) {
              v.nodeValue = "";
              for (var C, A = 0; A < I.length; A++) 0 !== I[A].length && (v.nodeValue = I[A].replace(/&#(\d+);/g,
                function(t, g) {
                  return String.fromCharCode(g)
                }), C = h.getBBox(), i.push({
                text: I[A],
                width: C.width
              }))
            }
            return {
              spaceWidth: n,
              lineCount: e,
              boundingBox: t,
              words: i
            }
          }
          return !1
        }),
      A = (c = X("canvas"), u = null,
        function(t) {
          null == u && (u = c.getContext("2d"));
          t = t.root;
          c.width = S.dpr(t.properties.width),
            c.height = S.dpr(t.properties.height),
            u.textBaseline = "middle",
            u.fillStyle = t.children.holderBg.properties.fill,
            u.fillRect(0, 0, S.dpr(t.children.holderBg.width), S.dpr(t.children.holderBg.height));
          var g, e = t.children.holderTextGroup;
          for (g in e.properties, u.font = e.properties.font.weight + " " + S.dpr(e.properties.font.size) + "px " + e.properties.font.family + ", monospace", u.fillStyle = e.properties.fill, e.children) {
            var n, I = e.children[g];
            for (n in I.children) {
              var i = I.children[n],
                C = S.dpr(e.x + I.x + i.x),
                A = S.dpr(e.y + I.y + i.y + e.properties.leading / 2);
              u.fillText(i.properties.text, C, A)
            }
          }
          return c.toDataURL("image/png")
        }),
      w = function() {
        if (Q.XMLSerializer) {
          var d = b(null, 0, 0),
            h = X("rect", m);
          return d.appendChild(h),
            function(t, g) {
              t = t.root;
              b(d, t.properties.width, t.properties.height);
              for (var e = d.querySelectorAll("g"), n = 0; n < e.length; n++) e[n].parentNode.removeChild(e[n]);
              B(h, {
                width: t.children.holderBg.width,
                height: t.children.holderBg.height,
                fill: t.children.holderBg.properties.fill
              });
              var I, i = t.children.holderTextGroup,
                C = i.properties,
                A = X("g", m);
              for (I in d.appendChild(A), i.children) {
                var a, o = i.children[I];
                for (a in o.children) {
                  var s = o.children[a],
                    r = i.x + o.x + s.x,
                    l = i.y + o.y + s.y + i.properties.leading / 2,
                    c = X("text", m),
                    u = y.createTextNode(null);
                  B(c, {
                      x: r,
                      y: l,
                      style: p({
                        fill: C.fill,
                        "font-weight": C.font.weight,
                        "font-family": C.font.family + ", monospace",
                        "font-size": C.font.size + "px",
                        "dominant-baseline": "central"
                      })
                    }),
                    u.nodeValue = s.properties.text,
                    c.appendChild(u),
                    A.appendChild(c)
                }
              }
              return "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(function(t, g) {
                if (Q.XMLSerializer) {
                  var e = new XMLSerializer,
                    n = "",
                    I = g.stylesheets;
                  if (t.querySelector("defs"), g.svgXMLStylesheet) {
                    for (var i = (new DOMParser).parseFromString("<xml />", "application/xml"), C = I.length - 1; 0 <= C; C--) {
                      var A = i.createProcessingInstruction("xml-stylesheet", 'href="' + I[C] + '" rel="stylesheet"');
                      i.insertBefore(A, i.firstChild)
                    }
                    g = i.createProcessingInstruction("xml", 'version="1.0" encoding="UTF-8" standalone="yes"');
                    i.insertBefore(g, i.firstChild),
                      i.removeChild(i.documentElement),
                      n = e.serializeToString(i)
                  }
                  return n + e.serializeToString(t).replace(/\&amp;(\#[0-9]{2,}\;)/g, "&$1")
                }
              }(d, g))))
            }
        }
      }();
    for (g in S.flags) S.flags.hasOwnProperty(g) && (S.flags[g].match = function(t) {
      return t.match(this.regex)
    });
    S.setup = {
        renderer: "html",
        debounce: 100,
        ratio: 1,
        supportsCanvas: !1,
        supportsSVG: !1,
        lineWrapRatio: .9,
        renderers: ["html", "canvas", "svg"]
      },
      S.dpr = function(t) {
        return t * S.setup.ratio
      },
      S.vars = {
        preempted: !1,
        resizableImages: [],
        debounceTimer: null,
        cache: {}
      },
      n = e = 1,
      I = X("canvas"),
      i = null,
      I.getContext && -1 != I.toDataURL("image/png").indexOf("data:image/png") && (S.setup.renderer = "canvas", i = I.getContext("2d"), S.setup.supportsCanvas = !0),
      S.setup.supportsCanvas && (e = Q.devicePixelRatio || 1, n = i.webkitBackingStorePixelRatio || i.mozBackingStorePixelRatio || i.msBackingStorePixelRatio || i.oBackingStorePixelRatio || i.backingStorePixelRatio || 1),
      S.setup.ratio = e / n,
      y.createElementNS && y.createElementNS(m, "svg").createSVGRect && (S.setup.renderer = "svg", S.setup.supportsSVG = !0),
      i = o,
      e = "Holder",
      n = Q,
      "function" == typeof define && define.amd ? define(i) : n[e] = i,
      Q.onDomReady && Q.onDomReady(function() {
        S.vars.preempted || o.run(),
          Q.addEventListener ? (Q.addEventListener("resize", t, !1), Q.addEventListener("orientationchange", t, !1)) : Q.attachEvent("onresize", t),
          "object" == typeof Q.Turbolinks && Q.document.addEventListener("page:change",
            function() {
              o.run()
            })
      })
  }(this),
  function(s) {
    var r = function() {
        "use strict";
        return {
          isMsie: function() {
            return !!/(msie|trident)/i.test(navigator.userAgent) && navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
          },
          isBlankString: function(t) {
            return !t || /^\s*$/.test(t)
          },
          escapeRegExChars: function(t) {
            return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
          },
          isString: function(t) {
            return "string" == typeof t
          },
          isNumber: function(t) {
            return "number" == typeof t
          },
          isArray: s.isArray,
          isFunction: s.isFunction,
          isObject: s.isPlainObject,
          isUndefined: function(t) {
            return void 0 === t
          },
          toStr: function(t) {
            return r.isUndefined(t) || null === t ? "" : t + ""
          },
          bind: s.proxy,
          each: function(t, e) {
            s.each(t,
              function(t, g) {
                return e(g, t)
              })
          },
          map: s.map,
          filter: s.grep,
          every: function(e, n) {
            var I = !0;
            return e ? (s.each(e,
              function(t, g) {
                if (!(I = n.call(null, g, t, e))) return !1
              }), !!I) : I
          },
          some: function(e, n) {
            var I = !1;
            return e ? (s.each(e,
              function(t, g) {
                if (I = n.call(null, g, t, e)) return !1
              }), !!I) : I
          },
          mixin: s.extend,
          getUniqueId: (t = 0,
            function() {
              return t++
            }),
          templatify: function(t) {
            return s.isFunction(t) ? t : function() {
              return String(t)
            }
          },
          defer: function(t) {
            setTimeout(t, 0)
          },
          debounce: function(I, i, C) {
            var A, a;
            return function() {
              var t = this,
                g = arguments,
                e = function() {
                  A = null,
                    C || (a = I.apply(t, g))
                },
                n = C && !A;
              return clearTimeout(A),
                A = setTimeout(e, i),
                a = n ? I.apply(t, g) : a
            }
          },
          throttle: function(e, n) {
            var I, i, C, A, a = 0,
              o = function() {
                a = new Date,
                  C = null,
                  A = e.apply(I, i)
              };
            return function() {
              var t = new Date,
                g = n - (t - a);
              return I = this,
                i = arguments,
                g <= 0 ? (clearTimeout(C), C = null, a = t, A = e.apply(I, i)) : C = C || setTimeout(o, g),
                A
            }
          },
          noop: function() {}
        };
        var t
      }(),
      i = function() {
        "use strict";
        return {
          nonword: g,
          whitespace: t,
          obj: {
            nonword: e(g),
            whitespace: e(t)
          }
        };

        function t(t) {
          return (t = r.toStr(t)) ? t.split(/\s+/) : []
        }

        function g(t) {
          return (t = r.toStr(t)) ? t.split(/\W+/) : []
        }

        function e(n) {
          return function() {
            var t = [].slice.call(arguments, 0);
            return function(g) {
              var e = [];
              return r.each(t,
                  function(t) {
                    e = e.concat(n(r.toStr(g[t])))
                  }),
                e
            }
          }
        }
      }(),
      e = function() {
        "use strict";

        function t(t) {
          this.maxSize = r.isNumber(t) ? t : 100,
            this.reset(),
            this.maxSize <= 0 && (this.set = this.get = s.noop)
        }

        function g() {
          this.head = this.tail = null
        }

        function n(t, g) {
          this.key = t,
            this.val = g,
            this.prev = this.next = null
        }
        return r.mixin(t.prototype, {
            set: function(t, g) {
              var e = this.list.tail;
              this.size >= this.maxSize && (this.list.remove(e), delete this.hash[e.key]),
                (e = this.hash[t]) ? (e.val = g, this.list.moveToFront(e)) : (e = new n(t, g), this.list.add(e), this.hash[t] = e, this.size++)
            },
            get: function(t) {
              t = this.hash[t];
              if (t) return this.list.moveToFront(t),
                t.val
            },
            reset: function() {
              this.size = 0,
                this.hash = {},
                this.list = new g
            }
          }),
          r.mixin(g.prototype, {
            add: function(t) {
              this.head && (t.next = this.head, this.head.prev = t),
                this.head = t,
                this.tail = this.tail || t
            },
            remove: function(t) {
              t.prev ? t.prev.next = t.next : this.head = t.next,
                t.next ? t.next.prev = t.prev : this.tail = t.prev
            },
            moveToFront: function(t) {
              this.remove(t),
                this.add(t)
            }
          }),
          t
      }(),
      C = function() {
        "use strict";
        var I, t;
        try {
          (I = window.localStorage).setItem("~~~", "!"),
            I.removeItem("~~~")
        } catch (t) {
          I = null
        }

        function g(t) {
          this.prefix = ["__", t, "__"].join(""),
            this.ttlKey = "__ttl__",
            this.keyMatcher = new RegExp("^" + r.escapeRegExChars(this.prefix))
        }
        return t = I && window.JSON ? {
            _prefix: function(t) {
              return this.prefix + t
            },
            _ttlKey: function(t) {
              return this._prefix(t) + this.ttlKey
            },
            get: function(t) {
              return this.isExpired(t) && this.remove(t),
                e(I.getItem(this._prefix(t)))
            },
            set: function(t, g, e) {
              return r.isNumber(e) ? I.setItem(this._ttlKey(t), i(n() + e)) : I.removeItem(this._ttlKey(t)),
                I.setItem(this._prefix(t), i(g))
            },
            remove: function(t) {
              return I.removeItem(this._ttlKey(t)),
                I.removeItem(this._prefix(t)),
                this
            },
            clear: function() {
              for (var t, g = [], e = I.length, n = 0; n < e; n++)(t = I.key(n)).match(this.keyMatcher) && g.push(t.replace(this.keyMatcher, ""));
              for (n = g.length; n--;) this.remove(g[n]);
              return this
            },
            isExpired: function(t) {
              t = e(I.getItem(this._ttlKey(t)));
              return !!(r.isNumber(t) && n() > t)
            }
          } : {
            get: r.noop,
            set: r.noop,
            remove: r.noop,
            clear: r.noop,
            isExpired: r.noop
          },
          r.mixin(g.prototype, t),
          g;

        function n() {
          return (new Date).getTime()
        }

        function i(t) {
          return JSON.stringify(r.isUndefined(t) ? null : t)
        }

        function e(t) {
          return JSON.parse(t)
        }
      }(),
      A = function() {
        "use strict";
        var A = 0,
          a = {},
          o = 6,
          g = new e(10);

        function t(t) {
          var n;
          t = t || {},
            this.cancelled = !1,
            this.lastUrl = null,
            this._send = t.transport ? (n = t.transport,
              function(t, g) {
                var e = s.Deferred();
                return n(t, g,
                    function(t) {
                      r.defer(function() {
                        e.resolve(t)
                      })
                    },
                    function(t) {
                      r.defer(function() {
                        e.reject(t)
                      })
                    }),
                  e
              }) : s.ajax,
            this._get = t.rateLimiter ? t.rateLimiter(this._get) : this._get,
            this._cache = !1 === t.cache ? new e(0) : g
        }
        return t.setMaxPendingRequests = function(t) {
            o = t
          },
          t.resetCache = function() {
            g.reset()
          },
          r.mixin(t.prototype, {
            _get: function(g, t, e) {
              var n, I = this;

              function i(t) {
                e && e(null, t),
                  I._cache.set(g, t)
              }

              function C() {
                e && e(!0)
              }
              this.cancelled || g !== this.lastUrl || ((n = a[g]) ? n.done(i).fail(C) : A < o ? (A++, a[g] = this._send(g, t).done(i).fail(C).always(function() {
                A--,
                delete a[g],
                  I.onDeckRequestArgs && (I._get.apply(I, I.onDeckRequestArgs), I.onDeckRequestArgs = null)
              })) : this.onDeckRequestArgs = [].slice.call(arguments, 0))
            },
            get: function(t, g, e) {
              var n;
              return r.isFunction(g) && (e = g, g = {}),
                this.cancelled = !1,
                this.lastUrl = t,
                (n = this._cache.get(t)) ? r.defer(function() {
                  e && e(null, n)
                }) : this._get(t, g, e),
                !!n
            },
            cancel: function() {
              this.cancelled = !0
            }
          }),
          t
      }(),
      a = function() {
        "use strict";

        function t(t) {
          (t = t || {}).datumTokenizer && t.queryTokenizer || s.error("datumTokenizer and queryTokenizer are both required"),
            this.datumTokenizer = t.datumTokenizer,
            this.queryTokenizer = t.queryTokenizer,
            this.reset()
        }
        return r.mixin(t.prototype, {
            bootstrap: function(t) {
              this.datums = t.datums,
                this.trie = t.trie
            },
            add: function(t) {
              var i = this;
              t = r.isArray(t) ? t : [t],
                r.each(t,
                  function(t) {
                    var I = i.datums.push(t) - 1,
                      t = g(i.datumTokenizer(t));
                    r.each(t,
                      function(t) {
                        for (var g, e = i.trie,
                            n = t.split(""); g = n.shift();)(e = e.children[g] || (e.children[g] = C())).ids.push(I)
                      })
                  })
            },
            get: function(t) {
              var I, i = this,
                t = g(this.queryTokenizer(t));
              return r.each(t,
                  function(t) {
                    var g, e, n;
                    if (I && 0 === I.length) return !1;
                    for (g = i.trie, e = t.split(""); g && (n = e.shift());) g = g.children[n];
                    if (!g || 0 !== e.length) return !(I = []);
                    t = g.ids.slice(0),
                      I = I ?
                      function(t, g) {
                        var e = 0,
                          n = 0,
                          I = [];
                        t = t.sort(A),
                          g = g.sort(A);
                        var i = t.length,
                          C = g.length;
                        for (; e < i && n < C;) t[e] < g[n] ? e++ : (t[e] > g[n] || (I.push(t[e]), e++), n++);
                        return I;

                        function A(t, g) {
                          return t - g
                        }
                      }(I, t) : t
                  }),
                I ? r.map(function(t) {
                    for (var g = {},
                        e = [], n = 0, I = t.length; n < I; n++) g[t[n]] || (g[t[n]] = !0, e.push(t[n]));
                    return e
                  }(I),
                  function(t) {
                    return i.datums[t]
                  }) : []
            },
            reset: function() {
              this.datums = [],
                this.trie = C()
            },
            serialize: function() {
              return {
                datums: this.datums,
                trie: this.trie
              }
            }
          }),
          t;

        function g(t) {
          return t = r.filter(t,
              function(t) {
                return !!t
              }),
            t = r.map(t,
              function(t) {
                return t.toLowerCase()
              })
        }

        function C() {
          return {
            ids: [],
            children: {}
          }
        }
      }(),
      o = function() {
        "use strict";
        return {
          local: function(t) {
            return t.local || null
          },
          prefetch: function(t) {
            var g;
            g = {
                url: null,
                thumbprint: "",
                ttl: 864e5,
                filter: null,
                ajax: {}
              },
              (t = t.prefetch || null) && (t = r.isString(t) ? {
                url: t
              } : t, (t = r.mixin(g, t)).thumbprint = "0.10.5" + t.thumbprint, t.ajax.type = t.ajax.type || "GET", t.ajax.dataType = t.ajax.dataType || "json", t.url || s.error("prefetch requires url to be set"));
            return t
          },
          remote: function(t) {
            var g;
            g = {
                url: null,
                cache: !0,
                wildcard: "%QUERY",
                replace: null,
                rateLimitBy: "debounce",
                rateLimitWait: 300,
                send: null,
                filter: null,
                ajax: {}
              },
              (t = t.remote || null) && (t = r.isString(t) ? {
                url: t
              } : t, (t = r.mixin(g, t)).rateLimiter = (/^throttle$/i.test(t.rateLimitBy) ?
                function(g) {
                  return function(t) {
                    return r.throttle(t, g)
                  }
                } : function(g) {
                  return function(t) {
                    return r.debounce(t, g)
                  }
                })(t.rateLimitWait), t.ajax.type = t.ajax.type || "GET", t.ajax.dataType = t.ajax.dataType || "json", delete t.rateLimitBy, delete t.rateLimitWait, t.url || s.error("remote requires url to be set"));
            return t
          }
        }
      }();
    !
    function(t) {
      "use strict";
      var g, n;

      function e(t) {
        var g;
        t && (t.local || t.prefetch || t.remote) || s.error("one of local, prefetch, or remote is required"),
          this.limit = t.limit || 5,
          this.sorter = (g = t.sorter, r.isFunction(g) ?
            function(t) {
              return t.sort(g)
            } : function(t) {
              return t
            }),
          this.dupDetector = t.dupDetector || I,
          this.local = o.local(t),
          this.prefetch = o.prefetch(t),
          this.remote = o.remote(t),
          this.cacheKey = this.prefetch ? this.prefetch.cacheKey || this.prefetch.url : null,
          this.index = new a({
            datumTokenizer: t.datumTokenizer,
            queryTokenizer: t.queryTokenizer
          }),
          this.storage = this.cacheKey ? new C(this.cacheKey) : null
      }
      g = t.Bloodhound,
        n = {
          data: "data",
          protocol: "protocol",
          thumbprint: "thumbprint"
        },
        (t.Bloodhound = e).noConflict = function() {
          return t.Bloodhound = g,
            e
        },
        e.tokenizers = i,
        r.mixin(e.prototype, {
          _loadPrefetch: function(g) {
            var e = this,
              t = (t = this._readFromStorage(g.thumbprint)) ? (this.index.bootstrap(t), s.Deferred().resolve()) : s.ajax(g.url, g.ajax).done(function(t) {
                e.clear(),
                  e.add(g.filter ? g.filter(t) : t),
                  e._saveToStorage(e.index.serialize(), g.thumbprint, g.ttl)
              });
            return t
          },
          _getFromRemote: function(t, e) {
            var g, n = this;
            if (this.transport) return t = t || "",
              g = encodeURIComponent(t),
              g = this.remote.replace ? this.remote.replace(this.remote.url, t) : this.remote.url.replace(this.remote.wildcard, g),
              this.transport.get(g, this.remote.ajax,
                function(t, g) {
                  e(t ? [] : n.remote.filter ? n.remote.filter(g) : g)
                })
          },
          _cancelLastRemoteRequest: function() {
            this.transport && this.transport.cancel()
          },
          _saveToStorage: function(t, g, e) {
            this.storage && (this.storage.set(n.data, t, e), this.storage.set(n.protocol, location.protocol, e), this.storage.set(n.thumbprint, g, e))
          },
          _readFromStorage: function(t) {
            var g = {};
            return this.storage && (g.data = this.storage.get(n.data), g.protocol = this.storage.get(n.protocol), g.thumbprint = this.storage.get(n.thumbprint)),
              t = g.thumbprint !== t || g.protocol !== location.protocol,
              g.data && !t ? g.data : null
          },
          _initialize: function() {
            var t = this,
              g = this.local,
              e = this.prefetch ? this._loadPrefetch(this.prefetch) : s.Deferred().resolve();
            return g && e.done(function() {
                t.add(r.isFunction(g) ? g() : g)
              }),
              this.transport = this.remote ? new A(this.remote) : null,
              this.initPromise = e.promise()
          },
          initialize: function(t) {
            return !this.initPromise || t ? this._initialize() : this.initPromise
          },
          add: function(t) {
            this.index.add(t)
          },
          get: function(t, g) {
            var n = this,
              I = [],
              e = !1;
            I = this.index.get(t),
              (I = this.sorter(I).slice(0, this.limit)).length < this.limit ? e = this._getFromRemote(t,
                function(t) {
                  var e = I.slice(0);
                  r.each(t,
                      function(g) {
                        return r.some(e,
                            function(t) {
                              return n.dupDetector(g, t)
                            }) || e.push(g),
                          e.length < n.limit
                      }),
                    g && g(n.sorter(e))
                }) : this._cancelLastRemoteRequest(),
              e || (0 < I.length || !this.transport) && g && g(I)
          },
          clear: function() {
            this.index.reset()
          },
          clearPrefetchCache: function() {
            this.storage && this.storage.clear()
          },
          clearRemoteCache: function() {
            this.transport && A.resetCache()
          },
          ttAdapter: function() {
            return r.bind(this.get, this)
          }
        });

      function I() {
        return !1
      }
    }(this);
    var l = {
        wrapper: '<span class="twitter-typeahead"></span>',
        dropdown: '<span class="tt-dropdown-menu"></span>',
        dataset: '<div class="tt-dataset-%CLASS%"></div>',
        suggestions: '<span class="tt-suggestions"></span>',
        suggestion: '<div class="tt-suggestion"></div>'
      },
      c = function() {
        "use strict";
        var t = {
          wrapper: {
            position: "relative",
            display: "inline-block"
          },
          hint: {
            position: "absolute",
            top: "0",
            left: "0",
            borderColor: "transparent",
            boxShadow: "none",
            opacity: "1"
          },
          input: {
            position: "relative",
            verticalAlign: "top",
            backgroundColor: "transparent"
          },
          inputWithNoHint: {
            position: "relative",
            verticalAlign: "top"
          },
          dropdown: {
            position: "absolute",
            top: "100%",
            left: "0",
            zIndex: "100",
            display: "none"
          },
          suggestions: {
            display: "block"
          },
          suggestion: {
            whiteSpace: "nowrap",
            cursor: "pointer"
          },
          suggestionChild: {
            whiteSpace: "normal"
          },
          ltr: {
            left: "0",
            right: "auto"
          },
          rtl: {
            left: "auto",
            right: " 0"
          }
        };
        return r.isMsie() && r.mixin(t.input, {
            backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
          }),
          r.isMsie() && r.isMsie() <= 7 && r.mixin(t.input, {
            marginTop: "-1px"
          }),
          t
      }(),
      u = function() {
        "use strict";

        function t(t) {
          t && t.el || s.error("EventBus initialized without el"),
            this.$el = s(t.el)
        }
        return r.mixin(t.prototype, {
            trigger: function(t) {
              var g = [].slice.call(arguments, 1);
              this.$el.trigger("typeahead:" + t, g)
            }
          }),
          t
      }(),
      g = function() {
        "use strict";
        var A = /\s+/,
          i = function() {
            var t;
            t = window.setImmediate ?
              function(t) {
                setImmediate(function() {
                  t()
                })
              } : function(t) {
                setTimeout(function() {
                    t()
                  },
                  0)
              };
            return t
          }();
        return {
          onSync: function(t, g, e) {
            return n.call(this, "sync", t, g, e)
          },
          onAsync: function(t, g, e) {
            return n.call(this, "async", t, g, e)
          },
          off: function(t) {
            var g;
            if (!this._callbacks) return this;
            t = t.split(A);
            for (; g = t.shift();) delete this._callbacks[g];
            return this
          },
          trigger: function(t) {
            var g, e, n, I;
            if (!this._callbacks) return this;
            t = t.split(A),
              e = [].slice.call(arguments, 1);
            for (;
              (I = t.shift()) && (g = this._callbacks[I]);) n = C(g.sync, this, [I].concat(e)),
              I = C(g.async, this, [I].concat(e)),
              n() && i(I);
            return this
          }
        };

        function n(t, g, e, n) {
          var I, i, C;
          if (!e) return this;
          for (g = g.split(A), e = n ? (C = n, (i = e).bind ? i.bind(C) : function() {
              i.apply(C, [].slice.call(arguments, 0))
            }) : e, this._callbacks = this._callbacks || {}; I = g.shift();) this._callbacks[I] = this._callbacks[I] || {
              sync: [],
              async: []
            },
            this._callbacks[I][t].push(e);
          return this
        }

        function C(n, I, i) {
          return function() {
            for (var t, g = 0,
                e = n.length; !t && g < e; g += 1) t = !1 === n[g].apply(I, i);
            return !t
          }
        }
      }(),
      d = function(C) {
        "use strict";
        var t = {
          node: null,
          pattern: null,
          tagName: "strong",
          className: null,
          wordsOnly: !1,
          caseSensitive: !1
        };
        return function(I) {
          var i;
          (I = r.mixin({},
            t, I)).node && I.pattern && (I.pattern = r.isArray(I.pattern) ? I.pattern : [I.pattern], i = function(t, g, e) {
              for (var n = [], I = 0, i = t.length; I < i; I++) n.push(r.escapeRegExChars(t[I]));
              return e = e ? "\\b(" + n.join("|") + ")\\b" : "(" + n.join("|") + ")",
                g ? new RegExp(e) : new RegExp(e, "i")
            }(I.pattern, I.caseSensitive, I.wordsOnly),
            function t(g, e) {
              var n;
              for (var I = 0; I < g.childNodes.length; I++) 3 === (n = g.childNodes[I]).nodeType ? I += e(n) ? 1 : 0 : t(n, e)
            }(I.node,
              function(t) {
                var g, e, n;
                (g = i.exec(t.data)) && (n = C.createElement(I.tagName), I.className && (n.className = I.className), (e = t.splitText(g.index)).splitText(g[0].length), n.appendChild(e.cloneNode(!0)), t.parentNode.replaceChild(n, e));
                return !!g
              }))
        }
      }(window.document),
      h = function() {
        "use strict";
        var C;

        function n(t) {
          var g, e, n, I, i = this;
          (t = t || {}).input || s.error("input is missing"),
            g = r.bind(this._onBlur, this),
            e = r.bind(this._onFocus, this),
            n = r.bind(this._onKeydown, this),
            I = r.bind(this._onInput, this),
            this.$hint = s(t.hint),
            this.$input = s(t.input).on("blur.tt", g).on("focus.tt", e).on("keydown.tt", n),
            0 === this.$hint.length && (this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = r.noop),
            r.isMsie() ? this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",
              function(t) {
                C[t.which || t.keyCode] || r.defer(r.bind(i._onInput, i, t))
              }) : this.$input.on("input.tt", I),
            this.query = this.$input.val(),
            this.$overflowHelper = (I = this.$input, s('<pre aria-hidden="true"></pre>').css({
              position: "absolute",
              visibility: "hidden",
              whiteSpace: "pre",
              fontFamily: I.css("font-family"),
              fontSize: I.css("font-size"),
              fontStyle: I.css("font-style"),
              fontVariant: I.css("font-variant"),
              fontWeight: I.css("font-weight"),
              wordSpacing: I.css("word-spacing"),
              letterSpacing: I.css("letter-spacing"),
              textIndent: I.css("text-indent"),
              textRendering: I.css("text-rendering"),
              textTransform: I.css("text-transform")
            }).insertAfter(I))
        }
        return C = {
            9: "tab",
            27: "esc",
            37: "left",
            39: "right",
            13: "enter",
            38: "up",
            40: "down"
          },
          n.normalizeQuery = function(t) {
            return (t || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ")
          },
          r.mixin(n.prototype, g, {
            _onBlur: function() {
              this.resetInputValue(),
                this.trigger("blurred")
            },
            _onFocus: function() {
              this.trigger("focused")
            },
            _onKeydown: function(t) {
              var g = C[t.which || t.keyCode];
              this._managePreventDefault(g, t),
                g && this._shouldTrigger(g, t) && this.trigger(g + "Keyed", t)
            },
            _onInput: function() {
              this._checkInputValue()
            },
            _managePreventDefault: function(t, g) {
              var e, n, I;
              switch (t) {
                case "tab":
                  n = this.getHint(),
                    I = this.getInputValue(),
                    e = n && n !== I && !i(g);
                  break;
                case "up":
                case "down":
                  e = !i(g);
                  break;
                default:
                  e = !1
              }
              e && g.preventDefault()
            },
            _shouldTrigger: function(t, g) {
              g = "tab" !== t || !i(g);
              return g
            },
            _checkInputValue: function() {
              var t, g, e = this.getInputValue();
              g = this.query,
                g = (t = n.normalizeQuery(e) === n.normalizeQuery(g)) && this.query.length !== e.length,
                this.query = e,
                t ? g && this.trigger("whitespaceChanged", this.query) : this.trigger("queryChanged", this.query)
            },
            focus: function() {
              this.$input.focus()
            },
            blur: function() {
              this.$input.blur()
            },
            getQuery: function() {
              return this.query
            },
            setQuery: function(t) {
              this.query = t
            },
            getInputValue: function() {
              return this.$input.val()
            },
            setInputValue: function(t, g) {
              this.$input.val(t),
                g ? this.clearHint() : this._checkInputValue()
            },
            resetInputValue: function() {
              this.setInputValue(this.query, !0)
            },
            getHint: function() {
              return this.$hint.val()
            },
            setHint: function(t) {
              this.$hint.val(t)
            },
            clearHint: function() {
              this.setHint("")
            },
            clearHintIfInvalid: function() {
              var t = this.getInputValue(),
                g = this.getHint(),
                g = t !== g && 0 === g.indexOf(t);
              "" !== t && g && !this.hasOverflow() || this.clearHint()
            },
            getLanguageDirection: function() {
              return (this.$input.css("direction") || "ltr").toLowerCase()
            },
            hasOverflow: function() {
              var t = this.$input.width() - 2;
              return this.$overflowHelper.text(this.getInputValue()),
                this.$overflowHelper.width() >= t
            },
            isCursorAtEnd: function() {
              var t = this.$input.val().length,
                g = this.$input[0].selectionStart;
              return r.isNumber(g) ? g === t : !document.selection || ((g = document.selection.createRange()).moveStart("character", -t), t === g.text.length)
            },
            destroy: function() {
              this.$hint.off(".tt"),
                this.$input.off(".tt"),
                this.$hint = this.$input = this.$overflowHelper = null
            }
          }),
          n;

        function i(t) {
          return t.altKey || t.ctrlKey || t.metaKey || t.shiftKey
        }
      }(),
      n = function() {
        "use strict";

        function t(t) {
          var g, e;
          (t = t || {}).templates = t.templates || {},
            t.source || s.error("missing source"),
            t.name && !/^[_a-zA-Z0-9-]+$/.test(t.name) && s.error("invalid dataset name: " + t.name),
            this.query = null,
            this.highlight = !!t.highlight,
            this.name = t.name || r.getUniqueId(),
            this.source = t.source,
            this.displayFn = (g = (g = t.display || t.displayKey) || "value", r.isFunction(g) ? g : function(t) {
              return t[g]
            }),
            this.templates = (t = t.templates, e = this.displayFn, {
              empty: t.empty && r.templatify(t.empty),
              header: t.header && r.templatify(t.header),
              footer: t.footer && r.templatify(t.footer),
              suggestion: t.suggestion ||
                function(t) {
                  return "<p>" + e(t) + "</p>"
                }
            }),
            this.$el = s(l.dataset.replace("%CLASS%", this.name))
        }
        return t.extractDatasetName = function(t) {
            return s(t).data("ttDataset")
          },
          t.extractValue = function(t) {
            return s(t).data("ttValue")
          },
          t.extractDatum = function(t) {
            return s(t).data("ttDatum")
          },
          r.mixin(t.prototype, g, {
            _render: function(t, g) {
              var e, n, I, i;

              function C() {
                return e.templates.header({
                  query: t,
                  isEmpty: !n
                })
              }

              function A() {
                return e.templates.footer({
                  query: t,
                  isEmpty: !n
                })
              }
              this.$el && ((e = this).$el.empty(), !(n = g && g.length) && this.templates.empty ? this.$el.html(e.templates.empty({
                query: t,
                isEmpty: !0
              })).prepend(e.templates.header ? C() : null).append(e.templates.footer ? A() : null) : n && this.$el.html((I = s(l.suggestions).css(c.suggestions), i = r.map(g,
                function(t) {
                  return (t = s(l.suggestion).append(e.templates.suggestion(t)).data("ttDataset", e.name).data("ttValue", e.displayFn(t)).data("ttDatum", t)).children().each(function() {
                      s(this).css(c.suggestionChild)
                    }),
                    t
                }), I.append.apply(I, i), e.highlight && d({
                className: "tt-highlight",
                node: I[0],
                pattern: t
              }), I)).prepend(e.templates.header ? C() : null).append(e.templates.footer ? A() : null), this.trigger("rendered"))
            },
            getRoot: function() {
              return this.$el
            },
            update: function(g) {
              var e = this;
              this.query = g,
                this.canceled = !1,
                this.source(g,
                  function(t) {
                    e.canceled || g !== e.query || e._render(g, t)
                  })
            },
            cancel: function() {
              this.canceled = !0
            },
            clear: function() {
              this.cancel(),
                this.$el.empty(),
                this.trigger("rendered")
            },
            isEmpty: function() {
              return this.$el.is(":empty")
            },
            destroy: function() {
              this.$el = null
            }
          }),
          t
      }(),
      B = function() {
        "use strict";

        function t(t) {
          var g, e, n, I = this;
          (t = t || {}).menu || s.error("menu is required"),
            this.isOpen = !1,
            this.isEmpty = !0,
            this.datasets = r.map(t.datasets, i),
            g = r.bind(this._onSuggestionClick, this),
            e = r.bind(this._onSuggestionMouseEnter, this),
            n = r.bind(this._onSuggestionMouseLeave, this),
            this.$menu = s(t.menu).on("click.tt", ".tt-suggestion", g).on("mouseenter.tt", ".tt-suggestion", e).on("mouseleave.tt", ".tt-suggestion", n),
            r.each(this.datasets,
              function(t) {
                I.$menu.append(t.getRoot()),
                  t.onSync("rendered", I._onRendered, I)
              })
        }
        return r.mixin(t.prototype, g, {
            _onSuggestionClick: function(t) {
              this.trigger("suggestionClicked", s(t.currentTarget))
            },
            _onSuggestionMouseEnter: function(t) {
              this._removeCursor(),
                this._setCursor(s(t.currentTarget), !0)
            },
            _onSuggestionMouseLeave: function() {
              this._removeCursor()
            },
            _onRendered: function() {
              this.isEmpty = r.every(this.datasets,
                  function(t) {
                    return t.isEmpty()
                  }),
                this.isEmpty ? this._hide() : this.isOpen && this._show(),
                this.trigger("datasetRendered")
            },
            _hide: function() {
              this.$menu.hide()
            },
            _show: function() {
              this.$menu.css("display", "block")
            },
            _getSuggestions: function() {
              return this.$menu.find(".tt-suggestion")
            },
            _getCursor: function() {
              return this.$menu.find(".tt-cursor").first()
            },
            _setCursor: function(t, g) {
              t.first().addClass("tt-cursor"),
                g || this.trigger("cursorMoved")
            },
            _removeCursor: function() {
              this._getCursor().removeClass("tt-cursor")
            },
            _moveCursor: function(t) {
              var g, e;
              this.isOpen && (e = this._getCursor(), g = this._getSuggestions(), this._removeCursor(), -1 !== (t = ((t = g.index(e) + t) + 1) % (g.length + 1) - 1) ? (t < -1 && (t = g.length - 1), this._setCursor(t = g.eq(t)), this._ensureVisible(t)) : this.trigger("cursorRemoved"))
            },
            _ensureVisible: function(t) {
              var g = t.position().top,
                e = g + t.outerHeight(!0),
                n = this.$menu.scrollTop(),
                t = this.$menu.height() + parseInt(this.$menu.css("paddingTop"), 10) + parseInt(this.$menu.css("paddingBottom"), 10);
              g < 0 ? this.$menu.scrollTop(n + g) : t < e && this.$menu.scrollTop(n + (e - t))
            },
            close: function() {
              this.isOpen && (this.isOpen = !1, this._removeCursor(), this._hide(), this.trigger("closed"))
            },
            open: function() {
              this.isOpen || (this.isOpen = !0, this.isEmpty || this._show(), this.trigger("opened"))
            },
            setLanguageDirection: function(t) {
              this.$menu.css("ltr" === t ? c.ltr : c.rtl)
            },
            moveCursorUp: function() {
              this._moveCursor(-1)
            },
            moveCursorDown: function() {
              this._moveCursor(1)
            },
            getDatumForSuggestion: function(t) {
              var g = null;
              return g = t.length ? {
                raw: n.extractDatum(t),
                value: n.extractValue(t),
                datasetName: n.extractDatasetName(t)
              } : g
            },
            getDatumForCursor: function() {
              return this.getDatumForSuggestion(this._getCursor().first())
            },
            getDatumForTopSuggestion: function() {
              return this.getDatumForSuggestion(this._getSuggestions().first())
            },
            update: function(g) {
              r.each(this.datasets,
                function(t) {
                  t.update(g)
                })
            },
            empty: function() {
              r.each(this.datasets,
                  function(t) {
                    t.clear()
                  }),
                this.isEmpty = !0
            },
            isVisible: function() {
              return this.isOpen && !this.isEmpty
            },
            destroy: function() {
              this.$menu.off(".tt"),
                this.$menu = null,
                r.each(this.datasets,
                  function(t) {
                    t.destroy()
                  })
            }
          }),
          t;

        function i(t) {
          return new n(t)
        }
      }(),
      b = function() {
        "use strict";
        var i = "ttAttrs";

        function t(t) {
          var n, I, g;
          (t = t || {}).input || s.error("missing input"),
            this.isActivated = !1,
            this.autoselect = !!t.autoselect,
            this.minLength = r.isNumber(t.minLength) ? t.minLength : 1,
            this.$node = function(t, g) {
              var e, n, I;
              e = s(t),
                n = s(l.wrapper).css(c.wrapper),
                I = s(l.dropdown).css(c.dropdown),
                (t = e.clone().css(c.hint).css(function(t) {
                  return {
                    backgroundAttachment: t.css("background-attachment"),
                    backgroundClip: t.css("background-clip"),
                    backgroundColor: t.css("background-color"),
                    backgroundImage: t.css("background-image"),
                    backgroundOrigin: t.css("background-origin"),
                    backgroundPosition: t.css("background-position"),
                    backgroundRepeat: t.css("background-repeat"),
                    backgroundSize: t.css("background-size")
                  }
                }(e))).val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly", !0).attr({
                  autocomplete: "off",
                  spellcheck: "false",
                  tabindex: -1
                }),
                e.data(i, {
                  dir: e.attr("dir"),
                  autocomplete: e.attr("autocomplete"),
                  spellcheck: e.attr("spellcheck"),
                  style: e.attr("style")
                }),
                e.addClass("tt-input").attr({
                  autocomplete: "off",
                  spellcheck: !1
                }).css(g ? c.input : c.inputWithNoHint);
              try {
                e.attr("dir") || e.attr("dir", "auto")
              } catch (t) {}
              return e.wrap(n).parent().prepend(g ? t : null).append(I)
            }(t.input, t.withHint),
            n = this.$node.find(".tt-dropdown-menu"),
            I = this.$node.find(".tt-input"),
            g = this.$node.find(".tt-hint"),
            I.on("blur.tt",
              function(t) {
                var g = document.activeElement,
                  e = n.is(g),
                  g = 0 < n.has(g).length;
                r.isMsie() && (e || g) && (t.preventDefault(), t.stopImmediatePropagation(), r.defer(function() {
                  I.focus()
                }))
              }),
            n.on("mousedown.tt",
              function(t) {
                t.preventDefault()
              }),
            this.eventBus = t.eventBus || new u({
              el: I
            }),
            this.dropdown = new B({
              menu: n,
              datasets: t.datasets
            }).onSync("suggestionClicked", this._onSuggestionClicked, this).onSync("cursorMoved", this._onCursorMoved, this).onSync("cursorRemoved", this._onCursorRemoved, this).onSync("opened", this._onOpened, this).onSync("closed", this._onClosed, this).onAsync("datasetRendered", this._onDatasetRendered, this),
            this.input = new h({
              input: I,
              hint: g
            }).onSync("focused", this._onFocused, this).onSync("blurred", this._onBlurred, this).onSync("enterKeyed", this._onEnterKeyed, this).onSync("tabKeyed", this._onTabKeyed, this).onSync("escKeyed", this._onEscKeyed, this).onSync("upKeyed", this._onUpKeyed, this).onSync("downKeyed", this._onDownKeyed, this).onSync("leftKeyed", this._onLeftKeyed, this).onSync("rightKeyed", this._onRightKeyed, this).onSync("queryChanged", this._onQueryChanged, this).onSync("whitespaceChanged", this._onWhitespaceChanged, this),
            this._setLanguageDirection()
        }
        return r.mixin(t.prototype, {
            _onSuggestionClicked: function(t, g) {
              (g = this.dropdown.getDatumForSuggestion(g)) && this._select(g)
            },
            _onCursorMoved: function() {
              var t = this.dropdown.getDatumForCursor();
              this.input.setInputValue(t.value, !0),
                this.eventBus.trigger("cursorchanged", t.raw, t.datasetName)
            },
            _onCursorRemoved: function() {
              this.input.resetInputValue(),
                this._updateHint()
            },
            _onDatasetRendered: function() {
              this._updateHint()
            },
            _onOpened: function() {
              this._updateHint(),
                this.eventBus.trigger("opened")
            },
            _onClosed: function() {
              this.input.clearHint(),
                this.eventBus.trigger("closed")
            },
            _onFocused: function() {
              this.isActivated = !0,
                this.dropdown.open()
            },
            _onBlurred: function() {
              this.isActivated = !1,
                this.dropdown.empty(),
                this.dropdown.close()
            },
            _onEnterKeyed: function(t, g) {
              var e = this.dropdown.getDatumForCursor(),
                n = this.dropdown.getDatumForTopSuggestion();
              e ? (this._select(e), g.preventDefault()) : this.autoselect && n && (this._select(n), g.preventDefault())
            },
            _onTabKeyed: function(t, g) {
              var e;
              (e = this.dropdown.getDatumForCursor()) ? (this._select(e), g.preventDefault()) : this._autocomplete(!0)
            },
            _onEscKeyed: function() {
              this.dropdown.close(),
                this.input.resetInputValue()
            },
            _onUpKeyed: function() {
              var t = this.input.getQuery();
              this.dropdown.isEmpty && t.length >= this.minLength ? this.dropdown.update(t) : this.dropdown.moveCursorUp(),
                this.dropdown.open()
            },
            _onDownKeyed: function() {
              var t = this.input.getQuery();
              this.dropdown.isEmpty && t.length >= this.minLength ? this.dropdown.update(t) : this.dropdown.moveCursorDown(),
                this.dropdown.open()
            },
            _onLeftKeyed: function() {
              "rtl" === this.dir && this._autocomplete()
            },
            _onRightKeyed: function() {
              "ltr" === this.dir && this._autocomplete()
            },
            _onQueryChanged: function(t, g) {
              this.input.clearHintIfInvalid(),
                g.length >= this.minLength ? this.dropdown.update(g) : this.dropdown.empty(),
                this.dropdown.open(),
                this._setLanguageDirection()
            },
            _onWhitespaceChanged: function() {
              this._updateHint(),
                this.dropdown.open()
            },
            _setLanguageDirection: function() {
              var t;
              this.dir !== (t = this.input.getLanguageDirection()) && (this.dir = t, this.$node.css("direction", t), this.dropdown.setLanguageDirection(t))
            },
            _updateHint: function() {
              var t, g, e = this.dropdown.getDatumForTopSuggestion();
              e && this.dropdown.isVisible() && !this.input.hasOverflow() ? (t = this.input.getInputValue(), g = h.normalizeQuery(t), g = r.escapeRegExChars(g), (e = new RegExp("^(?:" + g + ")(.+$)", "i").exec(e.value)) ? this.input.setHint(t + e[1]) : this.input.clearHint()) : this.input.clearHint()
            },
            _autocomplete: function(t) {
              var g = this.input.getHint(),
                e = this.input.getQuery(),
                t = t || this.input.isCursorAtEnd();
              g && e !== g && t && ((t = this.dropdown.getDatumForTopSuggestion()) && this.input.setInputValue(t.value), this.eventBus.trigger("autocompleted", t.raw, t.datasetName))
            },
            _select: function(t) {
              this.input.setQuery(t.value),
                this.input.setInputValue(t.value, !0),
                this._setLanguageDirection(),
                this.eventBus.trigger("selected", t.raw, t.datasetName),
                this.dropdown.close(),
                r.defer(r.bind(this.dropdown.empty, this.dropdown))
            },
            open: function() {
              this.dropdown.open()
            },
            close: function() {
              this.dropdown.close()
            },
            setVal: function(t) {
              t = r.toStr(t),
                this.isActivated ? this.input.setInputValue(t) : (this.input.setQuery(t), this.input.setInputValue(t, !0)),
                this._setLanguageDirection()
            },
            getVal: function() {
              return this.input.getQuery()
            },
            destroy: function() {
              var t, e;
              this.input.destroy(),
                this.dropdown.destroy(),
                t = this.$node,
                e = t.find(".tt-input"),
                r.each(e.data(i),
                  function(t, g) {
                    r.isUndefined(t) ? e.removeAttr(g) : e.attr(g, t)
                  }),
                e.detach().removeData(i).removeClass("tt-input").insertAfter(t),
                t.remove(),
                this.$node = null
            }
          }),
          t
      }();
    !
    function() {
      "use strict";
      var t = s.fn.typeahead,
        I = "ttTypeahead",
        e = {
          initialize: function(e, n) {
            return n = r.isArray(n) ? n : [].slice.call(arguments, 1),
              e = e || {},
              this.each(function() {
                var t, g = s(this);
                r.each(n,
                    function(t) {
                      t.highlight = !!e.highlight
                    }),
                  t = new b({
                    input: g,
                    eventBus: new u({
                      el: g
                    }),
                    withHint: !!r.isUndefined(e.hint) || !!e.hint,
                    minLength: e.minLength,
                    autoselect: e.autoselect,
                    datasets: n
                  }),
                  g.data(I, t)
              })
          },
          open: function() {
            return this.each(function() {
              var t = s(this);
              (t = t.data(I)) && t.open()
            })
          },
          close: function() {
            return this.each(function() {
              var t = s(this);
              (t = t.data(I)) && t.close()
            })
          },
          val: function(g) {
            return arguments.length ? this.each(function() {
              var t = s(this);
              (t = t.data(I)) && t.setVal(g)
            }) : function(t) {
              var g;
              (t = t.data(I)) && (g = t.getVal());
              return g
            }(this.first())
          },
          destroy: function() {
            return this.each(function() {
              var t, g = s(this);
              (t = g.data(I)) && (t.destroy(), g.removeData(I))
            })
          }
        };
      s.fn.typeahead = function(t) {
          var g;
          return e[t] && "initialize" !== t ? (g = this.filter(function() {
            return !!s(this).data(I)
          }), e[t].apply(g, [].slice.call(arguments, 1))) : e.initialize.apply(this, arguments)
        },
        s.fn.typeahead.noConflict = function() {
          return s.fn.typeahead = t,
            this
        }
    }()
  }(window.jQuery),
  function(I) {
    void 0 === I.fn.each2 && I.extend(I.fn, {
      each2: function(t) {
        for (var g = I([0]), e = -1, n = this.length; ++e < n && (g.context = g[0] = this[e]) && !1 !== t.call(g[0], e, g););
        return this
      }
    })
  }(jQuery),
  function(b, B) {
    "use strict";
    var t, g, e, p, I, A, m, o, n, i, C;

    function a(t) {
      var g = b(document.createTextNode(""));
      t.before(g),
        g.before(t),
        g.remove()
    }

    function s(t) {
      return t.replace(/[^\u0000-\u007E]/g,
        function(t) {
          return n[t] || t
        })
    }

    function r(t, g) {
      for (var e = 0,
          n = g.length; e < n; e += 1)
        if (l(t, g[e])) return e;
      return -1
    }

    function l(t, g) {
      return t === g || t !== B && g !== B && (null !== t && null !== g && (t.constructor === String ? t + "" == g + "" : g.constructor === String && g + "" == t + ""))
    }

    function c(t, g) {
      var e, n, I;
      if (null === t || t.length < 1) return [];
      for (n = 0, I = (e = t.split(g)).length; n < I; n += 1) e[n] = b.trim(e[n]);
      return e
    }

    function u(t) {
      return t.outerWidth(!1) - t.width()
    }

    function d(g) {
      var e = "keyup-change-value";
      g.on("keydown",
          function() {
            b.data(g, e) === B && b.data(g, e, g.val())
          }),
        g.on("keyup",
          function() {
            var t = b.data(g, e);
            t !== B && g.val() !== t && (b.removeData(g, e), g.trigger("keyup-change"))
          })
    }

    function h(g, e, n) {
      var I;
      return n = n || B,
        function() {
          var t = arguments;
          window.clearTimeout(I),
            I = window.setTimeout(function() {
                e.apply(n, t)
              },
              g)
        }
    }

    function y(t) {
      t.preventDefault(),
        t.stopPropagation()
    }

    function Q(t, g, e) {
      var n, I = [],
        i = b.trim(t.attr("class"));
      i && b((i = "" + i).split(/\s+/)).each2(function() {
          0 === this.indexOf("select2-") && I.push(this)
        }),
        (i = b.trim(g.attr("class"))) && b((i = "" + i).split(/\s+/)).each2(function() {
          0 !== this.indexOf("select2-") && (n = e(this)) && I.push(n)
        }),
        t.attr("class", I.join(" "))
    }

    function G(t, g, e, n) {
      var I = s(t.toUpperCase()).indexOf(s(g.toUpperCase())),
        g = g.length;
      I < 0 ? e.push(n(t)) : (e.push(n(t.substring(0, I))), e.push("<span class='select2-match'>"), e.push(n(t.substring(I, I + g))), e.push("</span>"), e.push(n(t.substring(I + g, t.length))))
    }

    function F(t) {
      var g = {
        "\\": "&#92;",
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
        "/": "&#47;"
      };
      return String(t).replace(/[&<>"'\/\\]/g,
        function(t) {
          return g[t]
        })
    }

    function f(i) {
      var t, C = null,
        g = i.quietMillis || 100,
        A = i.url,
        a = this;
      return function(I) {
        window.clearTimeout(t),
          t = window.setTimeout(function() {
              var t = i.data,
                g = A,
                e = i.transport || b.fn.select2.ajaxDefaults.transport,
                n = {
                  type: i.type || "GET",
                  cache: i.cache || !1,
                  jsonpCallback: i.jsonpCallback || B,
                  dataType: i.dataType || "json"
                },
                n = b.extend({},
                  b.fn.select2.ajaxDefaults.params, n),
                t = t ? t.call(a, I.term, I.page, I.context) : null,
                g = "function" == typeof g ? g.call(a, I.term, I.page, I.context) : g;
              C && "function" == typeof C.abort && C.abort(),
                i.params && (b.isFunction(i.params) ? b.extend(n, i.params.call(a)) : b.extend(n, i.params)),
                b.extend(n, {
                  url: g,
                  dataType: i.dataType,
                  data: t,
                  success: function(t) {
                    t = i.results(t, I.page, I);
                    I.callback(t)
                  },
                  error: function(t, g, e) {
                    I.callback({
                      hasError: !0,
                      jqXHR: t,
                      textStatus: g,
                      errorThrown: e
                    })
                  }
                }),
                C = e.call(a, n)
            },
            g)
      }
    }

    function X(t) {
      var g, e, n = t,
        A = function(t) {
          return "" + t.text
        };
      b.isArray(n) && (n = {
          results: e = n
        }),
        !1 === b.isFunction(n) && (e = n, n = function() {
          return e
        });
      t = n();
      return t.text && (A = t.text, b.isFunction(A) || (g = t.text, A = function(t) {
          return t[g]
        })),
        function(I) {
          var i, C = I.term,
            e = {
              results: []
            };
          "" !== C ? (i = function(t, g) {
              var e, n;
              if ((t = t[0]).children) {
                for (n in e = {},
                  t) t.hasOwnProperty(n) && (e[n] = t[n]);
                e.children = [],
                  b(t.children).each2(function(t, g) {
                    i(g, e.children)
                  }),
                  (e.children.length || I.matcher(C, A(e), t)) && g.push(e)
              } else I.matcher(C, A(t), t) && g.push(t)
            },
            b(n().results).each2(function(t, g) {
              i(g, e.results)
            }), I.callback(e)) : I.callback(n())
        }
    }

    function x(g) {
      var i = b.isFunction(g);
      return function(e) {
        var n = e.term,
          I = {
            results: []
          },
          t = i ? g(e) : g;
        b.isArray(t) && (b(t).each(function() {
          var t = this.text !== B,
            g = t ? this.text : this;
          "" !== n && !e.matcher(n, g) || I.results.push(t ? this : {
            id: this,
            text: this
          })
        }), e.callback(I))
      }
    }

    function Z(t, g) {
      if (b.isFunction(t)) return 1;
      if (t) {
        if ("string" == typeof t) return 1;
        throw new Error(g + " must be a string, function, or falsy value")
      }
    }

    function U(t, g) {
      if (b.isFunction(t)) {
        var e = Array.prototype.slice.call(arguments, 2);
        return t.apply(g, e)
      }
      return t
    }

    function v() {
      var e = this;
      b.each(arguments,
        function(t, g) {
          e[g].remove(),
            e[g] = null
        })
    }

    function S(t, g) {
      function e() {}
      return ((e.prototype = new t).constructor = e).prototype.parent = t.prototype,
        e.prototype = b.extend(e.prototype, g),
        e
    }
    window.Select2 === B && (A = {
        x: 0,
        y: 0
      },
      o = {
        TAB: 9,
        ENTER: 13,
        ESC: 27,
        SPACE: 32,
        LEFT: 37,
        UP: 38,
        RIGHT: 39,
        DOWN: 40,
        SHIFT: 16,
        CTRL: 17,
        ALT: 18,
        PAGE_UP: 33,
        PAGE_DOWN: 34,
        HOME: 36,
        END: 35,
        BACKSPACE: 8,
        DELETE: 46,
        isArrow: function(t) {
          switch (t = t.which || t) {
            case o.LEFT:
            case o.RIGHT:
            case o.UP:
            case o.DOWN:
              return !0
          }
          return !1
        },
        isControl: function(t) {
          switch (t.which) {
            case o.SHIFT:
            case o.CTRL:
            case o.ALT:
              return !0
          }
          return !!t.metaKey
        },
        isFunctionKey: function(t) {
          return 112 <= (t = t.which || t) && t <= 123
        }
      },
      n = {
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "A",
        "": "AA",
        "": "AE",
        "": "AE",
        "": "AE",
        "": "AO",
        "": "AU",
        "": "AV",
        "": "AV",
        "": "AY",
        "": "B",
        "": "B",
        "": "B",
        "": "B",
        "": "B",
        "": "B",
        "": "B",
        "": "B",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "C",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "D",
        "": "DZ",
        "": "DZ",
        "": "Dz",
        "": "Dz",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "E",
        "": "F",
        "": "F",
        "": "F",
        "": "F",
        "": "F",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "G",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "H",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "I",
        "": "J",
        "": "J",
        "": "J",
        "": "J",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "K",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "L",
        "": "LJ",
        "": "Lj",
        "": "M",
        "": "M",
        "": "M",
        "": "M",
        "": "M",
        "": "M",
        "": "M",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "N",
        "": "NJ",
        "": "Nj",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "O",
        "": "OI",
        "": "OO",
        "": "OU",
        "": "P",
        "": "P",
        "": "P",
        "": "P",
        "": "P",
        "": "P",
        "": "P",
        "": "P",
        "": "P",
        "": "Q",
        "": "Q",
        "": "Q",
        "": "Q",
        "": "Q",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "R",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "S",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "T",
        "": "TZ",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "U",
        "": "V",
        "": "V",
        "": "V",
        "": "V",
        "": "V",
        "": "V",
        "": "V",
        "": "VY",
        "": "W",
        "": "W",
        "": "W",
        "": "W",
        "": "W",
        "": "W",
        "": "W",
        "": "W",
        "": "W",
        "": "X",
        "": "X",
        "": "X",
        "": "X",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Y",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "Z",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "a",
        "": "aa",
        "": "ae",
        "": "ae",
        "": "ae",
        "": "ao",
        "": "au",
        "": "av",
        "": "av",
        "": "ay",
        "": "b",
        "": "b",
        "": "b",
        "": "b",
        "": "b",
        "": "b",
        "": "b",
        "": "b",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "c",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "d",
        "": "dz",
        "": "dz",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "e",
        "": "f",
        "": "f",
        "": "f",
        "": "f",
        "": "f",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "g",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "h",
        "": "hv",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "i",
        "": "j",
        "": "j",
        "": "j",
        "": "j",
        "": "j",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "k",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "l",
        "": "lj",
        "": "m",
        "": "m",
        "": "m",
        "": "m",
        "": "m",
        "": "m",
        "": "m",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "n",
        "": "nj",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "o",
        "": "oi",
        "": "ou",
        "": "oo",
        "": "p",
        "": "p",
        "": "p",
        "": "p",
        "": "p",
        "": "p",
        "": "p",
        "": "p",
        "": "p",
        "": "q",
        "": "q",
        "": "q",
        "": "q",
        "": "q",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "r",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "s",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "t",
        "": "tz",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "u",
        "": "v",
        "": "v",
        "": "v",
        "": "v",
        "": "v",
        "": "v",
        "": "v",
        "": "vy",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "w",
        "": "x",
        "": "x",
        "": "x",
        "": "x",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "y",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "z",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": "",
        "": ""
      },
      C = b(document), i = 1, p = function() {
        return i++
      },
      t = S(Object, {
        bind: function(t) {
          var g = this;
          return function() {
            t.apply(g, arguments)
          }
        },
        init: function(t) {
          var i, g, e, n, I, C = ".select2-results";
          this.opts = t = this.prepareOpts(t),
            this.id = t.id,
            t.element.data("select2") !== B && null !== t.element.data("select2") && t.element.data("select2").destroy(),
            this.container = this.createContainer(),
            this.liveRegion = b("<span>", {
              role: "status",
              "aria-live": "polite"
            }).addClass("select2-hidden-accessible").appendTo(document.body),
            this.containerId = "s2id_" + (t.element.attr("id") || "autogen" + p()),
            this.containerEventName = this.containerId.replace(/([.])/g, "_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1"),
            this.container.attr("id", this.containerId),
            this.container.attr("title", t.element.attr("title")),
            this.body = b("body"),
            Q(this.container, this.opts.element, this.opts.adaptContainerCssClass),
            this.container.attr("style", t.element.attr("style")),
            this.container.css(U(t.containerCss, this.opts.element)),
            this.container.addClass(U(t.containerCssClass, this.opts.element)),
            this.elementTabIndex = this.opts.element.attr("tabindex"),
            this.opts.element.data("select2", this).attr("tabindex", "-1").before(this.container).on("click.select2", y),
            this.container.data("select2", this),
            this.dropdown = this.container.find(".select2-drop"),
            Q(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass),
            this.dropdown.addClass(U(t.dropdownCssClass, this.opts.element)),
            this.dropdown.data("select2", this),
            this.dropdown.on("click", y),
            this.results = i = this.container.find(C),
            this.search = g = this.container.find("input.select2-input"),
            this.queryCount = 0,
            this.resultsPage = 0,
            this.context = null,
            this.initContainer(),
            this.container.on("click", y),
            this.results.on("mousemove",
              function(t) {
                var g = A;
                g !== B && g.x === t.pageX && g.y === t.pageY || b(t.target).trigger("mousemove-filtered", t)
              }),
            this.dropdown.on("mousemove-filtered", C, this.bind(this.highlightUnderEvent)),
            this.dropdown.on("touchstart touchmove touchend", C, this.bind(function(t) {
              this._touchEvent = !0,
                this.highlightUnderEvent(t)
            })),
            this.dropdown.on("touchmove", C, this.bind(this.touchMoved)),
            this.dropdown.on("touchstart touchend", C, this.bind(this.clearTouchMoved)),
            this.dropdown.on("click", this.bind(function(t) {
              this._touchEvent && (this._touchEvent = !1, this.selectHighlighted())
            })),
            e = 80,
            n = this.results,
            I = h(e,
              function(t) {
                n.trigger("scroll-debounced", t)
              }),
            n.on("scroll",
              function(t) {
                0 <= r(t.target, n.get()) && I(t)
              }),
            this.dropdown.on("scroll-debounced", C, this.bind(this.loadMoreIfNeeded)),
            b(this.container).on("change", ".select2-input",
              function(t) {
                t.stopPropagation()
              }),
            b(this.dropdown).on("change", ".select2-input",
              function(t) {
                t.stopPropagation()
              }),
            b.fn.mousewheel && i.mousewheel(function(t, g, e, n) {
              var I = i.scrollTop();
              0 < n && I - n <= 0 ? (i.scrollTop(0), y(t)) : n < 0 && i.get(0).scrollHeight - i.scrollTop() + n <= i.height() && (i.scrollTop(i.get(0).scrollHeight - i.height()), y(t))
            }),
            d(g),
            g.on("keyup-change input paste", this.bind(this.updateResults)),
            g.on("focus",
              function() {
                g.addClass("select2-focused")
              }),
            g.on("blur",
              function() {
                g.removeClass("select2-focused")
              }),
            this.dropdown.on("mouseup", C, this.bind(function(t) {
              0 < b(t.target).closest(".select2-result-selectable").length && (this.highlightUnderEvent(t), this.selectHighlighted(t))
            })),
            this.dropdown.on("click mouseup mousedown touchstart touchend focusin",
              function(t) {
                t.stopPropagation()
              }),
            this.nextSearchTerm = B,
            b.isFunction(this.opts.initSelection) && (this.initSelection(), this.monitorSource()),
            null !== t.maximumInputLength && this.search.attr("maxlength", t.maximumInputLength);
          C = t.element.prop("disabled");
          this.enable(!(C = C === B ? !1 : C));
          C = t.element.prop("readonly");
          this.readonly(C = C === B ? !1 : C),
            m = m ||
            function() {
              var t = b("<div class='select2-measure-scrollbar'></div>");
              t.appendTo("body");
              var g = {
                width: t.width() - t[0].clientWidth,
                height: t.height() - t[0].clientHeight
              };
              return t.remove(),
                g
            }(),
            this.autofocus = t.element.prop("autofocus"),
            t.element.prop("autofocus", !1),
            this.autofocus && this.focus(),
            this.search.attr("placeholder", t.searchInputPlaceholder)
        },
        destroy: function() {
          var t = this.opts.element,
            g = t.data("select2"),
            e = this;
          this.close(),
            t.length && t[0].detachEvent && t.each(function() {
              this.detachEvent("onpropertychange", e._sync)
            }),
            this.propertyObserver && (this.propertyObserver.disconnect(), this.propertyObserver = null),
            this._sync = null,
            g !== B && (g.container.remove(), g.liveRegion.remove(), g.dropdown.remove(), t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus", this.autofocus || !1), this.elementTabIndex ? t.attr({
              tabindex: this.elementTabIndex
            }) : t.removeAttr("tabindex"), t.show()),
            v.call(this, "container", "liveRegion", "dropdown", "results", "search")
        },
        optionToData: function(t) {
          return t.is("option") ? {
            id: t.prop("value"),
            text: t.text(),
            element: t.get(),
            css: t.attr("class"),
            disabled: t.prop("disabled"),
            locked: l(t.attr("locked"), "locked") || l(t.data("locked"), !0)
          } : t.is("optgroup") ? {
            text: t.attr("label"),
            children: [],
            element: t.get(),
            css: t.attr("class")
          } : void 0
        },
        prepareOpts: function(d) {
          var g, t, h = this,
            C = d.element;
          if ("select" === C.get(0).tagName.toLowerCase() && (this.select = t = d.element), t && b.each(["id", "multiple", "ajax", "query", "createSearchChoice", "initSelection", "data", "tags"],
              function() {
                if (this in d) throw new Error("Option '" + this + "' is not allowed for Select2 when attached to a <select> element.")
              }), "function" != typeof(d = b.extend({}, {
                populateResults: function(t, g, r) {
                  var l = this.opts.id,
                    c = this.liveRegion,
                    u = function(t, g, e) {
                      for (var n, I, i, C, A, a = [], o = 0, s = (t = d.sortResults(t, g, r)).length; o < s; o += 1) i = !(A = !0 === (n = t[o]).disabled) && l(n) !== B,
                        C = n.children && 0 < n.children.length,
                        (I = b("<li></li>")).addClass("select2-results-dept-" + e),
                        I.addClass("select2-result"),
                        I.addClass(i ? "select2-result-selectable" : "select2-result-unselectable"),
                        A && I.addClass("select2-disabled"),
                        C && I.addClass("select2-result-with-children"),
                        I.addClass(h.opts.formatResultCssClass(n)),
                        I.attr("role", "presentation"),
                        (i = b(document.createElement("div"))).addClass("select2-result-label"),
                        i.attr("id", "select2-result-label-" + p()),
                        i.attr("role", "option"),
                        (A = d.formatResult(n, i, r, h.opts.escapeMarkup)) !== B && (i.html(A), I.append(i)),
                        C && ((C = b("<ul></ul>")).addClass("select2-result-sub"), u(n.children, C, e + 1), I.append(C)),
                        I.data("select2-data", n),
                        a.push(I[0]);
                      g.append(a),
                        c.text(d.formatMatches(t.length))
                    };
                  u(g, t, 0)
                }
              },
              b.fn.select2.defaults, d)).id && (g = d.id, d.id = function(t) {
              return t[g]
            }), b.isArray(d.element.data("select2Tags"))) {
            if ("tags" in d) throw "tags specified as both an attribute 'data-select2-tags' and in options of Select2 " + d.element.attr("id");
            d.tags = d.element.data("select2Tags")
          }
          if (t ? (d.query = this.bind(function(n) {
              var t, e = {
                  results: [],
                  more: !1
                },
                I = n.term,
                i = function(t, g) {
                  var e;
                  t.is("option") ? n.matcher(I, t.text(), t) && g.push(h.optionToData(t)) : t.is("optgroup") && (e = h.optionToData(t), t.children().each2(function(t, g) {
                    i(g, e.children)
                  }), 0 < e.children.length && g.push(e))
                },
                g = C.children();
              (g = this.getPlaceholder() !== B && 0 < g.length && (t = this.getPlaceholderOption()) ? g.not(t) : g).each2(function(t, g) {
                  i(g, e.results)
                }),
                n.callback(e)
            }), d.id = function(t) {
              return t.id
            }) : "query" in d || ("ajax" in d ? ((t = d.element.data("ajax-url")) && 0 < t.length && (d.ajax.url = t), d.query = f.call(d.element, d.ajax)) : "data" in d ? d.query = X(d.data) : "tags" in d && (d.query = x(d.tags), d.createSearchChoice === B && (d.createSearchChoice = function(t) {
              return {
                id: b.trim(t),
                text: b.trim(t)
              }
            }), d.initSelection === B && (d.initSelection = function(t, g) {
              var e = [];
              b(c(t.val(), d.separator)).each(function() {
                  var t = {
                      id: this,
                      text: this
                    },
                    g = d.tags;
                  b.isFunction(g) && (g = g()),
                    b(g).each(function() {
                      if (l(this.id, t.id)) return t = this,
                        !1
                    }),
                    e.push(t)
                }),
                g(e)
            }))), "function" != typeof d.query) throw "query function not defined for Select2 " + d.element.attr("id");
          if ("top" === d.createSearchChoicePosition) d.createSearchChoicePosition = function(t, g) {
            t.unshift(g)
          };
          else if ("bottom" === d.createSearchChoicePosition) d.createSearchChoicePosition = function(t, g) {
            t.push(g)
          };
          else if ("function" != typeof d.createSearchChoicePosition) throw "invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";
          return d
        },
        monitorSource: function() {
          var t, g = this.opts.element,
            e = this;
          g.on("change.select2", this.bind(function(t) {
              !0 !== this.opts.element.data("select2-change-triggered") && this.initSelection()
            })),
            this._sync = this.bind(function() {
              var t = g.prop("disabled");
              this.enable(!(t = t === B ? !1 : t));
              t = g.prop("readonly");
              this.readonly(t = t === B ? !1 : t),
                Q(this.container, this.opts.element, this.opts.adaptContainerCssClass),
                this.container.addClass(U(this.opts.containerCssClass, this.opts.element)),
                Q(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass),
                this.dropdown.addClass(U(this.opts.dropdownCssClass, this.opts.element))
            }),
            g.length && g[0].attachEvent && g.each(function() {
              this.attachEvent("onpropertychange", e._sync)
            }),
            (t = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver) !== B && (this.propertyObserver && (delete this.propertyObserver, this.propertyObserver = null), this.propertyObserver = new t(function(t) {
              b.each(t, e._sync)
            }), this.propertyObserver.observe(g.get(0), {
              attributes: !0,
              subtree: !1
            }))
        },
        triggerSelect: function(t) {
          t = b.Event("select2-selecting", {
            val: this.id(t),
            object: t,
            choice: t
          });
          return this.opts.element.trigger(t),
            !t.isDefaultPrevented()
        },
        triggerChange: function(t) {
          t = b.extend({},
              t = t || {}, {
                type: "change",
                val: this.val()
              }),
            this.opts.element.data("select2-change-triggered", !0),
            this.opts.element.trigger(t),
            this.opts.element.data("select2-change-triggered", !1),
            this.opts.element.click(),
            this.opts.blurOnChange && this.opts.element.blur()
        },
        isInterfaceEnabled: function() {
          return !0 === this.enabledInterface
        },
        enableInterface: function() {
          var t = this._enabled && !this._readonly;
          return t !== this.enabledInterface && (this.container.toggleClass("select2-container-disabled", !t), this.close(), this.enabledInterface = t, !0)
        },
        enable: function(t) {
          this._enabled !== (t = t === B ? !0 : t) && (this._enabled = t, this.opts.element.prop("disabled", !t), this.enableInterface())
        },
        disable: function() {
          this.enable(!1)
        },
        readonly: function(t) {
          this._readonly !== (t = t === B ? !1 : t) && (this._readonly = t, this.opts.element.prop("readonly", t), this.enableInterface())
        },
        opened: function() {
          return !!this.container && this.container.hasClass("select2-dropdown-open")
        },
        positionDropdown: function() {
          var t, g, e = this.dropdown,
            n = this.container.offset(),
            I = this.container.outerHeight(!1),
            i = this.container.outerWidth(!1),
            C = e.outerHeight(!1),
            A = b(window),
            a = A.width(),
            o = A.height(),
            s = A.scrollLeft() + a,
            r = A.scrollTop() + o,
            l = n.top + I,
            c = n.left,
            u = l + C <= r,
            d = n.top - C >= A.scrollTop(),
            h = e.outerWidth(!1),
            B = c + h <= s;
          e.hasClass("select2-drop-above") ? (t = !0, !d && u && (t = !(g = !0))) : (t = !1, !u && d && (t = g = !0)),
            g && (e.hide(), n = this.container.offset(), I = this.container.outerHeight(!1), i = this.container.outerWidth(!1), C = e.outerHeight(!1), s = A.scrollLeft() + a, A.scrollTop(), l = n.top + I, B = (c = n.left) + (h = e.outerWidth(!1)) <= s, e.show(), this.focusSearch()),
            this.opts.dropdownAutoWidth ? (I = b(".select2-results", e)[0], e.addClass("select2-drop-auto-width"), e.css("width", ""), i < (h = e.outerWidth(!1) + (I.scrollHeight === I.clientHeight ? 0 : m.width)) ? i = h : h = i, C = e.outerHeight(!1), B = c + h <= s) : this.container.removeClass("select2-drop-auto-width"),
            "static" !== this.body.css("position") && (l -= (s = this.body.offset()).top, c -= s.left),
            i = {
              left: c = !B ? n.left + this.container.outerWidth(!1) - h : c,
              width: i
            },
            t ? (i.top = n.top - C, i.bottom = "auto", this.container.addClass("select2-drop-above"), e.addClass("select2-drop-above")) : (i.top = l, i.bottom = "auto", this.container.removeClass("select2-drop-above"), e.removeClass("select2-drop-above")),
            i = b.extend(i, U(this.opts.dropdownCss, this.opts.element)),
            e.css(i)
        },
        shouldOpen: function() {
          var t;
          return !this.opened() && (!1 !== this._enabled && !0 !== this._readonly && (t = b.Event("select2-opening"), this.opts.element.trigger(t), !t.isDefaultPrevented()))
        },
        clearDropdownAlignmentPreference: function() {
          this.container.removeClass("select2-drop-above"),
            this.dropdown.removeClass("select2-drop-above")
        },
        open: function() {
          return !!this.shouldOpen() && (this.opening(), C.on("mousemove.select2Event",
            function(t) {
              A.x = t.pageX,
                A.y = t.pageY
            }), !0)
        },
        opening: function() {
          var e, t = this.containerEventName,
            g = "scroll." + t,
            n = "resize." + t,
            I = "orientationchange." + t;
          this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),
            this.clearDropdownAlignmentPreference(),
            this.dropdown[0] !== this.body.children().last()[0] && this.dropdown.detach().appendTo(this.body),
            0 == (e = b("#select2-drop-mask")).length && ((e = b(document.createElement("div"))).attr("id", "select2-drop-mask").attr("class", "select2-drop-mask"), e.hide(), e.appendTo(this.body), e.on("mousedown touchstart click",
              function(t) {
                a(e);
                var g = b("#select2-drop");
                0 < g.length && ((g = g.data("select2")).opts.selectOnBlur && g.selectHighlighted({
                  noFocus: !0
                }), g.close(), t.preventDefault(), t.stopPropagation())
              })),
            this.dropdown.prev()[0] !== e[0] && this.dropdown.before(e),
            b("#select2-drop").removeAttr("id"),
            this.dropdown.attr("id", "select2-drop"),
            e.show(),
            this.positionDropdown(),
            this.dropdown.show(),
            this.positionDropdown(),
            this.dropdown.addClass("select2-drop-active");
          var i = this;
          this.container.parents().add(window).each(function() {
            b(this).on(n + " " + g + " " + I,
              function(t) {
                i.opened() && i.positionDropdown()
              })
          })
        },
        close: function() {
          var t, g, e, n;
          this.opened() && (t = this.containerEventName, g = "scroll." + t, e = "resize." + t, n = "orientationchange." + t, this.container.parents().add(window).each(function() {
            b(this).off(g).off(e).off(n)
          }), this.clearDropdownAlignmentPreference(), b("#select2-drop-mask").hide(), this.dropdown.removeAttr("id"), this.dropdown.hide(), this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"), this.results.empty(), C.off("mousemove.select2Event"), this.clearSearch(), this.search.removeClass("select2-active"), this.opts.element.trigger(b.Event("select2-close")))
        },
        externalSearch: function(t) {
          this.open(),
            this.search.val(t),
            this.updateResults(!1)
        },
        clearSearch: function() {},
        getMaximumSelectionSize: function() {
          return U(this.opts.maximumSelectionSize, this.opts.element)
        },
        ensureHighlightVisible: function() {
          var t, g, e, n, I, i = this.results,
            C = this.highlight();
          C < 0 || (0 != C ? (t = this.findHighlightableChoices().find(".select2-result-label"), e = (I = ((g = b(t[C])).offset() || {}).top || 0) + g.outerHeight(!0), C === t.length - 1 && 0 < (n = i.find("li.select2-more-results")).length && (e = n.offset().top + n.outerHeight(!0)), (n = i.offset().top + i.outerHeight(!0)) < e && i.scrollTop(i.scrollTop() + (e - n)), (I = I - i.offset().top) < 0 && "none" != g.css("display") && i.scrollTop(i.scrollTop() + I)) : i.scrollTop(0))
        },
        findHighlightableChoices: function() {
          return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")
        },
        moveHighlight: function(t) {
          for (var g = this.findHighlightableChoices(), e = this.highlight(); - 1 < e && e < g.length;) {
            var n = b(g[e += t]);
            if (n.hasClass("select2-result-selectable") && !n.hasClass("select2-disabled") && !n.hasClass("select2-selected")) {
              this.highlight(e);
              break
            }
          }
        },
        highlight: function(t) {
          var g = this.findHighlightableChoices();
          if (0 === arguments.length) return r(g.filter(".select2-highlighted")[0], g.get());
          (t = t >= g.length ? g.length - 1 : t) < 0 && (t = 0),
            this.removeHighlight(),
            (t = b(g[t])).addClass("select2-highlighted"),
            this.search.attr("aria-activedescendant", t.find(".select2-result-label").attr("id")),
            this.ensureHighlightVisible(),
            this.liveRegion.text(t.text()),
            (t = t.data("select2-data")) && this.opts.element.trigger({
              type: "select2-highlight",
              val: this.id(t),
              choice: t
            })
        },
        removeHighlight: function() {
          this.results.find(".select2-highlighted").removeClass("select2-highlighted")
        },
        touchMoved: function() {
          this._touchMoved = !0
        },
        clearTouchMoved: function() {
          this._touchMoved = !1
        },
        countSelectableResults: function() {
          return this.findHighlightableChoices().length
        },
        highlightUnderEvent: function(t) {
          var g = b(t.target).closest(".select2-result-selectable");
          0 < g.length && !g.is(".select2-highlighted") ? (t = this.findHighlightableChoices(), this.highlight(t.index(g))) : 0 == g.length && this.removeHighlight()
        },
        loadMoreIfNeeded: function() {
          var g = this.results,
            e = g.find("li.select2-more-results"),
            n = this.resultsPage + 1,
            I = this,
            i = this.search.val(),
            C = this.context;
          0 !== e.length && e.offset().top - g.offset().top - g.height() <= this.opts.loadMorePadding && (e.addClass("select2-active"), this.opts.query({
            element: this.opts.element,
            term: i,
            page: n,
            context: C,
            matcher: this.opts.matcher,
            callback: this.bind(function(t) {
              I.opened() && (I.opts.populateResults.call(this, g, t.results, {
                term: i,
                page: n,
                context: C
              }), I.postprocessResults(t, !1, !1), !0 === t.more ? (e.detach().appendTo(g).text(U(I.opts.formatLoadMore, I.opts.element, n + 1)), window.setTimeout(function() {
                  I.loadMoreIfNeeded()
                },
                10)) : e.remove(), I.positionDropdown(), I.resultsPage = n, I.context = t.context, this.opts.element.trigger({
                type: "select2-loaded",
                items: t
              }))
            })
          }))
        },
        tokenize: function() {},
        updateResults: function(e) {
          var t, n = this.search,
            I = this.results,
            i = this.opts,
            C = this,
            g = n.val(),
            A = b.data(this.container, "select2-last-term");
          if ((!0 === e || !A || !l(g, A)) && (b.data(this.container, "select2-last-term", g), !0 === e || !1 !== this.showSearchInput && this.opened())) {
            var a = ++this.queryCount,
              g = this.getMaximumSelectionSize();
            if (!(1 <= g && (t = this.data(), b.isArray(t) && t.length >= g && Z(i.formatSelectionTooBig, "formatSelectionTooBig")))) return n.val().length < i.minimumInputLength ? (Z(i.formatInputTooShort, "formatInputTooShort") ? s("<li class='select2-no-results'>" + U(i.formatInputTooShort, i.element, n.val(), i.minimumInputLength) + "</li>") : s(""), void(e && this.showSearch && this.showSearch(!0))) : void(i.maximumInputLength && n.val().length > i.maximumInputLength ? Z(i.formatInputTooLong, "formatInputTooLong") ? s("<li class='select2-no-results'>" + U(i.formatInputTooLong, i.element, n.val(), i.maximumInputLength) + "</li>") : s("") : (i.formatSearching && 0 === this.findHighlightableChoices().length && s("<li class='select2-searching'>" + U(i.formatSearching, i.element) + "</li>"), n.addClass("select2-active"), this.removeHighlight(), (t = this.tokenize()) != B && null != t && n.val(t), this.resultsPage = 1, i.query({
              element: i.element,
              term: n.val(),
              page: this.resultsPage,
              context: null,
              matcher: i.matcher,
              callback: this.bind(function(t) {
                var g;
                a == this.queryCount && (this.opened() ? t.hasError !== B && Z(i.formatAjaxError, "formatAjaxError") ? s("<li class='select2-ajax-error'>" + U(i.formatAjaxError, i.element, t.jqXHR, t.textStatus, t.errorThrown) + "</li>") : (this.context = t.context === B ? null : t.context, this.opts.createSearchChoice && "" !== n.val() && (g = this.opts.createSearchChoice.call(C, n.val(), t.results)) !== B && null !== g && C.id(g) !== B && null !== C.id(g) && 0 === b(t.results).filter(function() {
                  return l(C.id(this), C.id(g))
                }).length && this.opts.createSearchChoicePosition(t.results, g), 0 === t.results.length && Z(i.formatNoMatches, "formatNoMatches") ? s("<li class='select2-no-results'>" + U(i.formatNoMatches, i.element, n.val()) + "</li>") : (I.empty(), C.opts.populateResults.call(this, I, t.results, {
                  term: n.val(),
                  page: this.resultsPage,
                  context: null
                }), !0 === t.more && Z(i.formatLoadMore, "formatLoadMore") && (I.append("<li class='select2-more-results'>" + i.escapeMarkup(U(i.formatLoadMore, i.element, this.resultsPage)) + "</li>"), window.setTimeout(function() {
                    C.loadMoreIfNeeded()
                  },
                  10)), this.postprocessResults(t, e), o(), this.opts.element.trigger({
                  type: "select2-loaded",
                  items: t
                }))) : this.search.removeClass("select2-active"))
              })
            })));
            s("<li class='select2-selection-limit'>" + U(i.formatSelectionTooBig, i.element, g) + "</li>")
          }

          function o() {
            n.removeClass("select2-active"),
              C.positionDropdown(),
              I.find(".select2-no-results,.select2-selection-limit,.select2-searching").length ? C.liveRegion.text(I.text()) : C.liveRegion.text(C.opts.formatMatches(I.find(".select2-result-selectable").length))
          }

          function s(t) {
            I.html(t),
              o()
          }
        },
        cancel: function() {
          this.close()
        },
        blur: function() {
          this.opts.selectOnBlur && this.selectHighlighted({
              noFocus: !0
            }),
            this.close(),
            this.container.removeClass("select2-container-active"),
            this.search[0] === document.activeElement && this.search.blur(),
            this.clearSearch(),
            this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")
        },
        focusSearch: function() {
          var e;
          (e = this.search)[0] !== document.activeElement && window.setTimeout(function() {
              var t = e[0],
                g = e.val().length;
              e.focus(),
                (0 < t.offsetWidth || 0 < t.offsetHeight) && t === document.activeElement && (t.setSelectionRange ? t.setSelectionRange(g, g) : t.createTextRange && ((t = t.createTextRange()).collapse(!1), t.select()))
            },
            0)
        },
        selectHighlighted: function(t) {
          var g, e;
          this._touchMoved ? this.clearTouchMoved() : (g = this.highlight(), (e = this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data")) ? (this.highlight(g), this.onSelect(e, t)) : t && t.noFocus && this.close())
        },
        getPlaceholder: function() {
          var t;
          return this.opts.element.attr("placeholder") || this.opts.element.attr("data-placeholder") || this.opts.element.data("placeholder") || this.opts.placeholder || ((t = this.getPlaceholderOption()) !== B ? t.text() : B)
        },
        getPlaceholderOption: function() {
          if (this.select) {
            var t = this.select.children("option").first();
            return this.opts.placeholderOption !== B ? "first" === this.opts.placeholderOption && t || "function" == typeof this.opts.placeholderOption && this.opts.placeholderOption(this.select) : "" === b.trim(t.text()) && "" === t.val() ? t : void 0
          }
        },
        initContainerWidth: function() {
          var t = function() {
            var t, g, e, n, I;
            if ("off" === this.opts.width) return null;
            if ("element" === this.opts.width) return 0 === this.opts.element.outerWidth(!1) ? "auto" : this.opts.element.outerWidth(!1) + "px";
            if ("copy" !== this.opts.width && "resolve" !== this.opts.width) return b.isFunction(this.opts.width) ? this.opts.width() : this.opts.width;
            if ((t = this.opts.element.attr("style")) !== B)
              for (n = 0, I = (g = t.split(";")).length; n < I; n += 1)
                if (null !== (e = g[n].replace(/\s/g, "").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i)) && 1 <= e.length) return e[1];
            return "resolve" === this.opts.width ? 0 < (t = this.opts.element.css("width")).indexOf("%") ? t : 0 === this.opts.element.outerWidth(!1) ? "auto" : this.opts.element.outerWidth(!1) + "px" : null
          }.call(this);
          null !== t && this.container.css("width", t)
        }
      }), g = S(t, {
        createContainer: function() {
          return b(document.createElement("div")).attr({
            class: "select2-container"
          }).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>", "   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>", "   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>", "</a>", "<label for='' class='select2-offscreen'></label>", "<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />", "<div class='select2-drop select2-display-none'>", "   <div class='select2-search'>", "       <label for='' class='select2-offscreen'></label>", "       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'", "       aria-autocomplete='list' />", "   </div>", "   <ul class='select2-results' role='listbox'>", "   </ul>", "</div>"].join(""))
        },
        enableInterface: function() {
          this.parent.enableInterface.apply(this, arguments) && this.focusser.prop("disabled", !this.isInterfaceEnabled())
        },
        opening: function() {
          var t, g;
          0 <= this.opts.minimumResultsForSearch && this.showSearch(!0),
            this.parent.opening.apply(this, arguments),
            !1 !== this.showSearchInput && this.search.val(this.focusser.val()),
            this.opts.shouldFocusInput(this) && (this.search.focus(), (t = this.search.get(0)).createTextRange ? ((g = t.createTextRange()).collapse(!1), g.select()) : t.setSelectionRange && (g = this.search.val().length, t.setSelectionRange(g, g))),
            "" === this.search.val() && this.nextSearchTerm != B && (this.search.val(this.nextSearchTerm), this.search.select()),
            this.focusser.prop("disabled", !0).val(""),
            this.updateResults(!0),
            this.opts.element.trigger(b.Event("select2-open"))
        },
        close: function() {
          this.opened() && (this.parent.close.apply(this, arguments), this.focusser.prop("disabled", !1), this.opts.shouldFocusInput(this) && this.focusser.focus())
        },
        focus: function() {
          this.opened() ? this.close() : (this.focusser.prop("disabled", !1), this.opts.shouldFocusInput(this) && this.focusser.focus())
        },
        isFocused: function() {
          return this.container.hasClass("select2-container-active")
        },
        cancel: function() {
          this.parent.cancel.apply(this, arguments),
            this.focusser.prop("disabled", !1),
            this.opts.shouldFocusInput(this) && this.focusser.focus()
        },
        destroy: function() {
          b("label[for='" + this.focusser.attr("id") + "']").attr("for", this.opts.element.attr("id")),
            this.parent.destroy.apply(this, arguments),
            v.call(this, "selection", "focusser")
        },
        initContainer: function() {
          var g, t = this.container,
            e = this.dropdown,
            n = p();
          this.opts.minimumResultsForSearch < 0 ? this.showSearch(!1) : this.showSearch(!0),
            this.selection = g = t.find(".select2-choice"),
            this.focusser = t.find(".select2-focusser"),
            g.find(".select2-chosen").attr("id", "select2-chosen-" + n),
            this.focusser.attr("aria-labelledby", "select2-chosen-" + n),
            this.results.attr("id", "select2-results-" + n),
            this.search.attr("aria-owns", "select2-results-" + n),
            this.focusser.attr("id", "s2id_autogen" + n),
            t = b("label[for='" + this.opts.element.attr("id") + "']"),
            this.focusser.prev().text(t.text()).attr("for", this.focusser.attr("id"));
          n = this.opts.element.attr("title");
          this.opts.element.attr("title", n || t.text()),
            this.focusser.attr("tabindex", this.elementTabIndex),
            this.search.attr("id", this.focusser.attr("id") + "_search"),
            this.search.prev().text(b("label[for='" + this.focusser.attr("id") + "']").text()).attr("for", this.search.attr("id")),
            this.search.on("keydown", this.bind(function(t) {
              if (this.isInterfaceEnabled() && 229 != t.keyCode)
                if (t.which !== o.PAGE_UP && t.which !== o.PAGE_DOWN) switch (t.which) {
                  case o.UP:
                  case o.DOWN:
                    return this.moveHighlight(t.which === o.UP ? -1 : 1),
                      void y(t);
                  case o.ENTER:
                    return this.selectHighlighted(),
                      void y(t);
                  case o.TAB:
                    return void this.selectHighlighted({
                      noFocus:
                        !0
                    });
                  case o.ESC:
                    return this.cancel(t),
                      void y(t)
                } else y(t)
            })),
            this.search.on("blur", this.bind(function(t) {
              document.activeElement === this.body.get(0) && window.setTimeout(this.bind(function() {
                this.opened() && this.search.focus()
              }), 0)
            })),
            this.focusser.on("keydown", this.bind(function(t) {
              if (this.isInterfaceEnabled() && t.which !== o.TAB && !o.isControl(t) && !o.isFunctionKey(t) && t.which !== o.ESC) {
                if (!1 !== this.opts.openOnEnter || t.which !== o.ENTER) return t.which == o.DOWN || t.which == o.UP || t.which == o.ENTER && this.opts.openOnEnter ? t.altKey || t.ctrlKey || t.shiftKey || t.metaKey ? void 0 : (this.open(), void y(t)) : void(t.which != o.DELETE && t.which != o.BACKSPACE || (this.opts.allowClear && this.clear(), y(t)));
                y(t)
              }
            })),
            d(this.focusser),
            this.focusser.on("keyup-change input", this.bind(function(t) {
              0 <= this.opts.minimumResultsForSearch && (t.stopPropagation(), this.opened() || this.open())
            })),
            g.on("mousedown touchstart", "abbr", this.bind(function(t) {
              this.isInterfaceEnabled() && (this.clear(), (t = t).preventDefault(), t.stopImmediatePropagation(), this.close(), this.selection.focus())
            })),
            g.on("mousedown touchstart", this.bind(function(t) {
              a(g),
                this.container.hasClass("select2-container-active") || this.opts.element.trigger(b.Event("select2-focus")),
                this.opened() ? this.close() : this.isInterfaceEnabled() && this.open(),
                y(t)
            })),
            e.on("mousedown touchstart", this.bind(function() {
              this.opts.shouldFocusInput(this) && this.search.focus()
            })),
            g.on("focus", this.bind(function(t) {
              y(t)
            })),
            this.focusser.on("focus", this.bind(function() {
              this.container.hasClass("select2-container-active") || this.opts.element.trigger(b.Event("select2-focus")),
                this.container.addClass("select2-container-active")
            })).on("blur", this.bind(function() {
              this.opened() || (this.container.removeClass("select2-container-active"), this.opts.element.trigger(b.Event("select2-blur")))
            })),
            this.search.on("focus", this.bind(function() {
              this.container.hasClass("select2-container-active") || this.opts.element.trigger(b.Event("select2-focus")),
                this.container.addClass("select2-container-active")
            })),
            this.initContainerWidth(),
            this.opts.element.addClass("select2-offscreen"),
            this.setPlaceholder()
        },
        clear: function(t) {
          var g, e = this.selection.data("select2-data");
          e && (g = b.Event("select2-clearing"), this.opts.element.trigger(g), g.isDefaultPrevented() || (g = this.getPlaceholderOption(), this.opts.element.val(g ? g.val() : ""), this.selection.find(".select2-chosen").empty(), this.selection.removeData("select2-data"), this.setPlaceholder(), !1 !== t && (this.opts.element.trigger({
            type: "select2-removed",
            val: this.id(e),
            choice: e
          }), this.triggerChange({
            removed: e
          }))))
        },
        initSelection: function() {
          var g;
          this.isPlaceholderOptionSelected() ? (this.updateSelection(null), this.close(), this.setPlaceholder()) : (g = this).opts.initSelection.call(null, this.opts.element,
            function(t) {
              t !== B && null !== t && (g.updateSelection(t), g.close(), g.setPlaceholder(), g.nextSearchTerm = g.opts.nextSearchTerm(t, g.search.val()))
            })
        },
        isPlaceholderOptionSelected: function() {
          var t;
          return this.getPlaceholder() !== B && ((t = this.getPlaceholderOption()) !== B && t.prop("selected") || "" === this.opts.element.val() || this.opts.element.val() === B || null === this.opts.element.val())
        },
        prepareOpts: function() {
          var C = this.parent.prepareOpts.apply(this, arguments),
            e = this;
          return "select" === C.element.get(0).tagName.toLowerCase() ? C.initSelection = function(t, g) {
              t = t.find("option").filter(function() {
                return this.selected && !this.disabled
              });
              g(e.optionToData(t))
            } : "data" in C && (C.initSelection = C.initSelection ||
              function(t, g) {
                var I = t.val(),
                  i = null;
                C.query({
                  matcher: function(t, g, e) {
                    var n = l(I, C.id(e));
                    return n && (i = e),
                      n
                  },
                  callback: b.isFunction(g) ?
                    function() {
                      g(i)
                    } : b.noop
                })
              }),
            C
        },
        getPlaceholder: function() {
          return this.select && this.getPlaceholderOption() === B ? B : this.parent.getPlaceholder.apply(this, arguments)
        },
        setPlaceholder: function() {
          var t = this.getPlaceholder();
          this.isPlaceholderOptionSelected() && t !== B && (this.select && this.getPlaceholderOption() === B || (this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)), this.selection.addClass("select2-default"), this.container.removeClass("select2-allowclear")))
        },
        postprocessResults: function(t, g, e) {
          var n = 0,
            I = this;
          this.findHighlightableChoices().each2(function(t, g) {
              if (l(I.id(g.data("select2-data")), I.opts.element.val())) return n = t,
                !1
            }),
            !1 !== e && (!0 === g && 0 <= n ? this.highlight(n) : this.highlight(0)),
            !0 !== g || 0 <= (g = this.opts.minimumResultsForSearch) && this.showSearch(function e(t) {
              var n = 0;
              return b.each(t,
                  function(t, g) {
                    g.children ? n += e(g.children) : n++
                  }),
                n
            }(t.results) >= g)
        },
        showSearch: function(t) {
          this.showSearchInput !== t && (this.showSearchInput = t, this.dropdown.find(".select2-search").toggleClass("select2-search-hidden", !t), this.dropdown.find(".select2-search").toggleClass("select2-offscreen", !t), b(this.dropdown, this.container).toggleClass("select2-with-searchbox", t))
        },
        onSelect: function(t, g) {
          var e, n;
          this.triggerSelect(t) && (e = this.opts.element.val(), n = this.data(), this.opts.element.val(this.id(t)), this.updateSelection(t), this.opts.element.trigger({
            type: "select2-selected",
            val: this.id(t),
            choice: t
          }), this.nextSearchTerm = this.opts.nextSearchTerm(t, this.search.val()), this.close(), g && g.noFocus || !this.opts.shouldFocusInput(this) || this.focusser.focus(), l(e, this.id(t)) || this.triggerChange({
            added: t,
            removed: n
          }))
        },
        updateSelection: function(t) {
          var g, e = this.selection.find(".select2-chosen");
          this.selection.data("select2-data", t),
            e.empty(),
            (g = null !== t ? this.opts.formatSelection(t, e, this.opts.escapeMarkup) : g) !== B && e.append(g),
            (t = this.opts.formatSelectionCssClass(t, e)) !== B && e.addClass(t),
            this.selection.removeClass("select2-default"),
            this.opts.allowClear && this.getPlaceholder() !== B && this.container.addClass("select2-allowclear")
        },
        val: function() {
          var t, g = !1,
            e = null,
            n = this,
            I = this.data();
          if (0 === arguments.length) return this.opts.element.val();
          if (t = arguments[0], 1 < arguments.length && (g = arguments[1]), this.select) this.select.val(t).find("option").filter(function() {
              return this.selected
            }).each2(function(t, g) {
              return e = n.optionToData(g),
                !1
            }),
            this.updateSelection(e),
            this.setPlaceholder(),
            g && this.triggerChange({
              added: e,
              removed: I
            });
          else if (t || 0 === t) {
            if (this.opts.initSelection === B) throw new Error("cannot call val() if initSelection() is not defined");
            this.opts.element.val(t),
              this.opts.initSelection(this.opts.element,
                function(t) {
                  n.opts.element.val(t ? n.id(t) : ""),
                    n.updateSelection(t),
                    n.setPlaceholder(),
                    g && n.triggerChange({
                      added: t,
                      removed: I
                    })
                })
          } else this.clear(g)
        },
        clearSearch: function() {
          this.search.val(""),
            this.focusser.val("")
        },
        data: function(t) {
          var g, e = !1;
          if (0 === arguments.length) return g = (g = this.selection.data("select2-data")) == B ? null : g;
          1 < arguments.length && (e = arguments[1]),
            t ? (g = this.data(), this.opts.element.val(t ? this.id(t) : ""), this.updateSelection(t), e && this.triggerChange({
              added: t,
              removed: g
            })) : this.clear(e)
        }
      }), e = S(t, {
        createContainer: function() {
          return b(document.createElement("div")).attr({
            class: "select2-container select2-container-multi"
          }).html(["<ul class='select2-choices'>", "  <li class='select2-search-field'>", "    <label for='' class='select2-offscreen'></label>", "    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>", "  </li>", "</ul>", "<div class='select2-drop select2-drop-multi select2-display-none'>", "   <ul class='select2-results'>", "   </ul>", "</div>"].join(""))
        },
        prepareOpts: function() {
          var a = this.parent.prepareOpts.apply(this, arguments),
            n = this;
          return "select" === a.element.get(0).tagName.toLowerCase() ? a.initSelection = function(t, g) {
              var e = [];
              t.find("option").filter(function() {
                  return this.selected && !this.disabled
                }).each2(function(t, g) {
                  e.push(n.optionToData(g))
                }),
                g(e)
            } : "data" in a && (a.initSelection = a.initSelection ||
              function(t, i) {
                var C = c(t.val(), a.separator),
                  A = [];
                a.query({
                  matcher: function(t, g, e) {
                    var n = b.grep(C,
                      function(t) {
                        return l(t, a.id(e))
                      }).length;
                    return n && A.push(e),
                      n
                  },
                  callback: b.isFunction(i) ?
                    function() {
                      for (var t = [], g = 0; g < C.length; g++)
                        for (var e = C[g], n = 0; n < A.length; n++) {
                          var I = A[n];
                          if (l(e, a.id(I))) {
                            t.push(I),
                              A.splice(n, 1);
                            break
                          }
                        }
                      i(t)
                    } : b.noop
                })
              }),
            a
        },
        selectChoice: function(t) {
          var g = this.container.find(".select2-search-choice-focus");
          g.length && t && t[0] == g[0] || (g.length && this.opts.element.trigger("choice-deselected", g), g.removeClass("select2-search-choice-focus"), t && t.length && (this.close(), t.addClass("select2-search-choice-focus"), this.opts.element.trigger("choice-selected", t)))
        },
        destroy: function() {
          b("label[for='" + this.search.attr("id") + "']").attr("for", this.opts.element.attr("id")),
            this.parent.destroy.apply(this, arguments),
            v.call(this, "searchContainer", "selection")
        },
        initContainer: function() {
          var a, t = ".select2-choices";
          this.searchContainer = this.container.find(".select2-search-field"),
            this.selection = a = this.container.find(t);
          var g = this;
          this.selection.on("click", ".select2-search-choice:not(.select2-locked)",
              function(t) {
                g.search[0].focus(),
                  g.selectChoice(b(this))
              }),
            this.search.attr("id", "s2id_autogen" + p()),
            this.search.prev().text(b("label[for='" + this.opts.element.attr("id") + "']").text()).attr("for", this.search.attr("id")),
            this.search.on("input paste", this.bind(function() {
              this.search.attr("placeholder") && 0 == this.search.val().length || this.isInterfaceEnabled() && (this.opened() || this.open())
            })),
            this.search.attr("tabindex", this.elementTabIndex),
            this.keydowns = 0,
            this.search.on("keydown", this.bind(function(t) {
              if (this.isInterfaceEnabled()) {
                ++this.keydowns;
                var g, e, n, I = a.find(".select2-search-choice-focus"),
                  i = I.prev(".select2-search-choice:not(.select2-locked)"),
                  C = I.next(".select2-search-choice:not(.select2-locked)"),
                  n = (g = this.search, A = n = 0, "selectionStart" in (g = b(g)[0]) ? (n = g.selectionStart, A = g.selectionEnd - n) : "selection" in document && (g.focus(), e = document.selection.createRange(), A = document.selection.createRange().text.length, e.moveStart("character", -g.value.length), n = e.text.length - A), {
                    offset: n,
                    length: A
                  });
                if (I.length && (t.which == o.LEFT || t.which == o.RIGHT || t.which == o.BACKSPACE || t.which == o.DELETE || t.which == o.ENTER)) {
                  var A = I;
                  return t.which == o.LEFT && i.length ? A = i : t.which == o.RIGHT ? A = C.length ? C : null : t.which === o.BACKSPACE ? this.unselect(I.first()) && (this.search.width(10), A = i.length ? i : C) : t.which == o.DELETE ? this.unselect(I.first()) && (this.search.width(10), A = C.length ? C : null) : t.which == o.ENTER && (A = null),
                    this.selectChoice(A),
                    y(t),
                    void(A && A.length || this.open())
                }
                if ((t.which === o.BACKSPACE && 1 == this.keydowns || t.which == o.LEFT) && 0 == n.offset && !n.length) return this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),
                  void y(t);
                if (this.selectChoice(null), this.opened()) switch (t.which) {
                  case o.UP:
                  case o.DOWN:
                    return this.moveHighlight(t.which === o.UP ? -1 : 1),
                      void y(t);
                  case o.ENTER:
                    return this.selectHighlighted(),
                      void y(t);
                  case o.TAB:
                    return this.selectHighlighted({
                        noFocus:
                          !0
                      }),
                      void this.close();
                  case o.ESC:
                    return this.cancel(t),
                      void y(t)
                }
                if (t.which !== o.TAB && !o.isControl(t) && !o.isFunctionKey(t) && t.which !== o.BACKSPACE && t.which !== o.ESC) {
                  if (t.which === o.ENTER) {
                    if (!1 === this.opts.openOnEnter) return;
                    if (t.altKey || t.ctrlKey || t.shiftKey || t.metaKey) return
                  }
                  this.open(),
                    t.which !== o.PAGE_UP && t.which !== o.PAGE_DOWN || y(t),
                    t.which === o.ENTER && y(t)
                }
              }
            })),
            this.search.on("keyup", this.bind(function(t) {
              this.keydowns = 0,
                this.resizeSearch()
            })),
            this.search.on("blur", this.bind(function(t) {
              this.container.removeClass("select2-container-active"),
                this.search.removeClass("select2-focused"),
                this.selectChoice(null),
                this.opened() || this.clearSearch(),
                t.stopImmediatePropagation(),
                this.opts.element.trigger(b.Event("select2-blur"))
            })),
            this.container.on("click", t, this.bind(function(t) {
              this.isInterfaceEnabled() && (0 < b(t.target).closest(".select2-search-choice").length || (this.selectChoice(null), this.clearPlaceholder(), this.container.hasClass("select2-container-active") || this.opts.element.trigger(b.Event("select2-focus")), this.open(), this.focusSearch(), t.preventDefault()))
            })),
            this.container.on("focus", t, this.bind(function() {
              this.isInterfaceEnabled() && (this.container.hasClass("select2-container-active") || this.opts.element.trigger(b.Event("select2-focus")), this.container.addClass("select2-container-active"), this.dropdown.addClass("select2-drop-active"), this.clearPlaceholder())
            })),
            this.initContainerWidth(),
            this.opts.element.addClass("select2-offscreen"),
            this.clearSearch()
        },
        enableInterface: function() {
          this.parent.enableInterface.apply(this, arguments) && this.search.prop("disabled", !this.isInterfaceEnabled())
        },
        initSelection: function() {
          var g;
          "" === this.opts.element.val() && "" === this.opts.element.text() && (this.updateSelection([]), this.close(), this.clearSearch()),
            !this.select && "" === this.opts.element.val() || (g = this).opts.initSelection.call(null, this.opts.element,
              function(t) {
                t !== B && null !== t && (g.updateSelection(t), g.close(), g.clearSearch())
              })
        },
        clearSearch: function() {
          var t = this.getPlaceholder(),
            g = this.getMaxSearchWidth();
          t !== B && 0 === this.getVal().length && !1 === this.search.hasClass("select2-focused") ? (this.search.val(t).addClass("select2-default"), this.search.width(0 < g ? g : this.container.css("width"))) : this.search.val("").width(10)
        },
        clearPlaceholder: function() {
          this.search.hasClass("select2-default") && this.search.val("").removeClass("select2-default")
        },
        opening: function() {
          this.clearPlaceholder(),
            this.resizeSearch(),
            this.parent.opening.apply(this, arguments),
            this.focusSearch(),
            "" === this.search.val() && this.nextSearchTerm != B && (this.search.val(this.nextSearchTerm), this.search.select()),
            this.updateResults(!0),
            this.opts.shouldFocusInput(this) && this.search.focus(),
            this.opts.element.trigger(b.Event("select2-open"))
        },
        close: function() {
          this.opened() && this.parent.close.apply(this, arguments)
        },
        focus: function() {
          this.close(),
            this.search.focus()
        },
        isFocused: function() {
          return this.search.hasClass("select2-focused")
        },
        updateSelection: function(t) {
          var g = [],
            e = [],
            n = this;
          b(t).each(function() {
              r(n.id(this), g) < 0 && (g.push(n.id(this)), e.push(this))
            }),
            t = e,
            this.selection.find(".select2-search-choice").remove(),
            b(t).each(function() {
              n.addSelectedChoice(this)
            }),
            n.postprocessResults()
        },
        tokenize: function() {
          var t = this.search.val();
          null != (t = this.opts.tokenizer.call(this, t, this.data(), this.bind(this.onSelect), this.opts)) && t != B && (this.search.val(t), 0 < t.length && this.open())
        },
        onSelect: function(t, g) {
          this.triggerSelect(t) && "" !== t.text && (this.addSelectedChoice(t), this.opts.element.trigger({
            type: "selected",
            val: this.id(t),
            choice: t
          }), this.nextSearchTerm = this.opts.nextSearchTerm(t, this.search.val()), this.clearSearch(), this.updateResults(), !this.select && this.opts.closeOnSelect || this.postprocessResults(t, !1, !0 === this.opts.closeOnSelect), !this.opts.closeOnSelect && 0 < this.countSelectableResults() ? (this.search.width(10), this.resizeSearch(), 0 < this.getMaximumSelectionSize() && this.val().length >= this.getMaximumSelectionSize() ? this.updateResults(!0) : this.nextSearchTerm != B && (this.search.val(this.nextSearchTerm), this.updateResults(), this.search.select()), this.positionDropdown()) : (this.close(), this.search.width(10)), this.triggerChange({
            added: t
          }), g && g.noFocus || this.focusSearch())
        },
        cancel: function() {
          this.close(),
            this.focusSearch()
        },
        addSelectedChoice: function(t) {
          var g = !t.locked,
            e = b("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),
            n = b("<li class='select2-search-choice select2-locked'><div></div></li>"),
            I = g ? e : n,
            i = this.id(t),
            e = this.getVal(),
            n = this.opts.formatSelection(t, I.find("div"), this.opts.escapeMarkup);
          n != B && I.find("div").replaceWith("<div>" + n + "</div>"),
            (n = this.opts.formatSelectionCssClass(t, I.find("div"))) != B && I.addClass(n),
            g && I.find(".select2-search-choice-close").on("mousedown", y).on("click dblclick", this.bind(function(t) {
              this.isInterfaceEnabled() && (this.unselect(b(t.target)), this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"), y(t), this.close(), this.focusSearch())
            })).on("focus", this.bind(function() {
              this.isInterfaceEnabled() && (this.container.addClass("select2-container-active"), this.dropdown.addClass("select2-drop-active"))
            })),
            I.data("select2-data", t),
            I.insertBefore(this.searchContainer),
            e.push(i),
            this.setVal(e)
        },
        unselect: function(t) {
          var g, e, n = this.getVal();
          if (0 === (t = t.closest(".select2-search-choice")).length) throw "Invalid argument: " + t + ". Must be .select2-search-choice";
          if (g = t.data("select2-data")) {
            var I = b.Event("select2-removing");
            if (I.val = this.id(g), I.choice = g, this.opts.element.trigger(I), I.isDefaultPrevented()) return !1;
            for (; 0 <= (e = r(this.id(g), n));) n.splice(e, 1),
              this.setVal(n),
              this.select && this.postprocessResults();
            return t.remove(),
              this.opts.element.trigger({
                type: "select2-removed",
                val: this.id(g),
                choice: g
              }),
              this.triggerChange({
                removed: g
              }),
              !0
          }
        },
        postprocessResults: function(t, g, e) {
          var n = this.getVal(),
            I = this.results.find(".select2-result"),
            i = this.results.find(".select2-result-with-children"),
            C = this;
          I.each2(function(t, g) {
              0 <= r(C.id(g.data("select2-data")), n) && (g.addClass("select2-selected"), g.find(".select2-result-selectable").addClass("select2-selected"))
            }),
            i.each2(function(t, g) {
              g.is(".select2-result-selectable") || 0 !== g.find(".select2-result-selectable:not(.select2-selected)").length || g.addClass("select2-selected")
            }),
            -1 == this.highlight() && !1 !== e && C.highlight(0),
            !this.opts.createSearchChoice && 0 < !I.filter(".select2-result:not(.select2-selected)").length && (t && (t.more || 0 !== this.results.find(".select2-no-results").length) || Z(C.opts.formatNoMatches, "formatNoMatches") && this.results.append("<li class='select2-no-results'>" + U(C.opts.formatNoMatches, C.opts.element, C.search.val()) + "</li>"))
        },
        getMaxSearchWidth: function() {
          return this.selection.width() - u(this.search)
        },
        resizeSearch: function() {
          var t, g, e, n = u(this.search);
          g = this.search,
            I || (e = g[0].currentStyle || window.getComputedStyle(g[0], null), (I = b(document.createElement("div")).css({
              position: "absolute",
              left: "-10000px",
              top: "-10000px",
              display: "none",
              fontSize: e.fontSize,
              fontFamily: e.fontFamily,
              fontStyle: e.fontStyle,
              fontWeight: e.fontWeight,
              letterSpacing: e.letterSpacing,
              textTransform: e.textTransform,
              whiteSpace: "nowrap"
            })).attr("class", "select2-sizer"), b("body").append(I)),
            I.text(g.val()),
            t = I.width() + 10,
            e = this.search.offset().left,
            (e = (e = (e = (g = this.selection.width()) - (e - this.selection.offset().left) - n) < t ? g - n : e) < 40 ? g - n : e) <= 0 && (e = t),
            this.search.width(Math.floor(e))
        },
        getVal: function() {
          var t;
          return this.select ? null === (t = this.select.val()) ? [] : t : c(t = this.opts.element.val(), this.opts.separator)
        },
        setVal: function(t) {
          var g;
          this.select ? this.select.val(t) : (g = [], b(t).each(function() {
            r(this, g) < 0 && g.push(this)
          }), this.opts.element.val(0 === g.length ? "" : g.join(this.opts.separator)))
        },
        buildChangeDetails: function(t, g) {
          for (var g = g.slice(0), t = t.slice(0), e = 0; e < g.length; e++)
            for (var n = 0; n < t.length; n++) l(this.opts.id(g[e]), this.opts.id(t[n])) && (g.splice(e, 1), 0 < e && e--, t.splice(n, 1), n--);
          return {
            added: g,
            removed: t
          }
        },
        val: function(t, e) {
          var n, I = this;
          if (0 === arguments.length) return this.getVal();
          if ((n = this.data()).length || (n = []), !t && 0 !== t) return this.opts.element.val(""),
            this.updateSelection([]),
            this.clearSearch(),
            void(e && this.triggerChange({
              added: this.data(),
              removed: n
            }));
          if (this.setVal(t), this.select) this.opts.initSelection(this.select, this.bind(this.updateSelection)),
            e && this.triggerChange(this.buildChangeDetails(n, this.data()));
          else {
            if (this.opts.initSelection === B) throw new Error("val() cannot be called if initSelection() is not defined");
            this.opts.initSelection(this.opts.element,
              function(t) {
                var g = b.map(t, I.id);
                I.setVal(g),
                  I.updateSelection(t),
                  I.clearSearch(),
                  e && I.triggerChange(I.buildChangeDetails(n, I.data()))
              })
          }
          this.clearSearch()
        },
        onSortStart: function() {
          if (this.select) throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
          this.search.width(0),
            this.searchContainer.hide()
        },
        onSortEnd: function() {
          var t = [],
            g = this;
          this.searchContainer.show(),
            this.searchContainer.appendTo(this.searchContainer.parent()),
            this.resizeSearch(),
            this.selection.find(".select2-search-choice").each(function() {
              t.push(g.opts.id(b(this).data("select2-data")))
            }),
            this.setVal(t),
            this.triggerChange()
        },
        data: function(t, g) {
          var e, n, I = this;
          if (0 === arguments.length) return this.selection.children(".select2-search-choice").map(function() {
            return b(this).data("select2-data")
          }).get();
          n = this.data(),
            e = b.map(t = t || [],
              function(t) {
                return I.opts.id(t)
              }),
            this.setVal(e),
            this.updateSelection(t),
            this.clearSearch(),
            g && this.triggerChange(this.buildChangeDetails(n, this.data()))
        }
      }), b.fn.select2 = function() {
        var t, g, e, n, I = Array.prototype.slice.call(arguments, 0),
          i = ["val", "destroy", "opened", "open", "close", "focus", "isFocused", "container", "dropdown", "onSortStart", "onSortEnd", "enable", "disable", "readonly", "positionDropdown", "data", "search"],
          C = ["opened", "isFocused", "container", "dropdown"],
          A = ["val", "data"],
          a = {
            search: "externalSearch"
          };
        return this.each(function() {
            if (0 === I.length || "object" == typeof I[0])(g = 0 === I.length ? {} : b.extend({},
                I[0])).element = b(this),
              "select" === g.element.get(0).tagName.toLowerCase() ? n = g.element.prop("multiple") : (n = g.multiple || !1, "tags" in g && (g.multiple = n = !0)),
              (t = new(n ? window.Select2.class.multi : window.Select2.class.single)).init(g);
            else {
              if ("string" != typeof I[0]) throw "Invalid arguments to select2 plugin: " + I;
              if (r(I[0], i) < 0) throw "Unknown method: " + I[0];
              if (e = B, (t = b(this).data("select2")) !== B) return g = I[0],
                e = "container" === g ? t.container : "dropdown" === g ? t.dropdown : t[g = a[g] ? a[g] : g].apply(t, I.slice(1)),
                !(0 <= r(I[0], C) || 0 <= r(I[0], A) && 1 == I.length) && void 0
            }
          }),
          e === B ? this : e
      },
      b.fn.select2.defaults = {
        width: "copy",
        loadMorePadding: 0,
        closeOnSelect: !0,
        openOnEnter: !0,
        containerCss: {},
        dropdownCss: {},
        containerCssClass: "",
        dropdownCssClass: "",
        formatResult: function(t, g, e, n) {
          var I = [];
          return G(t.text, e.term, I, n),
            I.join("")
        },
        formatSelection: function(t, g, e) {
          return t ? e(t.text) : B
        },
        sortResults: function(t, g, e) {
          return t
        },
        formatResultCssClass: function(t) {
          return t.css
        },
        formatSelectionCssClass: function(t, g) {
          return B
        },
        minimumResultsForSearch: 0,
        minimumInputLength: 0,
        maximumInputLength: null,
        maximumSelectionSize: 0,
        id: function(t) {
          return t == B ? null : t.id
        },
        matcher: function(t, g) {
          return 0 <= s("" + g).toUpperCase().indexOf(s("" + t).toUpperCase())
        },
        separator: ",",
        tokenSeparators: [],
        tokenizer: function(t, g, e, n) {
          var I, i, C, A, a, o = t,
            s = !1;
          if (!n.createSearchChoice || !n.tokenSeparators || n.tokenSeparators.length < 1) return B;
          for (;;) {
            for (i = -1, C = 0, A = n.tokenSeparators.length; C < A && (a = n.tokenSeparators[C], !(0 <= (i = t.indexOf(a)))); C++);
            if (i < 0) break;
            if (I = t.substring(0, i), t = t.substring(i + a.length), 0 < I.length && (I = n.createSearchChoice.call(this, I, g)) !== B && null !== I && n.id(I) !== B && null !== n.id(I)) {
              for (s = !1, C = 0, A = g.length; C < A; C++)
                if (l(n.id(I), n.id(g[C]))) {
                  s = !0;
                  break
                }
              s || e(I)
            }
          }
          return o !== t ? t : void 0
        },
        escapeMarkup: F,
        blurOnChange: !1,
        selectOnBlur: !1,
        adaptContainerCssClass: function(t) {
          return t
        },
        adaptDropdownCssClass: function(t) {
          return null
        },
        nextSearchTerm: function(t, g) {
          return B
        },
        searchInputPlaceholder: "",
        createSearchChoicePosition: "top",
        shouldFocusInput: function(t) {
          return !("ontouchstart" in window || 0 < navigator.msMaxTouchPoints) || !(t.opts.minimumResultsForSearch < 0)
        }
      },
      b.fn.select2.locales = [], b.fn.select2.locales.en = {
        formatMatches: function(t) {
          return 1 === t ? "One result is available, press enter to select it." : t + " results are available, use up and down arrow keys to navigate."
        },
        formatNoMatches: function() {
          return "No matches found"
        },
        formatAjaxError: function(t, g, e) {
          return "Loading failed"
        },
        formatInputTooShort: function(t, g) {
          t = g - t.length;
          return "Please enter " + t + " or more character" + (1 == t ? "" : "s")
        },
        formatInputTooLong: function(t, g) {
          g = t.length - g;
          return "Please delete " + g + " character" + (1 == g ? "" : "s")
        },
        formatSelectionTooBig: function(t) {
          return "You can only select " + t + " item" + (1 == t ? "" : "s")
        },
        formatLoadMore: function(t) {
          return "Loading more results"
        },
        formatSearching: function() {
          return "Searching"
        }
      },
      b.extend(b.fn.select2.defaults, b.fn.select2.locales.en), b.fn.select2.ajaxDefaults = {
        transport: b.ajax,
        params: {
          type: "GET",
          cache: !1,
          dataType: "json"
        }
      },
      window.Select2 = {
        query: {
          ajax: f,
          local: X,
          tags: x
        },
        util: {
          debounce: h,
          markMatch: G,
          escapeMarkup: F,
          stripDiacritics: s
        },
        class: {
          abstract: t,
            single: g,
            multi: e
        }
      })
  }(jQuery),
  function(n, I) {
    "use strict";

    function i(t, g) {
      this.init("radiocheck", t, g)
    }
    i.DEFAULTS = {
        checkboxClass: "custom-checkbox",
        radioClass: "custom-radio",
        checkboxTemplate: '<span class="checkbox__control"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="none" stroke="#fff" stroke-width="3" d="M1.73 12.91l6.37 6.37L22.79 4.59"></path></svg></span>',
        radioTemplate: '<span class="radio__control"></span>'
      },
      i.prototype.init = function(t, g, e) {
        this.$element = I(g),
          this.options = I.extend({},
            i.DEFAULTS, this.$element.data(), e),
          "checkbox" == this.$element.attr("type") ? (this.$element.addClass(this.options.checkboxClass), this.$element.after(this.options.checkboxTemplate)) : "radio" == this.$element.attr("type") && (this.$element.addClass(this.options.radioClass), this.$element.after(this.options.radioTemplate))
      },
      i.prototype.check = function() {
        this.$element.prop("checked", !0),
          this.$element.trigger("change.radiocheck").trigger("checked.radiocheck")
      },
      i.prototype.uncheck = function() {
        this.$element.prop("checked", !1),
          this.$element.trigger("change.radiocheck").trigger("unchecked.radiocheck")
      },
      i.prototype.toggle = function() {
        this.$element.prop("checked",
            function(t, g) {
              return !g
            }),
          this.$element.trigger("change.radiocheck").trigger("toggled.radiocheck")
      },
      i.prototype.indeterminate = function() {
        this.$element.prop("indeterminate", !0),
          this.$element.trigger("change.radiocheck").trigger("indeterminated.radiocheck")
      },
      i.prototype.determinate = function() {
        this.$element.prop("indeterminate", !1),
          this.$element.trigger("change.radiocheck").trigger("determinated.radiocheck")
      },
      i.prototype.disable = function() {
        this.$element.prop("disabled", !0),
          this.$element.trigger("change.radiocheck").trigger("disabled.radiocheck")
      },
      i.prototype.enable = function() {
        this.$element.prop("disabled", !1),
          this.$element.trigger("change.radiocheck").trigger("enabled.radiocheck")
      },
      i.prototype.destroy = function() {
        this.$element.removeData().removeClass(this.options.checkboxClass + " " + this.options.radioClass).next(".icons").remove(),
          this.$element.trigger("destroyed.radiocheck")
      };
    var t = I.fn.radiocheck;
    I.fn.radiocheck = function(e) {
        return this.each(function() {
          var t = I(this),
            g = t.data("radiocheck");
          !g && "destroy" == e || (g || t.data("radiocheck", g = new i(this, "object" == typeof e && e)), "string" == typeof e && g[e](), !0 === /mobile|tablet|phone|ip(ad|od)|android|silk|webos/i.test(n.navigator.userAgent) && t.parent().hover(function() {
              t.addClass("nohover")
            },
            function() {
              t.removeClass("nohover")
            }))
        })
      },
      I.fn.radiocheck.Constructor = i,
      I.fn.radiocheck.noConflict = function() {
        return I.fn.radiocheck = t,
          this
      }
  }(this, jQuery),
  function(t, g) {
    "object" == typeof exports && "object" == typeof module ? module.exports = g() : "function" == typeof define && define.amd ? define([], g) : "object" == typeof exports ? exports.Raphael = g() : t.Raphael = g()
  }(window,
    function() {
      return rwa = {
          "./dev/raphael.amd.js": function(module, exports, __webpack_require__) {
            eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ "./dev/raphael.core.js"), __webpack_require__(/*! ./raphael.svg */ "./dev/raphael.svg.js"), __webpack_require__(/*! ./raphael.vml */ "./dev/raphael.vml.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n\n    return R;\n\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5hbWQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwuYW1kLmpzPzM1NjQiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCIsIFwiLi9yYXBoYWVsLnN2Z1wiLCBcIi4vcmFwaGFlbC52bWxcIl0sIGZ1bmN0aW9uKFIpIHtcblxuICAgIHJldHVybiBSO1xuXG59KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/raphael.amd.js\n')
          },
          "./dev/raphael.core.js": function(module, exports, __webpack_require__) {
            eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! eve */ "./node_modules/eve-raphael/eve.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(eve) {\n\n    /*\\\n     * Raphael\n     [ method ]\n     **\n     * Creates a canvas object on which to draw.\n     * You must do this first, as all future calls to drawing methods\n     * from this instance will be bound to this canvas.\n     > Parameters\n     **\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - x (number)\n     - y (number)\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eves DOMLoad event. In this case method returns `undefined`.\n     = (object) @Paper\n     > Usage\n     | // Each of the following examples create a canvas\n     | // that is 320px wide by 200px high.\n     | // Canvas is created at the viewports 10,50 coordinate.\n     | var paper = Raphael(10, 50, 320, 200);\n     | // Canvas is created at the top left corner of the #notepad element\n     | // (or its top right corner in dir="rtl" elements)\n     | var paper = Raphael(document.getElementById("notepad"), 320, 200);\n     | // Same as above\n     | var paper = Raphael("notepad", 320, 200);\n     | // Image dump\n     | var set = Raphael(["notepad", 320, 200, {\n     |     type: "rect",\n     |     x: 10,\n     |     y: 10,\n     |     width: 25,\n     |     height: 25,\n     |     stroke: "#f00"\n     | }, {\n     |     type: "text",\n     |     x: 30,\n     |     y: 40,\n     |     text: "Dump"\n     | }]);\n    \\*/\n    function R(first) {\n        if (R.is(first, "function")) {\n            return loaded ? first() : eve.on("raphael.DOMload", first);\n        } else if (R.is(first, array)) {\n            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);\n        } else {\n            var args = Array.prototype.slice.call(arguments, 0);\n            if (R.is(args[args.length - 1], "function")) {\n                var f = args.pop();\n                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on("raphael.DOMload", function () {\n                    f.call(R._engine.create[apply](R, args));\n                });\n            } else {\n                return R._engine.create[apply](R, arguments);\n            }\n        }\n    }\n    R.version = "2.2.0";\n    R.eve = eve;\n    var loaded,\n        separator = /[, ]+/,\n        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},\n        formatrg = /\\{(\\d+)\\}/g,\n        proto = "prototype",\n        has = "hasOwnProperty",\n        g = {\n            doc: document,\n            win: window\n        },\n        oldRaphael = {\n            was: Object.prototype[has].call(g.win, "Raphael"),\n            is: g.win.Raphael\n        },\n        Paper = function () {\n            /*\\\n             * Paper.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Paper.customAttributes\n            \\*/\n            /*\\\n             * Paper.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number you can do it easily with custom attributes:\n             > Usage\n             | paper.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: "hsb(" + num + ", 0.75, 1)"};\n             | };\n             | // Custom attribute hue will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | paper.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: "hsb(" + [h, s, b].join(",") + ")"};\n             | };\n             | c.attr({hsb: "0.5 .8 1"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n            this.ca = this.customAttributes = {};\n        },\n        paperproto,\n        appendChild = "appendChild",\n        apply = "apply",\n        concat = "concat",\n        supportsTouch = (\'ontouchstart\' in g.win) || g.win.DocumentTouch && g.doc instanceof DocumentTouch, //taken from Modernizr touch test\n        E = "",\n        S = " ",\n        Str = String,\n        split = "split",\n        events = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),\n        touchMap = {\n            mousedown: "touchstart",\n            mousemove: "touchmove",\n            mouseup: "touchend"\n        },\n        lowerCase = Str.prototype.toLowerCase,\n        math = Math,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        pow = math.pow,\n        PI = math.PI,\n        nu = "number",\n        string = "string",\n        array = "array",\n        toString = "toString",\n        fillString = "fill",\n        objectToString = Object.prototype.toString,\n        paper = {},\n        push = "push",\n        ISURL = R._ISURL = /^url\\([\'"]?(.+?)[\'"]?\\)$/i,\n        colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\))\\s*$/i,\n        isnan = {"NaN": 1, "Infinity": 1, "-Infinity": 1},\n        bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n        round = math.round,\n        setAttribute = "setAttribute",\n        toFloat = parseFloat,\n        toInt = parseInt,\n        upperCase = Str.prototype.toUpperCase,\n        availableAttrs = R._availableAttrs = {\n            "arrow-end": "none",\n            "arrow-start": "none",\n            blur: 0,\n            "clip-rect": "0 0 1e9 1e9",\n            cursor: "default",\n            cx: 0,\n            cy: 0,\n            fill: "#fff",\n            "fill-opacity": 1,\n            font: \'10px "Arial"\',\n            "font-family": \'"Arial"\',\n            "font-size": "10",\n            "font-style": "normal",\n            "font-weight": 400,\n            gradient: 0,\n            height: 0,\n            href: "http://raphaeljs.com/",\n            "letter-spacing": 0,\n            opacity: 1,\n            path: "M0,0",\n            r: 0,\n            rx: 0,\n            ry: 0,\n            src: "",\n            stroke: "#000",\n            "stroke-dasharray": "",\n            "stroke-linecap": "butt",\n            "stroke-linejoin": "butt",\n            "stroke-miterlimit": 0,\n            "stroke-opacity": 1,\n            "stroke-width": 1,\n            target: "_blank",\n            "text-anchor": "middle",\n            title: "Raphael",\n            transform: "",\n            width: 0,\n            x: 0,\n            y: 0,\n            "class": ""\n        },\n        availableAnimAttrs = R._availableAnimAttrs = {\n            blur: nu,\n            "clip-rect": "csv",\n            cx: nu,\n            cy: nu,\n            fill: "colour",\n            "fill-opacity": nu,\n            "font-size": nu,\n            height: nu,\n            opacity: nu,\n            path: "path",\n            r: nu,\n            rx: nu,\n            ry: nu,\n            stroke: "colour",\n            "stroke-opacity": nu,\n            "stroke-width": nu,\n            transform: "transform",\n            width: nu,\n            x: nu,\n            y: nu\n        },\n        whitespace = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]/g,\n        commaSpaces = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/,\n        hsrg = {hs: 1, rg: 1},\n        p2s = /,?([achlmqrstvxz]),?/gi,\n        pathCommand = /([achlmrqstvz])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        tCommand = /([rstm])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/ig,\n        radial_gradient = R._radial_gradient = /^r(?:\\(([^,]+?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*([^\\)]+?)\\))?/,\n        eldata = {},\n        sortByKey = function (a, b) {\n            return a.key - b.key;\n        },\n        sortByNumber = function (a, b) {\n            return toFloat(a) - toFloat(b);\n        },\n        fun = function () {},\n        pipe = function (x) {\n            return x;\n        },\n        rectPath = R._rectPath = function (x, y, w, h, r) {\n            if (r) {\n                return [["M", x + r, y], ["l", w - r * 2, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, h - r * 2], ["a", r, r, 0, 0, 1, -r, r], ["l", r * 2 - w, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, r * 2 - h], ["a", r, r, 0, 0, 1, r, -r], ["z"]];\n            }\n            return [["M", x, y], ["l", w, 0], ["l", 0, h], ["l", -w, 0], ["z"]];\n        },\n        ellipsePath = function (x, y, rx, ry) {\n            if (ry == null) {\n                ry = rx;\n            }\n            return [["M", x, y], ["m", 0, -ry], ["a", rx, ry, 0, 1, 1, 0, 2 * ry], ["a", rx, ry, 0, 1, 1, 0, -2 * ry], ["z"]];\n        },\n        getPath = R._getPath = {\n            path: function (el) {\n                return el.attr("path");\n            },\n            circle: function (el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.r);\n            },\n            ellipse: function (el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\n            },\n            rect: function (el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\n            },\n            image: function (el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height);\n            },\n            text: function (el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            },\n            set : function(el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            }\n        },\n        /*\\\n         * Raphael.mapPath\n         [ method ]\n         **\n         * Transform the path string with given matrix.\n         > Parameters\n         - path (string) path string\n         - matrix (object) see @Matrix\n         = (string) transformed path string\n        \\*/\n        mapPath = R.mapPath = function (path, matrix) {\n            if (!matrix) {\n                return path;\n            }\n            var x, y, i, j, ii, jj, pathi;\n            path = path2curve(path);\n            for (i = 0, ii = path.length; i < ii; i++) {\n                pathi = path[i];\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\n                    x = matrix.x(pathi[j], pathi[j + 1]);\n                    y = matrix.y(pathi[j], pathi[j + 1]);\n                    pathi[j] = x;\n                    pathi[j + 1] = y;\n                }\n            }\n            return path;\n        };\n\n    R._g = g;\n    /*\\\n     * Raphael.type\n     [ property (string) ]\n     **\n     * Can be SVG, VML or empty, depending on browser support.\n    \\*/\n    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML");\n    if (R.type == "VML") {\n        var d = g.doc.createElement("div"),\n            b;\n        d.innerHTML = \'<v:shape adj="1"/>\';\n        b = d.firstChild;\n        b.style.behavior = "url(#default#VML)";\n        if (!(b && typeof b.adj == "object")) {\n            return (R.type = E);\n        }\n        d = null;\n    }\n    /*\\\n     * Raphael.svg\n     [ property (boolean) ]\n     **\n     * `true` if browser supports SVG.\n    \\*/\n    /*\\\n     * Raphael.vml\n     [ property (boolean) ]\n     **\n     * `true` if browser supports VML.\n    \\*/\n    R.svg = !(R.vml = R.type == "VML");\n    R._Paper = Paper;\n    /*\\\n     * Raphael.fn\n     [ property (object) ]\n     **\n     * You can add your own method to the canvas. For example if you want to draw a pie chart,\n     * you can create your own pie chart function and ship it as a Raphal plugin. To do this\n     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\n     * Raphal instance is created, otherwise it will take no effect. Please note that the\n     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\n     * ensure any namespacing ensures proper context.\n     > Usage\n     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\n     |     return this.path( ... );\n     | };\n     | // or create namespace\n     | Raphael.fn.mystuff = {\n     |     arrow: function () {},\n     |     star: function () {},\n     |     // etc\n     | };\n     | var paper = Raphael(10, 10, 630, 480);\n     | // then use it\n     | paper.arrow(10, 10, 30, 30, 5).attr({fill: "#f00"});\n     | paper.mystuff.arrow();\n     | paper.mystuff.star();\n    \\*/\n    R.fn = paperproto = Paper.prototype = R.prototype;\n    R._id = 0;\n    /*\\\n     * Raphael.is\n     [ method ]\n     **\n     * Handful of replacements for `typeof` operator.\n     > Parameters\n     - o () any object or primitive\n     - type (string) name of the type, i.e. string, function, number, etc.\n     = (boolean) is given value is of given type\n    \\*/\n    R.is = function (o, type) {\n        type = lowerCase.call(type);\n        if (type == "finite") {\n            return !isnan[has](+o);\n        }\n        if (type == "array") {\n            return o instanceof Array;\n        }\n        return  (type == "null" && o === null) ||\n                (type == typeof o && o !== null) ||\n                (type == "object" && o === Object(o)) ||\n                (type == "array" && Array.isArray && Array.isArray(o)) ||\n                objectToString.call(o).slice(8, -1).toLowerCase() == type;\n    };\n\n    function clone(obj) {\n        if (typeof obj == "function" || Object(obj) !== obj) {\n            return obj;\n        }\n        var res = new obj.constructor;\n        for (var key in obj) if (obj[has](key)) {\n            res[key] = clone(obj[key]);\n        }\n        return res;\n    }\n\n    /*\\\n     * Raphael.angle\n     [ method ]\n     **\n     * Returns angle between two or three points\n     > Parameters\n     - x1 (number) x coord of first point\n     - y1 (number) y coord of first point\n     - x2 (number) x coord of second point\n     - y2 (number) y coord of second point\n     - x3 (number) #optional x coord of third point\n     - y3 (number) #optional y coord of third point\n     = (number) angle in degrees.\n    \\*/\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\n        if (x3 == null) {\n            var x = x1 - x2,\n                y = y1 - y2;\n            if (!x && !y) {\n                return 0;\n            }\n            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\n        } else {\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\n        }\n    };\n    /*\\\n     * Raphael.rad\n     [ method ]\n     **\n     * Transform angle to radians\n     > Parameters\n     - deg (number) angle in degrees\n     = (number) angle in radians.\n    \\*/\n    R.rad = function (deg) {\n        return deg % 360 * PI / 180;\n    };\n    /*\\\n     * Raphael.deg\n     [ method ]\n     **\n     * Transform angle to degrees\n     > Parameters\n     - rad (number) angle in radians\n     = (number) angle in degrees.\n    \\*/\n    R.deg = function (rad) {\n        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;\n    };\n    /*\\\n     * Raphael.snapTo\n     [ method ]\n     **\n     * Snaps given value to given grid.\n     > Parameters\n     - values (array|number) given array of values or step of the grid\n     - value (number) value to adjust\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\n     = (number) adjusted value.\n    \\*/\n    R.snapTo = function (values, value, tolerance) {\n        tolerance = R.is(tolerance, "finite") ? tolerance : 10;\n        if (R.is(values, array)) {\n            var i = values.length;\n            while (i--) if (abs(values[i] - value) <= tolerance) {\n                return values[i];\n            }\n        } else {\n            values = +values;\n            var rem = value % values;\n            if (rem < tolerance) {\n                return value - rem;\n            }\n            if (rem > values - tolerance) {\n                return value - rem + values;\n            }\n        }\n        return value;\n    };\n\n    /*\\\n     * Raphael.createUUID\n     [ method ]\n     **\n     * Returns RFC4122, version 4 ID\n    \\*/\n    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {\n        return function () {\n            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx, uuidReplacer).toUpperCase();\n        };\n    })(/[xy]/g, function (c) {\n        var r = math.random() * 16 | 0,\n            v = c == "x" ? r : (r & 3 | 8);\n        return v.toString(16);\n    });\n\n    /*\\\n     * Raphael.setWindow\n     [ method ]\n     **\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\n     > Parameters\n     - newwin (window) new window object\n    \\*/\n    R.setWindow = function (newwin) {\n        eve("raphael.setWindow", R, g.win, newwin);\n        g.win = newwin;\n        g.doc = g.win.document;\n        if (R._engine.initWin) {\n            R._engine.initWin(g.win);\n        }\n    };\n    var toHex = function (color) {\n        if (R.vml) {\n            // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\n            var trim = /^\\s+|\\s+$/g;\n            var bod;\n            try {\n                var docum = new ActiveXObject("htmlfile");\n                docum.write("<body>");\n                docum.close();\n                bod = docum.body;\n            } catch(e) {\n                bod = createPopup().document.body;\n            }\n            var range = bod.createTextRange();\n            toHex = cacher(function (color) {\n                try {\n                    bod.style.color = Str(color).replace(trim, E);\n                    var value = range.queryCommandValue("ForeColor");\n                    value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\n                    return "#" + ("000000" + value.toString(16)).slice(-6);\n                } catch(e) {\n                    return "none";\n                }\n            });\n        } else {\n            var i = g.doc.createElement("i");\n            i.title = "Rapha\\xebl Colour Picker";\n            i.style.display = "none";\n            g.doc.body.appendChild(i);\n            toHex = cacher(function (color) {\n                i.style.color = color;\n                return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue("color");\n            });\n        }\n        return toHex(color);\n    },\n    hsbtoString = function () {\n        return "hsb(" + [this.h, this.s, this.b] + ")";\n    },\n    hsltoString = function () {\n        return "hsl(" + [this.h, this.s, this.l] + ")";\n    },\n    rgbtoString = function () {\n        return this.hex;\n    },\n    prepareRGB = function (r, g, b) {\n        if (g == null && R.is(r, "object") && "r" in r && "g" in r && "b" in r) {\n            b = r.b;\n            g = r.g;\n            r = r.r;\n        }\n        if (g == null && R.is(r, string)) {\n            var clr = R.getRGB(r);\n            r = clr.r;\n            g = clr.g;\n            b = clr.b;\n        }\n        if (r > 1 || g > 1 || b > 1) {\n            r /= 255;\n            g /= 255;\n            b /= 255;\n        }\n\n        return [r, g, b];\n    },\n    packageRGB = function (r, g, b, o) {\n        r *= 255;\n        g *= 255;\n        b *= 255;\n        var rgb = {\n            r: r,\n            g: g,\n            b: b,\n            hex: R.rgb(r, g, b),\n            toString: rgbtoString\n        };\n        R.is(o, "finite") && (rgb.opacity = o);\n        return rgb;\n    };\n\n    /*\\\n     * Raphael.color\n     [ method ]\n     **\n     * Parses the color string and returns object with all values for the given color.\n     > Parameters\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\n     = (object) Combined RGB & HSB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #,\n     o     error (boolean) `true` if string cant be parsed,\n     o     h (number) hue,\n     o     s (number) saturation,\n     o     v (number) value (brightness),\n     o     l (number) lightness\n     o }\n    \\*/\n    R.color = function (clr) {\n        var rgb;\n        if (R.is(clr, "object") && "h" in clr && "s" in clr && "b" in clr) {\n            rgb = R.hsb2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else if (R.is(clr, "object") && "h" in clr && "s" in clr && "l" in clr) {\n            rgb = R.hsl2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else {\n            if (R.is(clr, "string")) {\n                clr = R.getRGB(clr);\n            }\n            if (R.is(clr, "object") && "r" in clr && "g" in clr && "b" in clr) {\n                rgb = R.rgb2hsl(clr);\n                clr.h = rgb.h;\n                clr.s = rgb.s;\n                clr.l = rgb.l;\n                rgb = R.rgb2hsb(clr);\n                clr.v = rgb.b;\n            } else {\n                clr = {hex: "none"};\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\n            }\n        }\n        clr.toString = rgbtoString;\n        return clr;\n    };\n    /*\\\n     * Raphael.hsb2rgb\n     [ method ]\n     **\n     * Converts HSB values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - v (number) value or brightness\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\n     o }\n    \\*/\n    R.hsb2rgb = function (h, s, v, o) {\n        if (this.is(h, "object") && "h" in h && "s" in h && "b" in h) {\n            v = h.b;\n            s = h.s;\n            o = h.o;\n            h = h.h;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = v * s;\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = v - C;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n    /*\\\n     * Raphael.hsl2rgb\n     [ method ]\n     **\n     * Converts HSL values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\n     o }\n    \\*/\n    R.hsl2rgb = function (h, s, l, o) {\n        if (this.is(h, "object") && "h" in h && "s" in h && "l" in h) {\n            l = h.l;\n            s = h.s;\n            h = h.h;\n        }\n        if (h > 1 || s > 1 || l > 1) {\n            h /= 360;\n            s /= 100;\n            l /= 100;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = 2 * s * (l < .5 ? l : 1 - l);\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = l - C / 2;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n    /*\\\n     * Raphael.rgb2hsb\n     [ method ]\n     **\n     * Converts RGB values to HSB object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSB object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     b (number) brightness\n     o }\n    \\*/\n    R.rgb2hsb = function (r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, V, C;\n        V = mmax(r, g, b);\n        C = V - mmin(r, g, b);\n        H = (C == 0 ? null :\n             V == r ? (g - b) / C :\n             V == g ? (b - r) / C + 2 :\n                      (r - g) / C + 4\n            );\n        H = ((H + 360) % 6) * 60 / 360;\n        S = C == 0 ? 0 : C / V;\n        return {h: H, s: S, b: V, toString: hsbtoString};\n    };\n    /*\\\n     * Raphael.rgb2hsl\n     [ method ]\n     **\n     * Converts RGB values to HSL object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSL object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     l (number) luminosity\n     o }\n    \\*/\n    R.rgb2hsl = function (r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, L, M, m, C;\n        M = mmax(r, g, b);\n        m = mmin(r, g, b);\n        C = M - m;\n        H = (C == 0 ? null :\n             M == r ? (g - b) / C :\n             M == g ? (b - r) / C + 2 :\n                      (r - g) / C + 4);\n        H = ((H + 360) % 6) * 60 / 360;\n        L = (M + m) / 2;\n        S = (C == 0 ? 0 :\n             L < .5 ? C / (2 * L) :\n                      C / (2 - 2 * L));\n        return {h: H, s: S, l: L, toString: hsltoString};\n    };\n    R._path2string = function () {\n        return this.join(",").replace(p2s, "$1");\n    };\n    function repush(array, item) {\n        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\n            return array.push(array.splice(i, 1)[0]);\n        }\n    }\n    function cacher(f, scope, postprocessor) {\n        function newf() {\n            var arg = Array.prototype.slice.call(arguments, 0),\n                args = arg.join("\\u2400"),\n                cache = newf.cache = newf.cache || {},\n                count = newf.count = newf.count || [];\n            if (cache[has](args)) {\n                repush(count, args);\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\n            }\n            count.length >= 1e3 && delete cache[count.shift()];\n            count.push(args);\n            cache[args] = f[apply](scope, arg);\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\n        }\n        return newf;\n    }\n\n    var preload = R._preload = function (src, f) {\n        var img = g.doc.createElement("img");\n        img.style.cssText = "position:absolute;left:-9999em;top:-9999em";\n        img.onload = function () {\n            f.call(this);\n            this.onload = null;\n            g.doc.body.removeChild(this);\n        };\n        img.onerror = function () {\n            g.doc.body.removeChild(this);\n        };\n        g.doc.body.appendChild(img);\n        img.src = src;\n    };\n\n    function clrToString() {\n        return this.hex;\n    }\n\n    /*\\\n     * Raphael.getRGB\n     [ method ]\n     **\n     * Parses colour string as RGB object\n     > Parameters\n     - colour (string) colour string in one of formats:\n     # <ul>\n     #     <li>Colour name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>\n     #     <li>#  shortened HTML colour: (<code>#000</code>, <code>#fc0</code>, etc)</li>\n     #     <li>#  full length HTML colour: (<code>#000000</code>, <code>#bd2300</code>)</li>\n     #     <li>rgb(, , )  red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>\n     #     <li>rgb(%, %, %)  same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>\n     #     <li>hsb(, , )  hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>\n     #     <li>hsb(%, %, %)  same as above, but in %</li>\n     #     <li>hsl(, , )  same as hsb</li>\n     #     <li>hsl(%, %, %)  same as hsb</li>\n     # </ul>\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue\n     o     hex (string) color in HTML/CSS format: #,\n     o     error (boolean) true if string cant be parsed\n     o }\n    \\*/\n    R.getRGB = cacher(function (colour) {\n        if (!colour || !!((colour = Str(colour)).indexOf("-") + 1)) {\n            return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};\n        }\n        if (colour == "none") {\n            return {r: -1, g: -1, b: -1, hex: "none", toString: clrToString};\n        }\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == "#") && (colour = toHex(colour));\n        var res,\n            red,\n            green,\n            blue,\n            opacity,\n            t,\n            values,\n            rgb = colour.match(colourRegExp);\n        if (rgb) {\n            if (rgb[2]) {\n                blue = toInt(rgb[2].substring(5), 16);\n                green = toInt(rgb[2].substring(3, 5), 16);\n                red = toInt(rgb[2].substring(1, 3), 16);\n            }\n            if (rgb[3]) {\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\n            }\n            if (rgb[4]) {\n                values = rgb[4][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == "%" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == "%" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == "%" && (blue *= 2.55);\n                rgb[1].toLowerCase().slice(0, 4) == "rgba" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);\n            }\n            if (rgb[5]) {\n                values = rgb[5][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == "%" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == "%" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == "%" && (blue *= 2.55);\n                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\\xb0") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == "hsba" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);\n                return R.hsb2rgb(red, green, blue, opacity);\n            }\n            if (rgb[6]) {\n                values = rgb[6][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == "%" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == "%" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == "%" && (blue *= 2.55);\n                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\\xb0") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == "hsla" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);\n                return R.hsl2rgb(red, green, blue, opacity);\n            }\n            rgb = {r: red, g: green, b: blue, toString: clrToString};\n            rgb.hex = "#" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\n            R.is(opacity, "finite") && (rgb.opacity = opacity);\n            return rgb;\n        }\n        return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};\n    }, R);\n    /*\\\n     * Raphael.hsb\n     [ method ]\n     **\n     * Converts HSB values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - b (number) value or brightness\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsb = cacher(function (h, s, b) {\n        return R.hsb2rgb(h, s, b).hex;\n    });\n    /*\\\n     * Raphael.hsl\n     [ method ]\n     **\n     * Converts HSL values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsl = cacher(function (h, s, l) {\n        return R.hsl2rgb(h, s, l).hex;\n    });\n    /*\\\n     * Raphael.rgb\n     [ method ]\n     **\n     * Converts RGB values to hex representation of the colour.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (string) hex representation of the colour.\n    \\*/\n    R.rgb = cacher(function (r, g, b) {\n        function round(x) { return (x + 0.5) | 0; }\n        return "#" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);\n    });\n    /*\\\n     * Raphael.getColor\n     [ method ]\n     **\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\n     > Parameters\n     - value (number) #optional brightness, default is `0.75`\n     = (string) hex representation of the colour.\n    \\*/\n    R.getColor = function (value) {\n        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},\n            rgb = this.hsb2rgb(start.h, start.s, start.b);\n        start.h += .075;\n        if (start.h > 1) {\n            start.h = 0;\n            start.s -= .2;\n            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});\n        }\n        return rgb.hex;\n    };\n    /*\\\n     * Raphael.getColor.reset\n     [ method ]\n     **\n     * Resets spectrum position for @Raphael.getColor back to red.\n    \\*/\n    R.getColor.reset = function () {\n        delete this.start;\n    };\n\n    // http://schepers.cc/getting-to-the-point\n    function catmullRom2bezier(crp, z) {\n        var d = [];\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n            var p = [\n                        {x: +crp[i - 2], y: +crp[i - 1]},\n                        {x: +crp[i],     y: +crp[i + 1]},\n                        {x: +crp[i + 2], y: +crp[i + 3]},\n                        {x: +crp[i + 4], y: +crp[i + 5]}\n                    ];\n            if (z) {\n                if (!i) {\n                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};\n                } else if (iLen - 4 == i) {\n                    p[3] = {x: +crp[0], y: +crp[1]};\n                } else if (iLen - 2 == i) {\n                    p[2] = {x: +crp[0], y: +crp[1]};\n                    p[3] = {x: +crp[2], y: +crp[3]};\n                }\n            } else {\n                if (iLen - 4 == i) {\n                    p[3] = p[2];\n                } else if (!i) {\n                    p[0] = {x: +crp[i], y: +crp[i + 1]};\n                }\n            }\n            d.push(["C",\n                  (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n                  (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n                  (p[1].x + 6 * p[2].x - p[3].x) / 6,\n                  (p[1].y + 6*p[2].y - p[3].y) / 6,\n                  p[2].x,\n                  p[2].y\n            ]);\n        }\n\n        return d;\n    }\n    /*\\\n     * Raphael.parsePathString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of arrays of path segments.\n     > Parameters\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\n     = (array) array of segments.\n    \\*/\n    R.parsePathString = function (pathString) {\n        if (!pathString) {\n            return null;\n        }\n        var pth = paths(pathString);\n        if (pth.arr) {\n            return pathClone(pth.arr);\n        }\n\n        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},\n            data = [];\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\n            data = pathClone(pathString);\n        }\n        if (!data.length) {\n            Str(pathString).replace(pathCommand, function (a, b, c) {\n                var params = [],\n                    name = b.toLowerCase();\n                c.replace(pathValues, function (a, b) {\n                    b && params.push(+b);\n                });\n                if (name == "m" && params.length > 2) {\n                    data.push([b][concat](params.splice(0, 2)));\n                    name = "l";\n                    b = b == "m" ? "l" : "L";\n                }\n                if (name == "r") {\n                    data.push([b][concat](params));\n                } else while (params.length >= paramCounts[name]) {\n                    data.push([b][concat](params.splice(0, paramCounts[name])));\n                    if (!paramCounts[name]) {\n                        break;\n                    }\n                }\n            });\n        }\n        data.toString = R._path2string;\n        pth.arr = pathClone(data);\n        return data;\n    };\n    /*\\\n     * Raphael.parseTransformString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of transformations.\n     > Parameters\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\n     = (array) array of transformations.\n    \\*/\n    R.parseTransformString = cacher(function (TString) {\n        if (!TString) {\n            return null;\n        }\n        var paramCounts = {r: 3, s: 4, t: 2, m: 6},\n            data = [];\n        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption\n            data = pathClone(TString);\n        }\n        if (!data.length) {\n            Str(TString).replace(tCommand, function (a, b, c) {\n                var params = [],\n                    name = lowerCase.call(b);\n                c.replace(pathValues, function (a, b) {\n                    b && params.push(+b);\n                });\n                data.push([b][concat](params));\n            });\n        }\n        data.toString = R._path2string;\n        return data;\n    });\n    // PATHS\n    var paths = function (ps) {\n        var p = paths.ps = paths.ps || {};\n        if (p[ps]) {\n            p[ps].sleep = 100;\n        } else {\n            p[ps] = {\n                sleep: 100\n            };\n        }\n        setTimeout(function () {\n            for (var key in p) if (p[has](key) && key != ps) {\n                p[key].sleep--;\n                !p[key].sleep && delete p[key];\n            }\n        });\n        return p[ps];\n    };\n    /*\\\n     * Raphael.findDotsAtSegment\n     [ method ]\n     **\n     * Utility method\n     **\n     * Find dot coordinates on the given cubic bezier curve at the given t.\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     - t (number) position on the curve (0..1)\n     = (object) point information in format:\n     o {\n     o     x: (number) x coordinate of the point\n     o     y: (number) y coordinate of the point\n     o     m: {\n     o         x: (number) x coordinate of the left anchor\n     o         y: (number) y coordinate of the left anchor\n     o     }\n     o     n: {\n     o         x: (number) x coordinate of the right anchor\n     o         y: (number) y coordinate of the right anchor\n     o     }\n     o     start: {\n     o         x: (number) x coordinate of the start of the curve\n     o         y: (number) y coordinate of the start of the curve\n     o     }\n     o     end: {\n     o         x: (number) x coordinate of the end of the curve\n     o         y: (number) y coordinate of the end of the curve\n     o     }\n     o     alpha: (number) angle of the curve derivative at the point\n     o }\n    \\*/\n    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t,\n            t13 = pow(t1, 3),\n            t12 = pow(t1, 2),\n            t2 = t * t,\n            t3 = t2 * t,\n            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\n            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\n            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\n            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\n            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\n            ax = t1 * p1x + t * c1x,\n            ay = t1 * p1y + t * c1y,\n            cx = t1 * c2x + t * p2x,\n            cy = t1 * c2y + t * p2y,\n            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\n        (mx > nx || my < ny) && (alpha += 180);\n        return {\n            x: x,\n            y: y,\n            m: {x: mx, y: my},\n            n: {x: nx, y: ny},\n            start: {x: ax, y: ay},\n            end: {x: cx, y: cy},\n            alpha: alpha\n        };\n    };\n    /*\\\n     * Raphael.bezierBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given cubic bezier curve\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     * or\n     - bez (array) array of six points for bezier curve\n     = (object) point information in format:\n     o {\n     o     min: {\n     o         x: (number) x coordinate of the left point\n     o         y: (number) y coordinate of the top point\n     o     }\n     o     max: {\n     o         x: (number) x coordinate of the right point\n     o         y: (number) y coordinate of the bottom point\n     o     }\n     o }\n    \\*/\n    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        if (!R.is(p1x, "array")) {\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n        }\n        var bbox = curveDim.apply(null, p1x);\n        return {\n            x: bbox.min.x,\n            y: bbox.min.y,\n            x2: bbox.max.x,\n            y2: bbox.max.y,\n            width: bbox.max.x - bbox.min.x,\n            height: bbox.max.y - bbox.min.y\n        };\n    };\n    /*\\\n     * Raphael.isPointInsideBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside bounding boxes.\n     > Parameters\n     - bbox (string) bounding box\n     - x (string) x coordinate of the point\n     - y (string) y coordinate of the point\n     = (boolean) `true` if point inside\n    \\*/\n    R.isPointInsideBBox = function (bbox, x, y) {\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\n    };\n    /*\\\n     * Raphael.isBBoxIntersect\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if two bounding boxes intersect\n     > Parameters\n     - bbox1 (string) first bounding box\n     - bbox2 (string) second bounding box\n     = (boolean) `true` if they intersect\n    \\*/\n    R.isBBoxIntersect = function (bbox1, bbox2) {\n        var i = R.isPointInsideBBox;\n        return i(bbox2, bbox1.x, bbox1.y)\n            || i(bbox2, bbox1.x2, bbox1.y)\n            || i(bbox2, bbox1.x, bbox1.y2)\n            || i(bbox2, bbox1.x2, bbox1.y2)\n            || i(bbox1, bbox2.x, bbox2.y)\n            || i(bbox1, bbox2.x2, bbox2.y)\n            || i(bbox1, bbox2.x, bbox2.y2)\n            || i(bbox1, bbox2.x2, bbox2.y2)\n            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\n            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n    };\n    function base3(t, p1, p2, p3, p4) {\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n        return t * t2 - 3 * p1 + 3 * p2;\n    }\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n        if (z == null) {\n            z = 1;\n        }\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\n        var z2 = z / 2,\n            n = 12,\n            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],\n            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],\n            sum = 0;\n        for (var i = 0; i < n; i++) {\n            var ct = z2 * Tvalues[i] + z2,\n                xbase = base3(ct, x1, x2, x3, x4),\n                ybase = base3(ct, y1, y2, y3, y4),\n                comb = xbase * xbase + ybase * ybase;\n            sum += Cvalues[i] * math.sqrt(comb);\n        }\n        return z2 * sum;\n    }\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\n            return;\n        }\n        var t = 1,\n            step = t / 2,\n            t2 = t - step,\n            l,\n            e = .01;\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        while (abs(l - ll) > e) {\n            step /= 2;\n            t2 += (l < ll ? 1 : -1) * step;\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        }\n        return t2;\n    }\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n        if (\n            mmax(x1, x2) < mmin(x3, x4) ||\n            mmin(x1, x2) > mmax(x3, x4) ||\n            mmax(y1, y2) < mmin(y3, y4) ||\n            mmin(y1, y2) > mmax(y3, y4)\n        ) {\n            return;\n        }\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n        if (!denominator) {\n            return;\n        }\n        var px = nx / denominator,\n            py = ny / denominator,\n            px2 = +px.toFixed(2),\n            py2 = +py.toFixed(2);\n        if (\n            px2 < +mmin(x1, x2).toFixed(2) ||\n            px2 > +mmax(x1, x2).toFixed(2) ||\n            px2 < +mmin(x3, x4).toFixed(2) ||\n            px2 > +mmax(x3, x4).toFixed(2) ||\n            py2 < +mmin(y1, y2).toFixed(2) ||\n            py2 > +mmax(y1, y2).toFixed(2) ||\n            py2 < +mmin(y3, y4).toFixed(2) ||\n            py2 > +mmax(y3, y4).toFixed(2)\n        ) {\n            return;\n        }\n        return {x: px, y: py};\n    }\n    function inter(bez1, bez2) {\n        return interHelper(bez1, bez2);\n    }\n    function interCount(bez1, bez2) {\n        return interHelper(bez1, bez2, 1);\n    }\n    function interHelper(bez1, bez2, justCount) {\n        var bbox1 = R.bezierBBox(bez1),\n            bbox2 = R.bezierBBox(bez2);\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\n            return justCount ? 0 : [];\n        }\n        var l1 = bezlen.apply(0, bez1),\n            l2 = bezlen.apply(0, bez2),\n            n1 = mmax(~~(l1 / 5), 1),\n            n2 = mmax(~~(l2 / 5), 1),\n            dots1 = [],\n            dots2 = [],\n            xy = {},\n            res = justCount ? 0 : [];\n        for (var i = 0; i < n1 + 1; i++) {\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\n            dots1.push({x: p.x, y: p.y, t: i / n1});\n        }\n        for (i = 0; i < n2 + 1; i++) {\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\n            dots2.push({x: p.x, y: p.y, t: i / n2});\n        }\n        for (i = 0; i < n1; i++) {\n            for (var j = 0; j < n2; j++) {\n                var di = dots1[i],\n                    di1 = dots1[i + 1],\n                    dj = dots2[j],\n                    dj1 = dots2[j + 1],\n                    ci = abs(di1.x - di.x) < .001 ? "y" : "x",\n                    cj = abs(dj1.x - dj.x) < .001 ? "y" : "x",\n                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n                if (is) {\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\n                        continue;\n                    }\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\n                        if (justCount) {\n                            res++;\n                        } else {\n                            res.push({\n                                x: is.x,\n                                y: is.y,\n                                t1: mmin(t1, 1),\n                                t2: mmin(t2, 1)\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n    /*\\\n     * Raphael.pathIntersection\n     [ method ]\n     **\n     * Utility method\n     **\n     * Finds intersections of two paths\n     > Parameters\n     - path1 (string) path string\n     - path2 (string) path string\n     = (array) dots of intersection\n     o [\n     o     {\n     o         x: (number) x coordinate of the point\n     o         y: (number) y coordinate of the point\n     o         t1: (number) t value for segment of path1\n     o         t2: (number) t value for segment of path2\n     o         segment1: (number) order number for segment of path1\n     o         segment2: (number) order number for segment of path2\n     o         bez1: (array) eight coordinates representing bezir curve for the segment of path1\n     o         bez2: (array) eight coordinates representing bezir curve for the segment of path2\n     o     }\n     o ]\n    \\*/\n    R.pathIntersection = function (path1, path2) {\n        return interPathHelper(path1, path2);\n    };\n    R.pathIntersectionNumber = function (path1, path2) {\n        return interPathHelper(path1, path2, 1);\n    };\n    function interPathHelper(path1, path2, justCount) {\n        path1 = R._path2curve(path1);\n        path2 = R._path2curve(path2);\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\n            res = justCount ? 0 : [];\n        for (var i = 0, ii = path1.length; i < ii; i++) {\n            var pi = path1[i];\n            if (pi[0] == "M") {\n                x1 = x1m = pi[1];\n                y1 = y1m = pi[2];\n            } else {\n                if (pi[0] == "C") {\n                    bez1 = [x1, y1].concat(pi.slice(1));\n                    x1 = bez1[6];\n                    y1 = bez1[7];\n                } else {\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n                    x1 = x1m;\n                    y1 = y1m;\n                }\n                for (var j = 0, jj = path2.length; j < jj; j++) {\n                    var pj = path2[j];\n                    if (pj[0] == "M") {\n                        x2 = x2m = pj[1];\n                        y2 = y2m = pj[2];\n                    } else {\n                        if (pj[0] == "C") {\n                            bez2 = [x2, y2].concat(pj.slice(1));\n                            x2 = bez2[6];\n                            y2 = bez2[7];\n                        } else {\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n                            x2 = x2m;\n                            y2 = y2m;\n                        }\n                        var intr = interHelper(bez1, bez2, justCount);\n                        if (justCount) {\n                            res += intr;\n                        } else {\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\n                                intr[k].segment1 = i;\n                                intr[k].segment2 = j;\n                                intr[k].bez1 = bez1;\n                                intr[k].bez2 = bez2;\n                            }\n                            res = res.concat(intr);\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n    /*\\\n     * Raphael.isPointInsidePath\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside a given closed path.\n     > Parameters\n     - path (string) path string\n     - x (number) x of the point\n     - y (number) y of the point\n     = (boolean) true, if point is inside the path\n    \\*/\n    R.isPointInsidePath = function (path, x, y) {\n        var bbox = R.pathBBox(path);\n        return R.isPointInsideBBox(bbox, x, y) &&\n               interPathHelper(path, [["M", x, y], ["H", bbox.x2 + 10]], 1) % 2 == 1;\n    };\n    R._removedFactory = function (methodname) {\n        return function () {\n            eve("raphael.log", null, "Rapha\\xebl: you are calling to method \\u201c" + methodname + "\\u201d of removed object", methodname);\n        };\n    };\n    /*\\\n     * Raphael.pathBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given path\n     > Parameters\n     - path (string) path string\n     = (object) bounding box\n     o {\n     o     x: (number) x coordinate of the left top point of the box\n     o     y: (number) y coordinate of the left top point of the box\n     o     x2: (number) x coordinate of the right bottom point of the box\n     o     y2: (number) y coordinate of the right bottom point of the box\n     o     width: (number) width of the box\n     o     height: (number) height of the box\n     o     cx: (number) x coordinate of the center of the box\n     o     cy: (number) y coordinate of the center of the box\n     o }\n    \\*/\n    var pathDimensions = R.pathBBox = function (path) {\n        var pth = paths(path);\n        if (pth.bbox) {\n            return clone(pth.bbox);\n        }\n        if (!path) {\n            return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};\n        }\n        path = path2curve(path);\n        var x = 0,\n            y = 0,\n            X = [],\n            Y = [],\n            p;\n        for (var i = 0, ii = path.length; i < ii; i++) {\n            p = path[i];\n            if (p[0] == "M") {\n                x = p[1];\n                y = p[2];\n                X.push(x);\n                Y.push(y);\n            } else {\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                X = X[concat](dim.min.x, dim.max.x);\n                Y = Y[concat](dim.min.y, dim.max.y);\n                x = p[5];\n                y = p[6];\n            }\n        }\n        var xmin = mmin[apply](0, X),\n            ymin = mmin[apply](0, Y),\n            xmax = mmax[apply](0, X),\n            ymax = mmax[apply](0, Y),\n            width = xmax - xmin,\n            height = ymax - ymin,\n                bb = {\n                x: xmin,\n                y: ymin,\n                x2: xmax,\n                y2: ymax,\n                width: width,\n                height: height,\n                cx: xmin + width / 2,\n                cy: ymin + height / 2\n            };\n        pth.bbox = clone(bb);\n        return bb;\n    },\n        pathClone = function (pathArray) {\n            var res = clone(pathArray);\n            res.toString = R._path2string;\n            return res;\n        },\n        pathToRelative = R._pathToRelative = function (pathArray) {\n            var pth = paths(pathArray);\n            if (pth.rel) {\n                return pathClone(pth.rel);\n            }\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == "M") {\n                x = pathArray[0][1];\n                y = pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res.push(["M", x, y]);\n            }\n            for (var i = start, ii = pathArray.length; i < ii; i++) {\n                var r = res[i] = [],\n                    pa = pathArray[i];\n                if (pa[0] != lowerCase.call(pa[0])) {\n                    r[0] = lowerCase.call(pa[0]);\n                    switch (r[0]) {\n                        case "a":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] - x).toFixed(3);\n                            r[7] = +(pa[7] - y).toFixed(3);\n                            break;\n                        case "v":\n                            r[1] = +(pa[1] - y).toFixed(3);\n                            break;\n                        case "m":\n                            mx = pa[1];\n                            my = pa[2];\n                        default:\n                            for (var j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\n                            }\n                    }\n                } else {\n                    r = res[i] = [];\n                    if (pa[0] == "m") {\n                        mx = pa[1] + x;\n                        my = pa[2] + y;\n                    }\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        res[i][k] = pa[k];\n                    }\n                }\n                var len = res[i].length;\n                switch (res[i][0]) {\n                    case "z":\n                        x = mx;\n                        y = my;\n                        break;\n                    case "h":\n                        x += +res[i][len - 1];\n                        break;\n                    case "v":\n                        y += +res[i][len - 1];\n                        break;\n                    default:\n                        x += +res[i][len - 2];\n                        y += +res[i][len - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.rel = pathClone(res);\n            return res;\n        },\n        pathToAbsolute = R._pathToAbsolute = function (pathArray) {\n            var pth = paths(pathArray);\n            if (pth.abs) {\n                return pathClone(pth.abs);\n            }\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            if (!pathArray || !pathArray.length) {\n                return [["M", 0, 0]];\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == "M") {\n                x = +pathArray[0][1];\n                y = +pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res[0] = ["M", x, y];\n            }\n            var crz = pathArray.length == 3 && pathArray[0][0] == "M" && pathArray[1][0].toUpperCase() == "R" && pathArray[2][0].toUpperCase() == "Z";\n            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n                res.push(r = []);\n                pa = pathArray[i];\n                if (pa[0] != upperCase.call(pa[0])) {\n                    r[0] = upperCase.call(pa[0]);\n                    switch (r[0]) {\n                        case "A":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] + x);\n                            r[7] = +(pa[7] + y);\n                            break;\n                        case "V":\n                            r[1] = +pa[1] + y;\n                            break;\n                        case "H":\n                            r[1] = +pa[1] + x;\n                            break;\n                        case "R":\n                            var dots = [x, y][concat](pa.slice(1));\n                            for (var j = 2, jj = dots.length; j < jj; j++) {\n                                dots[j] = +dots[j] + x;\n                                dots[++j] = +dots[j] + y;\n                            }\n                            res.pop();\n                            res = res[concat](catmullRom2bezier(dots, crz));\n                            break;\n                        case "M":\n                            mx = +pa[1] + x;\n                            my = +pa[2] + y;\n                        default:\n                            for (j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                            }\n                    }\n                } else if (pa[0] == "R") {\n                    dots = [x, y][concat](pa.slice(1));\n                    res.pop();\n                    res = res[concat](catmullRom2bezier(dots, crz));\n                    r = ["R"][concat](pa.slice(-2));\n                } else {\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        r[k] = pa[k];\n                    }\n                }\n                switch (r[0]) {\n                    case "Z":\n                        x = mx;\n                        y = my;\n                        break;\n                    case "H":\n                        x = r[1];\n                        break;\n                    case "V":\n                        y = r[1];\n                        break;\n                    case "M":\n                        mx = r[r.length - 2];\n                        my = r[r.length - 1];\n                    default:\n                        x = r[r.length - 2];\n                        y = r[r.length - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.abs = pathClone(res);\n            return res;\n        },\n        l2c = function (x1, y1, x2, y2) {\n            return [x1, y1, x2, y2, x2, y2];\n        },\n        q2c = function (x1, y1, ax, ay, x2, y2) {\n            var _13 = 1 / 3,\n                _23 = 2 / 3;\n            return [\n                    _13 * x1 + _23 * ax,\n                    _13 * y1 + _23 * ay,\n                    _13 * x2 + _23 * ax,\n                    _13 * y2 + _23 * ay,\n                    x2,\n                    y2\n                ];\n        },\n        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n            // for more information of where this math came from visit:\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n            var _120 = PI * 120 / 180,\n                rad = PI / 180 * (+angle || 0),\n                res = [],\n                xy,\n                rotate = cacher(function (x, y, rad) {\n                    var X = x * math.cos(rad) - y * math.sin(rad),\n                        Y = x * math.sin(rad) + y * math.cos(rad);\n                    return {x: X, y: Y};\n                });\n            if (!recursive) {\n                xy = rotate(x1, y1, -rad);\n                x1 = xy.x;\n                y1 = xy.y;\n                xy = rotate(x2, y2, -rad);\n                x2 = xy.x;\n                y2 = xy.y;\n                var cos = math.cos(PI / 180 * angle),\n                    sin = math.sin(PI / 180 * angle),\n                    x = (x1 - x2) / 2,\n                    y = (y1 - y2) / 2;\n                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n                if (h > 1) {\n                    h = math.sqrt(h);\n                    rx = h * rx;\n                    ry = h * ry;\n                }\n                var rx2 = rx * rx,\n                    ry2 = ry * ry,\n                    k = (large_arc_flag == sweep_flag ? -1 : 1) *\n                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n                    cx = k * rx * y / ry + (x1 + x2) / 2,\n                    cy = k * -ry * x / rx + (y1 + y2) / 2,\n                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n                f1 = x1 < cx ? PI - f1 : f1;\n                f2 = x2 < cx ? PI - f2 : f2;\n                f1 < 0 && (f1 = PI * 2 + f1);\n                f2 < 0 && (f2 = PI * 2 + f2);\n                if (sweep_flag && f1 > f2) {\n                    f1 = f1 - PI * 2;\n                }\n                if (!sweep_flag && f2 > f1) {\n                    f2 = f2 - PI * 2;\n                }\n            } else {\n                f1 = recursive[0];\n                f2 = recursive[1];\n                cx = recursive[2];\n                cy = recursive[3];\n            }\n            var df = f2 - f1;\n            if (abs(df) > _120) {\n                var f2old = f2,\n                    x2old = x2,\n                    y2old = y2;\n                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n                x2 = cx + rx * math.cos(f2);\n                y2 = cy + ry * math.sin(f2);\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n            }\n            df = f2 - f1;\n            var c1 = math.cos(f1),\n                s1 = math.sin(f1),\n                c2 = math.cos(f2),\n                s2 = math.sin(f2),\n                t = math.tan(df / 4),\n                hx = 4 / 3 * rx * t,\n                hy = 4 / 3 * ry * t,\n                m1 = [x1, y1],\n                m2 = [x1 + hx * s1, y1 - hy * c1],\n                m3 = [x2 + hx * s2, y2 - hy * c2],\n                m4 = [x2, y2];\n            m2[0] = 2 * m1[0] - m2[0];\n            m2[1] = 2 * m1[1] - m2[1];\n            if (recursive) {\n                return [m2, m3, m4][concat](res);\n            } else {\n                res = [m2, m3, m4][concat](res).join()[split](",");\n                var newres = [];\n                for (var i = 0, ii = res.length; i < ii; i++) {\n                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n                }\n                return newres;\n            }\n        },\n        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n            var t1 = 1 - t;\n            return {\n                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n            };\n        },\n        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\n                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\n                c = p1x - c1x,\n                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                y = [p1y, p2y],\n                x = [p1x, p2x],\n                dot;\n            abs(t1) > "1e12" && (t1 = .5);\n            abs(t2) > "1e12" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\n            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\n            c = p1y - c1y;\n            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            abs(t1) > "1e12" && (t1 = .5);\n            abs(t2) > "1e12" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x.push(dot.x);\n                y.push(dot.y);\n            }\n            return {\n                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},\n                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}\n            };\n        }),\n        path2curve = R._path2curve = cacher(function (path, path2) {\n            var pth = !path2 && paths(path);\n            if (!path2 && pth.curve) {\n                return pathClone(pth.curve);\n            }\n            var p = pathToAbsolute(path),\n                p2 = path2 && pathToAbsolute(path2),\n                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                processPath = function (path, d, pcom) {\n                    var nx, ny, tq = {T:1, Q:1};\n                    if (!path) {\n                        return ["C", d.x, d.y, d.x, d.y, d.x, d.y];\n                    }\n                    !(path[0] in tq) && (d.qx = d.qy = null);\n                    switch (path[0]) {\n                        case "M":\n                            d.X = path[1];\n                            d.Y = path[2];\n                            break;\n                        case "A":\n                            path = ["C"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\n                            break;\n                        case "S":\n                            if (pcom == "C" || pcom == "S") { // In "S" case we have to take into account, if the previous command is C/S.\n                                nx = d.x * 2 - d.bx;          // And reflect the previous\n                                ny = d.y * 2 - d.by;          // command\'s control point relative to the current point.\n                            }\n                            else {                            // or some else or nothing\n                                nx = d.x;\n                                ny = d.y;\n                            }\n                            path = ["C", nx, ny][concat](path.slice(1));\n                            break;\n                        case "T":\n                            if (pcom == "Q" || pcom == "T") { // In "T" case we have to take into account, if the previous command is Q/T.\n                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar\n                                d.qy = d.y * 2 - d.qy;        // to case "S".\n                            }\n                            else {                            // or something else or nothing\n                                d.qx = d.x;\n                                d.qy = d.y;\n                            }\n                            path = ["C"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                            break;\n                        case "Q":\n                            d.qx = path[1];\n                            d.qy = path[2];\n                            path = ["C"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                            break;\n                        case "L":\n                            path = ["C"][concat](l2c(d.x, d.y, path[1], path[2]));\n                            break;\n                        case "H":\n                            path = ["C"][concat](l2c(d.x, d.y, path[1], d.y));\n                            break;\n                        case "V":\n                            path = ["C"][concat](l2c(d.x, d.y, d.x, path[1]));\n                            break;\n                        case "Z":\n                            path = ["C"][concat](l2c(d.x, d.y, d.X, d.Y));\n                            break;\n                    }\n                    return path;\n                },\n                fixArc = function (pp, i) {\n                    if (pp[i].length > 7) {\n                        pp[i].shift();\n                        var pi = pp[i];\n                        while (pi.length) {\n                            pcoms1[i]="A"; // if created multiple C:s, their original seg is saved\n                            p2 && (pcoms2[i]="A"); // the same as above\n                            pp.splice(i++, 0, ["C"][concat](pi.splice(0, 6)));\n                        }\n                        pp.splice(i, 1);\n                        ii = mmax(p.length, p2 && p2.length || 0);\n                    }\n                },\n                fixM = function (path1, path2, a1, a2, i) {\n                    if (path1 && path2 && path1[i][0] == "M" && path2[i][0] != "M") {\n                        path2.splice(i, 0, ["M", a2.x, a2.y]);\n                        a1.bx = 0;\n                        a1.by = 0;\n                        a1.x = path1[i][1];\n                        a1.y = path1[i][2];\n                        ii = mmax(p.length, p2 && p2.length || 0);\n                    }\n                },\n                pcoms1 = [], // path commands of original path p\n                pcoms2 = [], // path commands of original path p2\n                pfirst = "", // temporary holder for original path command\n                pcom = ""; // holder for previous path command of original path\n            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\n                p[i] && (pfirst = p[i][0]); // save current path command\n\n                if (pfirst != "C") // C is not saved yet, because it may be result of conversion\n                {\n                    pcoms1[i] = pfirst; // Save current path command\n                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom\n                }\n                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n                if (pcoms1[i] != "A" && pfirst == "C") pcoms1[i] = "C"; // A is the only command\n                // which may produce multiple C:s\n                // so we have to make sure that C is also C in original path\n\n                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\n\n                if (p2) { // the same procedures is done to p2\n                    p2[i] && (pfirst = p2[i][0]);\n                    if (pfirst != "C")\n                    {\n                        pcoms2[i] = pfirst;\n                        i && (pcom = pcoms2[i-1]);\n                    }\n                    p2[i] = processPath(p2[i], attrs2, pcom);\n\n                    if (pcoms2[i]!="A" && pfirst=="C") pcoms2[i]="C";\n\n                    fixArc(p2, i);\n                }\n                fixM(p, p2, attrs, attrs2, i);\n                fixM(p2, p, attrs2, attrs, i);\n                var seg = p[i],\n                    seg2 = p2 && p2[i],\n                    seglen = seg.length,\n                    seg2len = p2 && seg2.length;\n                attrs.x = seg[seglen - 2];\n                attrs.y = seg[seglen - 1];\n                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n                attrs2.x = p2 && seg2[seg2len - 2];\n                attrs2.y = p2 && seg2[seg2len - 1];\n            }\n            if (!p2) {\n                pth.curve = pathClone(p);\n            }\n            return p2 ? [p, p2] : p;\n        }, null, pathClone),\n        parseDots = R._parseDots = cacher(function (gradient) {\n            var dots = [];\n            for (var i = 0, ii = gradient.length; i < ii; i++) {\n                var dot = {},\n                    par = gradient[i].match(/^([^:]*):?([\\d\\.]*)/);\n                dot.color = R.getRGB(par[1]);\n                if (dot.color.error) {\n                    return null;\n                }\n                dot.opacity = dot.color.opacity;\n                dot.color = dot.color.hex;\n                par[2] && (dot.offset = par[2] + "%");\n                dots.push(dot);\n            }\n            for (i = 1, ii = dots.length - 1; i < ii; i++) {\n                if (!dots[i].offset) {\n                    var start = toFloat(dots[i - 1].offset || 0),\n                        end = 0;\n                    for (var j = i + 1; j < ii; j++) {\n                        if (dots[j].offset) {\n                            end = dots[j].offset;\n                            break;\n                        }\n                    }\n                    if (!end) {\n                        end = 100;\n                        j = ii;\n                    }\n                    end = toFloat(end);\n                    var d = (end - start) / (j - i + 1);\n                    for (; i < j; i++) {\n                        start += d;\n                        dots[i].offset = start + "%";\n                    }\n                }\n            }\n            return dots;\n        }),\n        tear = R._tear = function (el, paper) {\n            el == paper.top && (paper.top = el.prev);\n            el == paper.bottom && (paper.bottom = el.next);\n            el.next && (el.next.prev = el.prev);\n            el.prev && (el.prev.next = el.next);\n        },\n        tofront = R._tofront = function (el, paper) {\n            if (paper.top === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = null;\n            el.prev = paper.top;\n            paper.top.next = el;\n            paper.top = el;\n        },\n        toback = R._toback = function (el, paper) {\n            if (paper.bottom === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = paper.bottom;\n            el.prev = null;\n            paper.bottom.prev = el;\n            paper.bottom = el;\n        },\n        insertafter = R._insertafter = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.top && (paper.top = el);\n            el2.next && (el2.next.prev = el);\n            el.next = el2.next;\n            el.prev = el2;\n            el2.next = el;\n        },\n        insertbefore = R._insertbefore = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.bottom && (paper.bottom = el);\n            el2.prev && (el2.prev.next = el);\n            el.prev = el2.prev;\n            el2.prev = el;\n            el.next = el2;\n        },\n        /*\\\n         * Raphael.toMatrix\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns matrix of transformations applied to a given path\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (object) @Matrix\n        \\*/\n        toMatrix = R.toMatrix = function (path, transform) {\n            var bb = pathDimensions(path),\n                el = {\n                    _: {\n                        transform: E\n                    },\n                    getBBox: function () {\n                        return bb;\n                    }\n                };\n            extractTransform(el, transform);\n            return el.matrix;\n        },\n        /*\\\n         * Raphael.transformPath\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns path transformed by a given transformation\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (string) path\n        \\*/\n        transformPath = R.transformPath = function (path, transform) {\n            return mapPath(path, toMatrix(path, transform));\n        },\n        extractTransform = R._extractTransform = function (el, tstr) {\n            if (tstr == null) {\n                return el._.transform;\n            }\n            tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || E);\n            var tdata = R.parseTransformString(tstr),\n                deg = 0,\n                dx = 0,\n                dy = 0,\n                sx = 1,\n                sy = 1,\n                _ = el._,\n                m = new Matrix;\n            _.transform = tdata || [];\n            if (tdata) {\n                for (var i = 0, ii = tdata.length; i < ii; i++) {\n                    var t = tdata[i],\n                        tlen = t.length,\n                        command = Str(t[0]).toLowerCase(),\n                        absolute = t[0] != command,\n                        inver = absolute ? m.invert() : 0,\n                        x1,\n                        y1,\n                        x2,\n                        y2,\n                        bb;\n                    if (command == "t" && tlen == 3) {\n                        if (absolute) {\n                            x1 = inver.x(0, 0);\n                            y1 = inver.y(0, 0);\n                            x2 = inver.x(t[1], t[2]);\n                            y2 = inver.y(t[1], t[2]);\n                            m.translate(x2 - x1, y2 - y1);\n                        } else {\n                            m.translate(t[1], t[2]);\n                        }\n                    } else if (command == "r") {\n                        if (tlen == 2) {\n                            bb = bb || el.getBBox(1);\n                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                            deg += t[1];\n                        } else if (tlen == 4) {\n                            if (absolute) {\n                                x2 = inver.x(t[2], t[3]);\n                                y2 = inver.y(t[2], t[3]);\n                                m.rotate(t[1], x2, y2);\n                            } else {\n                                m.rotate(t[1], t[2], t[3]);\n                            }\n                            deg += t[1];\n                        }\n                    } else if (command == "s") {\n                        if (tlen == 2 || tlen == 3) {\n                            bb = bb || el.getBBox(1);\n                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                            sx *= t[1];\n                            sy *= t[tlen - 1];\n                        } else if (tlen == 5) {\n                            if (absolute) {\n                                x2 = inver.x(t[3], t[4]);\n                                y2 = inver.y(t[3], t[4]);\n                                m.scale(t[1], t[2], x2, y2);\n                            } else {\n                                m.scale(t[1], t[2], t[3], t[4]);\n                            }\n                            sx *= t[1];\n                            sy *= t[2];\n                        }\n                    } else if (command == "m" && tlen == 7) {\n                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\n                    }\n                    _.dirtyT = 1;\n                    el.matrix = m;\n                }\n            }\n\n            /*\\\n             * Element.matrix\n             [ property (object) ]\n             **\n             * Keeps @Matrix object, which represents element transformation\n            \\*/\n            el.matrix = m;\n\n            _.sx = sx;\n            _.sy = sy;\n            _.deg = deg;\n            _.dx = dx = m.e;\n            _.dy = dy = m.f;\n\n            if (sx == 1 && sy == 1 && !deg && _.bbox) {\n                _.bbox.x += +dx;\n                _.bbox.y += +dy;\n            } else {\n                _.dirtyT = 1;\n            }\n        },\n        getEmpty = function (item) {\n            var l = item[0];\n            switch (l.toLowerCase()) {\n                case "t": return [l, 0, 0];\n                case "m": return [l, 1, 0, 0, 1, 0, 0];\n                case "r": if (item.length == 4) {\n                    return [l, 0, item[2], item[3]];\n                } else {\n                    return [l, 0];\n                }\n                case "s": if (item.length == 5) {\n                    return [l, 1, 1, item[3], item[4]];\n                } else if (item.length == 3) {\n                    return [l, 1, 1];\n                } else {\n                    return [l, 1];\n                }\n            }\n        },\n        equaliseTransform = R._equaliseTransform = function (t1, t2) {\n            t2 = Str(t2).replace(/\\.{3}|\\u2026/g, t1);\n            t1 = R.parseTransformString(t1) || [];\n            t2 = R.parseTransformString(t2) || [];\n            var maxlength = mmax(t1.length, t2.length),\n                from = [],\n                to = [],\n                i = 0, j, jj,\n                tt1, tt2;\n            for (; i < maxlength; i++) {\n                tt1 = t1[i] || getEmpty(t2[i]);\n                tt2 = t2[i] || getEmpty(tt1);\n                if ((tt1[0] != tt2[0]) ||\n                    (tt1[0].toLowerCase() == "r" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\n                    (tt1[0].toLowerCase() == "s" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\n                    ) {\n                    return;\n                }\n                from[i] = [];\n                to[i] = [];\n                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\n                    j in tt1 && (from[i][j] = tt1[j]);\n                    j in tt2 && (to[i][j] = tt2[j]);\n                }\n            }\n            return {\n                from: from,\n                to: to\n            };\n        };\n    R._getContainer = function (x, y, w, h) {\n        var container;\n        container = h == null && !R.is(x, "object") ? g.doc.getElementById(x) : x;\n        if (container == null) {\n            return;\n        }\n        if (container.tagName) {\n            if (y == null) {\n                return {\n                    container: container,\n                    width: container.style.pixelWidth || container.offsetWidth,\n                    height: container.style.pixelHeight || container.offsetHeight\n                };\n            } else {\n                return {\n                    container: container,\n                    width: y,\n                    height: w\n                };\n            }\n        }\n        return {\n            container: 1,\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        };\n    };\n    /*\\\n     * Raphael.pathToRelative\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to relative form\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.pathToRelative = pathToRelative;\n    R._engine = {};\n    /*\\\n     * Raphael.path2curve\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to a new path where all segments are cubic bezier curves.\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.path2curve = path2curve;\n    /*\\\n     * Raphael.matrix\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns matrix based on given parameters.\n     > Parameters\n     - a (number)\n     - b (number)\n     - c (number)\n     - d (number)\n     - e (number)\n     - f (number)\n     = (object) @Matrix\n    \\*/\n    R.matrix = function (a, b, c, d, e, f) {\n        return new Matrix(a, b, c, d, e, f);\n    };\n    function Matrix(a, b, c, d, e, f) {\n        if (a != null) {\n            this.a = +a;\n            this.b = +b;\n            this.c = +c;\n            this.d = +d;\n            this.e = +e;\n            this.f = +f;\n        } else {\n            this.a = 1;\n            this.b = 0;\n            this.c = 0;\n            this.d = 1;\n            this.e = 0;\n            this.f = 0;\n        }\n    }\n    (function (matrixproto) {\n        /*\\\n         * Matrix.add\n         [ method ]\n         **\n         * Adds given matrix to existing one.\n         > Parameters\n         - a (number)\n         - b (number)\n         - c (number)\n         - d (number)\n         - e (number)\n         - f (number)\n         or\n         - matrix (object) @Matrix\n        \\*/\n        matrixproto.add = function (a, b, c, d, e, f) {\n            var out = [[], [], []],\n                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\n                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\n                x, y, z, res;\n\n            if (a && a instanceof Matrix) {\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\n            }\n\n            for (x = 0; x < 3; x++) {\n                for (y = 0; y < 3; y++) {\n                    res = 0;\n                    for (z = 0; z < 3; z++) {\n                        res += m[x][z] * matrix[z][y];\n                    }\n                    out[x][y] = res;\n                }\n            }\n            this.a = out[0][0];\n            this.b = out[1][0];\n            this.c = out[0][1];\n            this.d = out[1][1];\n            this.e = out[0][2];\n            this.f = out[1][2];\n        };\n        /*\\\n         * Matrix.invert\n         [ method ]\n         **\n         * Returns inverted version of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.invert = function () {\n            var me = this,\n                x = me.a * me.d - me.b * me.c;\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\n        };\n        /*\\\n         * Matrix.clone\n         [ method ]\n         **\n         * Returns copy of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.clone = function () {\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n        };\n        /*\\\n         * Matrix.translate\n         [ method ]\n         **\n         * Translate the matrix\n         > Parameters\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.translate = function (x, y) {\n            this.add(1, 0, 0, 1, x, y);\n        };\n        /*\\\n         * Matrix.scale\n         [ method ]\n         **\n         * Scales the matrix\n         > Parameters\n         - x (number)\n         - y (number) #optional\n         - cx (number) #optional\n         - cy (number) #optional\n        \\*/\n        matrixproto.scale = function (x, y, cx, cy) {\n            y == null && (y = x);\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\n            this.add(x, 0, 0, y, 0, 0);\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\n        };\n        /*\\\n         * Matrix.rotate\n         [ method ]\n         **\n         * Rotates the matrix\n         > Parameters\n         - a (number)\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.rotate = function (a, x, y) {\n            a = R.rad(a);\n            x = x || 0;\n            y = y || 0;\n            var cos = +math.cos(a).toFixed(9),\n                sin = +math.sin(a).toFixed(9);\n            this.add(cos, sin, -sin, cos, x, y);\n            this.add(1, 0, 0, 1, -x, -y);\n        };\n        /*\\\n         * Matrix.x\n         [ method ]\n         **\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) x\n        \\*/\n        matrixproto.x = function (x, y) {\n            return x * this.a + y * this.c + this.e;\n        };\n        /*\\\n         * Matrix.y\n         [ method ]\n         **\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) y\n        \\*/\n        matrixproto.y = function (x, y) {\n            return x * this.b + y * this.d + this.f;\n        };\n        matrixproto.get = function (i) {\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\n        };\n        matrixproto.toString = function () {\n            return R.svg ?\n                "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" :\n                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\n        };\n        matrixproto.toFilter = function () {\n            return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) +\n                ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) +\n                ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod=\'auto expand\')";\n        };\n        matrixproto.offset = function () {\n            return [this.e.toFixed(4), this.f.toFixed(4)];\n        };\n        function norm(a) {\n            return a[0] * a[0] + a[1] * a[1];\n        }\n        function normalize(a) {\n            var mag = math.sqrt(norm(a));\n            a[0] && (a[0] /= mag);\n            a[1] && (a[1] /= mag);\n        }\n        /*\\\n         * Matrix.split\n         [ method ]\n         **\n         * Splits matrix into primitive transformations\n         = (object) in format:\n         o dx (number) translation by x\n         o dy (number) translation by y\n         o scalex (number) scale by x\n         o scaley (number) scale by y\n         o shear (number) shear\n         o rotate (number) rotation in deg\n         o isSimple (boolean) could it be represented via simple transformations\n        \\*/\n        matrixproto.split = function () {\n            var out = {};\n            // translation\n            out.dx = this.e;\n            out.dy = this.f;\n\n            // scale and shear\n            var row = [[this.a, this.c], [this.b, this.d]];\n            out.scalex = math.sqrt(norm(row[0]));\n            normalize(row[0]);\n\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\n\n            out.scaley = math.sqrt(norm(row[1]));\n            normalize(row[1]);\n            out.shear /= out.scaley;\n\n            // rotation\n            var sin = -row[0][1],\n                cos = row[1][1];\n            if (cos < 0) {\n                out.rotate = R.deg(math.acos(cos));\n                if (sin < 0) {\n                    out.rotate = 360 - out.rotate;\n                }\n            } else {\n                out.rotate = R.deg(math.asin(sin));\n            }\n\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\n            return out;\n        };\n        /*\\\n         * Matrix.toTransformString\n         [ method ]\n         **\n         * Return transform string that represents given matrix\n         = (string) transform string\n        \\*/\n        matrixproto.toTransformString = function (shorter) {\n            var s = shorter || this[split]();\n            if (s.isSimple) {\n                s.scalex = +s.scalex.toFixed(4);\n                s.scaley = +s.scaley.toFixed(4);\n                s.rotate = +s.rotate.toFixed(4);\n                return  (s.dx || s.dy ? "t" + [s.dx, s.dy] : E) +\n                        (s.scalex != 1 || s.scaley != 1 ? "s" + [s.scalex, s.scaley, 0, 0] : E) +\n                        (s.rotate ? "r" + [s.rotate, 0, 0] : E);\n            } else {\n                return "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\n            }\n        };\n    })(Matrix.prototype);\n\n    var preventDefault = function () {\n        this.returnValue = false;\n    },\n    preventTouch = function () {\n        return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function () {\n        this.cancelBubble = true;\n    },\n    stopTouch = function () {\n        return this.originalEvent.stopPropagation();\n    },\n    getEventPosition = function (e) {\n        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n\n        return {\n            x: e.clientX + scrollX,\n            y: e.clientY + scrollY\n        };\n    },\n    addEvent = (function () {\n        if (g.doc.addEventListener) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    var pos = getEventPosition(e);\n                    return fn.call(element, e, pos.x, pos.y);\n                };\n                obj.addEventListener(type, f, false);\n\n                if (supportsTouch && touchMap[type]) {\n                    var _f = function (e) {\n                        var pos = getEventPosition(e),\n                            olde = e;\n\n                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n                            if (e.targetTouches[i].target == obj) {\n                                e = e.targetTouches[i];\n                                e.originalEvent = olde;\n                                e.preventDefault = preventTouch;\n                                e.stopPropagation = stopTouch;\n                                break;\n                            }\n                        }\n\n                        return fn.call(element, e, pos.x, pos.y);\n                    };\n                    obj.addEventListener(touchMap[type], _f, false);\n                }\n\n                return function () {\n                    obj.removeEventListener(type, f, false);\n\n                    if (supportsTouch && touchMap[type])\n                        obj.removeEventListener(touchMap[type], _f, false);\n\n                    return true;\n                };\n            };\n        } else if (g.doc.attachEvent) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    e = e || g.win.event;\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                        scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                        x = e.clientX + scrollX,\n                        y = e.clientY + scrollY;\n                    e.preventDefault = e.preventDefault || preventDefault;\n                    e.stopPropagation = e.stopPropagation || stopPropagation;\n                    return fn.call(element, e, x, y);\n                };\n                obj.attachEvent("on" + type, f);\n                var detacher = function () {\n                    obj.detachEvent("on" + type, f);\n                    return true;\n                };\n                return detacher;\n            };\n        }\n    })(),\n    drag = [],\n    dragMove = function (e) {\n        var x = e.clientX,\n            y = e.clientY,\n            scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n            dragi,\n            j = drag.length;\n        while (j--) {\n            dragi = drag[j];\n            if (supportsTouch && e.touches) {\n                var i = e.touches.length,\n                    touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    if (touch.identifier == dragi.el._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        (e.originalEvent ? e.originalEvent : e).preventDefault();\n                        break;\n                    }\n                }\n            } else {\n                e.preventDefault();\n            }\n            var node = dragi.el.node,\n                o,\n                next = node.nextSibling,\n                parent = node.parentNode,\n                display = node.style.display;\n            g.win.opera && parent.removeChild(node);\n            node.style.display = "none";\n            o = dragi.el.paper.getElementByPoint(x, y);\n            node.style.display = display;\n            g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n            o && eve("raphael.drag.over." + dragi.el.id, dragi.el, o);\n            x += scrollX;\n            y += scrollY;\n            eve("raphael.drag.move." + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n        }\n    },\n    dragUp = function (e) {\n        R.unmousemove(dragMove).unmouseup(dragUp);\n        var i = drag.length,\n            dragi;\n        while (i--) {\n            dragi = drag[i];\n            dragi.el._drag = {};\n            eve("raphael.drag.end." + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n        }\n        drag = [];\n    },\n    /*\\\n     * Raphael.el\n     [ property (object) ]\n     **\n     * You can add your own method to elements. This is useful when you want to hack default functionality or\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\n     * you can redefine element method at any time. Expending element methods wouldnt affect set.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: "#f00"});\n     | };\n     | // then use it\n     | paper.circle(100, 100, 20).red();\n    \\*/\n    elproto = R.el = {};\n    /*\\\n     * Element.click\n     [ method ]\n     **\n     * Adds event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unclick\n     [ method ]\n     **\n     * Removes event handler for click for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.dblclick\n     [ method ]\n     **\n     * Adds event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.undblclick\n     [ method ]\n     **\n     * Removes event handler for double click for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousedown\n     [ method ]\n     **\n     * Adds event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousedown\n     [ method ]\n     **\n     * Removes event handler for mousedown for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousemove\n     [ method ]\n     **\n     * Adds event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousemove\n     [ method ]\n     **\n     * Removes event handler for mousemove for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseout\n     [ method ]\n     **\n     * Adds event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseout\n     [ method ]\n     **\n     * Removes event handler for mouseout for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseover\n     [ method ]\n     **\n     * Adds event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseover\n     [ method ]\n     **\n     * Removes event handler for mouseover for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseup\n     [ method ]\n     **\n     * Adds event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseup\n     [ method ]\n     **\n     * Removes event handler for mouseup for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchstart\n     [ method ]\n     **\n     * Adds event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchstart\n     [ method ]\n     **\n     * Removes event handler for touchstart for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchmove\n     [ method ]\n     **\n     * Adds event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchmove\n     [ method ]\n     **\n     * Removes event handler for touchmove for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchend\n     [ method ]\n     **\n     * Adds event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchend\n     [ method ]\n     **\n     * Removes event handler for touchend for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchcancel\n     [ method ]\n     **\n     * Adds event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchcancel\n     [ method ]\n     **\n     * Removes event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) #optional handler for the event\n     = (object) @Element\n    \\*/\n    for (var i = events.length; i--;) {\n        (function (eventName) {\n            R[eventName] = elproto[eventName] = function (fn, scope) {\n                if (R.is(fn, "function")) {\n                    this.events = this.events || [];\n                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});\n                }\n                return this;\n            };\n            R["un" + eventName] = elproto["un" + eventName] = function (fn) {\n                var events = this.events || [],\n                    l = events.length;\n                while (l--){\n                    if (events[l].name == eventName && (R.is(fn, "undefined") || events[l].f == fn)) {\n                        events[l].unbind();\n                        events.splice(l, 1);\n                        !events.length && delete this.events;\n                    }\n                }\n                return this;\n            };\n        })(events[i]);\n    }\n\n    /*\\\n     * Element.data\n     [ method ]\n     **\n     * Adds or retrieves given value associated with given key.\n     **\n     * See also @Element.removeData\n     > Parameters\n     - key (string) key to store data\n     - value (any) #optional value to store\n     = (object) @Element\n     * or, if value is not specified:\n     = (any) value\n     * or, if key and value are not specified:\n     = (object) Key/value pairs for all the data associated with the element.\n     > Usage\n     | for (var i = 0, i < 5, i++) {\n     |     paper.circle(10 + 15 * i, 10, 10)\n     |          .attr({fill: "#000"})\n     |          .data("i", i)\n     |          .click(function () {\n     |             alert(this.data("i"));\n     |          });\n     | }\n    \\*/\n    elproto.data = function (key, value) {\n        var data = eldata[this.id] = eldata[this.id] || {};\n        if (arguments.length == 0) {\n            return data;\n        }\n        if (arguments.length == 1) {\n            if (R.is(key, "object")) {\n                for (var i in key) if (key[has](i)) {\n                    this.data(i, key[i]);\n                }\n                return this;\n            }\n            eve("raphael.data.get." + this.id, this, data[key], key);\n            return data[key];\n        }\n        data[key] = value;\n        eve("raphael.data.set." + this.id, this, value, key);\n        return this;\n    };\n    /*\\\n     * Element.removeData\n     [ method ]\n     **\n     * Removes value associated with an element by given key.\n     * If key is not provided, removes all the data of the element.\n     > Parameters\n     - key (string) #optional key\n     = (object) @Element\n    \\*/\n    elproto.removeData = function (key) {\n        if (key == null) {\n            eldata[this.id] = {};\n        } else {\n            eldata[this.id] && delete eldata[this.id][key];\n        }\n        return this;\n    };\n     /*\\\n     * Element.getData\n     [ method ]\n     **\n     * Retrieves the element data\n     = (object) data\n    \\*/\n    elproto.getData = function () {\n        return clone(eldata[this.id] || {});\n    };\n    /*\\\n     * Element.hover\n     [ method ]\n     **\n     * Adds event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     - icontext (object) #optional context for hover in handler\n     - ocontext (object) #optional context for hover out handler\n     = (object) @Element\n    \\*/\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\n    };\n    /*\\\n     * Element.unhover\n     [ method ]\n     **\n     * Removes event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     = (object) @Element\n    \\*/\n    elproto.unhover = function (f_in, f_out) {\n        return this.unmouseover(f_in).unmouseout(f_out);\n    };\n    var draggable = [];\n    /*\\\n     * Element.drag\n     [ method ]\n     **\n     * Adds event handlers for drag of the element.\n     > Parameters\n     - onmove (function) handler for moving\n     - onstart (function) handler for drag start\n     - onend (function) handler for drag end\n     - mcontext (object) #optional context for moving handler\n     - scontext (object) #optional context for drag start handler\n     - econtext (object) #optional context for drag end handler\n     * Additionally following `drag` events will be triggered: `drag.start.<id>` on start,\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\n     * `drag.over.<id>` will be fired as well.\n     *\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\n     o dx (number) shift by x from the start point\n     o dy (number) shift by y from the start point\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\n     o event (object) DOM event object\n     = (object) @Element\n    \\*/\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n        function start(e) {\n            (e.originalEvent || e).preventDefault();\n            var x = e.clientX,\n                y = e.clientY,\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n            this._drag.id = e.identifier;\n            if (supportsTouch && e.touches) {\n                var i = e.touches.length, touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    this._drag.id = touch.identifier;\n                    if (touch.identifier == this._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        break;\n                    }\n                }\n            }\n            this._drag.x = x + scrollX;\n            this._drag.y = y + scrollY;\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\n            onstart && eve.on("raphael.drag.start." + this.id, onstart);\n            onmove && eve.on("raphael.drag.move." + this.id, onmove);\n            onend && eve.on("raphael.drag.end." + this.id, onend);\n            eve("raphael.drag.start." + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\n        }\n        this._drag = {};\n        draggable.push({el: this, start: start});\n        this.mousedown(start);\n        return this;\n    };\n    /*\\\n     * Element.onDragOver\n     [ method ]\n     **\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\n     > Parameters\n     - f (function) handler for event, first argument would be the element you are dragging over\n    \\*/\n    elproto.onDragOver = function (f) {\n        f ? eve.on("raphael.drag.over." + this.id, f) : eve.unbind("raphael.drag.over." + this.id);\n    };\n    /*\\\n     * Element.undrag\n     [ method ]\n     **\n     * Removes all drag event handlers from given element.\n    \\*/\n    elproto.undrag = function () {\n        var i = draggable.length;\n        while (i--) if (draggable[i].el == this) {\n            this.unmousedown(draggable[i].start);\n            draggable.splice(i, 1);\n            eve.unbind("raphael.drag.*." + this.id);\n        }\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n        drag = [];\n    };\n    /*\\\n     * Paper.circle\n     [ method ]\n     **\n     * Draws a circle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - r (number) radius\n     = (object) Raphal element object with type circle\n     **\n     > Usage\n     | var c = paper.circle(50, 50, 40);\n    \\*/\n    paperproto.circle = function (x, y, r) {\n        var out = R._engine.circle(this, x || 0, y || 0, r || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.rect\n     [ method ]\n     *\n     * Draws a rectangle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the top left corner\n     - y (number) y coordinate of the top left corner\n     - width (number) width\n     - height (number) height\n     - r (number) #optional radius for rounded corners, default is 0\n     = (object) Raphal element object with type rect\n     **\n     > Usage\n     | // regular rectangle\n     | var c = paper.rect(10, 10, 50, 50);\n     | // rectangle with rounded corners\n     | var c = paper.rect(40, 40, 50, 50, 10);\n    \\*/\n    paperproto.rect = function (x, y, w, h, r) {\n        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.ellipse\n     [ method ]\n     **\n     * Draws an ellipse.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - rx (number) horizontal radius\n     - ry (number) vertical radius\n     = (object) Raphal element object with type ellipse\n     **\n     > Usage\n     | var c = paper.ellipse(50, 50, 40, 20);\n    \\*/\n    paperproto.ellipse = function (x, y, rx, ry) {\n        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.path\n     [ method ]\n     **\n     * Creates a path element by given path data string.\n     > Parameters\n     - pathString (string) #optional path string in SVG format.\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\n     | "M10,20L30,40"\n     * Here we can see two commands: M, with arguments `(10, 20)` and L with arguments `(30, 40)`. Upper case letter mean command is absolute, lower caserelative.\n     *\n     # <p>Here is short list of commands available, for more details see <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a path\'s data attribute\'s format are described in the SVG specification.">SVG path string format</a>.</p>\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\n     # <tr><td>Q</td><td>quadratic Bzier curveto</td><td>(x1 y1 x y)+</td></tr>\n     # <tr><td>T</td><td>smooth quadratic Bzier curveto</td><td>(x y)+</td></tr>\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\n     # <tr><td>R</td><td><a href="http://en.wikipedia.org/wiki/CatmullRom_spline#Catmull.E2.80.93Rom_spline">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\n     * * Catmull-Rom curveto is a not standard SVG command and added in 2.0 to make life easier.\n     * Note: there is a special case when path consist of just three commands: M10,10Rz. In this case path will smoothly connects to its beginning.\n     > Usage\n     | var c = paper.path("M10 10L90 90");\n     | // draw a diagonal line:\n     | // move to 10,10, line to 90,90\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\n    \\*/\n    paperproto.path = function (pathString) {\n        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);\n        var out = R._engine.path(R.format[apply](R, arguments), this);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.image\n     [ method ]\n     **\n     * Embeds an image into the surface.\n     **\n     > Parameters\n     **\n     - src (string) URI of the source image\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - width (number) width of the image\n     - height (number) height of the image\n     = (object) Raphal element object with type image\n     **\n     > Usage\n     | var c = paper.image("apple.png", 10, 10, 80, 80);\n    \\*/\n    paperproto.image = function (src, x, y, w, h) {\n        var out = R._engine.image(this, src || "about:blank", x || 0, y || 0, w || 0, h || 0);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.text\n     [ method ]\n     **\n     * Draws a text string. If you need line breaks, put \\n in the string.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - text (string) The text string to draw\n     = (object) Raphal element object with type text\n     **\n     > Usage\n     | var t = paper.text(50, 50, "Raphal\\nkicks\\nbutt!");\n    \\*/\n    paperproto.text = function (x, y, text) {\n        var out = R._engine.text(this, x || 0, y || 0, Str(text));\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Paper.set\n     [ method ]\n     **\n     * Creates array-like object to keep and operate several elements at once.\n     * Warning: it doesnt create any elements for itself in the page, it just groups existing elements.\n     * Sets act as pseudo elements  all methods available to an element can be used on a set.\n     = (object) array-like object that represents set of elements\n     **\n     > Usage\n     | var st = paper.set();\n     | st.push(\n     |     paper.circle(10, 10, 5),\n     |     paper.circle(30, 10, 5)\n     | );\n     | st.attr({fill: "red"}); // changes the fill of both circles\n    \\*/\n    paperproto.set = function (itemsArray) {\n        !R.is(itemsArray, "array") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));\n        var out = new Set(itemsArray);\n        this.__set__ && this.__set__.push(out);\n        out["paper"] = this;\n        out["type"] = "set";\n        return out;\n    };\n    /*\\\n     * Paper.setStart\n     [ method ]\n     **\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\n     * @Paper.setFinish will be added to the set.\n     **\n     > Usage\n     | paper.setStart();\n     | paper.circle(10, 10, 5),\n     | paper.circle(30, 10, 5)\n     | var st = paper.setFinish();\n     | st.attr({fill: "red"}); // changes the fill of both circles\n    \\*/\n    paperproto.setStart = function (set) {\n        this.__set__ = set || this.set();\n    };\n    /*\\\n     * Paper.setFinish\n     [ method ]\n     **\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\n     **\n     = (object) set\n    \\*/\n    paperproto.setFinish = function (set) {\n        var out = this.__set__;\n        delete this.__set__;\n        return out;\n    };\n    /*\\\n     * Paper.getSize\n     [ method ]\n     **\n     * Obtains current paper actual size.\n     **\n     = (object)\n     \\*/\n    paperproto.getSize = function () {\n        var container = this.canvas.parentNode;\n        return {\n            width: container.offsetWidth,\n            height: container.offsetHeight\n                };\n        };\n    /*\\\n     * Paper.setSize\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - width (number) new width of the canvas\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setSize = function (width, height) {\n        return R._engine.setSize.call(this, width, height);\n    };\n    /*\\\n     * Paper.setViewBox\n     [ method ]\n     **\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\n     * specifying new boundaries.\n     **\n     > Parameters\n     **\n     - x (number) new x position, default is `0`\n     - y (number) new y position, default is `0`\n     - w (number) new width of the canvas\n     - h (number) new height of the canvas\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\n    \\*/\n    paperproto.setViewBox = function (x, y, w, h, fit) {\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\n    };\n    /*\\\n     * Paper.top\n     [ property ]\n     **\n     * Points to the topmost element on the paper\n    \\*/\n    /*\\\n     * Paper.bottom\n     [ property ]\n     **\n     * Points to the bottom element on the paper\n    \\*/\n    paperproto.top = paperproto.bottom = null;\n    /*\\\n     * Paper.raphael\n     [ property ]\n     **\n     * Points to the @Raphael object/function\n    \\*/\n    paperproto.raphael = R;\n    var getOffset = function (elem) {\n        var box = elem.getBoundingClientRect(),\n            doc = elem.ownerDocument,\n            body = doc.body,\n            docElem = doc.documentElement,\n            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\n            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,\n            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\n        return {\n            y: top,\n            x: left\n        };\n    };\n    /*\\\n     * Paper.getElementByPoint\n     [ method ]\n     **\n     * Returns you topmost element under given point.\n     **\n     = (object) Raphal element object\n     > Parameters\n     **\n     - x (number) x coordinate from the top left corner of the window\n     - y (number) y coordinate from the top left corner of the window\n     > Usage\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: "#f00"});\n    \\*/\n    paperproto.getElementByPoint = function (x, y) {\n        var paper = this,\n            svg = paper.canvas,\n            target = g.doc.elementFromPoint(x, y);\n        if (g.win.opera && target.tagName == "svg") {\n            var so = getOffset(svg),\n                sr = svg.createSVGRect();\n            sr.x = x - so.x;\n            sr.y = y - so.y;\n            sr.width = sr.height = 1;\n            var hits = svg.getIntersectionList(sr, null);\n            if (hits.length) {\n                target = hits[hits.length - 1];\n            }\n        }\n        if (!target) {\n            return null;\n        }\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\n            target = target.parentNode;\n        }\n        target == paper.canvas.parentNode && (target = svg);\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\n        return target;\n    };\n\n    /*\\\n     * Paper.getElementsByBBox\n     [ method ]\n     **\n     * Returns set of elements that have an intersecting bounding box\n     **\n     > Parameters\n     **\n     - bbox (object) bbox to check with\n     = (object) @Set\n     \\*/\n    paperproto.getElementsByBBox = function (bbox) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (R.isBBoxIntersect(el.getBBox(), bbox)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n\n    /*\\\n     * Paper.getById\n     [ method ]\n     **\n     * Returns you element by its internal ID.\n     **\n     > Parameters\n     **\n     - id (number) id\n     = (object) Raphal element object\n    \\*/\n    paperproto.getById = function (id) {\n        var bot = this.bottom;\n        while (bot) {\n            if (bot.id == id) {\n                return bot;\n            }\n            bot = bot.next;\n        }\n        return null;\n    };\n    /*\\\n     * Paper.forEach\n     [ method ]\n     **\n     * Executes given function for each element on the paper\n     *\n     * If callback function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Paper object\n     > Usage\n     | paper.forEach(function (el) {\n     |     el.attr({ stroke: "blue" });\n     | });\n    \\*/\n    paperproto.forEach = function (callback, thisArg) {\n        var bot = this.bottom;\n        while (bot) {\n            if (callback.call(thisArg, bot) === false) {\n                return this;\n            }\n            bot = bot.next;\n        }\n        return this;\n    };\n    /*\\\n     * Paper.getElementsByPoint\n     [ method ]\n     **\n     * Returns set of elements that have common point inside\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (object) @Set\n    \\*/\n    paperproto.getElementsByPoint = function (x, y) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n    function x_y() {\n        return this.x + S + this.y;\n    }\n    function x_y_w_h() {\n        return this.x + S + this.y + S + this.width + " \\xd7 " + this.height;\n    }\n    /*\\\n     * Element.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this elements shape\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point inside the shape\n    \\*/\n    elproto.isPointInside = function (x, y) {\n        var rp = this.realPath = getPath[this.type](this);\n        if (this.attr(\'transform\') && this.attr(\'transform\').length) {\n            rp = R.transformPath(rp, this.attr(\'transform\'));\n        }\n        return R.isPointInsidePath(rp, x, y);\n    };\n    /*\\\n     * Element.getBBox\n     [ method ]\n     **\n     * Return bounding box for a given element\n     **\n     > Parameters\n     **\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\n     = (object) Bounding box object:\n     o {\n     o     x: (number) top left corner x\n     o     y: (number) top left corner y\n     o     x2: (number) bottom right corner x\n     o     y2: (number) bottom right corner y\n     o     width: (number) width\n     o     height: (number) height\n     o }\n    \\*/\n    elproto.getBBox = function (isWithoutTransform) {\n        if (this.removed) {\n            return {};\n        }\n        var _ = this._;\n        if (isWithoutTransform) {\n            if (_.dirty || !_.bboxwt) {\n                this.realPath = getPath[this.type](this);\n                _.bboxwt = pathDimensions(this.realPath);\n                _.bboxwt.toString = x_y_w_h;\n                _.dirty = 0;\n            }\n            return _.bboxwt;\n        }\n        if (_.dirty || _.dirtyT || !_.bbox) {\n            if (_.dirty || !this.realPath) {\n                _.bboxwt = 0;\n                this.realPath = getPath[this.type](this);\n            }\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\n            _.bbox.toString = x_y_w_h;\n            _.dirty = _.dirtyT = 0;\n        }\n        return _.bbox;\n    };\n    /*\\\n     * Element.clone\n     [ method ]\n     **\n     = (object) clone of a given element\n     **\n    \\*/\n    elproto.clone = function () {\n        if (this.removed) {\n            return null;\n        }\n        var out = this.paper[this.type]().attr(this.attr());\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n    /*\\\n     * Element.glow\n     [ method ]\n     **\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\n     *\n     * Note: Glow is not connected to the element. If you change element attributes it wont adjust itself.\n     **\n     > Parameters\n     **\n     - glow (object) #optional parameters object with all properties optional:\n     o {\n     o     width (number) size of the glow, default is `10`\n     o     fill (boolean) will it be filled, default is `false`\n     o     opacity (number) opacity, default is `0.5`\n     o     offsetx (number) horizontal offset, default is `0`\n     o     offsety (number) vertical offset, default is `0`\n     o     color (string) glow colour, default is `black`\n     o }\n     = (object) @Paper.set of elements that represents glow\n    \\*/\n    elproto.glow = function (glow) {\n        if (this.type == "text") {\n            return null;\n        }\n        glow = glow || {};\n        var s = {\n            width: (glow.width || 10) + (+this.attr("stroke-width") || 1),\n            fill: glow.fill || false,\n            opacity: glow.opacity == null ? .5 : glow.opacity,\n            offsetx: glow.offsetx || 0,\n            offsety: glow.offsety || 0,\n            color: glow.color || "#000"\n        },\n            c = s.width / 2,\n            r = this.paper,\n            out = r.set(),\n            path = this.realPath || getPath[this.type](this);\n        path = this.matrix ? mapPath(path, this.matrix) : path;\n        for (var i = 1; i < c + 1; i++) {\n            out.push(r.path(path).attr({\n                stroke: s.color,\n                fill: s.fill ? s.color : "none",\n                "stroke-linejoin": "round",\n                "stroke-linecap": "round",\n                "stroke-width": +(s.width / c * i).toFixed(3),\n                opacity: +(s.opacity / c).toFixed(3)\n            }));\n        }\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\n    };\n    var curveslengths = {},\n    getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n        if (length == null) {\n            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n        } else {\n            return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\n        }\n    },\n    getLengthFactory = function (istotal, subpath) {\n        return function (path, length, onlystart) {\n            path = path2curve(path);\n            var x, y, p, l, sp = "", subpaths = {}, point,\n                len = 0;\n            for (var i = 0, ii = path.length; i < ii; i++) {\n                p = path[i];\n                if (p[0] == "M") {\n                    x = +p[1];\n                    y = +p[2];\n                } else {\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                    if (len + l > length) {\n                        if (subpath && !subpaths.start) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            sp += ["C" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\n                            if (onlystart) {return sp;}\n                            subpaths.start = sp;\n                            sp = ["M" + point.x, point.y + "C" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\n                            len += l;\n                            x = +p[5];\n                            y = +p[6];\n                            continue;\n                        }\n                        if (!istotal && !subpath) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            return {x: point.x, y: point.y, alpha: point.alpha};\n                        }\n                    }\n                    len += l;\n                    x = +p[5];\n                    y = +p[6];\n                }\n                sp += p.shift() + p;\n            }\n            subpaths.end = sp;\n            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\n            point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});\n            return point;\n        };\n    };\n    var getTotalLength = getLengthFactory(1),\n        getPointAtLength = getLengthFactory(),\n        getSubpathsAtLength = getLengthFactory(0, 1);\n    /*\\\n     * Raphael.getTotalLength\n     [ method ]\n     **\n     * Returns length of the given path in pixels.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string.\n     **\n     = (number) length.\n    \\*/\n    R.getTotalLength = getTotalLength;\n    /*\\\n     * Raphael.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    R.getPointAtLength = getPointAtLength;\n    /*\\\n     * Raphael.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given path from given length to given length.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    R.getSubpath = function (path, from, to) {\n        if (this.getTotalLength(path) - to < 1e-6) {\n            return getSubpathsAtLength(path, from).end;\n        }\n        var a = getSubpathsAtLength(path, to, 1);\n        return from ? getSubpathsAtLength(a, from).end : a;\n    };\n    /*\\\n     * Element.getTotalLength\n     [ method ]\n     **\n     * Returns length of the path in pixels. Only works for element of path type.\n     = (number) length.\n    \\*/\n    elproto.getTotalLength = function () {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        if (this.node.getTotalLength) {\n            return this.node.getTotalLength();\n        }\n\n        return getTotalLength(path);\n    };\n    /*\\\n     * Element.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path. Only works for element of path type.\n     **\n     > Parameters\n     **\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    elproto.getPointAtLength = function (length) {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        return getPointAtLength(path, length);\n    };\n    /*\\\n     * Element.getPath\n     [ method ]\n     **\n     * Returns path of the element. Only works for elements of path type and simple elements like circle.\n     = (object) path\n     **\n    \\*/\n    elproto.getPath = function () {\n        var path,\n            getPath = R._getPath[this.type];\n\n        if (this.type == "text" || this.type == "set") {\n            return;\n        }\n\n        if (getPath) {\n            path = getPath(this);\n        }\n\n        return path;\n    };\n    /*\\\n     * Element.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given element from given length to given length. Only works for element of path type.\n     **\n     > Parameters\n     **\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    elproto.getSubpath = function (from, to) {\n        var path = this.getPath();\n        if (!path) {\n            return;\n        }\n\n        return R.getSubpath(path, from, to);\n    };\n    /*\\\n     * Raphael.easing_formulas\n     [ property ]\n     **\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\n     # <ul>\n     #     <li>linear</li>\n     #     <li>&lt; or easeIn or ease-in</li>\n     #     <li>> or easeOut or ease-out</li>\n     #     <li>&lt;> or easeInOut or ease-in-out</li>\n     #     <li>backIn or back-in</li>\n     #     <li>backOut or back-out</li>\n     #     <li>elastic</li>\n     #     <li>bounce</li>\n     # </ul>\n     # <p>See also <a href="http://raphaeljs.com/easing.html">Easing demo</a>.</p>\n    \\*/\n    var ef = R.easing_formulas = {\n        linear: function (n) {\n            return n;\n        },\n        "<": function (n) {\n            return pow(n, 1.7);\n        },\n        ">": function (n) {\n            return pow(n, .48);\n        },\n        "<>": function (n) {\n            var q = .48 - n / 1.04,\n                Q = math.sqrt(.1734 + q * q),\n                x = Q - q,\n                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\n                y = -Q - q,\n                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\n                t = X + Y + .5;\n            return (1 - t) * 3 * t * t + t * t * t;\n        },\n        backIn: function (n) {\n            var s = 1.70158;\n            return n * n * ((s + 1) * n - s);\n        },\n        backOut: function (n) {\n            n = n - 1;\n            var s = 1.70158;\n            return n * n * ((s + 1) * n + s) + 1;\n        },\n        elastic: function (n) {\n            if (n == !!n) {\n                return n;\n            }\n            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;\n        },\n        bounce: function (n) {\n            var s = 7.5625,\n                p = 2.75,\n                l;\n            if (n < (1 / p)) {\n                l = s * n * n;\n            } else {\n                if (n < (2 / p)) {\n                    n -= (1.5 / p);\n                    l = s * n * n + .75;\n                } else {\n                    if (n < (2.5 / p)) {\n                        n -= (2.25 / p);\n                        l = s * n * n + .9375;\n                    } else {\n                        n -= (2.625 / p);\n                        l = s * n * n + .984375;\n                    }\n                }\n            }\n            return l;\n        }\n    };\n    ef.easeIn = ef["ease-in"] = ef["<"];\n    ef.easeOut = ef["ease-out"] = ef[">"];\n    ef.easeInOut = ef["ease-in-out"] = ef["<>"];\n    ef["back-in"] = ef.backIn;\n    ef["back-out"] = ef.backOut;\n\n    var animationElements = [],\n        requestAnimFrame = window.requestAnimationFrame       ||\n                           window.webkitRequestAnimationFrame ||\n                           window.mozRequestAnimationFrame    ||\n                           window.oRequestAnimationFrame      ||\n                           window.msRequestAnimationFrame     ||\n                           function (callback) {\n                               setTimeout(callback, 16);\n                           },\n        animation = function () {\n            var Now = +new Date,\n                l = 0;\n            for (; l < animationElements.length; l++) {\n                var e = animationElements[l];\n                if (e.el.removed || e.paused) {\n                    continue;\n                }\n                var time = Now - e.start,\n                    ms = e.ms,\n                    easing = e.easing,\n                    from = e.from,\n                    diff = e.diff,\n                    to = e.to,\n                    t = e.t,\n                    that = e.el,\n                    set = {},\n                    now,\n                    init = {},\n                    key;\n                if (e.initstatus) {\n                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\n                    e.status = e.initstatus;\n                    delete e.initstatus;\n                    e.stop && animationElements.splice(l--, 1);\n                } else {\n                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\n                }\n                if (time < 0) {\n                    continue;\n                }\n                if (time < ms) {\n                    var pos = easing(time / ms);\n                    for (var attr in from) if (from[has](attr)) {\n                        switch (availableAnimAttrs[attr]) {\n                            case nu:\n                                now = +from[attr] + pos * ms * diff[attr];\n                                break;\n                            case "colour":\n                                now = "rgb(" + [\n                                    upto255(round(from[attr].r + pos * ms * diff[attr].r)),\n                                    upto255(round(from[attr].g + pos * ms * diff[attr].g)),\n                                    upto255(round(from[attr].b + pos * ms * diff[attr].b))\n                                ].join(",") + ")";\n                                break;\n                            case "path":\n                                now = [];\n                                for (var i = 0, ii = from[attr].length; i < ii; i++) {\n                                    now[i] = [from[attr][i][0]];\n                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                    }\n                                    now[i] = now[i].join(S);\n                                }\n                                now = now.join(S);\n                                break;\n                            case "transform":\n                                if (diff[attr].real) {\n                                    now = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                        }\n                                    }\n                                } else {\n                                    var get = function (i) {\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\n                                    };\n                                    // now = [["r", get(2), 0, 0], ["t", get(3), get(4)], ["s", get(0), get(1), 0, 0]];\n                                    now = [["m", get(0), get(1), get(2), get(3), get(4), get(5)]];\n                                }\n                                break;\n                            case "csv":\n                                if (attr == "clip-rect") {\n                                    now = [];\n                                    i = 4;\n                                    while (i--) {\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\n                                    }\n                                }\n                                break;\n                            default:\n                                var from2 = [][concat](from[attr]);\n                                now = [];\n                                i = that.paper.customAttributes[attr].length;\n                                while (i--) {\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\n                                }\n                                break;\n                        }\n                        set[attr] = now;\n                    }\n                    that.attr(set);\n                    (function (id, that, anim) {\n                        setTimeout(function () {\n                            eve("raphael.anim.frame." + id, that, anim);\n                        });\n                    })(that.id, that, e.anim);\n                } else {\n                    (function(f, el, a) {\n                        setTimeout(function() {\n                            eve("raphael.anim.frame." + el.id, el, a);\n                            eve("raphael.anim.finish." + el.id, el, a);\n                            R.is(f, "function") && f.call(el);\n                        });\n                    })(e.callback, that, e.anim);\n                    that.attr(to);\n                    animationElements.splice(l--, 1);\n                    if (e.repeat > 1 && !e.next) {\n                        for (key in to) if (to[has](key)) {\n                            init[key] = e.totalOrigin[key];\n                        }\n                        e.el.attr(init);\n                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\n                    }\n                    if (e.next && !e.stop) {\n                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\n                    }\n                }\n            }\n            animationElements.length && requestAnimFrame(animation);\n        },\n        upto255 = function (color) {\n            return color > 255 ? 255 : color < 0 ? 0 : color;\n        };\n    /*\\\n     * Element.animateWith\n     [ method ]\n     **\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\n     **\n     > Parameters\n     **\n     - el (object) element to sync with\n     - anim (object) animation to sync with\n     - params (object) #optional final attributes for the element, see also @Element.attr\n     - ms (number) #optional number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - element (object) element to sync with\n     - anim (object) animation to sync with\n     - animation (object) #optional animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animateWith = function (el, anim, params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\n            x, y;\n        runAnimation(a, element, a.percents[0], null, element.attr());\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\n            if (animationElements[i].anim == anim && animationElements[i].el == el) {\n                animationElements[ii - 1].start = animationElements[i].start;\n                break;\n            }\n        }\n        return element;\n        //\n        //\n        // var a = params ? R.animation(params, ms, easing, callback) : anim,\n        //     status = element.status(anim);\n        // return this.animate(a).status(a, status * anim.ms / a.ms);\n    };\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n        var cx = 3 * p1x,\n            bx = 3 * (p2x - p1x) - cx,\n            ax = 1 - cx - bx,\n            cy = 3 * p1y,\n            by = 3 * (p2y - p1y) - cy,\n            ay = 1 - cy - by;\n        function sampleCurveX(t) {\n            return ((ax * t + bx) * t + cx) * t;\n        }\n        function solve(x, epsilon) {\n            var t = solveCurveX(x, epsilon);\n            return ((ay * t + by) * t + cy) * t;\n        }\n        function solveCurveX(x, epsilon) {\n            var t0, t1, t2, x2, d2, i;\n            for(t2 = x, i = 0; i < 8; i++) {\n                x2 = sampleCurveX(t2) - x;\n                if (abs(x2) < epsilon) {\n                    return t2;\n                }\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\n                if (abs(d2) < 1e-6) {\n                    break;\n                }\n                t2 = t2 - x2 / d2;\n            }\n            t0 = 0;\n            t1 = 1;\n            t2 = x;\n            if (t2 < t0) {\n                return t0;\n            }\n            if (t2 > t1) {\n                return t1;\n            }\n            while (t0 < t1) {\n                x2 = sampleCurveX(t2);\n                if (abs(x2 - x) < epsilon) {\n                    return t2;\n                }\n                if (x > x2) {\n                    t0 = t2;\n                } else {\n                    t1 = t2;\n                }\n                t2 = (t1 - t0) / 2 + t0;\n            }\n            return t2;\n        }\n        return solve(t, 1 / (200 * duration));\n    }\n    elproto.onAnimation = function (f) {\n        f ? eve.on("raphael.anim.frame." + this.id, f) : eve.unbind("raphael.anim.frame." + this.id);\n        return this;\n    };\n    function Animation(anim, ms) {\n        var percents = [],\n            newAnim = {};\n        this.ms = ms;\n        this.times = 1;\n        if (anim) {\n            for (var attr in anim) if (anim[has](attr)) {\n                newAnim[toFloat(attr)] = anim[attr];\n                percents.push(toFloat(attr));\n            }\n            percents.sort(sortByNumber);\n        }\n        this.anim = newAnim;\n        this.top = percents[percents.length - 1];\n        this.percents = percents;\n    }\n    /*\\\n     * Animation.delay\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given delay.\n     **\n     > Parameters\n     **\n     - delay (number) number of ms to pass between animation start and actual animation\n     **\n     = (object) new altered Animation object\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\n     | circle1.animate(anim); // run the given animation immediately\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\n    \\*/\n    Animation.prototype.delay = function (delay) {\n        var a = new Animation(this.anim, this.ms);\n        a.times = this.times;\n        a.del = +delay || 0;\n        return a;\n    };\n    /*\\\n     * Animation.repeat\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given repetition.\n     **\n     > Parameters\n     **\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\n     **\n     = (object) new altered Animation object\n    \\*/\n    Animation.prototype.repeat = function (times) {\n        var a = new Animation(this.anim, this.ms);\n        a.del = this.del;\n        a.times = math.floor(mmax(times, 0)) || 1;\n        return a;\n    };\n    function runAnimation(anim, element, percent, status, totalOrigin, times) {\n        percent = toFloat(percent);\n        var params,\n            isInAnim,\n            isInAnimSet,\n            percents = [],\n            next,\n            prev,\n            timestamp,\n            ms = anim.ms,\n            from = {},\n            to = {},\n            diff = {};\n        if (status) {\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\n                var e = animationElements[i];\n                if (e.el.id == element.id && e.anim == anim) {\n                    if (e.percent != percent) {\n                        animationElements.splice(i, 1);\n                        isInAnimSet = 1;\n                    } else {\n                        isInAnim = e;\n                    }\n                    element.attr(e.totalOrigin);\n                    break;\n                }\n            }\n        } else {\n            status = +to; // NaN\n        }\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\n            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {\n                percent = anim.percents[i];\n                prev = anim.percents[i - 1] || 0;\n                ms = ms / anim.top * (percent - prev);\n                next = anim.percents[i + 1];\n                params = anim.anim[percent];\n                break;\n            } else if (status) {\n                element.attr(anim.anim[anim.percents[i]]);\n            }\n        }\n        if (!params) {\n            return;\n        }\n        if (!isInAnim) {\n            for (var attr in params) if (params[has](attr)) {\n                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {\n                    from[attr] = element.attr(attr);\n                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);\n                    to[attr] = params[attr];\n                    switch (availableAnimAttrs[attr]) {\n                        case nu:\n                            diff[attr] = (to[attr] - from[attr]) / ms;\n                            break;\n                        case "colour":\n                            from[attr] = R.getRGB(from[attr]);\n                            var toColour = R.getRGB(to[attr]);\n                            diff[attr] = {\n                                r: (toColour.r - from[attr].r) / ms,\n                                g: (toColour.g - from[attr].g) / ms,\n                                b: (toColour.b - from[attr].b) / ms\n                            };\n                            break;\n                        case "path":\n                            var pathes = path2curve(from[attr], to[attr]),\n                                toPath = pathes[1];\n                            from[attr] = pathes[0];\n                            diff[attr] = [];\n                            for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                diff[attr][i] = [0];\n                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\n                                }\n                            }\n                            break;\n                        case "transform":\n                            var _ = element._,\n                                eq = equaliseTransform(_[attr], to[attr]);\n                            if (eq) {\n                                from[attr] = eq.from;\n                                to[attr] = eq.to;\n                                diff[attr] = [];\n                                diff[attr].real = true;\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                    diff[attr][i] = [from[attr][i][0]];\n                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\n                                    }\n                                }\n                            } else {\n                                var m = (element.matrix || new Matrix),\n                                    to2 = {\n                                        _: {transform: _.transform},\n                                        getBBox: function () {\n                                            return element.getBBox(1);\n                                        }\n                                    };\n                                from[attr] = [\n                                    m.a,\n                                    m.b,\n                                    m.c,\n                                    m.d,\n                                    m.e,\n                                    m.f\n                                ];\n                                extractTransform(to2, to[attr]);\n                                to[attr] = to2._.transform;\n                                diff[attr] = [\n                                    (to2.matrix.a - m.a) / ms,\n                                    (to2.matrix.b - m.b) / ms,\n                                    (to2.matrix.c - m.c) / ms,\n                                    (to2.matrix.d - m.d) / ms,\n                                    (to2.matrix.e - m.e) / ms,\n                                    (to2.matrix.f - m.f) / ms\n                                ];\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\n                                // extractTransform(to2, to[attr]);\n                                // diff[attr] = [\n                                //     (to2._.sx - _.sx) / ms,\n                                //     (to2._.sy - _.sy) / ms,\n                                //     (to2._.deg - _.deg) / ms,\n                                //     (to2._.dx - _.dx) / ms,\n                                //     (to2._.dy - _.dy) / ms\n                                // ];\n                            }\n                            break;\n                        case "csv":\n                            var values = Str(params[attr])[split](separator),\n                                from2 = Str(from[attr])[split](separator);\n                            if (attr == "clip-rect") {\n                                from[attr] = from2;\n                                diff[attr] = [];\n                                i = from2.length;\n                                while (i--) {\n                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;\n                                }\n                            }\n                            to[attr] = values;\n                            break;\n                        default:\n                            values = [][concat](params[attr]);\n                            from2 = [][concat](from[attr]);\n                            diff[attr] = [];\n                            i = element.paper.customAttributes[attr].length;\n                            while (i--) {\n                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;\n                            }\n                            break;\n                    }\n                }\n            }\n            var easing = params.easing,\n                easyeasy = R.easing_formulas[easing];\n            if (!easyeasy) {\n                easyeasy = Str(easing).match(bezierrg);\n                if (easyeasy && easyeasy.length == 5) {\n                    var curve = easyeasy;\n                    easyeasy = function (t) {\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\n                    };\n                } else {\n                    easyeasy = pipe;\n                }\n            }\n            timestamp = params.start || anim.start || +new Date;\n            e = {\n                anim: anim,\n                percent: percent,\n                timestamp: timestamp,\n                start: timestamp + (anim.del || 0),\n                status: 0,\n                initstatus: status || 0,\n                stop: false,\n                ms: ms,\n                easing: easyeasy,\n                from: from,\n                diff: diff,\n                to: to,\n                el: element,\n                callback: params.callback,\n                prev: prev,\n                next: next,\n                repeat: times || anim.times,\n                origin: element.attr(),\n                totalOrigin: totalOrigin\n            };\n            animationElements.push(e);\n            if (status && !isInAnim && !isInAnimSet) {\n                e.stop = true;\n                e.start = new Date - ms * status;\n                if (animationElements.length == 1) {\n                    return animation();\n                }\n            }\n            if (isInAnimSet) {\n                e.start = new Date - e.ms * status;\n            }\n            animationElements.length == 1 && requestAnimFrame(animation);\n        } else {\n            isInAnim.initstatus = status;\n            isInAnim.start = new Date - isInAnim.ms * status;\n        }\n        eve("raphael.anim.start." + element.id, element, anim);\n    }\n    /*\\\n     * Raphael.animation\n     [ method ]\n     **\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\n     * See also @Animation.delay and @Animation.repeat methods.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     **\n     = (object) @Animation\n    \\*/\n    R.animation = function (params, ms, easing, callback) {\n        if (params instanceof Animation) {\n            return params;\n        }\n        if (R.is(easing, "function") || !easing) {\n            callback = callback || easing || null;\n            easing = null;\n        }\n        params = Object(params);\n        ms = +ms || 0;\n        var p = {},\n            json,\n            attr;\n        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + "%" != attr) {\n            json = true;\n            p[attr] = params[attr];\n        }\n        if (!json) {\n            // if percent-like syntax is used and end-of-all animation callback used\n            if(callback){\n                // find the last one\n                var lastKey = 0;\n                for(var i in params){\n                    var percent = toInt(i);\n                    if(params[has](i) && percent > lastKey){\n                        lastKey = percent;\n                    }\n                }\n                lastKey += \'%\';\n                // if already defined callback in the last keyframe, skip\n                !params[lastKey].callback && (params[lastKey].callback = callback);\n            }\n          return new Animation(params, ms);\n        } else {\n            easing && (p.easing = easing);\n            callback && (p.callback = callback);\n            return new Animation({100: p}, ms);\n        }\n    };\n    /*\\\n     * Element.animate\n     [ method ]\n     **\n     * Creates and starts animation for given element.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - animation (object) animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animate = function (params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\n        return element;\n    };\n    /*\\\n     * Element.setTime\n     [ method ]\n     **\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\n     **\n     > Parameters\n     **\n     - anim (object) animation object\n     - value (number) number of milliseconds from the beginning of the animation\n     **\n     = (object) original element if `value` is specified\n     * Note, that during animation following events are triggered:\n     *\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\n    \\*/\n    elproto.setTime = function (anim, value) {\n        if (anim && value != null) {\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\n        }\n        return this;\n    };\n    /*\\\n     * Element.status\n     [ method ]\n     **\n     * Gets or sets the status of animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - value (number) #optional 0  1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\n     **\n     = (number) status\n     * or\n     = (array) status if `anim` is not specified. Array of objects in format:\n     o {\n     o     anim: (object) animation object\n     o     status: (number) status\n     o }\n     * or\n     = (object) original element if `value` is specified\n    \\*/\n    elproto.status = function (anim, value) {\n        var out = [],\n            i = 0,\n            len,\n            e;\n        if (value != null) {\n            runAnimation(anim, this, -1, mmin(value, 1));\n            return this;\n        } else {\n            len = animationElements.length;\n            for (; i < len; i++) {\n                e = animationElements[i];\n                if (e.el.id == this.id && (!anim || e.anim == anim)) {\n                    if (anim) {\n                        return e.status;\n                    }\n                    out.push({\n                        anim: e.anim,\n                        status: e.status\n                    });\n                }\n            }\n            if (anim) {\n                return 0;\n            }\n            return out;\n        }\n    };\n    /*\\\n     * Element.pause\n     [ method ]\n     **\n     * Stops animation of the element with ability to resume it later on.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.pause = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            if (eve("raphael.anim.pause." + this.id, this, animationElements[i].anim) !== false) {\n                animationElements[i].paused = true;\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Element.resume\n     [ method ]\n     **\n     * Resumes animation if it was paused with @Element.pause method.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.resume = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            var e = animationElements[i];\n            if (eve("raphael.anim.resume." + this.id, this, e.anim) !== false) {\n                delete e.paused;\n                this.status(e.anim, e.status);\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Element.stop\n     [ method ]\n     **\n     * Stops animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     **\n     = (object) original element\n    \\*/\n    elproto.stop = function (anim) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\n            if (eve("raphael.anim.stop." + this.id, this, animationElements[i].anim) !== false) {\n                animationElements.splice(i--, 1);\n            }\n        }\n        return this;\n    };\n    function stopAnimation(paper) {\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {\n            animationElements.splice(i--, 1);\n        }\n    }\n    eve.on("raphael.remove", stopAnimation);\n    eve.on("raphael.clear", stopAnimation);\n    elproto.toString = function () {\n        return "Rapha\\xebl\\u2019s object";\n    };\n\n    // Set\n    var Set = function (items) {\n        this.items = [];\n        this.length = 0;\n        this.type = "set";\n        if (items) {\n            for (var i = 0, ii = items.length; i < ii; i++) {\n                if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\n                    this[this.items.length] = this.items[this.items.length] = items[i];\n                    this.length++;\n                }\n            }\n        }\n    },\n    setproto = Set.prototype;\n    /*\\\n     * Set.push\n     [ method ]\n     **\n     * Adds each argument to the current set.\n     = (object) original element\n    \\*/\n    setproto.push = function () {\n        var item,\n            len;\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\n            item = arguments[i];\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\n                len = this.items.length;\n                this[len] = this.items[len] = item;\n                this.length++;\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Set.pop\n     [ method ]\n     **\n     * Removes last element and returns it.\n     = (object) element\n    \\*/\n    setproto.pop = function () {\n        this.length && delete this[this.length--];\n        return this.items.pop();\n    };\n    /*\\\n     * Set.forEach\n     [ method ]\n     **\n     * Executes given function for each element in the set.\n     *\n     * If function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Set object\n    \\*/\n    setproto.forEach = function (callback, thisArg) {\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            if (callback.call(thisArg, this.items[i], i) === false) {\n                return this;\n            }\n        }\n        return this;\n    };\n    for (var method in elproto) if (elproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname][apply](el, arg);\n                });\n            };\n        })(method);\n    }\n    setproto.attr = function (name, value) {\n        if (name && R.is(name, array) && R.is(name[0], "object")) {\n            for (var j = 0, jj = name.length; j < jj; j++) {\n                this.items[j].attr(name[j]);\n            }\n        } else {\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\n                this.items[i].attr(name, value);\n            }\n        }\n        return this;\n    };\n    /*\\\n     * Set.clear\n     [ method ]\n     **\n     * Removes all elements from the set\n    \\*/\n    setproto.clear = function () {\n        while (this.length) {\n            this.pop();\n        }\n    };\n    /*\\\n     * Set.splice\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - index (number) position of the deletion\n     - count (number) number of element to remove\n     - insertion (object) #optional elements to insert\n     = (object) set elements that were deleted\n    \\*/\n    setproto.splice = function (index, count, insertion) {\n        index = index < 0 ? mmax(this.length + index, 0) : index;\n        count = mmax(0, mmin(this.length - index, count));\n        var tail = [],\n            todel = [],\n            args = [],\n            i;\n        for (i = 2; i < arguments.length; i++) {\n            args.push(arguments[i]);\n        }\n        for (i = 0; i < count; i++) {\n            todel.push(this[index + i]);\n        }\n        for (; i < this.length - index; i++) {\n            tail.push(this[index + i]);\n        }\n        var arglen = args.length;\n        for (i = 0; i < arglen + tail.length; i++) {\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\n        }\n        i = this.items.length = this.length -= count - arglen;\n        while (this[i]) {\n            delete this[i++];\n        }\n        return new Set(todel);\n    };\n    /*\\\n     * Set.exclude\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - element (object) element to remove\n     = (boolean) `true` if object was found & removed from the set\n    \\*/\n    setproto.exclude = function (el) {\n        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\n            this.splice(i, 1);\n            return true;\n        }\n    };\n    setproto.animate = function (params, ms, easing, callback) {\n        (R.is(easing, "function") || !easing) && (callback = easing || null);\n        var len = this.items.length,\n            i = len,\n            item,\n            set = this,\n            collector;\n        if (!len) {\n            return this;\n        }\n        callback && (collector = function () {\n            !--len && callback.call(set);\n        });\n        easing = R.is(easing, string) ? easing : collector;\n        var anim = R.animation(params, ms, easing, collector);\n        item = this.items[--i].animate(anim);\n        while (i--) {\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\n            (this.items[i] && !this.items[i].removed) || len--;\n        }\n        return this;\n    };\n    setproto.insertAfter = function (el) {\n        var i = this.items.length;\n        while (i--) {\n            this.items[i].insertAfter(el);\n        }\n        return this;\n    };\n    setproto.getBBox = function () {\n        var x = [],\n            y = [],\n            x2 = [],\n            y2 = [];\n        for (var i = this.items.length; i--;) if (!this.items[i].removed) {\n            var box = this.items[i].getBBox();\n            x.push(box.x);\n            y.push(box.y);\n            x2.push(box.x + box.width);\n            y2.push(box.y + box.height);\n        }\n        x = mmin[apply](0, x);\n        y = mmin[apply](0, y);\n        x2 = mmax[apply](0, x2);\n        y2 = mmax[apply](0, y2);\n        return {\n            x: x,\n            y: y,\n            x2: x2,\n            y2: y2,\n            width: x2 - x,\n            height: y2 - y\n        };\n    };\n    setproto.clone = function (s) {\n        s = this.paper.set();\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            s.push(this.items[i].clone());\n        }\n        return s;\n    };\n    setproto.toString = function () {\n        return "Rapha\\xebl\\u2018s set";\n    };\n\n    setproto.glow = function(glowConfig) {\n        var ret = this.paper.set();\n        this.forEach(function(shape, index){\n            var g = shape.glow(glowConfig);\n            if(g != null){\n                g.forEach(function(shape2, index2){\n                    ret.push(shape2);\n                });\n            }\n        });\n        return ret;\n    };\n\n\n    /*\\\n     * Set.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this sets elements\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point is inside any of the set\'s elements\n     \\*/\n    setproto.isPointInside = function (x, y) {\n        var isPointInside = false;\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                isPointInside = true;\n                return false; // stop loop\n            }\n        });\n        return isPointInside;\n    };\n\n    /*\\\n     * Raphael.registerFont\n     [ method ]\n     **\n     * Adds given font to the registered set of fonts for Raphal. Should be used as an internal call from within Cufns font file.\n     * Returns original parameter, so it could be used with chaining.\n     # <a href="http://wiki.github.com/sorccu/cufon/about">More about Cufn and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\n     **\n     > Parameters\n     **\n     - font (object) the font to register\n     = (object) the font you passed in\n     > Usage\n     | Cufon.registerFont(Raphael.registerFont({}));\n    \\*/\n    R.registerFont = function (font) {\n        if (!font.face) {\n            return font;\n        }\n        this.fonts = this.fonts || {};\n        var fontcopy = {\n                w: font.w,\n                face: {},\n                glyphs: {}\n            },\n            family = font.face["font-family"];\n        for (var prop in font.face) if (font.face[has](prop)) {\n            fontcopy.face[prop] = font.face[prop];\n        }\n        if (this.fonts[family]) {\n            this.fonts[family].push(fontcopy);\n        } else {\n            this.fonts[family] = [fontcopy];\n        }\n        if (!font.svg) {\n            fontcopy.face["units-per-em"] = toInt(font.face["units-per-em"], 10);\n            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {\n                var path = font.glyphs[glyph];\n                fontcopy.glyphs[glyph] = {\n                    w: path.w,\n                    k: {},\n                    d: path.d && "M" + path.d.replace(/[mlcxtrv]/g, function (command) {\n                            return {l: "L", c: "C", x: "z", t: "m", r: "l", v: "c"}[command] || "M";\n                        }) + "z"\n                };\n                if (path.k) {\n                    for (var k in path.k) if (path[has](k)) {\n                        fontcopy.glyphs[glyph].k[k] = path.k[k];\n                    }\n                }\n            }\n        }\n        return font;\n    };\n    /*\\\n     * Paper.getFont\n     [ method ]\n     **\n     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like Myriad for Myriad Pro.\n     **\n     > Parameters\n     **\n     - family (string) font family name or any word from it\n     - weight (string) #optional font weight\n     - style (string) #optional font style\n     - stretch (string) #optional font stretch\n     = (object) the font object\n     > Usage\n     | paper.print(100, 100, "Test string", paper.getFont("Times", 800), 30);\n    \\*/\n    paperproto.getFont = function (family, weight, style, stretch) {\n        stretch = stretch || "normal";\n        style = style || "normal";\n        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;\n        if (!R.fonts) {\n            return;\n        }\n        var font = R.fonts[family];\n        if (!font) {\n            var name = new RegExp("(^|\\\\s)" + family.replace(/[^\\w\\d\\s+!~.:_-]/g, E) + "(\\\\s|$)", "i");\n            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {\n                if (name.test(fontName)) {\n                    font = R.fonts[fontName];\n                    break;\n                }\n            }\n        }\n        var thefont;\n        if (font) {\n            for (var i = 0, ii = font.length; i < ii; i++) {\n                thefont = font[i];\n                if (thefont.face["font-weight"] == weight && (thefont.face["font-style"] == style || !thefont.face["font-style"]) && thefont.face["font-stretch"] == stretch) {\n                    break;\n                }\n            }\n        }\n        return thefont;\n    };\n    /*\\\n     * Paper.print\n     [ method ]\n     **\n     * Creates path that represent given text written using given font at given position with given size.\n     * Result of the method is path element that contains whole text as a separate path.\n     **\n     > Parameters\n     **\n     - x (number) x position of the text\n     - y (number) y position of the text\n     - string (string) text to print\n     - font (object) font object, see @Paper.getFont\n     - size (number) #optional size of the font, default is `16`\n     - origin (string) #optional could be `"baseline"` or `"middle"`, default is `"middle"`\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\n     - line_spacing (number) #optional number in range `1..3`, default is `1`\n     = (object) resulting path element, which consist of all letters\n     > Usage\n     | var txt = r.print(10, 50, "print", r.getFont("Museo"), 30).attr({fill: "#fff"});\n    \\*/\n    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {\n        origin = origin || "middle"; // baseline|middle\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\n        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);\n        var letters = Str(string)[split](E),\n            shift = 0,\n            notfirst = 0,\n            path = E,\n            scale;\n        R.is(font, "string") && (font = this.getFont(font));\n        if (font) {\n            scale = (size || 16) / font.face["units-per-em"];\n            var bb = font.face.bbox[split](separator),\n                top = +bb[0],\n                lineHeight = bb[3] - bb[1],\n                shifty = 0,\n                height = +bb[1] + (origin == "baseline" ? lineHeight + (+font.face.descent) : lineHeight / 2);\n            for (var i = 0, ii = letters.length; i < ii; i++) {\n                if (letters[i] == "\\n") {\n                    shift = 0;\n                    curr = 0;\n                    notfirst = 0;\n                    shifty += lineHeight * line_spacing;\n                } else {\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\n                        curr = font.glyphs[letters[i]];\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\n                    notfirst = 1;\n                }\n                if (curr && curr.d) {\n                    path += R.transformPath(curr.d, ["t", shift * scale, shifty * scale, "s", scale, scale, top, height, "t", (x - top) / scale, (y - height) / scale]);\n                }\n            }\n        }\n        return this.path(path).attr({\n            fill: "#000",\n            stroke: "none"\n        });\n    };\n\n    /*\\\n     * Paper.add\n     [ method ]\n     **\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\n     **\n     > Parameters\n     **\n     - json (array)\n     = (object) resulting set of imported elements\n     > Usage\n     | paper.add([\n     |     {\n     |         type: "circle",\n     |         cx: 10,\n     |         cy: 10,\n     |         r: 5\n     |     },\n     |     {\n     |         type: "rect",\n     |         x: 10,\n     |         y: 10,\n     |         width: 10,\n     |         height: 10,\n     |         fill: "#fc0"\n     |     }\n     | ]);\n    \\*/\n    paperproto.add = function (json) {\n        if (R.is(json, "array")) {\n            var res = this.set(),\n                i = 0,\n                ii = json.length,\n                j;\n            for (; i < ii; i++) {\n                j = json[i] || {};\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\n            }\n        }\n        return res;\n    };\n\n    /*\\\n     * Raphael.format\n     [ method ]\n     **\n     * Simple format function. Replaces construction of type `{<number>}` to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     -  (string) rest of arguments will be treated as parameters for replacement\n     = (string) formated string\n     > Usage\n     | var x = 10,\n     |     y = 20,\n     |     width = 40,\n     |     height = 50;\n     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"\n     | paper.path(Raphael.format("M{0},{1}h{2}v{3}h{4}z", x, y, width, height, -width));\n    \\*/\n    R.format = function (token, params) {\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\n        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {\n            return args[++i] == null ? E : args[i];\n        }));\n        return token || E;\n    };\n    /*\\\n     * Raphael.fullfill\n     [ method ]\n     **\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type `{<name>}` to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - json (object) object which properties will be used as a replacement\n     = (string) formated string\n     > Usage\n     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"\n     | paper.path(Raphael.fullfill("M{x},{y}h{dim.width}v{dim.height}h{dim[\'negative width\']}z", {\n     |     x: 10,\n     |     y: 20,\n     |     dim: {\n     |         width: 40,\n     |         height: 50,\n     |         "negative width": -40\n     |     }\n     | }));\n    \\*/\n    R.fullfill = (function () {\n        var tokenRegex = /\\{([^\\}]+)\\}/g,\n            objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[(\'|")(.+?)\\2\\])(\\(\\))?/g, // matches .xxxxx or ["xxxxx"] to run over object properties\n            replacer = function (all, key, obj) {\n                var res = obj;\n                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\n                    name = name || quotedName;\n                    if (res) {\n                        if (name in res) {\n                            res = res[name];\n                        }\n                        typeof res == "function" && isFunc && (res = res());\n                    }\n                });\n                res = (res == null || res == obj ? all : res) + "";\n                return res;\n            };\n        return function (str, obj) {\n            return String(str).replace(tokenRegex, function (all, key) {\n                return replacer(all, key, obj);\n            });\n        };\n    })();\n    /*\\\n     * Raphael.ninja\n     [ method ]\n     **\n     * If you want to leave no trace of Raphal (Well, Raphal creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.\n     **\n     = (object) Raphael object\n     > Usage\n     | (function (local_raphael) {\n     |     var paper = local_raphael(10, 10, 320, 200);\n     |     \n     | })(Raphael.ninja());\n    \\*/\n    R.ninja = function () {\n        if (oldRaphael.was) {\n            g.win.Raphael = oldRaphael.is;\n        } else {\n            // IE8 raises an error when deleting window property\n            window.Raphael = undefined;\n            try {\n                delete window.Raphael;\n            } catch(e) {}\n        }\n        return R;\n    };\n    /*\\\n     * Raphael.st\n     [ property (object) ]\n     **\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\n     * you added, so you will be able to call the same method on sets too.\n     **\n     * See also @Raphael.el.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: "#f00"});\n     | };\n     | Raphael.st.red = function () {\n     |     this.forEach(function (el) {\n     |         el.red();\n     |     });\n     | };\n     | // then use it\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\n    \\*/\n    R.st = setproto;\n\n    eve.on("raphael.DOMload", function () {\n        loaded = true;\n    });\n\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n    (function (doc, loaded, f) {\n        if (doc.readyState == null && doc.addEventListener){\n            doc.addEventListener(loaded, f = function () {\n                doc.removeEventListener(loaded, f, false);\n                doc.readyState = "complete";\n            }, false);\n            doc.readyState = "loading";\n        }\n        function isLoaded() {\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve("raphael.DOMload");\n        }\n        isLoaded();\n    })(document, "DOMContentLoaded");\n\n    return R;\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5jb3JlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmFwaGFlbC8uL2Rldi9yYXBoYWVsLmNvcmUuanM/OTRkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoW1wiZXZlXCJdLCBmdW5jdGlvbihldmUpIHtcblxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGEgY2FudmFzIG9iamVjdCBvbiB3aGljaCB0byBkcmF3LlxuICAgICAqIFlvdSBtdXN0IGRvIHRoaXMgZmlyc3QsIGFzIGFsbCBmdXR1cmUgY2FsbHMgdG8gZHJhd2luZyBtZXRob2RzXG4gICAgICogZnJvbSB0aGlzIGluc3RhbmNlIHdpbGwgYmUgYm91bmQgdG8gdGhpcyBjYW52YXMuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGNvbnRhaW5lciAoSFRNTEVsZW1lbnR8c3RyaW5nKSBET00gZWxlbWVudCBvciBpdHMgSUQgd2hpY2ggaXMgZ29pbmcgdG8gYmUgYSBwYXJlbnQgZm9yIGRyYXdpbmcgc3VyZmFjZVxuICAgICAtIHdpZHRoIChudW1iZXIpXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggaXMgZ29pbmcgdG8gYmUgZXhlY3V0ZWQgaW4gdGhlIGNvbnRleHQgb2YgbmV3bHkgY3JlYXRlZCBwYXBlclxuICAgICAqIG9yXG4gICAgIC0geCAobnVtYmVyKVxuICAgICAtIHkgKG51bWJlcilcbiAgICAgLSB3aWR0aCAobnVtYmVyKVxuICAgICAtIGhlaWdodCAobnVtYmVyKVxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBjb250ZXh0IG9mIG5ld2x5IGNyZWF0ZWQgcGFwZXJcbiAgICAgKiBvclxuICAgICAtIGFsbCAoYXJyYXkpIChmaXJzdCAzIG9yIDQgZWxlbWVudHMgaW4gdGhlIGFycmF5IGFyZSBlcXVhbCB0byBbY29udGFpbmVySUQsIHdpZHRoLCBoZWlnaHRdIG9yIFt4LCB5LCB3aWR0aCwgaGVpZ2h0XS4gVGhlIHJlc3QgYXJlIGVsZW1lbnQgZGVzY3JpcHRpb25zIGluIGZvcm1hdCB7dHlwZTogdHlwZSwgPGF0dHJpYnV0ZXM+fSkuIFNlZSBAUGFwZXIuYWRkLlxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgI29wdGlvbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdoaWNoIGlzIGdvaW5nIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBjb250ZXh0IG9mIG5ld2x5IGNyZWF0ZWQgcGFwZXJcbiAgICAgKiBvclxuICAgICAtIG9uUmVhZHlDYWxsYmFjayAoZnVuY3Rpb24pIGZ1bmN0aW9uIHRoYXQgaXMgZ29pbmcgdG8gYmUgY2FsbGVkIG9uIERPTSByZWFkeSBldmVudC4gWW91IGNhbiBhbHNvIHN1YnNjcmliZSB0byB0aGlzIGV2ZW50IHZpYSBFdmXigJlzIOKAnERPTUxvYWTigJ0gZXZlbnQuIEluIHRoaXMgY2FzZSBtZXRob2QgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAgICAgPSAob2JqZWN0KSBAUGFwZXJcbiAgICAgPiBVc2FnZVxuICAgICB8IC8vIEVhY2ggb2YgdGhlIGZvbGxvd2luZyBleGFtcGxlcyBjcmVhdGUgYSBjYW52YXNcbiAgICAgfCAvLyB0aGF0IGlzIDMyMHB4IHdpZGUgYnkgMjAwcHggaGlnaC5cbiAgICAgfCAvLyBDYW52YXMgaXMgY3JlYXRlZCBhdCB0aGUgdmlld3BvcnTigJlzIDEwLDUwIGNvb3JkaW5hdGUuXG4gICAgIHwgdmFyIHBhcGVyID0gUmFwaGFlbCgxMCwgNTAsIDMyMCwgMjAwKTtcbiAgICAgfCAvLyBDYW52YXMgaXMgY3JlYXRlZCBhdCB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSAjbm90ZXBhZCBlbGVtZW50XG4gICAgIHwgLy8gKG9yIGl0cyB0b3AgcmlnaHQgY29ybmVyIGluIGRpcj1cInJ0bFwiIGVsZW1lbnRzKVxuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub3RlcGFkXCIpLCAzMjAsIDIwMCk7XG4gICAgIHwgLy8gU2FtZSBhcyBhYm92ZVxuICAgICB8IHZhciBwYXBlciA9IFJhcGhhZWwoXCJub3RlcGFkXCIsIDMyMCwgMjAwKTtcbiAgICAgfCAvLyBJbWFnZSBkdW1wXG4gICAgIHwgdmFyIHNldCA9IFJhcGhhZWwoW1wibm90ZXBhZFwiLCAzMjAsIDIwMCwge1xuICAgICB8ICAgICB0eXBlOiBcInJlY3RcIixcbiAgICAgfCAgICAgeDogMTAsXG4gICAgIHwgICAgIHk6IDEwLFxuICAgICB8ICAgICB3aWR0aDogMjUsXG4gICAgIHwgICAgIGhlaWdodDogMjUsXG4gICAgIHwgICAgIHN0cm9rZTogXCIjZjAwXCJcbiAgICAgfCB9LCB7XG4gICAgIHwgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICB8ICAgICB4OiAzMCxcbiAgICAgfCAgICAgeTogNDAsXG4gICAgIHwgICAgIHRleHQ6IFwiRHVtcFwiXG4gICAgIHwgfV0pO1xuICAgIFxcKi9cbiAgICBmdW5jdGlvbiBSKGZpcnN0KSB7XG4gICAgICAgIGlmIChSLmlzKGZpcnN0LCBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVkID8gZmlyc3QoKSA6IGV2ZS5vbihcInJhcGhhZWwuRE9NbG9hZFwiLCBmaXJzdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoUi5pcyhmaXJzdCwgYXJyYXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gUi5fZW5naW5lLmNyZWF0ZVthcHBseV0oUiwgZmlyc3Quc3BsaWNlKDAsIDMgKyBSLmlzKGZpcnN0WzBdLCBudSkpKS5hZGQoZmlyc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICAgICAgaWYgKFIuaXMoYXJnc1thcmdzLmxlbmd0aCAtIDFdLCBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhcmdzLnBvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkZWQgPyBmLmNhbGwoUi5fZW5naW5lLmNyZWF0ZVthcHBseV0oUiwgYXJncykpIDogZXZlLm9uKFwicmFwaGFlbC5ET01sb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZi5jYWxsKFIuX2VuZ2luZS5jcmVhdGVbYXBwbHldKFIsIGFyZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFIuX2VuZ2luZS5jcmVhdGVbYXBwbHldKFIsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgUi52ZXJzaW9uID0gXCIyLjIuMFwiO1xuICAgIFIuZXZlID0gZXZlO1xuICAgIHZhciBsb2FkZWQsXG4gICAgICAgIHNlcGFyYXRvciA9IC9bLCBdKy8sXG4gICAgICAgIGVsZW1lbnRzID0ge2NpcmNsZTogMSwgcmVjdDogMSwgcGF0aDogMSwgZWxsaXBzZTogMSwgdGV4dDogMSwgaW1hZ2U6IDF9LFxuICAgICAgICBmb3JtYXRyZyA9IC9cXHsoXFxkKylcXH0vZyxcbiAgICAgICAgcHJvdG8gPSBcInByb3RvdHlwZVwiLFxuICAgICAgICBoYXMgPSBcImhhc093blByb3BlcnR5XCIsXG4gICAgICAgIGcgPSB7XG4gICAgICAgICAgICBkb2M6IGRvY3VtZW50LFxuICAgICAgICAgICAgd2luOiB3aW5kb3dcbiAgICAgICAgfSxcbiAgICAgICAgb2xkUmFwaGFlbCA9IHtcbiAgICAgICAgICAgIHdhczogT2JqZWN0LnByb3RvdHlwZVtoYXNdLmNhbGwoZy53aW4sIFwiUmFwaGFlbFwiKSxcbiAgICAgICAgICAgIGlzOiBnLndpbi5SYXBoYWVsXG4gICAgICAgIH0sXG4gICAgICAgIFBhcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLypcXFxuICAgICAgICAgICAgICogUGFwZXIuY2FcbiAgICAgICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICAgICAqKlxuICAgICAgICAgICAgICogU2hvcnRjdXQgZm9yIEBQYXBlci5jdXN0b21BdHRyaWJ1dGVzXG4gICAgICAgICAgICBcXCovXG4gICAgICAgICAgICAvKlxcXG4gICAgICAgICAgICAgKiBQYXBlci5jdXN0b21BdHRyaWJ1dGVzXG4gICAgICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAgICAgKipcbiAgICAgICAgICAgICAqIElmIHlvdSBoYXZlIGEgc2V0IG9mIGF0dHJpYnV0ZXMgdGhhdCB5b3Ugd291bGQgbGlrZSB0byByZXByZXNlbnRcbiAgICAgICAgICAgICAqIGFzIGEgZnVuY3Rpb24gb2Ygc29tZSBudW1iZXIgeW91IGNhbiBkbyBpdCBlYXNpbHkgd2l0aCBjdXN0b20gYXR0cmlidXRlczpcbiAgICAgICAgICAgICA+IFVzYWdlXG4gICAgICAgICAgICAgfCBwYXBlci5jdXN0b21BdHRyaWJ1dGVzLmh1ZSA9IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgICB8ICAgICBudW0gPSBudW0gJSAxO1xuICAgICAgICAgICAgIHwgICAgIHJldHVybiB7ZmlsbDogXCJoc2IoXCIgKyBudW0gKyBcIiwgMC43NSwgMSlcIn07XG4gICAgICAgICAgICAgfCB9O1xuICAgICAgICAgICAgIHwgLy8gQ3VzdG9tIGF0dHJpYnV0ZSDigJxodWXigJ0gd2lsbCBjaGFuZ2UgZmlsbFxuICAgICAgICAgICAgIHwgLy8gdG8gYmUgZ2l2ZW4gaHVlIHdpdGggZml4ZWQgc2F0dXJhdGlvbiBhbmQgYnJpZ2h0bmVzcy5cbiAgICAgICAgICAgICB8IC8vIE5vdyB5b3UgY2FuIHVzZSBpdCBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgfCB2YXIgYyA9IHBhcGVyLmNpcmNsZSgxMCwgMTAsIDEwKS5hdHRyKHtodWU6IC40NX0pO1xuICAgICAgICAgICAgIHwgLy8gb3IgZXZlbiBsaWtlIHRoaXM6XG4gICAgICAgICAgICAgfCBjLmFuaW1hdGUoe2h1ZTogMX0sIDFlMyk7XG4gICAgICAgICAgICAgfFxuICAgICAgICAgICAgIHwgLy8gWW91IGNvdWxkIGFsc28gY3JlYXRlIGN1c3RvbSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICB8IC8vIHdpdGggbXVsdGlwbGUgcGFyYW1ldGVyczpcbiAgICAgICAgICAgICB8IHBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMuaHNiID0gZnVuY3Rpb24gKGgsIHMsIGIpIHtcbiAgICAgICAgICAgICB8ICAgICByZXR1cm4ge2ZpbGw6IFwiaHNiKFwiICsgW2gsIHMsIGJdLmpvaW4oXCIsXCIpICsgXCIpXCJ9O1xuICAgICAgICAgICAgIHwgfTtcbiAgICAgICAgICAgICB8IGMuYXR0cih7aHNiOiBcIjAuNSAuOCAxXCJ9KTtcbiAgICAgICAgICAgICB8IGMuYW5pbWF0ZSh7aHNiOiBbMSwgMCwgMC41XX0sIDFlMyk7XG4gICAgICAgICAgICBcXCovXG4gICAgICAgICAgICB0aGlzLmNhID0gdGhpcy5jdXN0b21BdHRyaWJ1dGVzID0ge307XG4gICAgICAgIH0sXG4gICAgICAgIHBhcGVycHJvdG8sXG4gICAgICAgIGFwcGVuZENoaWxkID0gXCJhcHBlbmRDaGlsZFwiLFxuICAgICAgICBhcHBseSA9IFwiYXBwbHlcIixcbiAgICAgICAgY29uY2F0ID0gXCJjb25jYXRcIixcbiAgICAgICAgc3VwcG9ydHNUb3VjaCA9ICgnb250b3VjaHN0YXJ0JyBpbiBnLndpbikgfHwgZy53aW4uRG9jdW1lbnRUb3VjaCAmJiBnLmRvYyBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gsIC8vdGFrZW4gZnJvbSBNb2Rlcm5penIgdG91Y2ggdGVzdFxuICAgICAgICBFID0gXCJcIixcbiAgICAgICAgUyA9IFwiIFwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHNwbGl0ID0gXCJzcGxpdFwiLFxuICAgICAgICBldmVudHMgPSBcImNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZW1vdmUgbW91c2VvdXQgbW91c2VvdmVyIG1vdXNldXAgdG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIltzcGxpdF0oUyksXG4gICAgICAgIHRvdWNoTWFwID0ge1xuICAgICAgICAgICAgbW91c2Vkb3duOiBcInRvdWNoc3RhcnRcIixcbiAgICAgICAgICAgIG1vdXNlbW92ZTogXCJ0b3VjaG1vdmVcIixcbiAgICAgICAgICAgIG1vdXNldXA6IFwidG91Y2hlbmRcIlxuICAgICAgICB9LFxuICAgICAgICBsb3dlckNhc2UgPSBTdHIucHJvdG90eXBlLnRvTG93ZXJDYXNlLFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgbW1heCA9IG1hdGgubWF4LFxuICAgICAgICBtbWluID0gbWF0aC5taW4sXG4gICAgICAgIGFicyA9IG1hdGguYWJzLFxuICAgICAgICBwb3cgPSBtYXRoLnBvdyxcbiAgICAgICAgUEkgPSBtYXRoLlBJLFxuICAgICAgICBudSA9IFwibnVtYmVyXCIsXG4gICAgICAgIHN0cmluZyA9IFwic3RyaW5nXCIsXG4gICAgICAgIGFycmF5ID0gXCJhcnJheVwiLFxuICAgICAgICB0b1N0cmluZyA9IFwidG9TdHJpbmdcIixcbiAgICAgICAgZmlsbFN0cmluZyA9IFwiZmlsbFwiLFxuICAgICAgICBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgICAgIHBhcGVyID0ge30sXG4gICAgICAgIHB1c2ggPSBcInB1c2hcIixcbiAgICAgICAgSVNVUkwgPSBSLl9JU1VSTCA9IC9edXJsXFwoWydcIl0/KC4rPylbJ1wiXT9cXCkkL2ksXG4gICAgICAgIGNvbG91clJlZ0V4cCA9IC9eXFxzKigoI1thLWZcXGRdezZ9KXwoI1thLWZcXGRdezN9KXxyZ2JhP1xcKFxccyooW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSslP1xccyosXFxzKltcXGRcXC5dKyU/KD86XFxzKixcXHMqW1xcZFxcLl0rJT8pPylcXHMqXFwpfGhzYmE/XFwoXFxzKihbXFxkXFwuXSsoPzpkZWd8XFx4YjB8JSk/XFxzKixcXHMqW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSsoPzolP1xccyosXFxzKltcXGRcXC5dKyk/KSU/XFxzKlxcKXxoc2xhP1xcKFxccyooW1xcZFxcLl0rKD86ZGVnfFxceGIwfCUpP1xccyosXFxzKltcXGRcXC5dKyU/XFxzKixcXHMqW1xcZFxcLl0rKD86JT9cXHMqLFxccypbXFxkXFwuXSspPyklP1xccypcXCkpXFxzKiQvaSxcbiAgICAgICAgaXNuYW4gPSB7XCJOYU5cIjogMSwgXCJJbmZpbml0eVwiOiAxLCBcIi1JbmZpbml0eVwiOiAxfSxcbiAgICAgICAgYmV6aWVycmcgPSAvXig/OmN1YmljLSk/YmV6aWVyXFwoKFteLF0rKSwoW14sXSspLChbXixdKyksKFteXFwpXSspXFwpLyxcbiAgICAgICAgcm91bmQgPSBtYXRoLnJvdW5kLFxuICAgICAgICBzZXRBdHRyaWJ1dGUgPSBcInNldEF0dHJpYnV0ZVwiLFxuICAgICAgICB0b0Zsb2F0ID0gcGFyc2VGbG9hdCxcbiAgICAgICAgdG9JbnQgPSBwYXJzZUludCxcbiAgICAgICAgdXBwZXJDYXNlID0gU3RyLnByb3RvdHlwZS50b1VwcGVyQ2FzZSxcbiAgICAgICAgYXZhaWxhYmxlQXR0cnMgPSBSLl9hdmFpbGFibGVBdHRycyA9IHtcbiAgICAgICAgICAgIFwiYXJyb3ctZW5kXCI6IFwibm9uZVwiLFxuICAgICAgICAgICAgXCJhcnJvdy1zdGFydFwiOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGJsdXI6IDAsXG4gICAgICAgICAgICBcImNsaXAtcmVjdFwiOiBcIjAgMCAxZTkgMWU5XCIsXG4gICAgICAgICAgICBjdXJzb3I6IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgY3g6IDAsXG4gICAgICAgICAgICBjeTogMCxcbiAgICAgICAgICAgIGZpbGw6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogMSxcbiAgICAgICAgICAgIGZvbnQ6ICcxMHB4IFwiQXJpYWxcIicsXG4gICAgICAgICAgICBcImZvbnQtZmFtaWx5XCI6ICdcIkFyaWFsXCInLFxuICAgICAgICAgICAgXCJmb250LXNpemVcIjogXCIxMFwiLFxuICAgICAgICAgICAgXCJmb250LXN0eWxlXCI6IFwibm9ybWFsXCIsXG4gICAgICAgICAgICBcImZvbnQtd2VpZ2h0XCI6IDQwMCxcbiAgICAgICAgICAgIGdyYWRpZW50OiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgaHJlZjogXCJodHRwOi8vcmFwaGFlbGpzLmNvbS9cIixcbiAgICAgICAgICAgIFwibGV0dGVyLXNwYWNpbmdcIjogMCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBwYXRoOiBcIk0wLDBcIixcbiAgICAgICAgICAgIHI6IDAsXG4gICAgICAgICAgICByeDogMCxcbiAgICAgICAgICAgIHJ5OiAwLFxuICAgICAgICAgICAgc3JjOiBcIlwiLFxuICAgICAgICAgICAgc3Ryb2tlOiBcIiMwMDBcIixcbiAgICAgICAgICAgIFwic3Ryb2tlLWRhc2hhcnJheVwiOiBcIlwiLFxuICAgICAgICAgICAgXCJzdHJva2UtbGluZWNhcFwiOiBcImJ1dHRcIixcbiAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVqb2luXCI6IFwiYnV0dFwiLFxuICAgICAgICAgICAgXCJzdHJva2UtbWl0ZXJsaW1pdFwiOiAwLFxuICAgICAgICAgICAgXCJzdHJva2Utb3BhY2l0eVwiOiAxLFxuICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogMSxcbiAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcbiAgICAgICAgICAgIFwidGV4dC1hbmNob3JcIjogXCJtaWRkbGVcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIlJhcGhhZWxcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJcIixcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgYXZhaWxhYmxlQW5pbUF0dHJzID0gUi5fYXZhaWxhYmxlQW5pbUF0dHJzID0ge1xuICAgICAgICAgICAgYmx1cjogbnUsXG4gICAgICAgICAgICBcImNsaXAtcmVjdFwiOiBcImNzdlwiLFxuICAgICAgICAgICAgY3g6IG51LFxuICAgICAgICAgICAgY3k6IG51LFxuICAgICAgICAgICAgZmlsbDogXCJjb2xvdXJcIixcbiAgICAgICAgICAgIFwiZmlsbC1vcGFjaXR5XCI6IG51LFxuICAgICAgICAgICAgXCJmb250LXNpemVcIjogbnUsXG4gICAgICAgICAgICBoZWlnaHQ6IG51LFxuICAgICAgICAgICAgb3BhY2l0eTogbnUsXG4gICAgICAgICAgICBwYXRoOiBcInBhdGhcIixcbiAgICAgICAgICAgIHI6IG51LFxuICAgICAgICAgICAgcng6IG51LFxuICAgICAgICAgICAgcnk6IG51LFxuICAgICAgICAgICAgc3Ryb2tlOiBcImNvbG91clwiLFxuICAgICAgICAgICAgXCJzdHJva2Utb3BhY2l0eVwiOiBudSxcbiAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IG51LFxuICAgICAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgd2lkdGg6IG51LFxuICAgICAgICAgICAgeDogbnUsXG4gICAgICAgICAgICB5OiBudVxuICAgICAgICB9LFxuICAgICAgICB3aGl0ZXNwYWNlID0gL1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0vZyxcbiAgICAgICAgY29tbWFTcGFjZXMgPSAvW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSovLFxuICAgICAgICBoc3JnID0ge2hzOiAxLCByZzogMX0sXG4gICAgICAgIHAycyA9IC8sPyhbYWNobG1xcnN0dnh6XSksPy9naSxcbiAgICAgICAgcGF0aENvbW1hbmQgPSAvKFthY2hsbXJxc3R2el0pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5LF0qKCgtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qKSspL2lnLFxuICAgICAgICB0Q29tbWFuZCA9IC8oW3JzdG1dKVtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOSxdKigoLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLD9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKikrKS9pZyxcbiAgICAgICAgcGF0aFZhbHVlcyA9IC8oLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspPylbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKiw/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSovaWcsXG4gICAgICAgIHJhZGlhbF9ncmFkaWVudCA9IFIuX3JhZGlhbF9ncmFkaWVudCA9IC9ecig/OlxcKChbXixdKz8pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSooW15cXCldKz8pXFwpKT8vLFxuICAgICAgICBlbGRhdGEgPSB7fSxcbiAgICAgICAgc29ydEJ5S2V5ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmtleSAtIGIua2V5O1xuICAgICAgICB9LFxuICAgICAgICBzb3J0QnlOdW1iZXIgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIHRvRmxvYXQoYSkgLSB0b0Zsb2F0KGIpO1xuICAgICAgICB9LFxuICAgICAgICBmdW4gPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgcGlwZSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVjdFBhdGggPSBSLl9yZWN0UGF0aCA9IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCByKSB7XG4gICAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgICAgIHJldHVybiBbW1wiTVwiLCB4ICsgciwgeV0sIFtcImxcIiwgdyAtIHIgKiAyLCAwXSwgW1wiYVwiLCByLCByLCAwLCAwLCAxLCByLCByXSwgW1wibFwiLCAwLCBoIC0gciAqIDJdLCBbXCJhXCIsIHIsIHIsIDAsIDAsIDEsIC1yLCByXSwgW1wibFwiLCByICogMiAtIHcsIDBdLCBbXCJhXCIsIHIsIHIsIDAsIDAsIDEsIC1yLCAtcl0sIFtcImxcIiwgMCwgciAqIDIgLSBoXSwgW1wiYVwiLCByLCByLCAwLCAwLCAxLCByLCAtcl0sIFtcInpcIl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtbXCJNXCIsIHgsIHldLCBbXCJsXCIsIHcsIDBdLCBbXCJsXCIsIDAsIGhdLCBbXCJsXCIsIC13LCAwXSwgW1wielwiXV07XG4gICAgICAgIH0sXG4gICAgICAgIGVsbGlwc2VQYXRoID0gZnVuY3Rpb24gKHgsIHksIHJ4LCByeSkge1xuICAgICAgICAgICAgaWYgKHJ5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByeSA9IHJ4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtbXCJNXCIsIHgsIHldLCBbXCJtXCIsIDAsIC1yeV0sIFtcImFcIiwgcngsIHJ5LCAwLCAxLCAxLCAwLCAyICogcnldLCBbXCJhXCIsIHJ4LCByeSwgMCwgMSwgMSwgMCwgLTIgKiByeV0sIFtcInpcIl1dO1xuICAgICAgICB9LFxuICAgICAgICBnZXRQYXRoID0gUi5fZ2V0UGF0aCA9IHtcbiAgICAgICAgICAgIHBhdGg6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5hdHRyKFwicGF0aFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaXJjbGU6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBhID0gZWwuYXR0cnM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsbGlwc2VQYXRoKGEuY3gsIGEuY3ksIGEucik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZWxsaXBzZTogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlbC5hdHRycztcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxsaXBzZVBhdGgoYS5jeCwgYS5jeSwgYS5yeCwgYS5yeSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVjdDogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBlbC5hdHRycztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFBhdGgoYS54LCBhLnksIGEud2lkdGgsIGEuaGVpZ2h0LCBhLnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGltYWdlOiBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGVsLmF0dHJzO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN0UGF0aChhLngsIGEueSwgYS53aWR0aCwgYS5oZWlnaHQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBiYm94ID0gZWwuX2dldEJCb3goKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFBhdGgoYmJveC54LCBiYm94LnksIGJib3gud2lkdGgsIGJib3guaGVpZ2h0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQgOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgIHZhciBiYm94ID0gZWwuX2dldEJCb3goKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdFBhdGgoYmJveC54LCBiYm94LnksIGJib3gud2lkdGgsIGJib3guaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBSYXBoYWVsLm1hcFBhdGhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFRyYW5zZm9ybSB0aGUgcGF0aCBzdHJpbmcgd2l0aCBnaXZlbiBtYXRyaXguXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gcGF0aCAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAgICAgLSBtYXRyaXggKG9iamVjdCkgc2VlIEBNYXRyaXhcbiAgICAgICAgID0gKHN0cmluZykgdHJhbnNmb3JtZWQgcGF0aCBzdHJpbmdcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXBQYXRoID0gUi5tYXBQYXRoID0gZnVuY3Rpb24gKHBhdGgsIG1hdHJpeCkge1xuICAgICAgICAgICAgaWYgKCFtYXRyaXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB4LCB5LCBpLCBqLCBpaSwgamosIHBhdGhpO1xuICAgICAgICAgICAgcGF0aCA9IHBhdGgyY3VydmUocGF0aCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHBhdGgubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhdGhpID0gcGF0aFtpXTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IHBhdGhpLmxlbmd0aDsgaiA8IGpqOyBqICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IG1hdHJpeC54KHBhdGhpW2pdLCBwYXRoaVtqICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICB5ID0gbWF0cml4LnkocGF0aGlbal0sIHBhdGhpW2ogKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIHBhdGhpW2pdID0geDtcbiAgICAgICAgICAgICAgICAgICAgcGF0aGlbaiArIDFdID0geTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfTtcblxuICAgIFIuX2cgPSBnO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnR5cGVcbiAgICAgWyBwcm9wZXJ0eSAoc3RyaW5nKSBdXG4gICAgICoqXG4gICAgICogQ2FuIGJlIOKAnFNWR+KAnSwg4oCcVk1M4oCdIG9yIGVtcHR5LCBkZXBlbmRpbmcgb24gYnJvd3NlciBzdXBwb3J0LlxuICAgIFxcKi9cbiAgICBSLnR5cGUgPSAoZy53aW4uU1ZHQW5nbGUgfHwgZy5kb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjQmFzaWNTdHJ1Y3R1cmVcIiwgXCIxLjFcIikgPyBcIlNWR1wiIDogXCJWTUxcIik7XG4gICAgaWYgKFIudHlwZSA9PSBcIlZNTFwiKSB7XG4gICAgICAgIHZhciBkID0gZy5kb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgICAgIGI7XG4gICAgICAgIGQuaW5uZXJIVE1MID0gJzx2OnNoYXBlIGFkaj1cIjFcIi8+JztcbiAgICAgICAgYiA9IGQuZmlyc3RDaGlsZDtcbiAgICAgICAgYi5zdHlsZS5iZWhhdmlvciA9IFwidXJsKCNkZWZhdWx0I1ZNTClcIjtcbiAgICAgICAgaWYgKCEoYiAmJiB0eXBlb2YgYi5hZGogPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgIHJldHVybiAoUi50eXBlID0gRSk7XG4gICAgICAgIH1cbiAgICAgICAgZCA9IG51bGw7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnN2Z1xuICAgICBbIHByb3BlcnR5IChib29sZWFuKSBdXG4gICAgICoqXG4gICAgICogYHRydWVgIGlmIGJyb3dzZXIgc3VwcG9ydHMgU1ZHLlxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC52bWxcbiAgICAgWyBwcm9wZXJ0eSAoYm9vbGVhbikgXVxuICAgICAqKlxuICAgICAqIGB0cnVlYCBpZiBicm93c2VyIHN1cHBvcnRzIFZNTC5cbiAgICBcXCovXG4gICAgUi5zdmcgPSAhKFIudm1sID0gUi50eXBlID09IFwiVk1MXCIpO1xuICAgIFIuX1BhcGVyID0gUGFwZXI7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZm5cbiAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICoqXG4gICAgICogWW91IGNhbiBhZGQgeW91ciBvd24gbWV0aG9kIHRvIHRoZSBjYW52YXMuIEZvciBleGFtcGxlIGlmIHlvdSB3YW50IHRvIGRyYXcgYSBwaWUgY2hhcnQsXG4gICAgICogeW91IGNhbiBjcmVhdGUgeW91ciBvd24gcGllIGNoYXJ0IGZ1bmN0aW9uIGFuZCBzaGlwIGl0IGFzIGEgUmFwaGHDq2wgcGx1Z2luLiBUbyBkbyB0aGlzXG4gICAgICogeW91IG5lZWQgdG8gZXh0ZW5kIHRoZSBgUmFwaGFlbC5mbmAgb2JqZWN0LiBZb3Ugc2hvdWxkIG1vZGlmeSB0aGUgYGZuYCBvYmplY3QgYmVmb3JlIGFcbiAgICAgKiBSYXBoYcOrbCBpbnN0YW5jZSBpcyBjcmVhdGVkLCBvdGhlcndpc2UgaXQgd2lsbCB0YWtlIG5vIGVmZmVjdC4gUGxlYXNlIG5vdGUgdGhhdCB0aGVcbiAgICAgKiBhYmlsaXR5IGZvciBuYW1lc3BhY2VkIHBsdWdpbnMgd2FzIHJlbW92ZWQgaW4gUmFwaGFlbCAyLjAuIEl0IGlzIHVwIHRvIHRoZSBwbHVnaW4gdG9cbiAgICAgKiBlbnN1cmUgYW55IG5hbWVzcGFjaW5nIGVuc3VyZXMgcHJvcGVyIGNvbnRleHQuXG4gICAgID4gVXNhZ2VcbiAgICAgfCBSYXBoYWVsLmZuLmFycm93ID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyLCBzaXplKSB7XG4gICAgIHwgICAgIHJldHVybiB0aGlzLnBhdGgoIC4uLiApO1xuICAgICB8IH07XG4gICAgIHwgLy8gb3IgY3JlYXRlIG5hbWVzcGFjZVxuICAgICB8IFJhcGhhZWwuZm4ubXlzdHVmZiA9IHtcbiAgICAgfCAgICAgYXJyb3c6IGZ1bmN0aW9uICgpIHvigKZ9LFxuICAgICB8ICAgICBzdGFyOiBmdW5jdGlvbiAoKSB74oCmfSxcbiAgICAgfCAgICAgLy8gZXRj4oCmXG4gICAgIHwgfTtcbiAgICAgfCB2YXIgcGFwZXIgPSBSYXBoYWVsKDEwLCAxMCwgNjMwLCA0ODApO1xuICAgICB8IC8vIHRoZW4gdXNlIGl0XG4gICAgIHwgcGFwZXIuYXJyb3coMTAsIDEwLCAzMCwgMzAsIDUpLmF0dHIoe2ZpbGw6IFwiI2YwMFwifSk7XG4gICAgIHwgcGFwZXIubXlzdHVmZi5hcnJvdygpO1xuICAgICB8IHBhcGVyLm15c3R1ZmYuc3RhcigpO1xuICAgIFxcKi9cbiAgICBSLmZuID0gcGFwZXJwcm90byA9IFBhcGVyLnByb3RvdHlwZSA9IFIucHJvdG90eXBlO1xuICAgIFIuX2lkID0gMDtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5pc1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSGFuZGZ1bCBvZiByZXBsYWNlbWVudHMgZm9yIGB0eXBlb2ZgIG9wZXJhdG9yLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBvICjigKYpIGFueSBvYmplY3Qgb3IgcHJpbWl0aXZlXG4gICAgIC0gdHlwZSAoc3RyaW5nKSBuYW1lIG9mIHRoZSB0eXBlLCBpLmUuIOKAnHN0cmluZ+KAnSwg4oCcZnVuY3Rpb27igJ0sIOKAnG51bWJlcuKAnSwgZXRjLlxuICAgICA9IChib29sZWFuKSBpcyBnaXZlbiB2YWx1ZSBpcyBvZiBnaXZlbiB0eXBlXG4gICAgXFwqL1xuICAgIFIuaXMgPSBmdW5jdGlvbiAobywgdHlwZSkge1xuICAgICAgICB0eXBlID0gbG93ZXJDYXNlLmNhbGwodHlwZSk7XG4gICAgICAgIGlmICh0eXBlID09IFwiZmluaXRlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAhaXNuYW5baGFzXSgrbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT0gXCJhcnJheVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbyBpbnN0YW5jZW9mIEFycmF5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAgKHR5cGUgPT0gXCJudWxsXCIgJiYgbyA9PT0gbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAodHlwZSA9PSB0eXBlb2YgbyAmJiBvICE9PSBudWxsKSB8fFxuICAgICAgICAgICAgICAgICh0eXBlID09IFwib2JqZWN0XCIgJiYgbyA9PT0gT2JqZWN0KG8pKSB8fFxuICAgICAgICAgICAgICAgICh0eXBlID09IFwiYXJyYXlcIiAmJiBBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkobykpIHx8XG4gICAgICAgICAgICAgICAgb2JqZWN0VG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKSA9PSB0eXBlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmogPT0gXCJmdW5jdGlvblwiIHx8IE9iamVjdChvYmopICE9PSBvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IG5ldyBvYmouY29uc3RydWN0b3I7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChvYmpbaGFzXShrZXkpKSB7XG4gICAgICAgICAgICByZXNba2V5XSA9IGNsb25lKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmFuZ2xlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGFuZ2xlIGJldHdlZW4gdHdvIG9yIHRocmVlIHBvaW50c1xuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSB4MSAobnVtYmVyKSB4IGNvb3JkIG9mIGZpcnN0IHBvaW50XG4gICAgIC0geTEgKG51bWJlcikgeSBjb29yZCBvZiBmaXJzdCBwb2ludFxuICAgICAtIHgyIChudW1iZXIpIHggY29vcmQgb2Ygc2Vjb25kIHBvaW50XG4gICAgIC0geTIgKG51bWJlcikgeSBjb29yZCBvZiBzZWNvbmQgcG9pbnRcbiAgICAgLSB4MyAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZCBvZiB0aGlyZCBwb2ludFxuICAgICAtIHkzIChudW1iZXIpICNvcHRpb25hbCB5IGNvb3JkIG9mIHRoaXJkIHBvaW50XG4gICAgID0gKG51bWJlcikgYW5nbGUgaW4gZGVncmVlcy5cbiAgICBcXCovXG4gICAgUi5hbmdsZSA9IGZ1bmN0aW9uICh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzKSB7XG4gICAgICAgIGlmICh4MyA9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgeCA9IHgxIC0geDIsXG4gICAgICAgICAgICAgICAgeSA9IHkxIC0geTI7XG4gICAgICAgICAgICBpZiAoIXggJiYgIXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoMTgwICsgbWF0aC5hdGFuMigteSwgLXgpICogMTgwIC8gUEkgKyAzNjApICUgMzYwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFIuYW5nbGUoeDEsIHkxLCB4MywgeTMpIC0gUi5hbmdsZSh4MiwgeTIsIHgzLCB5Myk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnJhZFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVHJhbnNmb3JtIGFuZ2xlIHRvIHJhZGlhbnNcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZGVnIChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgPSAobnVtYmVyKSBhbmdsZSBpbiByYWRpYW5zLlxuICAgIFxcKi9cbiAgICBSLnJhZCA9IGZ1bmN0aW9uIChkZWcpIHtcbiAgICAgICAgcmV0dXJuIGRlZyAlIDM2MCAqIFBJIC8gMTgwO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZGVnXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBUcmFuc2Zvcm0gYW5nbGUgdG8gZGVncmVlc1xuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSByYWQgKG51bWJlcikgYW5nbGUgaW4gcmFkaWFuc1xuICAgICA9IChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXMuXG4gICAgXFwqL1xuICAgIFIuZGVnID0gZnVuY3Rpb24gKHJhZCkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCAoKHJhZCAqIDE4MCAvIFBJJSAzNjApKiAxMDAwKSAvIDEwMDA7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5zbmFwVG9cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFNuYXBzIGdpdmVuIHZhbHVlIHRvIGdpdmVuIGdyaWQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHZhbHVlcyAoYXJyYXl8bnVtYmVyKSBnaXZlbiBhcnJheSBvZiB2YWx1ZXMgb3Igc3RlcCBvZiB0aGUgZ3JpZFxuICAgICAtIHZhbHVlIChudW1iZXIpIHZhbHVlIHRvIGFkanVzdFxuICAgICAtIHRvbGVyYW5jZSAobnVtYmVyKSAjb3B0aW9uYWwgdG9sZXJhbmNlIGZvciBzbmFwcGluZy4gRGVmYXVsdCBpcyBgMTBgLlxuICAgICA9IChudW1iZXIpIGFkanVzdGVkIHZhbHVlLlxuICAgIFxcKi9cbiAgICBSLnNuYXBUbyA9IGZ1bmN0aW9uICh2YWx1ZXMsIHZhbHVlLCB0b2xlcmFuY2UpIHtcbiAgICAgICAgdG9sZXJhbmNlID0gUi5pcyh0b2xlcmFuY2UsIFwiZmluaXRlXCIpID8gdG9sZXJhbmNlIDogMTA7XG4gICAgICAgIGlmIChSLmlzKHZhbHVlcywgYXJyYXkpKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSBpZiAoYWJzKHZhbHVlc1tpXSAtIHZhbHVlKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVzID0gK3ZhbHVlcztcbiAgICAgICAgICAgIHZhciByZW0gPSB2YWx1ZSAlIHZhbHVlcztcbiAgICAgICAgICAgIGlmIChyZW0gPCB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgLSByZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVtID4gdmFsdWVzIC0gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIC0gcmVtICsgdmFsdWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuY3JlYXRlVVVJRFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyBSRkM0MTIyLCB2ZXJzaW9uIDQgSURcbiAgICBcXCovXG4gICAgdmFyIGNyZWF0ZVVVSUQgPSBSLmNyZWF0ZVVVSUQgPSAoZnVuY3Rpb24gKHV1aWRSZWdFeCwgdXVpZFJlcGxhY2VyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKHV1aWRSZWdFeCwgdXVpZFJlcGxhY2VyKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9O1xuICAgIH0pKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHZhciByID0gbWF0aC5yYW5kb20oKSAqIDE2IHwgMCxcbiAgICAgICAgICAgIHYgPSBjID09IFwieFwiID8gciA6IChyICYgMyB8IDgpO1xuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgfSk7XG5cbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5zZXRXaW5kb3dcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFVzZWQgd2hlbiB5b3UgbmVlZCB0byBkcmF3IGluIGAmbHQ7aWZyYW1lPmAuIFN3aXRjaGVkIHdpbmRvdyB0byB0aGUgaWZyYW1lIG9uZS5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gbmV3d2luICh3aW5kb3cpIG5ldyB3aW5kb3cgb2JqZWN0XG4gICAgXFwqL1xuICAgIFIuc2V0V2luZG93ID0gZnVuY3Rpb24gKG5ld3dpbikge1xuICAgICAgICBldmUoXCJyYXBoYWVsLnNldFdpbmRvd1wiLCBSLCBnLndpbiwgbmV3d2luKTtcbiAgICAgICAgZy53aW4gPSBuZXd3aW47XG4gICAgICAgIGcuZG9jID0gZy53aW4uZG9jdW1lbnQ7XG4gICAgICAgIGlmIChSLl9lbmdpbmUuaW5pdFdpbikge1xuICAgICAgICAgICAgUi5fZW5naW5lLmluaXRXaW4oZy53aW4pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9IZXggPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgaWYgKFIudm1sKSB7XG4gICAgICAgICAgICAvLyBodHRwOi8vZGVhbi5lZHdhcmRzLm5hbWUvd2VibG9nLzIwMDkvMTAvY29udmVydC1hbnktY29sb3VyLXZhbHVlLXRvLWhleC1pbi1tc2llL1xuICAgICAgICAgICAgdmFyIHRyaW0gPSAvXlxccyt8XFxzKyQvZztcbiAgICAgICAgICAgIHZhciBib2Q7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2N1bSA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiaHRtbGZpbGVcIik7XG4gICAgICAgICAgICAgICAgZG9jdW0ud3JpdGUoXCI8Ym9keT5cIik7XG4gICAgICAgICAgICAgICAgZG9jdW0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBib2QgPSBkb2N1bS5ib2R5O1xuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgYm9kID0gY3JlYXRlUG9wdXAoKS5kb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJhbmdlID0gYm9kLmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgICAgICAgdG9IZXggPSBjYWNoZXIoZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYm9kLnN0eWxlLmNvbG9yID0gU3RyKGNvbG9yKS5yZXBsYWNlKHRyaW0sIEUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByYW5nZS5xdWVyeUNvbW1hbmRWYWx1ZShcIkZvcmVDb2xvclwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAoKHZhbHVlICYgMjU1KSA8PCAxNikgfCAodmFsdWUgJiA2NTI4MCkgfCAoKHZhbHVlICYgMTY3MTE2ODApID4+PiAxNik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiNcIiArIChcIjAwMDAwMFwiICsgdmFsdWUudG9TdHJpbmcoMTYpKS5zbGljZSgtNik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpID0gZy5kb2MuY3JlYXRlRWxlbWVudChcImlcIik7XG4gICAgICAgICAgICBpLnRpdGxlID0gXCJSYXBoYVxceGVibCBDb2xvdXIgUGlja2VyXCI7XG4gICAgICAgICAgICBpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGcuZG9jLmJvZHkuYXBwZW5kQ2hpbGQoaSk7XG4gICAgICAgICAgICB0b0hleCA9IGNhY2hlcihmdW5jdGlvbiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgICBpLnN0eWxlLmNvbG9yID0gY29sb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGcuZG9jLmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoaSwgRSkuZ2V0UHJvcGVydHlWYWx1ZShcImNvbG9yXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvSGV4KGNvbG9yKTtcbiAgICB9LFxuICAgIGhzYnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJoc2IoXCIgKyBbdGhpcy5oLCB0aGlzLnMsIHRoaXMuYl0gKyBcIilcIjtcbiAgICB9LFxuICAgIGhzbHRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJoc2woXCIgKyBbdGhpcy5oLCB0aGlzLnMsIHRoaXMubF0gKyBcIilcIjtcbiAgICB9LFxuICAgIHJnYnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZXg7XG4gICAgfSxcbiAgICBwcmVwYXJlUkdCID0gZnVuY3Rpb24gKHIsIGcsIGIpIHtcbiAgICAgICAgaWYgKGcgPT0gbnVsbCAmJiBSLmlzKHIsIFwib2JqZWN0XCIpICYmIFwiclwiIGluIHIgJiYgXCJnXCIgaW4gciAmJiBcImJcIiBpbiByKSB7XG4gICAgICAgICAgICBiID0gci5iO1xuICAgICAgICAgICAgZyA9IHIuZztcbiAgICAgICAgICAgIHIgPSByLnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGcgPT0gbnVsbCAmJiBSLmlzKHIsIHN0cmluZykpIHtcbiAgICAgICAgICAgIHZhciBjbHIgPSBSLmdldFJHQihyKTtcbiAgICAgICAgICAgIHIgPSBjbHIucjtcbiAgICAgICAgICAgIGcgPSBjbHIuZztcbiAgICAgICAgICAgIGIgPSBjbHIuYjtcbiAgICAgICAgfVxuICAgICAgICBpZiAociA+IDEgfHwgZyA+IDEgfHwgYiA+IDEpIHtcbiAgICAgICAgICAgIHIgLz0gMjU1O1xuICAgICAgICAgICAgZyAvPSAyNTU7XG4gICAgICAgICAgICBiIC89IDI1NTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbciwgZywgYl07XG4gICAgfSxcbiAgICBwYWNrYWdlUkdCID0gZnVuY3Rpb24gKHIsIGcsIGIsIG8pIHtcbiAgICAgICAgciAqPSAyNTU7XG4gICAgICAgIGcgKj0gMjU1O1xuICAgICAgICBiICo9IDI1NTtcbiAgICAgICAgdmFyIHJnYiA9IHtcbiAgICAgICAgICAgIHI6IHIsXG4gICAgICAgICAgICBnOiBnLFxuICAgICAgICAgICAgYjogYixcbiAgICAgICAgICAgIGhleDogUi5yZ2IociwgZywgYiksXG4gICAgICAgICAgICB0b1N0cmluZzogcmdidG9TdHJpbmdcbiAgICAgICAgfTtcbiAgICAgICAgUi5pcyhvLCBcImZpbml0ZVwiKSAmJiAocmdiLm9wYWNpdHkgPSBvKTtcbiAgICAgICAgcmV0dXJuIHJnYjtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuY29sb3JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFBhcnNlcyB0aGUgY29sb3Igc3RyaW5nIGFuZCByZXR1cm5zIG9iamVjdCB3aXRoIGFsbCB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBjb2xvci5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gY2xyIChzdHJpbmcpIGNvbG9yIHN0cmluZyBpbiBvbmUgb2YgdGhlIHN1cHBvcnRlZCBmb3JtYXRzIChzZWUgQFJhcGhhZWwuZ2V0UkdCKVxuICAgICA9IChvYmplY3QpIENvbWJpbmVkIFJHQiAmIEhTQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZSxcbiAgICAgbyAgICAgaGV4IChzdHJpbmcpIGNvbG9yIGluIEhUTUwvQ1NTIGZvcm1hdDogI+KAouKAouKAouKAouKAouKAoixcbiAgICAgbyAgICAgZXJyb3IgKGJvb2xlYW4pIGB0cnVlYCBpZiBzdHJpbmcgY2Fu4oCZdCBiZSBwYXJzZWQsXG4gICAgIG8gICAgIGggKG51bWJlcikgaHVlLFxuICAgICBvICAgICBzIChudW1iZXIpIHNhdHVyYXRpb24sXG4gICAgIG8gICAgIHYgKG51bWJlcikgdmFsdWUgKGJyaWdodG5lc3MpLFxuICAgICBvICAgICBsIChudW1iZXIpIGxpZ2h0bmVzc1xuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5jb2xvciA9IGZ1bmN0aW9uIChjbHIpIHtcbiAgICAgICAgdmFyIHJnYjtcbiAgICAgICAgaWYgKFIuaXMoY2xyLCBcIm9iamVjdFwiKSAmJiBcImhcIiBpbiBjbHIgJiYgXCJzXCIgaW4gY2xyICYmIFwiYlwiIGluIGNscikge1xuICAgICAgICAgICAgcmdiID0gUi5oc2IycmdiKGNscik7XG4gICAgICAgICAgICBjbHIuciA9IHJnYi5yO1xuICAgICAgICAgICAgY2xyLmcgPSByZ2IuZztcbiAgICAgICAgICAgIGNsci5iID0gcmdiLmI7XG4gICAgICAgICAgICBjbHIuaGV4ID0gcmdiLmhleDtcbiAgICAgICAgfSBlbHNlIGlmIChSLmlzKGNsciwgXCJvYmplY3RcIikgJiYgXCJoXCIgaW4gY2xyICYmIFwic1wiIGluIGNsciAmJiBcImxcIiBpbiBjbHIpIHtcbiAgICAgICAgICAgIHJnYiA9IFIuaHNsMnJnYihjbHIpO1xuICAgICAgICAgICAgY2xyLnIgPSByZ2IucjtcbiAgICAgICAgICAgIGNsci5nID0gcmdiLmc7XG4gICAgICAgICAgICBjbHIuYiA9IHJnYi5iO1xuICAgICAgICAgICAgY2xyLmhleCA9IHJnYi5oZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoUi5pcyhjbHIsIFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgY2xyID0gUi5nZXRSR0IoY2xyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChSLmlzKGNsciwgXCJvYmplY3RcIikgJiYgXCJyXCIgaW4gY2xyICYmIFwiZ1wiIGluIGNsciAmJiBcImJcIiBpbiBjbHIpIHtcbiAgICAgICAgICAgICAgICByZ2IgPSBSLnJnYjJoc2woY2xyKTtcbiAgICAgICAgICAgICAgICBjbHIuaCA9IHJnYi5oO1xuICAgICAgICAgICAgICAgIGNsci5zID0gcmdiLnM7XG4gICAgICAgICAgICAgICAgY2xyLmwgPSByZ2IubDtcbiAgICAgICAgICAgICAgICByZ2IgPSBSLnJnYjJoc2IoY2xyKTtcbiAgICAgICAgICAgICAgICBjbHIudiA9IHJnYi5iO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbHIgPSB7aGV4OiBcIm5vbmVcIn07XG4gICAgICAgICAgICAgICAgY2xyLnIgPSBjbHIuZyA9IGNsci5iID0gY2xyLmggPSBjbHIucyA9IGNsci52ID0gY2xyLmwgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbHIudG9TdHJpbmcgPSByZ2J0b1N0cmluZztcbiAgICAgICAgcmV0dXJuIGNscjtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmhzYjJyZ2JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIEhTQiB2YWx1ZXMgdG8gUkdCIG9iamVjdC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaCAobnVtYmVyKSBodWVcbiAgICAgLSBzIChudW1iZXIpIHNhdHVyYXRpb25cbiAgICAgLSB2IChudW1iZXIpIHZhbHVlIG9yIGJyaWdodG5lc3NcbiAgICAgPSAob2JqZWN0KSBSR0Igb2JqZWN0IGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHIgKG51bWJlcikgcmVkLFxuICAgICBvICAgICBnIChudW1iZXIpIGdyZWVuLFxuICAgICBvICAgICBiIChudW1iZXIpIGJsdWUsXG4gICAgIG8gICAgIGhleCAoc3RyaW5nKSBjb2xvciBpbiBIVE1ML0NTUyBmb3JtYXQ6ICPigKLigKLigKLigKLigKLigKJcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuaHNiMnJnYiA9IGZ1bmN0aW9uIChoLCBzLCB2LCBvKSB7XG4gICAgICAgIGlmICh0aGlzLmlzKGgsIFwib2JqZWN0XCIpICYmIFwiaFwiIGluIGggJiYgXCJzXCIgaW4gaCAmJiBcImJcIiBpbiBoKSB7XG4gICAgICAgICAgICB2ID0gaC5iO1xuICAgICAgICAgICAgcyA9IGgucztcbiAgICAgICAgICAgIG8gPSBoLm87XG4gICAgICAgICAgICBoID0gaC5oO1xuICAgICAgICB9XG4gICAgICAgIGggKj0gMzYwO1xuICAgICAgICB2YXIgUiwgRywgQiwgWCwgQztcbiAgICAgICAgaCA9IChoICUgMzYwKSAvIDYwO1xuICAgICAgICBDID0gdiAqIHM7XG4gICAgICAgIFggPSBDICogKDEgLSBhYnMoaCAlIDIgLSAxKSk7XG4gICAgICAgIFIgPSBHID0gQiA9IHYgLSBDO1xuXG4gICAgICAgIGggPSB+fmg7XG4gICAgICAgIFIgKz0gW0MsIFgsIDAsIDAsIFgsIENdW2hdO1xuICAgICAgICBHICs9IFtYLCBDLCBDLCBYLCAwLCAwXVtoXTtcbiAgICAgICAgQiArPSBbMCwgMCwgWCwgQywgQywgWF1baF07XG4gICAgICAgIHJldHVybiBwYWNrYWdlUkdCKFIsIEcsIEIsIG8pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaHNsMnJnYlxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgSFNMIHZhbHVlcyB0byBSR0Igb2JqZWN0LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoIChudW1iZXIpIGh1ZVxuICAgICAtIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICAtIGwgKG51bWJlcikgbHVtaW5vc2l0eVxuICAgICA9IChvYmplY3QpIFJHQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZSxcbiAgICAgbyAgICAgaGV4IChzdHJpbmcpIGNvbG9yIGluIEhUTUwvQ1NTIGZvcm1hdDogI+KAouKAouKAouKAouKAouKAolxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5oc2wycmdiID0gZnVuY3Rpb24gKGgsIHMsIGwsIG8pIHtcbiAgICAgICAgaWYgKHRoaXMuaXMoaCwgXCJvYmplY3RcIikgJiYgXCJoXCIgaW4gaCAmJiBcInNcIiBpbiBoICYmIFwibFwiIGluIGgpIHtcbiAgICAgICAgICAgIGwgPSBoLmw7XG4gICAgICAgICAgICBzID0gaC5zO1xuICAgICAgICAgICAgaCA9IGguaDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaCA+IDEgfHwgcyA+IDEgfHwgbCA+IDEpIHtcbiAgICAgICAgICAgIGggLz0gMzYwO1xuICAgICAgICAgICAgcyAvPSAxMDA7XG4gICAgICAgICAgICBsIC89IDEwMDtcbiAgICAgICAgfVxuICAgICAgICBoICo9IDM2MDtcbiAgICAgICAgdmFyIFIsIEcsIEIsIFgsIEM7XG4gICAgICAgIGggPSAoaCAlIDM2MCkgLyA2MDtcbiAgICAgICAgQyA9IDIgKiBzICogKGwgPCAuNSA/IGwgOiAxIC0gbCk7XG4gICAgICAgIFggPSBDICogKDEgLSBhYnMoaCAlIDIgLSAxKSk7XG4gICAgICAgIFIgPSBHID0gQiA9IGwgLSBDIC8gMjtcblxuICAgICAgICBoID0gfn5oO1xuICAgICAgICBSICs9IFtDLCBYLCAwLCAwLCBYLCBDXVtoXTtcbiAgICAgICAgRyArPSBbWCwgQywgQywgWCwgMCwgMF1baF07XG4gICAgICAgIEIgKz0gWzAsIDAsIFgsIEMsIEMsIFhdW2hdO1xuICAgICAgICByZXR1cm4gcGFja2FnZVJHQihSLCBHLCBCLCBvKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnJnYjJoc2JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIFJHQiB2YWx1ZXMgdG8gSFNCIG9iamVjdC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gciAobnVtYmVyKSByZWRcbiAgICAgLSBnIChudW1iZXIpIGdyZWVuXG4gICAgIC0gYiAobnVtYmVyKSBibHVlXG4gICAgID0gKG9iamVjdCkgSFNCIG9iamVjdCBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICBoIChudW1iZXIpIGh1ZVxuICAgICBvICAgICBzIChudW1iZXIpIHNhdHVyYXRpb25cbiAgICAgbyAgICAgYiAobnVtYmVyKSBicmlnaHRuZXNzXG4gICAgIG8gfVxuICAgIFxcKi9cbiAgICBSLnJnYjJoc2IgPSBmdW5jdGlvbiAociwgZywgYikge1xuICAgICAgICBiID0gcHJlcGFyZVJHQihyLCBnLCBiKTtcbiAgICAgICAgciA9IGJbMF07XG4gICAgICAgIGcgPSBiWzFdO1xuICAgICAgICBiID0gYlsyXTtcblxuICAgICAgICB2YXIgSCwgUywgViwgQztcbiAgICAgICAgViA9IG1tYXgociwgZywgYik7XG4gICAgICAgIEMgPSBWIC0gbW1pbihyLCBnLCBiKTtcbiAgICAgICAgSCA9IChDID09IDAgPyBudWxsIDpcbiAgICAgICAgICAgICBWID09IHIgPyAoZyAtIGIpIC8gQyA6XG4gICAgICAgICAgICAgViA9PSBnID8gKGIgLSByKSAvIEMgKyAyIDpcbiAgICAgICAgICAgICAgICAgICAgICAociAtIGcpIC8gQyArIDRcbiAgICAgICAgICAgICk7XG4gICAgICAgIEggPSAoKEggKyAzNjApICUgNikgKiA2MCAvIDM2MDtcbiAgICAgICAgUyA9IEMgPT0gMCA/IDAgOiBDIC8gVjtcbiAgICAgICAgcmV0dXJuIHtoOiBILCBzOiBTLCBiOiBWLCB0b1N0cmluZzogaHNidG9TdHJpbmd9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmdiMmhzbFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgUkdCIHZhbHVlcyB0byBIU0wgb2JqZWN0LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSByIChudW1iZXIpIHJlZFxuICAgICAtIGcgKG51bWJlcikgZ3JlZW5cbiAgICAgLSBiIChudW1iZXIpIGJsdWVcbiAgICAgPSAob2JqZWN0KSBIU0wgb2JqZWN0IGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIGggKG51bWJlcikgaHVlXG4gICAgIG8gICAgIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICBvICAgICBsIChudW1iZXIpIGx1bWlub3NpdHlcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIucmdiMmhzbCA9IGZ1bmN0aW9uIChyLCBnLCBiKSB7XG4gICAgICAgIGIgPSBwcmVwYXJlUkdCKHIsIGcsIGIpO1xuICAgICAgICByID0gYlswXTtcbiAgICAgICAgZyA9IGJbMV07XG4gICAgICAgIGIgPSBiWzJdO1xuXG4gICAgICAgIHZhciBILCBTLCBMLCBNLCBtLCBDO1xuICAgICAgICBNID0gbW1heChyLCBnLCBiKTtcbiAgICAgICAgbSA9IG1taW4ociwgZywgYik7XG4gICAgICAgIEMgPSBNIC0gbTtcbiAgICAgICAgSCA9IChDID09IDAgPyBudWxsIDpcbiAgICAgICAgICAgICBNID09IHIgPyAoZyAtIGIpIC8gQyA6XG4gICAgICAgICAgICAgTSA9PSBnID8gKGIgLSByKSAvIEMgKyAyIDpcbiAgICAgICAgICAgICAgICAgICAgICAociAtIGcpIC8gQyArIDQpO1xuICAgICAgICBIID0gKChIICsgMzYwKSAlIDYpICogNjAgLyAzNjA7XG4gICAgICAgIEwgPSAoTSArIG0pIC8gMjtcbiAgICAgICAgUyA9IChDID09IDAgPyAwIDpcbiAgICAgICAgICAgICBMIDwgLjUgPyBDIC8gKDIgKiBMKSA6XG4gICAgICAgICAgICAgICAgICAgICAgQyAvICgyIC0gMiAqIEwpKTtcbiAgICAgICAgcmV0dXJuIHtoOiBILCBzOiBTLCBsOiBMLCB0b1N0cmluZzogaHNsdG9TdHJpbmd9O1xuICAgIH07XG4gICAgUi5fcGF0aDJzdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpvaW4oXCIsXCIpLnJlcGxhY2UocDJzLCBcIiQxXCIpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcmVwdXNoKGFycmF5LCBpdGVtKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIGlmIChhcnJheVtpXSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnB1c2goYXJyYXkuc3BsaWNlKGksIDEpWzBdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjYWNoZXIoZiwgc2NvcGUsIHBvc3Rwcm9jZXNzb3IpIHtcbiAgICAgICAgZnVuY3Rpb24gbmV3ZigpIHtcbiAgICAgICAgICAgIHZhciBhcmcgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmcuam9pbihcIlxcdTI0MDBcIiksXG4gICAgICAgICAgICAgICAgY2FjaGUgPSBuZXdmLmNhY2hlID0gbmV3Zi5jYWNoZSB8fCB7fSxcbiAgICAgICAgICAgICAgICBjb3VudCA9IG5ld2YuY291bnQgPSBuZXdmLmNvdW50IHx8IFtdO1xuICAgICAgICAgICAgaWYgKGNhY2hlW2hhc10oYXJncykpIHtcbiAgICAgICAgICAgICAgICByZXB1c2goY291bnQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwb3N0cHJvY2Vzc29yID8gcG9zdHByb2Nlc3NvcihjYWNoZVthcmdzXSkgOiBjYWNoZVthcmdzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvdW50Lmxlbmd0aCA+PSAxZTMgJiYgZGVsZXRlIGNhY2hlW2NvdW50LnNoaWZ0KCldO1xuICAgICAgICAgICAgY291bnQucHVzaChhcmdzKTtcbiAgICAgICAgICAgIGNhY2hlW2FyZ3NdID0gZlthcHBseV0oc2NvcGUsIGFyZyk7XG4gICAgICAgICAgICByZXR1cm4gcG9zdHByb2Nlc3NvciA/IHBvc3Rwcm9jZXNzb3IoY2FjaGVbYXJnc10pIDogY2FjaGVbYXJnc107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld2Y7XG4gICAgfVxuXG4gICAgdmFyIHByZWxvYWQgPSBSLl9wcmVsb2FkID0gZnVuY3Rpb24gKHNyYywgZikge1xuICAgICAgICB2YXIgaW1nID0gZy5kb2MuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgaW1nLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTllbTt0b3A6LTk5OTllbVwiO1xuICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5vbmxvYWQgPSBudWxsO1xuICAgICAgICAgICAgZy5kb2MuYm9keS5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBnLmRvYy5ib2R5LnJlbW92ZUNoaWxkKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBnLmRvYy5ib2R5LmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgIGltZy5zcmMgPSBzcmM7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNsclRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZXg7XG4gICAgfVxuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0UkdCXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBQYXJzZXMgY29sb3VyIHN0cmluZyBhcyBSR0Igb2JqZWN0XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGNvbG91ciAoc3RyaW5nKSBjb2xvdXIgc3RyaW5nIGluIG9uZSBvZiBmb3JtYXRzOlxuICAgICAjIDx1bD5cbiAgICAgIyAgICAgPGxpPkNvbG91ciBuYW1lICjigJw8Y29kZT5yZWQ8L2NvZGU+4oCdLCDigJw8Y29kZT5ncmVlbjwvY29kZT7igJ0sIOKAnDxjb2RlPmNvcm5mbG93ZXJibHVlPC9jb2RlPuKAnSwgZXRjKTwvbGk+XG4gICAgICMgICAgIDxsaT4j4oCi4oCi4oCiIOKAlCBzaG9ydGVuZWQgSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2ZjMDwvY29kZT7igJ0sIGV0Yyk8L2xpPlxuICAgICAjICAgICA8bGk+I+KAouKAouKAouKAouKAouKAoiDigJQgZnVsbCBsZW5ndGggSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2JkMjMwMDwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2IoMjAwLCZuYnNwOzEwMCwmbmJzcDswKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2IoMTAwJSwmbmJzcDsxNzUlLCZuYnNwOzAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgaHVlLCBzYXR1cmF0aW9uIGFuZCBicmlnaHRuZXNzIHZhbHVlczogKOKAnDxjb2RlPmhzYigwLjUsJm5ic3A7MC4yNSwmbmJzcDsxKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNsKOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGhzYjwvbGk+XG4gICAgICMgICAgIDxsaT5oc2wo4oCi4oCi4oCiJSwg4oCi4oCi4oCiJSwg4oCi4oCi4oCiJSkg4oCUIHNhbWUgYXMgaHNiPC9saT5cbiAgICAgIyA8L3VsPlxuICAgICA9IChvYmplY3QpIFJHQiBvYmplY3QgaW4gZm9ybWF0OlxuICAgICBvIHtcbiAgICAgbyAgICAgciAobnVtYmVyKSByZWQsXG4gICAgIG8gICAgIGcgKG51bWJlcikgZ3JlZW4sXG4gICAgIG8gICAgIGIgKG51bWJlcikgYmx1ZVxuICAgICBvICAgICBoZXggKHN0cmluZykgY29sb3IgaW4gSFRNTC9DU1MgZm9ybWF0OiAj4oCi4oCi4oCi4oCi4oCi4oCiLFxuICAgICBvICAgICBlcnJvciAoYm9vbGVhbikgdHJ1ZSBpZiBzdHJpbmcgY2Fu4oCZdCBiZSBwYXJzZWRcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuZ2V0UkdCID0gY2FjaGVyKGZ1bmN0aW9uIChjb2xvdXIpIHtcbiAgICAgICAgaWYgKCFjb2xvdXIgfHwgISEoKGNvbG91ciA9IFN0cihjb2xvdXIpKS5pbmRleE9mKFwiLVwiKSArIDEpKSB7XG4gICAgICAgICAgICByZXR1cm4ge3I6IC0xLCBnOiAtMSwgYjogLTEsIGhleDogXCJub25lXCIsIGVycm9yOiAxLCB0b1N0cmluZzogY2xyVG9TdHJpbmd9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2xvdXIgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7cjogLTEsIGc6IC0xLCBiOiAtMSwgaGV4OiBcIm5vbmVcIiwgdG9TdHJpbmc6IGNsclRvU3RyaW5nfTtcbiAgICAgICAgfVxuICAgICAgICAhKGhzcmdbaGFzXShjb2xvdXIudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMCwgMikpIHx8IGNvbG91ci5jaGFyQXQoKSA9PSBcIiNcIikgJiYgKGNvbG91ciA9IHRvSGV4KGNvbG91cikpO1xuICAgICAgICB2YXIgcmVzLFxuICAgICAgICAgICAgcmVkLFxuICAgICAgICAgICAgZ3JlZW4sXG4gICAgICAgICAgICBibHVlLFxuICAgICAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgICAgIHQsXG4gICAgICAgICAgICB2YWx1ZXMsXG4gICAgICAgICAgICByZ2IgPSBjb2xvdXIubWF0Y2goY29sb3VyUmVnRXhwKTtcbiAgICAgICAgaWYgKHJnYikge1xuICAgICAgICAgICAgaWYgKHJnYlsyXSkge1xuICAgICAgICAgICAgICAgIGJsdWUgPSB0b0ludChyZ2JbMl0uc3Vic3RyaW5nKDUpLCAxNik7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0ludChyZ2JbMl0uc3Vic3RyaW5nKDMsIDUpLCAxNik7XG4gICAgICAgICAgICAgICAgcmVkID0gdG9JbnQocmdiWzJdLnN1YnN0cmluZygxLCAzKSwgMTYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYlszXSkge1xuICAgICAgICAgICAgICAgIGJsdWUgPSB0b0ludCgodCA9IHJnYlszXS5jaGFyQXQoMykpICsgdCwgMTYpO1xuICAgICAgICAgICAgICAgIGdyZWVuID0gdG9JbnQoKHQgPSByZ2JbM10uY2hhckF0KDIpKSArIHQsIDE2KTtcbiAgICAgICAgICAgICAgICByZWQgPSB0b0ludCgodCA9IHJnYlszXS5jaGFyQXQoMSkpICsgdCwgMTYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYls0XSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHJnYls0XVtzcGxpdF0oY29tbWFTcGFjZXMpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiJVwiICYmIChyZWQgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0Zsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAoZ3JlZW4gKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvRmxvYXQodmFsdWVzWzJdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMl0uc2xpY2UoLTEpID09IFwiJVwiICYmIChibHVlICo9IDIuNTUpO1xuICAgICAgICAgICAgICAgIHJnYlsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDQpID09IFwicmdiYVwiICYmIChvcGFjaXR5ID0gdG9GbG9hdCh2YWx1ZXNbM10pKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbM10gJiYgdmFsdWVzWzNdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAob3BhY2l0eSAvPSAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYls1XSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHJnYls1XVtzcGxpdF0oY29tbWFTcGFjZXMpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiJVwiICYmIChyZWQgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0Zsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAoZ3JlZW4gKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvRmxvYXQodmFsdWVzWzJdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMl0uc2xpY2UoLTEpID09IFwiJVwiICYmIChibHVlICo9IDIuNTUpO1xuICAgICAgICAgICAgICAgICh2YWx1ZXNbMF0uc2xpY2UoLTMpID09IFwiZGVnXCIgfHwgdmFsdWVzWzBdLnNsaWNlKC0xKSA9PSBcIlxceGIwXCIpICYmIChyZWQgLz0gMzYwKTtcbiAgICAgICAgICAgICAgICByZ2JbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLCA0KSA9PSBcImhzYmFcIiAmJiAob3BhY2l0eSA9IHRvRmxvYXQodmFsdWVzWzNdKSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzNdICYmIHZhbHVlc1szXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKG9wYWNpdHkgLz0gMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUi5oc2IycmdiKHJlZCwgZ3JlZW4sIGJsdWUsIG9wYWNpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJnYls2XSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcyA9IHJnYls2XVtzcGxpdF0oY29tbWFTcGFjZXMpO1xuICAgICAgICAgICAgICAgIHJlZCA9IHRvRmxvYXQodmFsdWVzWzBdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0uc2xpY2UoLTEpID09IFwiJVwiICYmIChyZWQgKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgZ3JlZW4gPSB0b0Zsb2F0KHZhbHVlc1sxXSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdLnNsaWNlKC0xKSA9PSBcIiVcIiAmJiAoZ3JlZW4gKj0gMi41NSk7XG4gICAgICAgICAgICAgICAgYmx1ZSA9IHRvRmxvYXQodmFsdWVzWzJdKTtcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMl0uc2xpY2UoLTEpID09IFwiJVwiICYmIChibHVlICo9IDIuNTUpO1xuICAgICAgICAgICAgICAgICh2YWx1ZXNbMF0uc2xpY2UoLTMpID09IFwiZGVnXCIgfHwgdmFsdWVzWzBdLnNsaWNlKC0xKSA9PSBcIlxceGIwXCIpICYmIChyZWQgLz0gMzYwKTtcbiAgICAgICAgICAgICAgICByZ2JbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLCA0KSA9PSBcImhzbGFcIiAmJiAob3BhY2l0eSA9IHRvRmxvYXQodmFsdWVzWzNdKSk7XG4gICAgICAgICAgICAgICAgdmFsdWVzWzNdICYmIHZhbHVlc1szXS5zbGljZSgtMSkgPT0gXCIlXCIgJiYgKG9wYWNpdHkgLz0gMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUi5oc2wycmdiKHJlZCwgZ3JlZW4sIGJsdWUsIG9wYWNpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmdiID0ge3I6IHJlZCwgZzogZ3JlZW4sIGI6IGJsdWUsIHRvU3RyaW5nOiBjbHJUb1N0cmluZ307XG4gICAgICAgICAgICByZ2IuaGV4ID0gXCIjXCIgKyAoMTY3NzcyMTYgfCBibHVlIHwgKGdyZWVuIDw8IDgpIHwgKHJlZCA8PCAxNikpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICAgICAgICAgIFIuaXMob3BhY2l0eSwgXCJmaW5pdGVcIikgJiYgKHJnYi5vcGFjaXR5ID0gb3BhY2l0eSk7XG4gICAgICAgICAgICByZXR1cm4gcmdiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7cjogLTEsIGc6IC0xLCBiOiAtMSwgaGV4OiBcIm5vbmVcIiwgZXJyb3I6IDEsIHRvU3RyaW5nOiBjbHJUb1N0cmluZ307XG4gICAgfSwgUik7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaHNiXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBIU0IgdmFsdWVzIHRvIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3VyLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoIChudW1iZXIpIGh1ZVxuICAgICAtIHMgKG51bWJlcikgc2F0dXJhdGlvblxuICAgICAtIGIgKG51bWJlcikgdmFsdWUgb3IgYnJpZ2h0bmVzc1xuICAgICA9IChzdHJpbmcpIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29sb3VyLlxuICAgIFxcKi9cbiAgICBSLmhzYiA9IGNhY2hlcihmdW5jdGlvbiAoaCwgcywgYikge1xuICAgICAgICByZXR1cm4gUi5oc2IycmdiKGgsIHMsIGIpLmhleDtcbiAgICB9KTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5oc2xcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvbnZlcnRzIEhTTCB2YWx1ZXMgdG8gaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGggKG51bWJlcikgaHVlXG4gICAgIC0gcyAobnVtYmVyKSBzYXR1cmF0aW9uXG4gICAgIC0gbCAobnVtYmVyKSBsdW1pbm9zaXR5XG4gICAgID0gKHN0cmluZykgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgXFwqL1xuICAgIFIuaHNsID0gY2FjaGVyKGZ1bmN0aW9uIChoLCBzLCBsKSB7XG4gICAgICAgIHJldHVybiBSLmhzbDJyZ2IoaCwgcywgbCkuaGV4O1xuICAgIH0pO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnJnYlxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ29udmVydHMgUkdCIHZhbHVlcyB0byBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gciAobnVtYmVyKSByZWRcbiAgICAgLSBnIChudW1iZXIpIGdyZWVuXG4gICAgIC0gYiAobnVtYmVyKSBibHVlXG4gICAgID0gKHN0cmluZykgaGV4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb2xvdXIuXG4gICAgXFwqL1xuICAgIFIucmdiID0gY2FjaGVyKGZ1bmN0aW9uIChyLCBnLCBiKSB7XG4gICAgICAgIGZ1bmN0aW9uIHJvdW5kKHgpIHsgcmV0dXJuICh4ICsgMC41KSB8IDA7IH1cbiAgICAgICAgcmV0dXJuIFwiI1wiICsgKDE2Nzc3MjE2IHwgcm91bmQoYikgfCAocm91bmQoZykgPDwgOCkgfCAocm91bmQocikgPDwgMTYpKS50b1N0cmluZygxNikuc2xpY2UoMSk7XG4gICAgfSk7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0Q29sb3JcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE9uIGVhY2ggY2FsbCByZXR1cm5zIG5leHQgY29sb3VyIGluIHRoZSBzcGVjdHJ1bS4gVG8gcmVzZXQgaXQgYmFjayB0byByZWQgY2FsbCBAUmFwaGFlbC5nZXRDb2xvci5yZXNldFxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSB2YWx1ZSAobnVtYmVyKSAjb3B0aW9uYWwgYnJpZ2h0bmVzcywgZGVmYXVsdCBpcyBgMC43NWBcbiAgICAgPSAoc3RyaW5nKSBoZXggcmVwcmVzZW50YXRpb24gb2YgdGhlIGNvbG91ci5cbiAgICBcXCovXG4gICAgUi5nZXRDb2xvciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmdldENvbG9yLnN0YXJ0ID0gdGhpcy5nZXRDb2xvci5zdGFydCB8fCB7aDogMCwgczogMSwgYjogdmFsdWUgfHwgLjc1fSxcbiAgICAgICAgICAgIHJnYiA9IHRoaXMuaHNiMnJnYihzdGFydC5oLCBzdGFydC5zLCBzdGFydC5iKTtcbiAgICAgICAgc3RhcnQuaCArPSAuMDc1O1xuICAgICAgICBpZiAoc3RhcnQuaCA+IDEpIHtcbiAgICAgICAgICAgIHN0YXJ0LmggPSAwO1xuICAgICAgICAgICAgc3RhcnQucyAtPSAuMjtcbiAgICAgICAgICAgIHN0YXJ0LnMgPD0gMCAmJiAodGhpcy5nZXRDb2xvci5zdGFydCA9IHtoOiAwLCBzOiAxLCBiOiBzdGFydC5ifSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJnYi5oZXg7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5nZXRDb2xvci5yZXNldFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVzZXRzIHNwZWN0cnVtIHBvc2l0aW9uIGZvciBAUmFwaGFlbC5nZXRDb2xvciBiYWNrIHRvIHJlZC5cbiAgICBcXCovXG4gICAgUi5nZXRDb2xvci5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RhcnQ7XG4gICAgfTtcblxuICAgIC8vIGh0dHA6Ly9zY2hlcGVycy5jYy9nZXR0aW5nLXRvLXRoZS1wb2ludFxuICAgIGZ1bmN0aW9uIGNhdG11bGxSb20yYmV6aWVyKGNycCwgeikge1xuICAgICAgICB2YXIgZCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaUxlbiA9IGNycC5sZW5ndGg7IGlMZW4gLSAyICogIXogPiBpOyBpICs9IDIpIHtcbiAgICAgICAgICAgIHZhciBwID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAge3g6ICtjcnBbaSAtIDJdLCB5OiArY3JwW2kgLSAxXX0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7eDogK2NycFtpXSwgICAgIHk6ICtjcnBbaSArIDFdfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt4OiArY3JwW2kgKyAyXSwgeTogK2NycFtpICsgM119LFxuICAgICAgICAgICAgICAgICAgICAgICAge3g6ICtjcnBbaSArIDRdLCB5OiArY3JwW2kgKyA1XX1cbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmICh6KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbMF0gPSB7eDogK2NycFtpTGVuIC0gMl0sIHk6ICtjcnBbaUxlbiAtIDFdfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlMZW4gLSA0ID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFszXSA9IHt4OiArY3JwWzBdLCB5OiArY3JwWzFdfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlMZW4gLSAyID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFsyXSA9IHt4OiArY3JwWzBdLCB5OiArY3JwWzFdfTtcbiAgICAgICAgICAgICAgICAgICAgcFszXSA9IHt4OiArY3JwWzJdLCB5OiArY3JwWzNdfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpTGVuIC0gNCA9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBbM10gPSBwWzJdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWkpIHtcbiAgICAgICAgICAgICAgICAgICAgcFswXSA9IHt4OiArY3JwW2ldLCB5OiArY3JwW2kgKyAxXX07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZC5wdXNoKFtcIkNcIixcbiAgICAgICAgICAgICAgICAgICgtcFswXS54ICsgNiAqIHBbMV0ueCArIHBbMl0ueCkgLyA2LFxuICAgICAgICAgICAgICAgICAgKC1wWzBdLnkgKyA2ICogcFsxXS55ICsgcFsyXS55KSAvIDYsXG4gICAgICAgICAgICAgICAgICAocFsxXS54ICsgNiAqIHBbMl0ueCAtIHBbM10ueCkgLyA2LFxuICAgICAgICAgICAgICAgICAgKHBbMV0ueSArIDYqcFsyXS55IC0gcFszXS55KSAvIDYsXG4gICAgICAgICAgICAgICAgICBwWzJdLngsXG4gICAgICAgICAgICAgICAgICBwWzJdLnlcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhcnNlUGF0aFN0cmluZ1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBQYXJzZXMgZ2l2ZW4gcGF0aCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBhcnJheXMgb2YgcGF0aCBzZWdtZW50cy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcGF0aFN0cmluZyAoc3RyaW5nfGFycmF5KSBwYXRoIHN0cmluZyBvciBhcnJheSBvZiBzZWdtZW50cyAoaW4gdGhlIGxhc3QgY2FzZSBpdCB3aWxsIGJlIHJldHVybmVkIHN0cmFpZ2h0IGF3YXkpXG4gICAgID0gKGFycmF5KSBhcnJheSBvZiBzZWdtZW50cy5cbiAgICBcXCovXG4gICAgUi5wYXJzZVBhdGhTdHJpbmcgPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xuICAgICAgICBpZiAoIXBhdGhTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwdGggPSBwYXRocyhwYXRoU3RyaW5nKTtcbiAgICAgICAgaWYgKHB0aC5hcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLmFycik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyYW1Db3VudHMgPSB7YTogNywgYzogNiwgaDogMSwgbDogMiwgbTogMiwgcjogNCwgcTogNCwgczogNCwgdDogMiwgdjogMSwgejogMH0sXG4gICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgIGlmIChSLmlzKHBhdGhTdHJpbmcsIGFycmF5KSAmJiBSLmlzKHBhdGhTdHJpbmdbMF0sIGFycmF5KSkgeyAvLyByb3VnaCBhc3N1bXB0aW9uXG4gICAgICAgICAgICBkYXRhID0gcGF0aENsb25lKHBhdGhTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIFN0cihwYXRoU3RyaW5nKS5yZXBsYWNlKHBhdGhDb21tYW5kLCBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjLnJlcGxhY2UocGF0aFZhbHVlcywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgYiAmJiBwYXJhbXMucHVzaCgrYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJtXCIgJiYgcGFyYW1zLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFtiXVtjb25jYXRdKHBhcmFtcy5zcGxpY2UoMCwgMikpKTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IFwibFwiO1xuICAgICAgICAgICAgICAgICAgICBiID0gYiA9PSBcIm1cIiA/IFwibFwiIDogXCJMXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuYW1lID09IFwiclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChbYl1bY29uY2F0XShwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugd2hpbGUgKHBhcmFtcy5sZW5ndGggPj0gcGFyYW1Db3VudHNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKFtiXVtjb25jYXRdKHBhcmFtcy5zcGxpY2UoMCwgcGFyYW1Db3VudHNbbmFtZV0pKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1Db3VudHNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS50b1N0cmluZyA9IFIuX3BhdGgyc3RyaW5nO1xuICAgICAgICBwdGguYXJyID0gcGF0aENsb25lKGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhcnNlVHJhbnNmb3JtU3RyaW5nXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIFBhcnNlcyBnaXZlbiBwYXRoIHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRyYW5zZm9ybWF0aW9ucy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gVFN0cmluZyAoc3RyaW5nfGFycmF5KSB0cmFuc2Zvcm0gc3RyaW5nIG9yIGFycmF5IG9mIHRyYW5zZm9ybWF0aW9ucyAoaW4gdGhlIGxhc3QgY2FzZSBpdCB3aWxsIGJlIHJldHVybmVkIHN0cmFpZ2h0IGF3YXkpXG4gICAgID0gKGFycmF5KSBhcnJheSBvZiB0cmFuc2Zvcm1hdGlvbnMuXG4gICAgXFwqL1xuICAgIFIucGFyc2VUcmFuc2Zvcm1TdHJpbmcgPSBjYWNoZXIoZnVuY3Rpb24gKFRTdHJpbmcpIHtcbiAgICAgICAgaWYgKCFUU3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1Db3VudHMgPSB7cjogMywgczogNCwgdDogMiwgbTogNn0sXG4gICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgIGlmIChSLmlzKFRTdHJpbmcsIGFycmF5KSAmJiBSLmlzKFRTdHJpbmdbMF0sIGFycmF5KSkgeyAvLyByb3VnaCBhc3N1bXB0aW9uXG4gICAgICAgICAgICBkYXRhID0gcGF0aENsb25lKFRTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIFN0cihUU3RyaW5nKS5yZXBsYWNlKHRDb21tYW5kLCBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGxvd2VyQ2FzZS5jYWxsKGIpO1xuICAgICAgICAgICAgICAgIGMucmVwbGFjZShwYXRoVmFsdWVzLCBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICBiICYmIHBhcmFtcy5wdXNoKCtiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhLnB1c2goW2JdW2NvbmNhdF0ocGFyYW1zKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnRvU3RyaW5nID0gUi5fcGF0aDJzdHJpbmc7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xuICAgIC8vIFBBVEhTXG4gICAgdmFyIHBhdGhzID0gZnVuY3Rpb24gKHBzKSB7XG4gICAgICAgIHZhciBwID0gcGF0aHMucHMgPSBwYXRocy5wcyB8fCB7fTtcbiAgICAgICAgaWYgKHBbcHNdKSB7XG4gICAgICAgICAgICBwW3BzXS5zbGVlcCA9IDEwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBbcHNdID0ge1xuICAgICAgICAgICAgICAgIHNsZWVwOiAxMDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcCkgaWYgKHBbaGFzXShrZXkpICYmIGtleSAhPSBwcykge1xuICAgICAgICAgICAgICAgIHBba2V5XS5zbGVlcC0tO1xuICAgICAgICAgICAgICAgICFwW2tleV0uc2xlZXAgJiYgZGVsZXRlIHBba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwW3BzXTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmZpbmREb3RzQXRTZWdtZW50XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIEZpbmQgZG90IGNvb3JkaW5hdGVzIG9uIHRoZSBnaXZlbiBjdWJpYyBiZXppZXIgY3VydmUgYXQgdGhlIGdpdmVuIHQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHAxeCAobnVtYmVyKSB4IG9mIHRoZSBmaXJzdCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSBwMXkgKG51bWJlcikgeSBvZiB0aGUgZmlyc3QgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gYzF4IChudW1iZXIpIHggb2YgdGhlIGZpcnN0IGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMXkgKG51bWJlcikgeSBvZiB0aGUgZmlyc3QgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMyeCAobnVtYmVyKSB4IG9mIHRoZSBzZWNvbmQgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMyeSAobnVtYmVyKSB5IG9mIHRoZSBzZWNvbmQgYW5jaG9yIG9mIHRoZSBjdXJ2ZVxuICAgICAtIHAyeCAobnVtYmVyKSB4IG9mIHRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gcDJ5IChudW1iZXIpIHkgb2YgdGhlIHNlY29uZCBwb2ludCBvZiB0aGUgY3VydmVcbiAgICAgLSB0IChudW1iZXIpIHBvc2l0aW9uIG9uIHRoZSBjdXJ2ZSAoMC4uMSlcbiAgICAgPSAob2JqZWN0KSBwb2ludCBpbmZvcm1hdGlvbiBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgIG8gICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgbToge1xuICAgICBvICAgICAgICAgeDogKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IGFuY2hvclxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IGFuY2hvclxuICAgICBvICAgICB9XG4gICAgIG8gICAgIG46IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgYW5jaG9yXG4gICAgIG8gICAgICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IGFuY2hvclxuICAgICBvICAgICB9XG4gICAgIG8gICAgIHN0YXJ0OiB7XG4gICAgIG8gICAgICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHN0YXJ0IG9mIHRoZSBjdXJ2ZVxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBzdGFydCBvZiB0aGUgY3VydmVcbiAgICAgbyAgICAgfVxuICAgICBvICAgICBlbmQ6IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgZW5kIG9mIHRoZSBjdXJ2ZVxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBlbmQgb2YgdGhlIGN1cnZlXG4gICAgIG8gICAgIH1cbiAgICAgbyAgICAgYWxwaGE6IChudW1iZXIpIGFuZ2xlIG9mIHRoZSBjdXJ2ZSBkZXJpdmF0aXZlIGF0IHRoZSBwb2ludFxuICAgICBvIH1cbiAgICBcXCovXG4gICAgUi5maW5kRG90c0F0U2VnbWVudCA9IGZ1bmN0aW9uIChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgdCkge1xuICAgICAgICB2YXIgdDEgPSAxIC0gdCxcbiAgICAgICAgICAgIHQxMyA9IHBvdyh0MSwgMyksXG4gICAgICAgICAgICB0MTIgPSBwb3codDEsIDIpLFxuICAgICAgICAgICAgdDIgPSB0ICogdCxcbiAgICAgICAgICAgIHQzID0gdDIgKiB0LFxuICAgICAgICAgICAgeCA9IHQxMyAqIHAxeCArIHQxMiAqIDMgKiB0ICogYzF4ICsgdDEgKiAzICogdCAqIHQgKiBjMnggKyB0MyAqIHAyeCxcbiAgICAgICAgICAgIHkgPSB0MTMgKiBwMXkgKyB0MTIgKiAzICogdCAqIGMxeSArIHQxICogMyAqIHQgKiB0ICogYzJ5ICsgdDMgKiBwMnksXG4gICAgICAgICAgICBteCA9IHAxeCArIDIgKiB0ICogKGMxeCAtIHAxeCkgKyB0MiAqIChjMnggLSAyICogYzF4ICsgcDF4KSxcbiAgICAgICAgICAgIG15ID0gcDF5ICsgMiAqIHQgKiAoYzF5IC0gcDF5KSArIHQyICogKGMyeSAtIDIgKiBjMXkgKyBwMXkpLFxuICAgICAgICAgICAgbnggPSBjMXggKyAyICogdCAqIChjMnggLSBjMXgpICsgdDIgKiAocDJ4IC0gMiAqIGMyeCArIGMxeCksXG4gICAgICAgICAgICBueSA9IGMxeSArIDIgKiB0ICogKGMyeSAtIGMxeSkgKyB0MiAqIChwMnkgLSAyICogYzJ5ICsgYzF5KSxcbiAgICAgICAgICAgIGF4ID0gdDEgKiBwMXggKyB0ICogYzF4LFxuICAgICAgICAgICAgYXkgPSB0MSAqIHAxeSArIHQgKiBjMXksXG4gICAgICAgICAgICBjeCA9IHQxICogYzJ4ICsgdCAqIHAyeCxcbiAgICAgICAgICAgIGN5ID0gdDEgKiBjMnkgKyB0ICogcDJ5LFxuICAgICAgICAgICAgYWxwaGEgPSAoOTAgLSBtYXRoLmF0YW4yKG14IC0gbngsIG15IC0gbnkpICogMTgwIC8gUEkpO1xuICAgICAgICAobXggPiBueCB8fCBteSA8IG55KSAmJiAoYWxwaGEgKz0gMTgwKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgbToge3g6IG14LCB5OiBteX0sXG4gICAgICAgICAgICBuOiB7eDogbngsIHk6IG55fSxcbiAgICAgICAgICAgIHN0YXJ0OiB7eDogYXgsIHk6IGF5fSxcbiAgICAgICAgICAgIGVuZDoge3g6IGN4LCB5OiBjeX0sXG4gICAgICAgICAgICBhbHBoYTogYWxwaGFcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmJlemllckJCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJuIGJvdW5kaW5nIGJveCBvZiBhIGdpdmVuIGN1YmljIGJlemllciBjdXJ2ZVxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwMXggKG51bWJlcikgeCBvZiB0aGUgZmlyc3QgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgIC0gcDF5IChudW1iZXIpIHkgb2YgdGhlIGZpcnN0IHBvaW50IG9mIHRoZSBjdXJ2ZVxuICAgICAtIGMxeCAobnVtYmVyKSB4IG9mIHRoZSBmaXJzdCBhbmNob3Igb2YgdGhlIGN1cnZlXG4gICAgIC0gYzF5IChudW1iZXIpIHkgb2YgdGhlIGZpcnN0IGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMnggKG51bWJlcikgeCBvZiB0aGUgc2Vjb25kIGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBjMnkgKG51bWJlcikgeSBvZiB0aGUgc2Vjb25kIGFuY2hvciBvZiB0aGUgY3VydmVcbiAgICAgLSBwMnggKG51bWJlcikgeCBvZiB0aGUgc2Vjb25kIHBvaW50IG9mIHRoZSBjdXJ2ZVxuICAgICAtIHAyeSAobnVtYmVyKSB5IG9mIHRoZSBzZWNvbmQgcG9pbnQgb2YgdGhlIGN1cnZlXG4gICAgICogb3JcbiAgICAgLSBiZXogKGFycmF5KSBhcnJheSBvZiBzaXggcG9pbnRzIGZvciBiZXppZXIgY3VydmVcbiAgICAgPSAob2JqZWN0KSBwb2ludCBpbmZvcm1hdGlvbiBpbiBmb3JtYXQ6XG4gICAgIG8ge1xuICAgICBvICAgICBtaW46IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgbGVmdCBwb2ludFxuICAgICBvICAgICAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSB0b3AgcG9pbnRcbiAgICAgbyAgICAgfVxuICAgICBvICAgICBtYXg6IHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcmlnaHQgcG9pbnRcbiAgICAgbyAgICAgICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgYm90dG9tIHBvaW50XG4gICAgIG8gICAgIH1cbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuYmV6aWVyQkJveCA9IGZ1bmN0aW9uIChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSkge1xuICAgICAgICBpZiAoIVIuaXMocDF4LCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICBwMXggPSBbcDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiYm94ID0gY3VydmVEaW0uYXBwbHkobnVsbCwgcDF4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGJib3gubWluLngsXG4gICAgICAgICAgICB5OiBiYm94Lm1pbi55LFxuICAgICAgICAgICAgeDI6IGJib3gubWF4LngsXG4gICAgICAgICAgICB5MjogYmJveC5tYXgueSxcbiAgICAgICAgICAgIHdpZHRoOiBiYm94Lm1heC54IC0gYmJveC5taW4ueCxcbiAgICAgICAgICAgIGhlaWdodDogYmJveC5tYXgueSAtIGJib3gubWluLnlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmlzUG9pbnRJbnNpZGVCQm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAqKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGdpdmVuIHBvaW50IGlzIGluc2lkZSBib3VuZGluZyBib3hlcy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYmJveCAoc3RyaW5nKSBib3VuZGluZyBib3hcbiAgICAgLSB4IChzdHJpbmcpIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgLSB5IChzdHJpbmcpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgPSAoYm9vbGVhbikgYHRydWVgIGlmIHBvaW50IGluc2lkZVxuICAgIFxcKi9cbiAgICBSLmlzUG9pbnRJbnNpZGVCQm94ID0gZnVuY3Rpb24gKGJib3gsIHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHggPj0gYmJveC54ICYmIHggPD0gYmJveC54MiAmJiB5ID49IGJib3gueSAmJiB5IDw9IGJib3gueTI7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5pc0JCb3hJbnRlcnNlY3RcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdHdvIGJvdW5kaW5nIGJveGVzIGludGVyc2VjdFxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBiYm94MSAoc3RyaW5nKSBmaXJzdCBib3VuZGluZyBib3hcbiAgICAgLSBiYm94MiAoc3RyaW5nKSBzZWNvbmQgYm91bmRpbmcgYm94XG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCBpZiB0aGV5IGludGVyc2VjdFxuICAgIFxcKi9cbiAgICBSLmlzQkJveEludGVyc2VjdCA9IGZ1bmN0aW9uIChiYm94MSwgYmJveDIpIHtcbiAgICAgICAgdmFyIGkgPSBSLmlzUG9pbnRJbnNpZGVCQm94O1xuICAgICAgICByZXR1cm4gaShiYm94MiwgYmJveDEueCwgYmJveDEueSlcbiAgICAgICAgICAgIHx8IGkoYmJveDIsIGJib3gxLngyLCBiYm94MS55KVxuICAgICAgICAgICAgfHwgaShiYm94MiwgYmJveDEueCwgYmJveDEueTIpXG4gICAgICAgICAgICB8fCBpKGJib3gyLCBiYm94MS54MiwgYmJveDEueTIpXG4gICAgICAgICAgICB8fCBpKGJib3gxLCBiYm94Mi54LCBiYm94Mi55KVxuICAgICAgICAgICAgfHwgaShiYm94MSwgYmJveDIueDIsIGJib3gyLnkpXG4gICAgICAgICAgICB8fCBpKGJib3gxLCBiYm94Mi54LCBiYm94Mi55MilcbiAgICAgICAgICAgIHx8IGkoYmJveDEsIGJib3gyLngyLCBiYm94Mi55MilcbiAgICAgICAgICAgIHx8IChiYm94MS54IDwgYmJveDIueDIgJiYgYmJveDEueCA+IGJib3gyLnggfHwgYmJveDIueCA8IGJib3gxLngyICYmIGJib3gyLnggPiBiYm94MS54KVxuICAgICAgICAgICAgJiYgKGJib3gxLnkgPCBiYm94Mi55MiAmJiBiYm94MS55ID4gYmJveDIueSB8fCBiYm94Mi55IDwgYmJveDEueTIgJiYgYmJveDIueSA+IGJib3gxLnkpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gYmFzZTModCwgcDEsIHAyLCBwMywgcDQpIHtcbiAgICAgICAgdmFyIHQxID0gLTMgKiBwMSArIDkgKiBwMiAtIDkgKiBwMyArIDMgKiBwNCxcbiAgICAgICAgICAgIHQyID0gdCAqIHQxICsgNiAqIHAxIC0gMTIgKiBwMiArIDYgKiBwMztcbiAgICAgICAgcmV0dXJuIHQgKiB0MiAtIDMgKiBwMSArIDMgKiBwMjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmV6bGVuKHgxLCB5MSwgeDIsIHkyLCB4MywgeTMsIHg0LCB5NCwgeikge1xuICAgICAgICBpZiAoeiA9PSBudWxsKSB7XG4gICAgICAgICAgICB6ID0gMTtcbiAgICAgICAgfVxuICAgICAgICB6ID0geiA+IDEgPyAxIDogeiA8IDAgPyAwIDogejtcbiAgICAgICAgdmFyIHoyID0geiAvIDIsXG4gICAgICAgICAgICBuID0gMTIsXG4gICAgICAgICAgICBUdmFsdWVzID0gWy0wLjEyNTIsMC4xMjUyLC0wLjM2NzgsMC4zNjc4LC0wLjU4NzMsMC41ODczLC0wLjc2OTksMC43Njk5LC0wLjkwNDEsMC45MDQxLC0wLjk4MTYsMC45ODE2XSxcbiAgICAgICAgICAgIEN2YWx1ZXMgPSBbMC4yNDkxLDAuMjQ5MSwwLjIzMzUsMC4yMzM1LDAuMjAzMiwwLjIwMzIsMC4xNjAxLDAuMTYwMSwwLjEwNjksMC4xMDY5LDAuMDQ3MiwwLjA0NzJdLFxuICAgICAgICAgICAgc3VtID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjdCA9IHoyICogVHZhbHVlc1tpXSArIHoyLFxuICAgICAgICAgICAgICAgIHhiYXNlID0gYmFzZTMoY3QsIHgxLCB4MiwgeDMsIHg0KSxcbiAgICAgICAgICAgICAgICB5YmFzZSA9IGJhc2UzKGN0LCB5MSwgeTIsIHkzLCB5NCksXG4gICAgICAgICAgICAgICAgY29tYiA9IHhiYXNlICogeGJhc2UgKyB5YmFzZSAqIHliYXNlO1xuICAgICAgICAgICAgc3VtICs9IEN2YWx1ZXNbaV0gKiBtYXRoLnNxcnQoY29tYik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHoyICogc3VtO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUYXRMZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCBsbCkge1xuICAgICAgICBpZiAobGwgPCAwIHx8IGJlemxlbih4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIDwgbGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdCA9IDEsXG4gICAgICAgICAgICBzdGVwID0gdCAvIDIsXG4gICAgICAgICAgICB0MiA9IHQgLSBzdGVwLFxuICAgICAgICAgICAgbCxcbiAgICAgICAgICAgIGUgPSAuMDE7XG4gICAgICAgIGwgPSBiZXpsZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCB0Mik7XG4gICAgICAgIHdoaWxlIChhYnMobCAtIGxsKSA+IGUpIHtcbiAgICAgICAgICAgIHN0ZXAgLz0gMjtcbiAgICAgICAgICAgIHQyICs9IChsIDwgbGwgPyAxIDogLTEpICogc3RlcDtcbiAgICAgICAgICAgIGwgPSBiZXpsZW4oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCB0Mik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnRlcnNlY3QoeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG1tYXgoeDEsIHgyKSA8IG1taW4oeDMsIHg0KSB8fFxuICAgICAgICAgICAgbW1pbih4MSwgeDIpID4gbW1heCh4MywgeDQpIHx8XG4gICAgICAgICAgICBtbWF4KHkxLCB5MikgPCBtbWluKHkzLCB5NCkgfHxcbiAgICAgICAgICAgIG1taW4oeTEsIHkyKSA+IG1tYXgoeTMsIHk0KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbnggPSAoeDEgKiB5MiAtIHkxICogeDIpICogKHgzIC0geDQpIC0gKHgxIC0geDIpICogKHgzICogeTQgLSB5MyAqIHg0KSxcbiAgICAgICAgICAgIG55ID0gKHgxICogeTIgLSB5MSAqIHgyKSAqICh5MyAtIHk0KSAtICh5MSAtIHkyKSAqICh4MyAqIHk0IC0geTMgKiB4NCksXG4gICAgICAgICAgICBkZW5vbWluYXRvciA9ICh4MSAtIHgyKSAqICh5MyAtIHk0KSAtICh5MSAtIHkyKSAqICh4MyAtIHg0KTtcblxuICAgICAgICBpZiAoIWRlbm9taW5hdG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHB4ID0gbnggLyBkZW5vbWluYXRvcixcbiAgICAgICAgICAgIHB5ID0gbnkgLyBkZW5vbWluYXRvcixcbiAgICAgICAgICAgIHB4MiA9ICtweC50b0ZpeGVkKDIpLFxuICAgICAgICAgICAgcHkyID0gK3B5LnRvRml4ZWQoMik7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHB4MiA8ICttbWluKHgxLCB4MikudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHgyID4gK21tYXgoeDEsIHgyKS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweDIgPCArbW1pbih4MywgeDQpLnRvRml4ZWQoMikgfHxcbiAgICAgICAgICAgIHB4MiA+ICttbWF4KHgzLCB4NCkudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHkyIDwgK21taW4oeTEsIHkyKS50b0ZpeGVkKDIpIHx8XG4gICAgICAgICAgICBweTIgPiArbW1heCh5MSwgeTIpLnRvRml4ZWQoMikgfHxcbiAgICAgICAgICAgIHB5MiA8ICttbWluKHkzLCB5NCkudG9GaXhlZCgyKSB8fFxuICAgICAgICAgICAgcHkyID4gK21tYXgoeTMsIHk0KS50b0ZpeGVkKDIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7eDogcHgsIHk6IHB5fTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW50ZXIoYmV6MSwgYmV6Mikge1xuICAgICAgICByZXR1cm4gaW50ZXJIZWxwZXIoYmV6MSwgYmV6Mik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVyQ291bnQoYmV6MSwgYmV6Mikge1xuICAgICAgICByZXR1cm4gaW50ZXJIZWxwZXIoYmV6MSwgYmV6MiwgMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGludGVySGVscGVyKGJlejEsIGJlejIsIGp1c3RDb3VudCkge1xuICAgICAgICB2YXIgYmJveDEgPSBSLmJlemllckJCb3goYmV6MSksXG4gICAgICAgICAgICBiYm94MiA9IFIuYmV6aWVyQkJveChiZXoyKTtcbiAgICAgICAgaWYgKCFSLmlzQkJveEludGVyc2VjdChiYm94MSwgYmJveDIpKSB7XG4gICAgICAgICAgICByZXR1cm4ganVzdENvdW50ID8gMCA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsMSA9IGJlemxlbi5hcHBseSgwLCBiZXoxKSxcbiAgICAgICAgICAgIGwyID0gYmV6bGVuLmFwcGx5KDAsIGJlejIpLFxuICAgICAgICAgICAgbjEgPSBtbWF4KH5+KGwxIC8gNSksIDEpLFxuICAgICAgICAgICAgbjIgPSBtbWF4KH5+KGwyIC8gNSksIDEpLFxuICAgICAgICAgICAgZG90czEgPSBbXSxcbiAgICAgICAgICAgIGRvdHMyID0gW10sXG4gICAgICAgICAgICB4eSA9IHt9LFxuICAgICAgICAgICAgcmVzID0ganVzdENvdW50ID8gMCA6IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG4xICsgMTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcCA9IFIuZmluZERvdHNBdFNlZ21lbnQuYXBwbHkoUiwgYmV6MS5jb25jYXQoaSAvIG4xKSk7XG4gICAgICAgICAgICBkb3RzMS5wdXNoKHt4OiBwLngsIHk6IHAueSwgdDogaSAvIG4xfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG4yICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBwID0gUi5maW5kRG90c0F0U2VnbWVudC5hcHBseShSLCBiZXoyLmNvbmNhdChpIC8gbjIpKTtcbiAgICAgICAgICAgIGRvdHMyLnB1c2goe3g6IHAueCwgeTogcC55LCB0OiBpIC8gbjJ9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjE7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpID0gZG90czFbaV0sXG4gICAgICAgICAgICAgICAgICAgIGRpMSA9IGRvdHMxW2kgKyAxXSxcbiAgICAgICAgICAgICAgICAgICAgZGogPSBkb3RzMltqXSxcbiAgICAgICAgICAgICAgICAgICAgZGoxID0gZG90czJbaiArIDFdLFxuICAgICAgICAgICAgICAgICAgICBjaSA9IGFicyhkaTEueCAtIGRpLngpIDwgLjAwMSA/IFwieVwiIDogXCJ4XCIsXG4gICAgICAgICAgICAgICAgICAgIGNqID0gYWJzKGRqMS54IC0gZGoueCkgPCAuMDAxID8gXCJ5XCIgOiBcInhcIixcbiAgICAgICAgICAgICAgICAgICAgaXMgPSBpbnRlcnNlY3QoZGkueCwgZGkueSwgZGkxLngsIGRpMS55LCBkai54LCBkai55LCBkajEueCwgZGoxLnkpO1xuICAgICAgICAgICAgICAgIGlmIChpcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeHlbaXMueC50b0ZpeGVkKDQpXSA9PSBpcy55LnRvRml4ZWQoNCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHh5W2lzLngudG9GaXhlZCg0KV0gPSBpcy55LnRvRml4ZWQoNCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0MSA9IGRpLnQgKyBhYnMoKGlzW2NpXSAtIGRpW2NpXSkgLyAoZGkxW2NpXSAtIGRpW2NpXSkpICogKGRpMS50IC0gZGkudCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0MiA9IGRqLnQgKyBhYnMoKGlzW2NqXSAtIGRqW2NqXSkgLyAoZGoxW2NqXSAtIGRqW2NqXSkpICogKGRqMS50IC0gZGoudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEuMDAxICYmIHQyID49IDAgJiYgdDIgPD0gMS4wMDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqdXN0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBpcy54LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBpcy55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0MTogbW1pbih0MSwgMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQyOiBtbWluKHQyLCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnBhdGhJbnRlcnNlY3Rpb25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogRmluZHMgaW50ZXJzZWN0aW9ucyBvZiB0d28gcGF0aHNcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gcGF0aDEgKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgLSBwYXRoMiAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICA9IChhcnJheSkgZG90cyBvZiBpbnRlcnNlY3Rpb25cbiAgICAgbyBbXG4gICAgIG8gICAgIHtcbiAgICAgbyAgICAgICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgICAgIHk6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgbyAgICAgICAgIHQxOiAobnVtYmVyKSB0IHZhbHVlIGZvciBzZWdtZW50IG9mIHBhdGgxXG4gICAgIG8gICAgICAgICB0MjogKG51bWJlcikgdCB2YWx1ZSBmb3Igc2VnbWVudCBvZiBwYXRoMlxuICAgICBvICAgICAgICAgc2VnbWVudDE6IChudW1iZXIpIG9yZGVyIG51bWJlciBmb3Igc2VnbWVudCBvZiBwYXRoMVxuICAgICBvICAgICAgICAgc2VnbWVudDI6IChudW1iZXIpIG9yZGVyIG51bWJlciBmb3Igc2VnbWVudCBvZiBwYXRoMlxuICAgICBvICAgICAgICAgYmV6MTogKGFycmF5KSBlaWdodCBjb29yZGluYXRlcyByZXByZXNlbnRpbmcgYmV6acOpciBjdXJ2ZSBmb3IgdGhlIHNlZ21lbnQgb2YgcGF0aDFcbiAgICAgbyAgICAgICAgIGJlejI6IChhcnJheSkgZWlnaHQgY29vcmRpbmF0ZXMgcmVwcmVzZW50aW5nIGJlemnDqXIgY3VydmUgZm9yIHRoZSBzZWdtZW50IG9mIHBhdGgyXG4gICAgIG8gICAgIH1cbiAgICAgbyBdXG4gICAgXFwqL1xuICAgIFIucGF0aEludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChwYXRoMSwgcGF0aDIpIHtcbiAgICAgICAgcmV0dXJuIGludGVyUGF0aEhlbHBlcihwYXRoMSwgcGF0aDIpO1xuICAgIH07XG4gICAgUi5wYXRoSW50ZXJzZWN0aW9uTnVtYmVyID0gZnVuY3Rpb24gKHBhdGgxLCBwYXRoMikge1xuICAgICAgICByZXR1cm4gaW50ZXJQYXRoSGVscGVyKHBhdGgxLCBwYXRoMiwgMSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBpbnRlclBhdGhIZWxwZXIocGF0aDEsIHBhdGgyLCBqdXN0Q291bnQpIHtcbiAgICAgICAgcGF0aDEgPSBSLl9wYXRoMmN1cnZlKHBhdGgxKTtcbiAgICAgICAgcGF0aDIgPSBSLl9wYXRoMmN1cnZlKHBhdGgyKTtcbiAgICAgICAgdmFyIHgxLCB5MSwgeDIsIHkyLCB4MW0sIHkxbSwgeDJtLCB5Mm0sIGJlejEsIGJlejIsXG4gICAgICAgICAgICByZXMgPSBqdXN0Q291bnQgPyAwIDogW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBhdGgxLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwaSA9IHBhdGgxW2ldO1xuICAgICAgICAgICAgaWYgKHBpWzBdID09IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgeDEgPSB4MW0gPSBwaVsxXTtcbiAgICAgICAgICAgICAgICB5MSA9IHkxbSA9IHBpWzJdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocGlbMF0gPT0gXCJDXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmV6MSA9IFt4MSwgeTFdLmNvbmNhdChwaS5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgIHgxID0gYmV6MVs2XTtcbiAgICAgICAgICAgICAgICAgICAgeTEgPSBiZXoxWzddO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJlejEgPSBbeDEsIHkxLCB4MSwgeTEsIHgxbSwgeTFtLCB4MW0sIHkxbV07XG4gICAgICAgICAgICAgICAgICAgIHgxID0geDFtO1xuICAgICAgICAgICAgICAgICAgICB5MSA9IHkxbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gcGF0aDIubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGogPSBwYXRoMltqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBqWzBdID09IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MiA9IHgybSA9IHBqWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSB5Mm0gPSBwalsyXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwalswXSA9PSBcIkNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlejIgPSBbeDIsIHkyXS5jb25jYXQocGouc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gYmV6Mls2XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGJlejJbN107XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlejIgPSBbeDIsIHkyLCB4MiwgeTIsIHgybSwgeTJtLCB4Mm0sIHkybV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSB4Mm07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSB5Mm07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW50ciA9IGludGVySGVscGVyKGJlejEsIGJlejIsIGp1c3RDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanVzdENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IGludHI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBrayA9IGludHIubGVuZ3RoOyBrIDwga2s7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRyW2tdLnNlZ21lbnQxID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50cltrXS5zZWdtZW50MiA9IGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludHJba10uYmV6MSA9IGJlejE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludHJba10uYmV6MiA9IGJlejI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcy5jb25jYXQoaW50cik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuaXNQb2ludEluc2lkZVBhdGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgZ2l2ZW4gcG9pbnQgaXMgaW5zaWRlIGEgZ2l2ZW4gY2xvc2VkIHBhdGguXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGggKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgLSB4IChudW1iZXIpIHggb2YgdGhlIHBvaW50XG4gICAgIC0geSAobnVtYmVyKSB5IG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSB0cnVlLCBpZiBwb2ludCBpcyBpbnNpZGUgdGhlIHBhdGhcbiAgICBcXCovXG4gICAgUi5pc1BvaW50SW5zaWRlUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB4LCB5KSB7XG4gICAgICAgIHZhciBiYm94ID0gUi5wYXRoQkJveChwYXRoKTtcbiAgICAgICAgcmV0dXJuIFIuaXNQb2ludEluc2lkZUJCb3goYmJveCwgeCwgeSkgJiZcbiAgICAgICAgICAgICAgIGludGVyUGF0aEhlbHBlcihwYXRoLCBbW1wiTVwiLCB4LCB5XSwgW1wiSFwiLCBiYm94LngyICsgMTBdXSwgMSkgJSAyID09IDE7XG4gICAgfTtcbiAgICBSLl9yZW1vdmVkRmFjdG9yeSA9IGZ1bmN0aW9uIChtZXRob2RuYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmxvZ1wiLCBudWxsLCBcIlJhcGhhXFx4ZWJsOiB5b3UgYXJlIGNhbGxpbmcgdG8gbWV0aG9kIFxcdTIwMWNcIiArIG1ldGhvZG5hbWUgKyBcIlxcdTIwMWQgb2YgcmVtb3ZlZCBvYmplY3RcIiwgbWV0aG9kbmFtZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5wYXRoQkJveFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBSZXR1cm4gYm91bmRpbmcgYm94IG9mIGEgZ2l2ZW4gcGF0aFxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoIChzdHJpbmcpIHBhdGggc3RyaW5nXG4gICAgID0gKG9iamVjdCkgYm91bmRpbmcgYm94XG4gICAgIG8ge1xuICAgICBvICAgICB4OiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIGxlZnQgdG9wIHBvaW50IG9mIHRoZSBib3hcbiAgICAgbyAgICAgeTogKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHRvcCBwb2ludCBvZiB0aGUgYm94XG4gICAgIG8gICAgIHgyOiAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IGJvdHRvbSBwb2ludCBvZiB0aGUgYm94XG4gICAgIG8gICAgIHkyOiAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IGJvdHRvbSBwb2ludCBvZiB0aGUgYm94XG4gICAgIG8gICAgIHdpZHRoOiAobnVtYmVyKSB3aWR0aCBvZiB0aGUgYm94XG4gICAgIG8gICAgIGhlaWdodDogKG51bWJlcikgaGVpZ2h0IG9mIHRoZSBib3hcbiAgICAgbyAgICAgY3g6IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBib3hcbiAgICAgbyAgICAgY3k6IChudW1iZXIpIHkgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBib3hcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIHZhciBwYXRoRGltZW5zaW9ucyA9IFIucGF0aEJCb3ggPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICB2YXIgcHRoID0gcGF0aHMocGF0aCk7XG4gICAgICAgIGlmIChwdGguYmJveCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lKHB0aC5iYm94KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7eDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCwgeDI6IDAsIHkyOiAwfTtcbiAgICAgICAgfVxuICAgICAgICBwYXRoID0gcGF0aDJjdXJ2ZShwYXRoKTtcbiAgICAgICAgdmFyIHggPSAwLFxuICAgICAgICAgICAgeSA9IDAsXG4gICAgICAgICAgICBYID0gW10sXG4gICAgICAgICAgICBZID0gW10sXG4gICAgICAgICAgICBwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwYXRoLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHAgPSBwYXRoW2ldO1xuICAgICAgICAgICAgaWYgKHBbMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICB4ID0gcFsxXTtcbiAgICAgICAgICAgICAgICB5ID0gcFsyXTtcbiAgICAgICAgICAgICAgICBYLnB1c2goeCk7XG4gICAgICAgICAgICAgICAgWS5wdXNoKHkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGltID0gY3VydmVEaW0oeCwgeSwgcFsxXSwgcFsyXSwgcFszXSwgcFs0XSwgcFs1XSwgcFs2XSk7XG4gICAgICAgICAgICAgICAgWCA9IFhbY29uY2F0XShkaW0ubWluLngsIGRpbS5tYXgueCk7XG4gICAgICAgICAgICAgICAgWSA9IFlbY29uY2F0XShkaW0ubWluLnksIGRpbS5tYXgueSk7XG4gICAgICAgICAgICAgICAgeCA9IHBbNV07XG4gICAgICAgICAgICAgICAgeSA9IHBbNl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHhtaW4gPSBtbWluW2FwcGx5XSgwLCBYKSxcbiAgICAgICAgICAgIHltaW4gPSBtbWluW2FwcGx5XSgwLCBZKSxcbiAgICAgICAgICAgIHhtYXggPSBtbWF4W2FwcGx5XSgwLCBYKSxcbiAgICAgICAgICAgIHltYXggPSBtbWF4W2FwcGx5XSgwLCBZKSxcbiAgICAgICAgICAgIHdpZHRoID0geG1heCAtIHhtaW4sXG4gICAgICAgICAgICBoZWlnaHQgPSB5bWF4IC0geW1pbixcbiAgICAgICAgICAgICAgICBiYiA9IHtcbiAgICAgICAgICAgICAgICB4OiB4bWluLFxuICAgICAgICAgICAgICAgIHk6IHltaW4sXG4gICAgICAgICAgICAgICAgeDI6IHhtYXgsXG4gICAgICAgICAgICAgICAgeTI6IHltYXgsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGN4OiB4bWluICsgd2lkdGggLyAyLFxuICAgICAgICAgICAgICAgIGN5OiB5bWluICsgaGVpZ2h0IC8gMlxuICAgICAgICAgICAgfTtcbiAgICAgICAgcHRoLmJib3ggPSBjbG9uZShiYik7XG4gICAgICAgIHJldHVybiBiYjtcbiAgICB9LFxuICAgICAgICBwYXRoQ2xvbmUgPSBmdW5jdGlvbiAocGF0aEFycmF5KSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gY2xvbmUocGF0aEFycmF5KTtcbiAgICAgICAgICAgIHJlcy50b1N0cmluZyA9IFIuX3BhdGgyc3RyaW5nO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSxcbiAgICAgICAgcGF0aFRvUmVsYXRpdmUgPSBSLl9wYXRoVG9SZWxhdGl2ZSA9IGZ1bmN0aW9uIChwYXRoQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBwdGggPSBwYXRocyhwYXRoQXJyYXkpO1xuICAgICAgICAgICAgaWYgKHB0aC5yZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aENsb25lKHB0aC5yZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFSLmlzKHBhdGhBcnJheSwgYXJyYXkpIHx8ICFSLmlzKHBhdGhBcnJheSAmJiBwYXRoQXJyYXlbMF0sIGFycmF5KSkgeyAvLyByb3VnaCBhc3N1bXB0aW9uXG4gICAgICAgICAgICAgICAgcGF0aEFycmF5ID0gUi5wYXJzZVBhdGhTdHJpbmcocGF0aEFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXMgPSBbXSxcbiAgICAgICAgICAgICAgICB4ID0gMCxcbiAgICAgICAgICAgICAgICB5ID0gMCxcbiAgICAgICAgICAgICAgICBteCA9IDAsXG4gICAgICAgICAgICAgICAgbXkgPSAwLFxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgIGlmIChwYXRoQXJyYXlbMF1bMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICB4ID0gcGF0aEFycmF5WzBdWzFdO1xuICAgICAgICAgICAgICAgIHkgPSBwYXRoQXJyYXlbMF1bMl07XG4gICAgICAgICAgICAgICAgbXggPSB4O1xuICAgICAgICAgICAgICAgIG15ID0geTtcbiAgICAgICAgICAgICAgICBzdGFydCsrO1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKFtcIk1cIiwgeCwgeV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0LCBpaSA9IHBhdGhBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSByZXNbaV0gPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgcGEgPSBwYXRoQXJyYXlbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhWzBdICE9IGxvd2VyQ2FzZS5jYWxsKHBhWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICByWzBdID0gbG93ZXJDYXNlLmNhbGwocGFbMF0pO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsxXSA9IHBhWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMl0gPSBwYVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzNdID0gcGFbM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls0XSA9IHBhWzRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNV0gPSBwYVs1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzZdID0gKyhwYVs2XSAtIHgpLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls3XSA9ICsocGFbN10gLSB5KS50b0ZpeGVkKDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzFdID0gKyhwYVsxXSAtIHkpLnRvRml4ZWQoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gcGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXkgPSBwYVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gcGEubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByW2pdID0gKyhwYVtqXSAtICgoaiAlIDIpID8geCA6IHkpKS50b0ZpeGVkKDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHIgPSByZXNbaV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhWzBdID09IFwibVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBteCA9IHBhWzFdICsgeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG15ID0gcGFbMl0gKyB5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBrayA9IHBhLmxlbmd0aDsgayA8IGtrOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1tpXVtrXSA9IHBhW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsZW4gPSByZXNbaV0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzW2ldWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gbXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gbXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHggKz0gK3Jlc1tpXVtsZW4gLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeSArPSArcmVzW2ldW2xlbiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ICs9ICtyZXNbaV1bbGVuIC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB5ICs9ICtyZXNbaV1bbGVuIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnRvU3RyaW5nID0gUi5fcGF0aDJzdHJpbmc7XG4gICAgICAgICAgICBwdGgucmVsID0gcGF0aENsb25lKHJlcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9LFxuICAgICAgICBwYXRoVG9BYnNvbHV0ZSA9IFIuX3BhdGhUb0Fic29sdXRlID0gZnVuY3Rpb24gKHBhdGhBcnJheSkge1xuICAgICAgICAgICAgdmFyIHB0aCA9IHBhdGhzKHBhdGhBcnJheSk7XG4gICAgICAgICAgICBpZiAocHRoLmFicykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLmFicyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIVIuaXMocGF0aEFycmF5LCBhcnJheSkgfHwgIVIuaXMocGF0aEFycmF5ICYmIHBhdGhBcnJheVswXSwgYXJyYXkpKSB7IC8vIHJvdWdoIGFzc3VtcHRpb25cbiAgICAgICAgICAgICAgICBwYXRoQXJyYXkgPSBSLnBhcnNlUGF0aFN0cmluZyhwYXRoQXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwYXRoQXJyYXkgfHwgIXBhdGhBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1tcIk1cIiwgMCwgMF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlcyA9IFtdLFxuICAgICAgICAgICAgICAgIHggPSAwLFxuICAgICAgICAgICAgICAgIHkgPSAwLFxuICAgICAgICAgICAgICAgIG14ID0gMCxcbiAgICAgICAgICAgICAgICBteSA9IDAsXG4gICAgICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICAgICAgaWYgKHBhdGhBcnJheVswXVswXSA9PSBcIk1cIikge1xuICAgICAgICAgICAgICAgIHggPSArcGF0aEFycmF5WzBdWzFdO1xuICAgICAgICAgICAgICAgIHkgPSArcGF0aEFycmF5WzBdWzJdO1xuICAgICAgICAgICAgICAgIG14ID0geDtcbiAgICAgICAgICAgICAgICBteSA9IHk7XG4gICAgICAgICAgICAgICAgc3RhcnQrKztcbiAgICAgICAgICAgICAgICByZXNbMF0gPSBbXCJNXCIsIHgsIHldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNyeiA9IHBhdGhBcnJheS5sZW5ndGggPT0gMyAmJiBwYXRoQXJyYXlbMF1bMF0gPT0gXCJNXCIgJiYgcGF0aEFycmF5WzFdWzBdLnRvVXBwZXJDYXNlKCkgPT0gXCJSXCIgJiYgcGF0aEFycmF5WzJdWzBdLnRvVXBwZXJDYXNlKCkgPT0gXCJaXCI7XG4gICAgICAgICAgICBmb3IgKHZhciByLCBwYSwgaSA9IHN0YXJ0LCBpaSA9IHBhdGhBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2gociA9IFtdKTtcbiAgICAgICAgICAgICAgICBwYSA9IHBhdGhBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGFbMF0gIT0gdXBwZXJDYXNlLmNhbGwocGFbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJbMF0gPSB1cHBlckNhc2UuY2FsbChwYVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoclswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzFdID0gcGFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsyXSA9IHBhWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbM10gPSBwYVszXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzRdID0gcGFbNF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls1XSA9IHBhWzVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNl0gPSArKHBhWzZdICsgeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcls3XSA9ICsocGFbN10gKyB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgclsxXSA9ICtwYVsxXSArIHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiSFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMV0gPSArcGFbMV0gKyB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG90cyA9IFt4LCB5XVtjb25jYXRdKHBhLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMiwgamogPSBkb3RzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90c1tqXSA9ICtkb3RzW2pdICsgeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90c1srK2pdID0gK2RvdHNbal0gKyB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzW2NvbmNhdF0oY2F0bXVsbFJvbTJiZXppZXIoZG90cywgY3J6KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gK3BhWzFdICsgeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteSA9ICtwYVsyXSArIHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gcGEubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByW2pdID0gK3BhW2pdICsgKChqICUgMikgPyB4IDogeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYVswXSA9PSBcIlJcIikge1xuICAgICAgICAgICAgICAgICAgICBkb3RzID0gW3gsIHldW2NvbmNhdF0ocGEuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICByZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc1tjb25jYXRdKGNhdG11bGxSb20yYmV6aWVyKGRvdHMsIGNyeikpO1xuICAgICAgICAgICAgICAgICAgICByID0gW1wiUlwiXVtjb25jYXRdKHBhLnNsaWNlKC0yKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDAsIGtrID0gcGEubGVuZ3RoOyBrIDwga2s7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcltrXSA9IHBhW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCAoclswXSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IG14O1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IG15O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gclsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHJbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG14ID0gcltyLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXkgPSByW3IubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gcltyLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHJbci5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMudG9TdHJpbmcgPSBSLl9wYXRoMnN0cmluZztcbiAgICAgICAgICAgIHB0aC5hYnMgPSBwYXRoQ2xvbmUocmVzKTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGwyYyA9IGZ1bmN0aW9uICh4MSwgeTEsIHgyLCB5Mikge1xuICAgICAgICAgICAgcmV0dXJuIFt4MSwgeTEsIHgyLCB5MiwgeDIsIHkyXTtcbiAgICAgICAgfSxcbiAgICAgICAgcTJjID0gZnVuY3Rpb24gKHgxLCB5MSwgYXgsIGF5LCB4MiwgeTIpIHtcbiAgICAgICAgICAgIHZhciBfMTMgPSAxIC8gMyxcbiAgICAgICAgICAgICAgICBfMjMgPSAyIC8gMztcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHgxICsgXzIzICogYXgsXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHkxICsgXzIzICogYXksXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHgyICsgXzIzICogYXgsXG4gICAgICAgICAgICAgICAgICAgIF8xMyAqIHkyICsgXzIzICogYXksXG4gICAgICAgICAgICAgICAgICAgIHgyLFxuICAgICAgICAgICAgICAgICAgICB5MlxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgIH0sXG4gICAgICAgIGEyYyA9IGZ1bmN0aW9uICh4MSwgeTEsIHJ4LCByeSwgYW5nbGUsIGxhcmdlX2FyY19mbGFnLCBzd2VlcF9mbGFnLCB4MiwgeTIsIHJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgLy8gZm9yIG1vcmUgaW5mb3JtYXRpb24gb2Ygd2hlcmUgdGhpcyBtYXRoIGNhbWUgZnJvbSB2aXNpdDpcbiAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ltcGxub3RlLmh0bWwjQXJjSW1wbGVtZW50YXRpb25Ob3Rlc1xuICAgICAgICAgICAgdmFyIF8xMjAgPSBQSSAqIDEyMCAvIDE4MCxcbiAgICAgICAgICAgICAgICByYWQgPSBQSSAvIDE4MCAqICgrYW5nbGUgfHwgMCksXG4gICAgICAgICAgICAgICAgcmVzID0gW10sXG4gICAgICAgICAgICAgICAgeHksXG4gICAgICAgICAgICAgICAgcm90YXRlID0gY2FjaGVyKGZ1bmN0aW9uICh4LCB5LCByYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIFggPSB4ICogbWF0aC5jb3MocmFkKSAtIHkgKiBtYXRoLnNpbihyYWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgWSA9IHggKiBtYXRoLnNpbihyYWQpICsgeSAqIG1hdGguY29zKHJhZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7eDogWCwgeTogWX07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgICAgIHh5ID0gcm90YXRlKHgxLCB5MSwgLXJhZCk7XG4gICAgICAgICAgICAgICAgeDEgPSB4eS54O1xuICAgICAgICAgICAgICAgIHkxID0geHkueTtcbiAgICAgICAgICAgICAgICB4eSA9IHJvdGF0ZSh4MiwgeTIsIC1yYWQpO1xuICAgICAgICAgICAgICAgIHgyID0geHkueDtcbiAgICAgICAgICAgICAgICB5MiA9IHh5Lnk7XG4gICAgICAgICAgICAgICAgdmFyIGNvcyA9IG1hdGguY29zKFBJIC8gMTgwICogYW5nbGUpLFxuICAgICAgICAgICAgICAgICAgICBzaW4gPSBtYXRoLnNpbihQSSAvIDE4MCAqIGFuZ2xlKSxcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh4MSAtIHgyKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoeTEgLSB5MikgLyAyO1xuICAgICAgICAgICAgICAgIHZhciBoID0gKHggKiB4KSAvIChyeCAqIHJ4KSArICh5ICogeSkgLyAocnkgKiByeSk7XG4gICAgICAgICAgICAgICAgaWYgKGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGggPSBtYXRoLnNxcnQoaCk7XG4gICAgICAgICAgICAgICAgICAgIHJ4ID0gaCAqIHJ4O1xuICAgICAgICAgICAgICAgICAgICByeSA9IGggKiByeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJ4MiA9IHJ4ICogcngsXG4gICAgICAgICAgICAgICAgICAgIHJ5MiA9IHJ5ICogcnksXG4gICAgICAgICAgICAgICAgICAgIGsgPSAobGFyZ2VfYXJjX2ZsYWcgPT0gc3dlZXBfZmxhZyA/IC0xIDogMSkgKlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0aC5zcXJ0KGFicygocngyICogcnkyIC0gcngyICogeSAqIHkgLSByeTIgKiB4ICogeCkgLyAocngyICogeSAqIHkgKyByeTIgKiB4ICogeCkpKSxcbiAgICAgICAgICAgICAgICAgICAgY3ggPSBrICogcnggKiB5IC8gcnkgKyAoeDEgKyB4MikgLyAyLFxuICAgICAgICAgICAgICAgICAgICBjeSA9IGsgKiAtcnkgKiB4IC8gcnggKyAoeTEgKyB5MikgLyAyLFxuICAgICAgICAgICAgICAgICAgICBmMSA9IG1hdGguYXNpbigoKHkxIC0gY3kpIC8gcnkpLnRvRml4ZWQoOSkpLFxuICAgICAgICAgICAgICAgICAgICBmMiA9IG1hdGguYXNpbigoKHkyIC0gY3kpIC8gcnkpLnRvRml4ZWQoOSkpO1xuXG4gICAgICAgICAgICAgICAgZjEgPSB4MSA8IGN4ID8gUEkgLSBmMSA6IGYxO1xuICAgICAgICAgICAgICAgIGYyID0geDIgPCBjeCA/IFBJIC0gZjIgOiBmMjtcbiAgICAgICAgICAgICAgICBmMSA8IDAgJiYgKGYxID0gUEkgKiAyICsgZjEpO1xuICAgICAgICAgICAgICAgIGYyIDwgMCAmJiAoZjIgPSBQSSAqIDIgKyBmMik7XG4gICAgICAgICAgICAgICAgaWYgKHN3ZWVwX2ZsYWcgJiYgZjEgPiBmMikge1xuICAgICAgICAgICAgICAgICAgICBmMSA9IGYxIC0gUEkgKiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXN3ZWVwX2ZsYWcgJiYgZjIgPiBmMSkge1xuICAgICAgICAgICAgICAgICAgICBmMiA9IGYyIC0gUEkgKiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZjEgPSByZWN1cnNpdmVbMF07XG4gICAgICAgICAgICAgICAgZjIgPSByZWN1cnNpdmVbMV07XG4gICAgICAgICAgICAgICAgY3ggPSByZWN1cnNpdmVbMl07XG4gICAgICAgICAgICAgICAgY3kgPSByZWN1cnNpdmVbM107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGYgPSBmMiAtIGYxO1xuICAgICAgICAgICAgaWYgKGFicyhkZikgPiBfMTIwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYyb2xkID0gZjIsXG4gICAgICAgICAgICAgICAgICAgIHgyb2xkID0geDIsXG4gICAgICAgICAgICAgICAgICAgIHkyb2xkID0geTI7XG4gICAgICAgICAgICAgICAgZjIgPSBmMSArIF8xMjAgKiAoc3dlZXBfZmxhZyAmJiBmMiA+IGYxID8gMSA6IC0xKTtcbiAgICAgICAgICAgICAgICB4MiA9IGN4ICsgcnggKiBtYXRoLmNvcyhmMik7XG4gICAgICAgICAgICAgICAgeTIgPSBjeSArIHJ5ICogbWF0aC5zaW4oZjIpO1xuICAgICAgICAgICAgICAgIHJlcyA9IGEyYyh4MiwgeTIsIHJ4LCByeSwgYW5nbGUsIDAsIHN3ZWVwX2ZsYWcsIHgyb2xkLCB5Mm9sZCwgW2YyLCBmMm9sZCwgY3gsIGN5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZiA9IGYyIC0gZjE7XG4gICAgICAgICAgICB2YXIgYzEgPSBtYXRoLmNvcyhmMSksXG4gICAgICAgICAgICAgICAgczEgPSBtYXRoLnNpbihmMSksXG4gICAgICAgICAgICAgICAgYzIgPSBtYXRoLmNvcyhmMiksXG4gICAgICAgICAgICAgICAgczIgPSBtYXRoLnNpbihmMiksXG4gICAgICAgICAgICAgICAgdCA9IG1hdGgudGFuKGRmIC8gNCksXG4gICAgICAgICAgICAgICAgaHggPSA0IC8gMyAqIHJ4ICogdCxcbiAgICAgICAgICAgICAgICBoeSA9IDQgLyAzICogcnkgKiB0LFxuICAgICAgICAgICAgICAgIG0xID0gW3gxLCB5MV0sXG4gICAgICAgICAgICAgICAgbTIgPSBbeDEgKyBoeCAqIHMxLCB5MSAtIGh5ICogYzFdLFxuICAgICAgICAgICAgICAgIG0zID0gW3gyICsgaHggKiBzMiwgeTIgLSBoeSAqIGMyXSxcbiAgICAgICAgICAgICAgICBtNCA9IFt4MiwgeTJdO1xuICAgICAgICAgICAgbTJbMF0gPSAyICogbTFbMF0gLSBtMlswXTtcbiAgICAgICAgICAgIG0yWzFdID0gMiAqIG0xWzFdIC0gbTJbMV07XG4gICAgICAgICAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFttMiwgbTMsIG00XVtjb25jYXRdKHJlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcyA9IFttMiwgbTMsIG00XVtjb25jYXRdKHJlcykuam9pbigpW3NwbGl0XShcIixcIik7XG4gICAgICAgICAgICAgICAgdmFyIG5ld3JlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld3Jlc1tpXSA9IGkgJSAyID8gcm90YXRlKHJlc1tpIC0gMV0sIHJlc1tpXSwgcmFkKS55IDogcm90YXRlKHJlc1tpXSwgcmVzW2kgKyAxXSwgcmFkKS54O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3cmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmaW5kRG90QXRTZWdtZW50ID0gZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0KSB7XG4gICAgICAgICAgICB2YXIgdDEgPSAxIC0gdDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogcG93KHQxLCAzKSAqIHAxeCArIHBvdyh0MSwgMikgKiAzICogdCAqIGMxeCArIHQxICogMyAqIHQgKiB0ICogYzJ4ICsgcG93KHQsIDMpICogcDJ4LFxuICAgICAgICAgICAgICAgIHk6IHBvdyh0MSwgMykgKiBwMXkgKyBwb3codDEsIDIpICogMyAqIHQgKiBjMXkgKyB0MSAqIDMgKiB0ICogdCAqIGMyeSArIHBvdyh0LCAzKSAqIHAyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgY3VydmVEaW0gPSBjYWNoZXIoZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5KSB7XG4gICAgICAgICAgICB2YXIgYSA9IChjMnggLSAyICogYzF4ICsgcDF4KSAtIChwMnggLSAyICogYzJ4ICsgYzF4KSxcbiAgICAgICAgICAgICAgICBiID0gMiAqIChjMXggLSBwMXgpIC0gMiAqIChjMnggLSBjMXgpLFxuICAgICAgICAgICAgICAgIGMgPSBwMXggLSBjMXgsXG4gICAgICAgICAgICAgICAgdDEgPSAoLWIgKyBtYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpKSAvIDIgLyBhLFxuICAgICAgICAgICAgICAgIHQyID0gKC1iIC0gbWF0aC5zcXJ0KGIgKiBiIC0gNCAqIGEgKiBjKSkgLyAyIC8gYSxcbiAgICAgICAgICAgICAgICB5ID0gW3AxeSwgcDJ5XSxcbiAgICAgICAgICAgICAgICB4ID0gW3AxeCwgcDJ4XSxcbiAgICAgICAgICAgICAgICBkb3Q7XG4gICAgICAgICAgICBhYnModDEpID4gXCIxZTEyXCIgJiYgKHQxID0gLjUpO1xuICAgICAgICAgICAgYWJzKHQyKSA+IFwiMWUxMlwiICYmICh0MiA9IC41KTtcbiAgICAgICAgICAgIGlmICh0MSA+IDAgJiYgdDEgPCAxKSB7XG4gICAgICAgICAgICAgICAgZG90ID0gZmluZERvdEF0U2VnbWVudChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgdDEpO1xuICAgICAgICAgICAgICAgIHgucHVzaChkb3QueCk7XG4gICAgICAgICAgICAgICAgeS5wdXNoKGRvdC55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0MiA+IDAgJiYgdDIgPCAxKSB7XG4gICAgICAgICAgICAgICAgZG90ID0gZmluZERvdEF0U2VnbWVudChwMXgsIHAxeSwgYzF4LCBjMXksIGMyeCwgYzJ5LCBwMngsIHAyeSwgdDIpO1xuICAgICAgICAgICAgICAgIHgucHVzaChkb3QueCk7XG4gICAgICAgICAgICAgICAgeS5wdXNoKGRvdC55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEgPSAoYzJ5IC0gMiAqIGMxeSArIHAxeSkgLSAocDJ5IC0gMiAqIGMyeSArIGMxeSk7XG4gICAgICAgICAgICBiID0gMiAqIChjMXkgLSBwMXkpIC0gMiAqIChjMnkgLSBjMXkpO1xuICAgICAgICAgICAgYyA9IHAxeSAtIGMxeTtcbiAgICAgICAgICAgIHQxID0gKC1iICsgbWF0aC5zcXJ0KGIgKiBiIC0gNCAqIGEgKiBjKSkgLyAyIC8gYTtcbiAgICAgICAgICAgIHQyID0gKC1iIC0gbWF0aC5zcXJ0KGIgKiBiIC0gNCAqIGEgKiBjKSkgLyAyIC8gYTtcbiAgICAgICAgICAgIGFicyh0MSkgPiBcIjFlMTJcIiAmJiAodDEgPSAuNSk7XG4gICAgICAgICAgICBhYnModDIpID4gXCIxZTEyXCIgJiYgKHQyID0gLjUpO1xuICAgICAgICAgICAgaWYgKHQxID4gMCAmJiB0MSA8IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QgPSBmaW5kRG90QXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0MSk7XG4gICAgICAgICAgICAgICAgeC5wdXNoKGRvdC54KTtcbiAgICAgICAgICAgICAgICB5LnB1c2goZG90LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQyID4gMCAmJiB0MiA8IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QgPSBmaW5kRG90QXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCB0Mik7XG4gICAgICAgICAgICAgICAgeC5wdXNoKGRvdC54KTtcbiAgICAgICAgICAgICAgICB5LnB1c2goZG90LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtaW46IHt4OiBtbWluW2FwcGx5XSgwLCB4KSwgeTogbW1pblthcHBseV0oMCwgeSl9LFxuICAgICAgICAgICAgICAgIG1heDoge3g6IG1tYXhbYXBwbHldKDAsIHgpLCB5OiBtbWF4W2FwcGx5XSgwLCB5KX1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBwYXRoMmN1cnZlID0gUi5fcGF0aDJjdXJ2ZSA9IGNhY2hlcihmdW5jdGlvbiAocGF0aCwgcGF0aDIpIHtcbiAgICAgICAgICAgIHZhciBwdGggPSAhcGF0aDIgJiYgcGF0aHMocGF0aCk7XG4gICAgICAgICAgICBpZiAoIXBhdGgyICYmIHB0aC5jdXJ2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoQ2xvbmUocHRoLmN1cnZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwID0gcGF0aFRvQWJzb2x1dGUocGF0aCksXG4gICAgICAgICAgICAgICAgcDIgPSBwYXRoMiAmJiBwYXRoVG9BYnNvbHV0ZShwYXRoMiksXG4gICAgICAgICAgICAgICAgYXR0cnMgPSB7eDogMCwgeTogMCwgYng6IDAsIGJ5OiAwLCBYOiAwLCBZOiAwLCBxeDogbnVsbCwgcXk6IG51bGx9LFxuICAgICAgICAgICAgICAgIGF0dHJzMiA9IHt4OiAwLCB5OiAwLCBieDogMCwgYnk6IDAsIFg6IDAsIFk6IDAsIHF4OiBudWxsLCBxeTogbnVsbH0sXG4gICAgICAgICAgICAgICAgcHJvY2Vzc1BhdGggPSBmdW5jdGlvbiAocGF0aCwgZCwgcGNvbSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbngsIG55LCB0cSA9IHtUOjEsIFE6MX07XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcIkNcIiwgZC54LCBkLnksIGQueCwgZC55LCBkLngsIGQueV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgIShwYXRoWzBdIGluIHRxKSAmJiAoZC5xeCA9IGQucXkgPSBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXRoWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuWCA9IHBhdGhbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5ZID0gcGF0aFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShhMmNbYXBwbHldKDAsIFtkLngsIGQueV1bY29uY2F0XShwYXRoLnNsaWNlKDEpKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGNvbSA9PSBcIkNcIiB8fCBwY29tID09IFwiU1wiKSB7IC8vIEluIFwiU1wiIGNhc2Ugd2UgaGF2ZSB0byB0YWtlIGludG8gYWNjb3VudCwgaWYgdGhlIHByZXZpb3VzIGNvbW1hbmQgaXMgQy9TLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBueCA9IGQueCAqIDIgLSBkLmJ4OyAgICAgICAgICAvLyBBbmQgcmVmbGVjdCB0aGUgcHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnkgPSBkLnkgKiAyIC0gZC5ieTsgICAgICAgICAgLy8gY29tbWFuZCdzIGNvbnRyb2wgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGN1cnJlbnQgcG9pbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBzb21lIGVsc2Ugb3Igbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBueCA9IGQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnkgPSBkLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBbXCJDXCIsIG54LCBueV1bY29uY2F0XShwYXRoLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBjb20gPT0gXCJRXCIgfHwgcGNvbSA9PSBcIlRcIikgeyAvLyBJbiBcIlRcIiBjYXNlIHdlIGhhdmUgdG8gdGFrZSBpbnRvIGFjY291bnQsIGlmIHRoZSBwcmV2aW91cyBjb21tYW5kIGlzIFEvVC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeCA9IGQueCAqIDIgLSBkLnF4OyAgICAgICAgLy8gQW5kIG1ha2UgYSByZWZsZWN0aW9uIHNpbWlsYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeSA9IGQueSAqIDIgLSBkLnF5OyAgICAgICAgLy8gdG8gY2FzZSBcIlNcIi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHNvbWV0aGluZyBlbHNlIG9yIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeCA9IGQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeSA9IGQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShxMmMoZC54LCBkLnksIGQucXgsIGQucXksIHBhdGhbMV0sIHBhdGhbMl0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeCA9IHBhdGhbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5xeSA9IHBhdGhbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShxMmMoZC54LCBkLnksIHBhdGhbMV0sIHBhdGhbMl0sIHBhdGhbM10sIHBhdGhbNF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShsMmMoZC54LCBkLnksIHBhdGhbMV0sIHBhdGhbMl0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtcIkNcIl1bY29uY2F0XShsMmMoZC54LCBkLnksIHBhdGhbMV0sIGQueSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gW1wiQ1wiXVtjb25jYXRdKGwyYyhkLngsIGQueSwgZC54LCBwYXRoWzFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBbXCJDXCJdW2NvbmNhdF0obDJjKGQueCwgZC55LCBkLlgsIGQuWSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZml4QXJjID0gZnVuY3Rpb24gKHBwLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcFtpXS5sZW5ndGggPiA3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcFtpXS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBpID0gcHBbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNvbXMxW2ldPVwiQVwiOyAvLyBpZiBjcmVhdGVkIG11bHRpcGxlIEM6cywgdGhlaXIgb3JpZ2luYWwgc2VnIGlzIHNhdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDIgJiYgKHBjb21zMltpXT1cIkFcIik7IC8vIHRoZSBzYW1lIGFzIGFib3ZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHAuc3BsaWNlKGkrKywgMCwgW1wiQ1wiXVtjb25jYXRdKHBpLnNwbGljZSgwLCA2KSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcHAuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWkgPSBtbWF4KHAubGVuZ3RoLCBwMiAmJiBwMi5sZW5ndGggfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpeE0gPSBmdW5jdGlvbiAocGF0aDEsIHBhdGgyLCBhMSwgYTIsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgxICYmIHBhdGgyICYmIHBhdGgxW2ldWzBdID09IFwiTVwiICYmIHBhdGgyW2ldWzBdICE9IFwiTVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoMi5zcGxpY2UoaSwgMCwgW1wiTVwiLCBhMi54LCBhMi55XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS5ieCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS5ieSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS54ID0gcGF0aDFbaV1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBhMS55ID0gcGF0aDFbaV1bMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpaSA9IG1tYXgocC5sZW5ndGgsIHAyICYmIHAyLmxlbmd0aCB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGNvbXMxID0gW10sIC8vIHBhdGggY29tbWFuZHMgb2Ygb3JpZ2luYWwgcGF0aCBwXG4gICAgICAgICAgICAgICAgcGNvbXMyID0gW10sIC8vIHBhdGggY29tbWFuZHMgb2Ygb3JpZ2luYWwgcGF0aCBwMlxuICAgICAgICAgICAgICAgIHBmaXJzdCA9IFwiXCIsIC8vIHRlbXBvcmFyeSBob2xkZXIgZm9yIG9yaWdpbmFsIHBhdGggY29tbWFuZFxuICAgICAgICAgICAgICAgIHBjb20gPSBcIlwiOyAvLyBob2xkZXIgZm9yIHByZXZpb3VzIHBhdGggY29tbWFuZCBvZiBvcmlnaW5hbCBwYXRoXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBtbWF4KHAubGVuZ3RoLCBwMiAmJiBwMi5sZW5ndGggfHwgMCk7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcFtpXSAmJiAocGZpcnN0ID0gcFtpXVswXSk7IC8vIHNhdmUgY3VycmVudCBwYXRoIGNvbW1hbmRcblxuICAgICAgICAgICAgICAgIGlmIChwZmlyc3QgIT0gXCJDXCIpIC8vIEMgaXMgbm90IHNhdmVkIHlldCwgYmVjYXVzZSBpdCBtYXkgYmUgcmVzdWx0IG9mIGNvbnZlcnNpb25cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBjb21zMVtpXSA9IHBmaXJzdDsgLy8gU2F2ZSBjdXJyZW50IHBhdGggY29tbWFuZFxuICAgICAgICAgICAgICAgICAgICBpICYmICggcGNvbSA9IHBjb21zMVtpLTFdKTsgLy8gR2V0IHByZXZpb3VzIHBhdGggY29tbWFuZCBwY29tXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBbaV0gPSBwcm9jZXNzUGF0aChwW2ldLCBhdHRycywgcGNvbSk7IC8vIFByZXZpb3VzIHBhdGggY29tbWFuZCBpcyBpbnB1dHRlZCB0byBwcm9jZXNzUGF0aFxuXG4gICAgICAgICAgICAgICAgaWYgKHBjb21zMVtpXSAhPSBcIkFcIiAmJiBwZmlyc3QgPT0gXCJDXCIpIHBjb21zMVtpXSA9IFwiQ1wiOyAvLyBBIGlzIHRoZSBvbmx5IGNvbW1hbmRcbiAgICAgICAgICAgICAgICAvLyB3aGljaCBtYXkgcHJvZHVjZSBtdWx0aXBsZSBDOnNcbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB0aGF0IEMgaXMgYWxzbyBDIGluIG9yaWdpbmFsIHBhdGhcblxuICAgICAgICAgICAgICAgIGZpeEFyYyhwLCBpKTsgLy8gZml4QXJjIGFkZHMgYWxzbyB0aGUgcmlnaHQgYW1vdW50IG9mIEE6cyB0byBwY29tczFcblxuICAgICAgICAgICAgICAgIGlmIChwMikgeyAvLyB0aGUgc2FtZSBwcm9jZWR1cmVzIGlzIGRvbmUgdG8gcDJcbiAgICAgICAgICAgICAgICAgICAgcDJbaV0gJiYgKHBmaXJzdCA9IHAyW2ldWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBmaXJzdCAhPSBcIkNcIilcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGNvbXMyW2ldID0gcGZpcnN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiAocGNvbSA9IHBjb21zMltpLTFdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwMltpXSA9IHByb2Nlc3NQYXRoKHAyW2ldLCBhdHRyczIsIHBjb20pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwY29tczJbaV0hPVwiQVwiICYmIHBmaXJzdD09XCJDXCIpIHBjb21zMltpXT1cIkNcIjtcblxuICAgICAgICAgICAgICAgICAgICBmaXhBcmMocDIsIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaXhNKHAsIHAyLCBhdHRycywgYXR0cnMyLCBpKTtcbiAgICAgICAgICAgICAgICBmaXhNKHAyLCBwLCBhdHRyczIsIGF0dHJzLCBpKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VnID0gcFtpXSxcbiAgICAgICAgICAgICAgICAgICAgc2VnMiA9IHAyICYmIHAyW2ldLFxuICAgICAgICAgICAgICAgICAgICBzZWdsZW4gPSBzZWcubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBzZWcybGVuID0gcDIgJiYgc2VnMi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgYXR0cnMueCA9IHNlZ1tzZWdsZW4gLSAyXTtcbiAgICAgICAgICAgICAgICBhdHRycy55ID0gc2VnW3NlZ2xlbiAtIDFdO1xuICAgICAgICAgICAgICAgIGF0dHJzLmJ4ID0gdG9GbG9hdChzZWdbc2VnbGVuIC0gNF0pIHx8IGF0dHJzLng7XG4gICAgICAgICAgICAgICAgYXR0cnMuYnkgPSB0b0Zsb2F0KHNlZ1tzZWdsZW4gLSAzXSkgfHwgYXR0cnMueTtcbiAgICAgICAgICAgICAgICBhdHRyczIuYnggPSBwMiAmJiAodG9GbG9hdChzZWcyW3NlZzJsZW4gLSA0XSkgfHwgYXR0cnMyLngpO1xuICAgICAgICAgICAgICAgIGF0dHJzMi5ieSA9IHAyICYmICh0b0Zsb2F0KHNlZzJbc2VnMmxlbiAtIDNdKSB8fCBhdHRyczIueSk7XG4gICAgICAgICAgICAgICAgYXR0cnMyLnggPSBwMiAmJiBzZWcyW3NlZzJsZW4gLSAyXTtcbiAgICAgICAgICAgICAgICBhdHRyczIueSA9IHAyICYmIHNlZzJbc2VnMmxlbiAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwMikge1xuICAgICAgICAgICAgICAgIHB0aC5jdXJ2ZSA9IHBhdGhDbG9uZShwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwMiA/IFtwLCBwMl0gOiBwO1xuICAgICAgICB9LCBudWxsLCBwYXRoQ2xvbmUpLFxuICAgICAgICBwYXJzZURvdHMgPSBSLl9wYXJzZURvdHMgPSBjYWNoZXIoZnVuY3Rpb24gKGdyYWRpZW50KSB7XG4gICAgICAgICAgICB2YXIgZG90cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZ3JhZGllbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkb3QgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgcGFyID0gZ3JhZGllbnRbaV0ubWF0Y2goL14oW146XSopOj8oW1xcZFxcLl0qKS8pO1xuICAgICAgICAgICAgICAgIGRvdC5jb2xvciA9IFIuZ2V0UkdCKHBhclsxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGRvdC5jb2xvci5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZG90Lm9wYWNpdHkgPSBkb3QuY29sb3Iub3BhY2l0eTtcbiAgICAgICAgICAgICAgICBkb3QuY29sb3IgPSBkb3QuY29sb3IuaGV4O1xuICAgICAgICAgICAgICAgIHBhclsyXSAmJiAoZG90Lm9mZnNldCA9IHBhclsyXSArIFwiJVwiKTtcbiAgICAgICAgICAgICAgICBkb3RzLnB1c2goZG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaSA9IDEsIGlpID0gZG90cy5sZW5ndGggLSAxOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghZG90c1tpXS5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gdG9GbG9hdChkb3RzW2kgLSAxXS5vZmZzZXQgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBpaTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG90c1tqXS5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBkb3RzW2pdLm9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IGlpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHRvRmxvYXQoZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAoZW5kIC0gc3RhcnQpIC8gKGogLSBpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCArPSBkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG90c1tpXS5vZmZzZXQgPSBzdGFydCArIFwiJVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvdHM7XG4gICAgICAgIH0pLFxuICAgICAgICB0ZWFyID0gUi5fdGVhciA9IGZ1bmN0aW9uIChlbCwgcGFwZXIpIHtcbiAgICAgICAgICAgIGVsID09IHBhcGVyLnRvcCAmJiAocGFwZXIudG9wID0gZWwucHJldik7XG4gICAgICAgICAgICBlbCA9PSBwYXBlci5ib3R0b20gJiYgKHBhcGVyLmJvdHRvbSA9IGVsLm5leHQpO1xuICAgICAgICAgICAgZWwubmV4dCAmJiAoZWwubmV4dC5wcmV2ID0gZWwucHJldik7XG4gICAgICAgICAgICBlbC5wcmV2ICYmIChlbC5wcmV2Lm5leHQgPSBlbC5uZXh0KTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9mcm9udCA9IFIuX3RvZnJvbnQgPSBmdW5jdGlvbiAoZWwsIHBhcGVyKSB7XG4gICAgICAgICAgICBpZiAocGFwZXIudG9wID09PSBlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRlYXIoZWwsIHBhcGVyKTtcbiAgICAgICAgICAgIGVsLm5leHQgPSBudWxsO1xuICAgICAgICAgICAgZWwucHJldiA9IHBhcGVyLnRvcDtcbiAgICAgICAgICAgIHBhcGVyLnRvcC5uZXh0ID0gZWw7XG4gICAgICAgICAgICBwYXBlci50b3AgPSBlbDtcbiAgICAgICAgfSxcbiAgICAgICAgdG9iYWNrID0gUi5fdG9iYWNrID0gZnVuY3Rpb24gKGVsLCBwYXBlcikge1xuICAgICAgICAgICAgaWYgKHBhcGVyLmJvdHRvbSA9PT0gZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZWFyKGVsLCBwYXBlcik7XG4gICAgICAgICAgICBlbC5uZXh0ID0gcGFwZXIuYm90dG9tO1xuICAgICAgICAgICAgZWwucHJldiA9IG51bGw7XG4gICAgICAgICAgICBwYXBlci5ib3R0b20ucHJldiA9IGVsO1xuICAgICAgICAgICAgcGFwZXIuYm90dG9tID0gZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGluc2VydGFmdGVyID0gUi5faW5zZXJ0YWZ0ZXIgPSBmdW5jdGlvbiAoZWwsIGVsMiwgcGFwZXIpIHtcbiAgICAgICAgICAgIHRlYXIoZWwsIHBhcGVyKTtcbiAgICAgICAgICAgIGVsMiA9PSBwYXBlci50b3AgJiYgKHBhcGVyLnRvcCA9IGVsKTtcbiAgICAgICAgICAgIGVsMi5uZXh0ICYmIChlbDIubmV4dC5wcmV2ID0gZWwpO1xuICAgICAgICAgICAgZWwubmV4dCA9IGVsMi5uZXh0O1xuICAgICAgICAgICAgZWwucHJldiA9IGVsMjtcbiAgICAgICAgICAgIGVsMi5uZXh0ID0gZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGluc2VydGJlZm9yZSA9IFIuX2luc2VydGJlZm9yZSA9IGZ1bmN0aW9uIChlbCwgZWwyLCBwYXBlcikge1xuICAgICAgICAgICAgdGVhcihlbCwgcGFwZXIpO1xuICAgICAgICAgICAgZWwyID09IHBhcGVyLmJvdHRvbSAmJiAocGFwZXIuYm90dG9tID0gZWwpO1xuICAgICAgICAgICAgZWwyLnByZXYgJiYgKGVsMi5wcmV2Lm5leHQgPSBlbCk7XG4gICAgICAgICAgICBlbC5wcmV2ID0gZWwyLnByZXY7XG4gICAgICAgICAgICBlbDIucHJldiA9IGVsO1xuICAgICAgICAgICAgZWwubmV4dCA9IGVsMjtcbiAgICAgICAgfSxcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBSYXBoYWVsLnRvTWF0cml4XG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBVdGlsaXR5IG1ldGhvZFxuICAgICAgICAgKipcbiAgICAgICAgICogUmV0dXJucyBtYXRyaXggb2YgdHJhbnNmb3JtYXRpb25zIGFwcGxpZWQgdG8gYSBnaXZlbiBwYXRoXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gcGF0aCAoc3RyaW5nKSBwYXRoIHN0cmluZ1xuICAgICAgICAgLSB0cmFuc2Zvcm0gKHN0cmluZ3xhcnJheSkgdHJhbnNmb3JtYXRpb24gc3RyaW5nXG4gICAgICAgICA9IChvYmplY3QpIEBNYXRyaXhcbiAgICAgICAgXFwqL1xuICAgICAgICB0b01hdHJpeCA9IFIudG9NYXRyaXggPSBmdW5jdGlvbiAocGF0aCwgdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB2YXIgYmIgPSBwYXRoRGltZW5zaW9ucyhwYXRoKSxcbiAgICAgICAgICAgICAgICBlbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgXzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBFXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldEJCb3g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiYjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHRyYWN0VHJhbnNmb3JtKGVsLCB0cmFuc2Zvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGVsLm1hdHJpeDtcbiAgICAgICAgfSxcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBSYXBoYWVsLnRyYW5zZm9ybVBhdGhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm5zIHBhdGggdHJhbnNmb3JtZWQgYnkgYSBnaXZlbiB0cmFuc2Zvcm1hdGlvblxuICAgICAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICAgICAtIHBhdGggKHN0cmluZykgcGF0aCBzdHJpbmdcbiAgICAgICAgIC0gdHJhbnNmb3JtIChzdHJpbmd8YXJyYXkpIHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAgICAgPSAoc3RyaW5nKSBwYXRoXG4gICAgICAgIFxcKi9cbiAgICAgICAgdHJhbnNmb3JtUGF0aCA9IFIudHJhbnNmb3JtUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHJldHVybiBtYXBQYXRoKHBhdGgsIHRvTWF0cml4KHBhdGgsIHRyYW5zZm9ybSkpO1xuICAgICAgICB9LFxuICAgICAgICBleHRyYWN0VHJhbnNmb3JtID0gUi5fZXh0cmFjdFRyYW5zZm9ybSA9IGZ1bmN0aW9uIChlbCwgdHN0cikge1xuICAgICAgICAgICAgaWYgKHRzdHIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRzdHIgPSBTdHIodHN0cikucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZywgZWwuXy50cmFuc2Zvcm0gfHwgRSk7XG4gICAgICAgICAgICB2YXIgdGRhdGEgPSBSLnBhcnNlVHJhbnNmb3JtU3RyaW5nKHRzdHIpLFxuICAgICAgICAgICAgICAgIGRlZyA9IDAsXG4gICAgICAgICAgICAgICAgZHggPSAwLFxuICAgICAgICAgICAgICAgIGR5ID0gMCxcbiAgICAgICAgICAgICAgICBzeCA9IDEsXG4gICAgICAgICAgICAgICAgc3kgPSAxLFxuICAgICAgICAgICAgICAgIF8gPSBlbC5fLFxuICAgICAgICAgICAgICAgIG0gPSBuZXcgTWF0cml4O1xuICAgICAgICAgICAgXy50cmFuc2Zvcm0gPSB0ZGF0YSB8fCBbXTtcbiAgICAgICAgICAgIGlmICh0ZGF0YSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRkYXRhLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0ZGF0YVtpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRsZW4gPSB0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBTdHIodFswXSkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFic29sdXRlID0gdFswXSAhPSBjb21tYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXIgPSBhYnNvbHV0ZSA/IG0uaW52ZXJ0KCkgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB5MSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHgyLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTIsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT0gXCJ0XCIgJiYgdGxlbiA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MSA9IGludmVyLngoMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSBpbnZlci55KDAsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgyID0gaW52ZXIueCh0WzFdLCB0WzJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGludmVyLnkodFsxXSwgdFsyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS50cmFuc2xhdGUoeDIgLSB4MSwgeTIgLSB5MSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0udHJhbnNsYXRlKHRbMV0sIHRbMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT0gXCJyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bGVuID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYiA9IGJiIHx8IGVsLmdldEJCb3goMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5yb3RhdGUodFsxXSwgYmIueCArIGJiLndpZHRoIC8gMiwgYmIueSArIGJiLmhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZyArPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0bGVuID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBpbnZlci54KHRbMl0sIHRbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGludmVyLnkodFsyXSwgdFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ucm90YXRlKHRbMV0sIHgyLCB5Mik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5yb3RhdGUodFsxXSwgdFsyXSwgdFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZyArPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT0gXCJzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bGVuID09IDIgfHwgdGxlbiA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmIgPSBiYiB8fCBlbC5nZXRCQm94KDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc2NhbGUodFsxXSwgdFt0bGVuIC0gMV0sIGJiLnggKyBiYi53aWR0aCAvIDIsIGJiLnkgKyBiYi5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCAqPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5ICo9IHRbdGxlbiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0bGVuID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBpbnZlci54KHRbM10sIHRbNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGludmVyLnkodFszXSwgdFs0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uc2NhbGUodFsxXSwgdFsyXSwgeDIsIHkyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnNjYWxlKHRbMV0sIHRbMl0sIHRbM10sIHRbNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCAqPSB0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5ICo9IHRbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PSBcIm1cIiAmJiB0bGVuID09IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0uYWRkKHRbMV0sIHRbMl0sIHRbM10sIHRbNF0sIHRbNV0sIHRbNl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF8uZGlydHlUID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZWwubWF0cml4ID0gbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qXFxcbiAgICAgICAgICAgICAqIEVsZW1lbnQubWF0cml4XG4gICAgICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAgICAgKipcbiAgICAgICAgICAgICAqIEtlZXBzIEBNYXRyaXggb2JqZWN0LCB3aGljaCByZXByZXNlbnRzIGVsZW1lbnQgdHJhbnNmb3JtYXRpb25cbiAgICAgICAgICAgIFxcKi9cbiAgICAgICAgICAgIGVsLm1hdHJpeCA9IG07XG5cbiAgICAgICAgICAgIF8uc3ggPSBzeDtcbiAgICAgICAgICAgIF8uc3kgPSBzeTtcbiAgICAgICAgICAgIF8uZGVnID0gZGVnO1xuICAgICAgICAgICAgXy5keCA9IGR4ID0gbS5lO1xuICAgICAgICAgICAgXy5keSA9IGR5ID0gbS5mO1xuXG4gICAgICAgICAgICBpZiAoc3ggPT0gMSAmJiBzeSA9PSAxICYmICFkZWcgJiYgXy5iYm94KSB7XG4gICAgICAgICAgICAgICAgXy5iYm94LnggKz0gK2R4O1xuICAgICAgICAgICAgICAgIF8uYmJveC55ICs9ICtkeTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgXy5kaXJ0eVQgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRFbXB0eSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgbCA9IGl0ZW1bMF07XG4gICAgICAgICAgICBzd2l0Y2ggKGwudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0XCI6IHJldHVybiBbbCwgMCwgMF07XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1cIjogcmV0dXJuIFtsLCAxLCAwLCAwLCAxLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiclwiOiBpZiAoaXRlbS5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2wsIDAsIGl0ZW1bMl0sIGl0ZW1bM11dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgXCJzXCI6IGlmIChpdGVtLmxlbmd0aCA9PSA1KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMSwgMSwgaXRlbVszXSwgaXRlbVs0XV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbbCwgMSwgMV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtsLCAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVxdWFsaXNlVHJhbnNmb3JtID0gUi5fZXF1YWxpc2VUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodDEsIHQyKSB7XG4gICAgICAgICAgICB0MiA9IFN0cih0MikucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZywgdDEpO1xuICAgICAgICAgICAgdDEgPSBSLnBhcnNlVHJhbnNmb3JtU3RyaW5nKHQxKSB8fCBbXTtcbiAgICAgICAgICAgIHQyID0gUi5wYXJzZVRyYW5zZm9ybVN0cmluZyh0MikgfHwgW107XG4gICAgICAgICAgICB2YXIgbWF4bGVuZ3RoID0gbW1heCh0MS5sZW5ndGgsIHQyLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgZnJvbSA9IFtdLFxuICAgICAgICAgICAgICAgIHRvID0gW10sXG4gICAgICAgICAgICAgICAgaSA9IDAsIGosIGpqLFxuICAgICAgICAgICAgICAgIHR0MSwgdHQyO1xuICAgICAgICAgICAgZm9yICg7IGkgPCBtYXhsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHR0MSA9IHQxW2ldIHx8IGdldEVtcHR5KHQyW2ldKTtcbiAgICAgICAgICAgICAgICB0dDIgPSB0MltpXSB8fCBnZXRFbXB0eSh0dDEpO1xuICAgICAgICAgICAgICAgIGlmICgodHQxWzBdICE9IHR0MlswXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHR0MVswXS50b0xvd2VyQ2FzZSgpID09IFwiclwiICYmICh0dDFbMl0gIT0gdHQyWzJdIHx8IHR0MVszXSAhPSB0dDJbM10pKSB8fFxuICAgICAgICAgICAgICAgICAgICAodHQxWzBdLnRvTG93ZXJDYXNlKCkgPT0gXCJzXCIgJiYgKHR0MVszXSAhPSB0dDJbM10gfHwgdHQxWzRdICE9IHR0Mls0XSkpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21baV0gPSBbXTtcbiAgICAgICAgICAgICAgICB0b1tpXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gbW1heCh0dDEubGVuZ3RoLCB0dDIubGVuZ3RoKTsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaiBpbiB0dDEgJiYgKGZyb21baV1bal0gPSB0dDFbal0pO1xuICAgICAgICAgICAgICAgICAgICBqIGluIHR0MiAmJiAodG9baV1bal0gPSB0dDJbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbTogZnJvbSxcbiAgICAgICAgICAgICAgICB0bzogdG9cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgUi5fZ2V0Q29udGFpbmVyID0gZnVuY3Rpb24gKHgsIHksIHcsIGgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lcjtcbiAgICAgICAgY29udGFpbmVyID0gaCA9PSBudWxsICYmICFSLmlzKHgsIFwib2JqZWN0XCIpID8gZy5kb2MuZ2V0RWxlbWVudEJ5SWQoeCkgOiB4O1xuICAgICAgICBpZiAoY29udGFpbmVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFpbmVyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgIGlmICh5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbnRhaW5lci5zdHlsZS5waXhlbFdpZHRoIHx8IGNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBjb250YWluZXIuc3R5bGUucGl4ZWxIZWlnaHQgfHwgY29udGFpbmVyLm9mZnNldEhlaWdodFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogeSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB3XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGFpbmVyOiAxLFxuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgICAgIGhlaWdodDogaFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGF0aFRvUmVsYXRpdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogQ29udmVydHMgcGF0aCB0byByZWxhdGl2ZSBmb3JtXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHBhdGhTdHJpbmcgKHN0cmluZ3xhcnJheSkgcGF0aCBzdHJpbmcgb3IgYXJyYXkgb2Ygc2VnbWVudHNcbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIHNlZ21lbnRzLlxuICAgIFxcKi9cbiAgICBSLnBhdGhUb1JlbGF0aXZlID0gcGF0aFRvUmVsYXRpdmU7XG4gICAgUi5fZW5naW5lID0ge307XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucGF0aDJjdXJ2ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogVXRpbGl0eSBtZXRob2RcbiAgICAgKipcbiAgICAgKiBDb252ZXJ0cyBwYXRoIHRvIGEgbmV3IHBhdGggd2hlcmUgYWxsIHNlZ21lbnRzIGFyZSBjdWJpYyBiZXppZXIgY3VydmVzLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoU3RyaW5nIChzdHJpbmd8YXJyYXkpIHBhdGggc3RyaW5nIG9yIGFycmF5IG9mIHNlZ21lbnRzXG4gICAgID0gKGFycmF5KSBhcnJheSBvZiBzZWdtZW50cy5cbiAgICBcXCovXG4gICAgUi5wYXRoMmN1cnZlID0gcGF0aDJjdXJ2ZTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5tYXRyaXhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFV0aWxpdHkgbWV0aG9kXG4gICAgICoqXG4gICAgICogUmV0dXJucyBtYXRyaXggYmFzZWQgb24gZ2l2ZW4gcGFyYW1ldGVycy5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYSAobnVtYmVyKVxuICAgICAtIGIgKG51bWJlcilcbiAgICAgLSBjIChudW1iZXIpXG4gICAgIC0gZCAobnVtYmVyKVxuICAgICAtIGUgKG51bWJlcilcbiAgICAgLSBmIChudW1iZXIpXG4gICAgID0gKG9iamVjdCkgQE1hdHJpeFxuICAgIFxcKi9cbiAgICBSLm1hdHJpeCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gTWF0cml4KGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgICAgaWYgKGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hID0gK2E7XG4gICAgICAgICAgICB0aGlzLmIgPSArYjtcbiAgICAgICAgICAgIHRoaXMuYyA9ICtjO1xuICAgICAgICAgICAgdGhpcy5kID0gK2Q7XG4gICAgICAgICAgICB0aGlzLmUgPSArZTtcbiAgICAgICAgICAgIHRoaXMuZiA9ICtmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hID0gMTtcbiAgICAgICAgICAgIHRoaXMuYiA9IDA7XG4gICAgICAgICAgICB0aGlzLmMgPSAwO1xuICAgICAgICAgICAgdGhpcy5kID0gMTtcbiAgICAgICAgICAgIHRoaXMuZSA9IDA7XG4gICAgICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIChmdW5jdGlvbiAobWF0cml4cHJvdG8pIHtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguYWRkXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBBZGRzIGdpdmVuIG1hdHJpeCB0byBleGlzdGluZyBvbmUuXG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gYSAobnVtYmVyKVxuICAgICAgICAgLSBiIChudW1iZXIpXG4gICAgICAgICAtIGMgKG51bWJlcilcbiAgICAgICAgIC0gZCAobnVtYmVyKVxuICAgICAgICAgLSBlIChudW1iZXIpXG4gICAgICAgICAtIGYgKG51bWJlcilcbiAgICAgICAgIG9yXG4gICAgICAgICAtIG1hdHJpeCAob2JqZWN0KSBATWF0cml4XG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uYWRkID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICAgICAgICAgIHZhciBvdXQgPSBbW10sIFtdLCBbXV0sXG4gICAgICAgICAgICAgICAgbSA9IFtbdGhpcy5hLCB0aGlzLmMsIHRoaXMuZV0sIFt0aGlzLmIsIHRoaXMuZCwgdGhpcy5mXSwgWzAsIDAsIDFdXSxcbiAgICAgICAgICAgICAgICBtYXRyaXggPSBbW2EsIGMsIGVdLCBbYiwgZCwgZl0sIFswLCAwLCAxXV0sXG4gICAgICAgICAgICAgICAgeCwgeSwgeiwgcmVzO1xuXG4gICAgICAgICAgICBpZiAoYSAmJiBhIGluc3RhbmNlb2YgTWF0cml4KSB7XG4gICAgICAgICAgICAgICAgbWF0cml4ID0gW1thLmEsIGEuYywgYS5lXSwgW2EuYiwgYS5kLCBhLmZdLCBbMCwgMCwgMV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHggPSAwOyB4IDwgMzsgeCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh5ID0gMDsgeSA8IDM7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHogPSAwOyB6IDwgMzsgeisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgKz0gbVt4XVt6XSAqIG1hdHJpeFt6XVt5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXRbeF1beV0gPSByZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hID0gb3V0WzBdWzBdO1xuICAgICAgICAgICAgdGhpcy5iID0gb3V0WzFdWzBdO1xuICAgICAgICAgICAgdGhpcy5jID0gb3V0WzBdWzFdO1xuICAgICAgICAgICAgdGhpcy5kID0gb3V0WzFdWzFdO1xuICAgICAgICAgICAgdGhpcy5lID0gb3V0WzBdWzJdO1xuICAgICAgICAgICAgdGhpcy5mID0gb3V0WzFdWzJdO1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC5pbnZlcnRcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybnMgaW52ZXJ0ZWQgdmVyc2lvbiBvZiB0aGUgbWF0cml4XG4gICAgICAgICA9IChvYmplY3QpIEBNYXRyaXhcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHggPSBtZS5hICogbWUuZCAtIG1lLmIgKiBtZS5jO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXgobWUuZCAvIHgsIC1tZS5iIC8geCwgLW1lLmMgLyB4LCBtZS5hIC8geCwgKG1lLmMgKiBtZS5mIC0gbWUuZCAqIG1lLmUpIC8geCwgKG1lLmIgKiBtZS5lIC0gbWUuYSAqIG1lLmYpIC8geCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LmNsb25lXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm5zIGNvcHkgb2YgdGhlIG1hdHJpeFxuICAgICAgICAgPSAob2JqZWN0KSBATWF0cml4XG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hdHJpeCh0aGlzLmEsIHRoaXMuYiwgdGhpcy5jLCB0aGlzLmQsIHRoaXMuZSwgdGhpcy5mKTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXgudHJhbnNsYXRlXG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBUcmFuc2xhdGUgdGhlIG1hdHJpeFxuICAgICAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICAgICAtIHggKG51bWJlcilcbiAgICAgICAgIC0geSAobnVtYmVyKVxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgICAgICB0aGlzLmFkZCgxLCAwLCAwLCAxLCB4LCB5KTtcbiAgICAgICAgfTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguc2NhbGVcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFNjYWxlcyB0aGUgbWF0cml4XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0geCAobnVtYmVyKVxuICAgICAgICAgLSB5IChudW1iZXIpICNvcHRpb25hbFxuICAgICAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWxcbiAgICAgICAgIC0gY3kgKG51bWJlcikgI29wdGlvbmFsXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uc2NhbGUgPSBmdW5jdGlvbiAoeCwgeSwgY3gsIGN5KSB7XG4gICAgICAgICAgICB5ID09IG51bGwgJiYgKHkgPSB4KTtcbiAgICAgICAgICAgIChjeCB8fCBjeSkgJiYgdGhpcy5hZGQoMSwgMCwgMCwgMSwgY3gsIGN5KTtcbiAgICAgICAgICAgIHRoaXMuYWRkKHgsIDAsIDAsIHksIDAsIDApO1xuICAgICAgICAgICAgKGN4IHx8IGN5KSAmJiB0aGlzLmFkZCgxLCAwLCAwLCAxLCAtY3gsIC1jeSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LnJvdGF0ZVxuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUm90YXRlcyB0aGUgbWF0cml4XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0gYSAobnVtYmVyKVxuICAgICAgICAgLSB4IChudW1iZXIpXG4gICAgICAgICAtIHkgKG51bWJlcilcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by5yb3RhdGUgPSBmdW5jdGlvbiAoYSwgeCwgeSkge1xuICAgICAgICAgICAgYSA9IFIucmFkKGEpO1xuICAgICAgICAgICAgeCA9IHggfHwgMDtcbiAgICAgICAgICAgIHkgPSB5IHx8IDA7XG4gICAgICAgICAgICB2YXIgY29zID0gK21hdGguY29zKGEpLnRvRml4ZWQoOSksXG4gICAgICAgICAgICAgICAgc2luID0gK21hdGguc2luKGEpLnRvRml4ZWQoOSk7XG4gICAgICAgICAgICB0aGlzLmFkZChjb3MsIHNpbiwgLXNpbiwgY29zLCB4LCB5KTtcbiAgICAgICAgICAgIHRoaXMuYWRkKDEsIDAsIDAsIDEsIC14LCAteSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogTWF0cml4LnhcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFJldHVybiB4IGNvb3JkaW5hdGUgZm9yIGdpdmVuIHBvaW50IGFmdGVyIHRyYW5zZm9ybWF0aW9uIGRlc2NyaWJlZCBieSB0aGUgbWF0cml4LiBTZWUgYWxzbyBATWF0cml4LnlcbiAgICAgICAgID4gUGFyYW1ldGVyc1xuICAgICAgICAgLSB4IChudW1iZXIpXG4gICAgICAgICAtIHkgKG51bWJlcilcbiAgICAgICAgID0gKG51bWJlcikgeFxuICAgICAgICBcXCovXG4gICAgICAgIG1hdHJpeHByb3RvLnggPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgcmV0dXJuIHggKiB0aGlzLmEgKyB5ICogdGhpcy5jICsgdGhpcy5lO1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC55XG4gICAgICAgICBbIG1ldGhvZCBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZXR1cm4geSBjb29yZGluYXRlIGZvciBnaXZlbiBwb2ludCBhZnRlciB0cmFuc2Zvcm1hdGlvbiBkZXNjcmliZWQgYnkgdGhlIG1hdHJpeC4gU2VlIGFsc28gQE1hdHJpeC54XG4gICAgICAgICA+IFBhcmFtZXRlcnNcbiAgICAgICAgIC0geCAobnVtYmVyKVxuICAgICAgICAgLSB5IChudW1iZXIpXG4gICAgICAgICA9IChudW1iZXIpIHlcbiAgICAgICAgXFwqL1xuICAgICAgICBtYXRyaXhwcm90by55ID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgIHJldHVybiB4ICogdGhpcy5iICsgeSAqIHRoaXMuZCArIHRoaXMuZjtcbiAgICAgICAgfTtcbiAgICAgICAgbWF0cml4cHJvdG8uZ2V0ID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHJldHVybiArdGhpc1tTdHIuZnJvbUNoYXJDb2RlKDk3ICsgaSldLnRvRml4ZWQoNCk7XG4gICAgICAgIH07XG4gICAgICAgIG1hdHJpeHByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFIuc3ZnID9cbiAgICAgICAgICAgICAgICBcIm1hdHJpeChcIiArIFt0aGlzLmdldCgwKSwgdGhpcy5nZXQoMSksIHRoaXMuZ2V0KDIpLCB0aGlzLmdldCgzKSwgdGhpcy5nZXQoNCksIHRoaXMuZ2V0KDUpXS5qb2luKCkgKyBcIilcIiA6XG4gICAgICAgICAgICAgICAgW3RoaXMuZ2V0KDApLCB0aGlzLmdldCgyKSwgdGhpcy5nZXQoMSksIHRoaXMuZ2V0KDMpLCAwLCAwXS5qb2luKCk7XG4gICAgICAgIH07XG4gICAgICAgIG1hdHJpeHByb3RvLnRvRmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9XCIgKyB0aGlzLmdldCgwKSArXG4gICAgICAgICAgICAgICAgXCIsIE0xMj1cIiArIHRoaXMuZ2V0KDIpICsgXCIsIE0yMT1cIiArIHRoaXMuZ2V0KDEpICsgXCIsIE0yMj1cIiArIHRoaXMuZ2V0KDMpICtcbiAgICAgICAgICAgICAgICBcIiwgRHg9XCIgKyB0aGlzLmdldCg0KSArIFwiLCBEeT1cIiArIHRoaXMuZ2V0KDUpICsgXCIsIHNpemluZ21ldGhvZD0nYXV0byBleHBhbmQnKVwiO1xuICAgICAgICB9O1xuICAgICAgICBtYXRyaXhwcm90by5vZmZzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuZS50b0ZpeGVkKDQpLCB0aGlzLmYudG9GaXhlZCg0KV07XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIG5vcm0oYSkge1xuICAgICAgICAgICAgcmV0dXJuIGFbMF0gKiBhWzBdICsgYVsxXSAqIGFbMV07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplKGEpIHtcbiAgICAgICAgICAgIHZhciBtYWcgPSBtYXRoLnNxcnQobm9ybShhKSk7XG4gICAgICAgICAgICBhWzBdICYmIChhWzBdIC89IG1hZyk7XG4gICAgICAgICAgICBhWzFdICYmIChhWzFdIC89IG1hZyk7XG4gICAgICAgIH1cbiAgICAgICAgLypcXFxuICAgICAgICAgKiBNYXRyaXguc3BsaXRcbiAgICAgICAgIFsgbWV0aG9kIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIFNwbGl0cyBtYXRyaXggaW50byBwcmltaXRpdmUgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgICA9IChvYmplY3QpIGluIGZvcm1hdDpcbiAgICAgICAgIG8gZHggKG51bWJlcikgdHJhbnNsYXRpb24gYnkgeFxuICAgICAgICAgbyBkeSAobnVtYmVyKSB0cmFuc2xhdGlvbiBieSB5XG4gICAgICAgICBvIHNjYWxleCAobnVtYmVyKSBzY2FsZSBieSB4XG4gICAgICAgICBvIHNjYWxleSAobnVtYmVyKSBzY2FsZSBieSB5XG4gICAgICAgICBvIHNoZWFyIChudW1iZXIpIHNoZWFyXG4gICAgICAgICBvIHJvdGF0ZSAobnVtYmVyKSByb3RhdGlvbiBpbiBkZWdcbiAgICAgICAgIG8gaXNTaW1wbGUgKGJvb2xlYW4pIGNvdWxkIGl0IGJlIHJlcHJlc2VudGVkIHZpYSBzaW1wbGUgdHJhbnNmb3JtYXRpb25zXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8uc3BsaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgICAgICAvLyB0cmFuc2xhdGlvblxuICAgICAgICAgICAgb3V0LmR4ID0gdGhpcy5lO1xuICAgICAgICAgICAgb3V0LmR5ID0gdGhpcy5mO1xuXG4gICAgICAgICAgICAvLyBzY2FsZSBhbmQgc2hlYXJcbiAgICAgICAgICAgIHZhciByb3cgPSBbW3RoaXMuYSwgdGhpcy5jXSwgW3RoaXMuYiwgdGhpcy5kXV07XG4gICAgICAgICAgICBvdXQuc2NhbGV4ID0gbWF0aC5zcXJ0KG5vcm0ocm93WzBdKSk7XG4gICAgICAgICAgICBub3JtYWxpemUocm93WzBdKTtcblxuICAgICAgICAgICAgb3V0LnNoZWFyID0gcm93WzBdWzBdICogcm93WzFdWzBdICsgcm93WzBdWzFdICogcm93WzFdWzFdO1xuICAgICAgICAgICAgcm93WzFdID0gW3Jvd1sxXVswXSAtIHJvd1swXVswXSAqIG91dC5zaGVhciwgcm93WzFdWzFdIC0gcm93WzBdWzFdICogb3V0LnNoZWFyXTtcblxuICAgICAgICAgICAgb3V0LnNjYWxleSA9IG1hdGguc3FydChub3JtKHJvd1sxXSkpO1xuICAgICAgICAgICAgbm9ybWFsaXplKHJvd1sxXSk7XG4gICAgICAgICAgICBvdXQuc2hlYXIgLz0gb3V0LnNjYWxleTtcblxuICAgICAgICAgICAgLy8gcm90YXRpb25cbiAgICAgICAgICAgIHZhciBzaW4gPSAtcm93WzBdWzFdLFxuICAgICAgICAgICAgICAgIGNvcyA9IHJvd1sxXVsxXTtcbiAgICAgICAgICAgIGlmIChjb3MgPCAwKSB7XG4gICAgICAgICAgICAgICAgb3V0LnJvdGF0ZSA9IFIuZGVnKG1hdGguYWNvcyhjb3MpKTtcbiAgICAgICAgICAgICAgICBpZiAoc2luIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBvdXQucm90YXRlID0gMzYwIC0gb3V0LnJvdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5yb3RhdGUgPSBSLmRlZyhtYXRoLmFzaW4oc2luKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dC5pc1NpbXBsZSA9ICErb3V0LnNoZWFyLnRvRml4ZWQoOSkgJiYgKG91dC5zY2FsZXgudG9GaXhlZCg5KSA9PSBvdXQuc2NhbGV5LnRvRml4ZWQoOSkgfHwgIW91dC5yb3RhdGUpO1xuICAgICAgICAgICAgb3V0LmlzU3VwZXJTaW1wbGUgPSAhK291dC5zaGVhci50b0ZpeGVkKDkpICYmIG91dC5zY2FsZXgudG9GaXhlZCg5KSA9PSBvdXQuc2NhbGV5LnRvRml4ZWQoOSkgJiYgIW91dC5yb3RhdGU7XG4gICAgICAgICAgICBvdXQubm9Sb3RhdGlvbiA9ICErb3V0LnNoZWFyLnRvRml4ZWQoOSkgJiYgIW91dC5yb3RhdGU7XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIE1hdHJpeC50b1RyYW5zZm9ybVN0cmluZ1xuICAgICAgICAgWyBtZXRob2QgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmV0dXJuIHRyYW5zZm9ybSBzdHJpbmcgdGhhdCByZXByZXNlbnRzIGdpdmVuIG1hdHJpeFxuICAgICAgICAgPSAoc3RyaW5nKSB0cmFuc2Zvcm0gc3RyaW5nXG4gICAgICAgIFxcKi9cbiAgICAgICAgbWF0cml4cHJvdG8udG9UcmFuc2Zvcm1TdHJpbmcgPSBmdW5jdGlvbiAoc2hvcnRlcikge1xuICAgICAgICAgICAgdmFyIHMgPSBzaG9ydGVyIHx8IHRoaXNbc3BsaXRdKCk7XG4gICAgICAgICAgICBpZiAocy5pc1NpbXBsZSkge1xuICAgICAgICAgICAgICAgIHMuc2NhbGV4ID0gK3Muc2NhbGV4LnRvRml4ZWQoNCk7XG4gICAgICAgICAgICAgICAgcy5zY2FsZXkgPSArcy5zY2FsZXkudG9GaXhlZCg0KTtcbiAgICAgICAgICAgICAgICBzLnJvdGF0ZSA9ICtzLnJvdGF0ZS50b0ZpeGVkKDQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAgKHMuZHggfHwgcy5keSA/IFwidFwiICsgW3MuZHgsIHMuZHldIDogRSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHMuc2NhbGV4ICE9IDEgfHwgcy5zY2FsZXkgIT0gMSA/IFwic1wiICsgW3Muc2NhbGV4LCBzLnNjYWxleSwgMCwgMF0gOiBFKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAocy5yb3RhdGUgPyBcInJcIiArIFtzLnJvdGF0ZSwgMCwgMF0gOiBFKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibVwiICsgW3RoaXMuZ2V0KDApLCB0aGlzLmdldCgxKSwgdGhpcy5nZXQoMiksIHRoaXMuZ2V0KDMpLCB0aGlzLmdldCg0KSwgdGhpcy5nZXQoNSldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pKE1hdHJpeC5wcm90b3R5cGUpO1xuXG4gICAgdmFyIHByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgfSxcbiAgICBwcmV2ZW50VG91Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIHN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgIH0sXG4gICAgc3RvcFRvdWNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgZ2V0RXZlbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzY3JvbGxZID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBnLmRvYy5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgIHNjcm9sbFggPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBnLmRvYy5ib2R5LnNjcm9sbExlZnQ7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGUuY2xpZW50WCArIHNjcm9sbFgsXG4gICAgICAgICAgICB5OiBlLmNsaWVudFkgKyBzY3JvbGxZXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBhZGRFdmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChnLmRvYy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgdHlwZSwgZm4sIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBnZXRFdmVudFBvc2l0aW9uKGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbChlbGVtZW50LCBlLCBwb3MueCwgcG9zLnkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzVG91Y2ggJiYgdG91Y2hNYXBbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9mID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBnZXRFdmVudFBvc2l0aW9uKGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZGUgPSBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzW2ldLnRhcmdldCA9PSBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGUudGFyZ2V0VG91Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5vcmlnaW5hbEV2ZW50ID0gb2xkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnRUb3VjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24gPSBzdG9wVG91Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwoZWxlbWVudCwgZSwgcG9zLngsIHBvcy55KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodG91Y2hNYXBbdHlwZV0sIF9mLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIHRvdWNoTWFwW3R5cGVdKVxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIodG91Y2hNYXBbdHlwZV0sIF9mLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZy5kb2MuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqLCB0eXBlLCBmbiwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IGUgfHwgZy53aW4uZXZlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxZID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBnLmRvYy5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFggPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBnLmRvYy5ib2R5LnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gZS5jbGllbnRYICsgc2Nyb2xsWCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBlLmNsaWVudFkgKyBzY3JvbGxZO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24gPSBlLnN0b3BQcm9wYWdhdGlvbiB8fCBzdG9wUHJvcGFnYXRpb247XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKGVsZW1lbnQsIGUsIHgsIHkpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb2JqLmF0dGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgICAgICAgICAgICAgIHZhciBkZXRhY2hlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGYpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXRhY2hlcjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KSgpLFxuICAgIGRyYWcgPSBbXSxcbiAgICBkcmFnTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB4ID0gZS5jbGllbnRYLFxuICAgICAgICAgICAgeSA9IGUuY2xpZW50WSxcbiAgICAgICAgICAgIHNjcm9sbFkgPSBnLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGcuZG9jLmJvZHkuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgc2Nyb2xsWCA9IGcuZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGcuZG9jLmJvZHkuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIGRyYWdpLFxuICAgICAgICAgICAgaiA9IGRyYWcubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAgICBkcmFnaSA9IGRyYWdbal07XG4gICAgICAgICAgICBpZiAoc3VwcG9ydHNUb3VjaCAmJiBlLnRvdWNoZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGUudG91Y2hlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHRvdWNoO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2ggPSBlLnRvdWNoZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09IGRyYWdpLmVsLl9kcmFnLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gdG91Y2guY2xpZW50WDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB0b3VjaC5jbGllbnRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGUub3JpZ2luYWxFdmVudCA/IGUub3JpZ2luYWxFdmVudCA6IGUpLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5vZGUgPSBkcmFnaS5lbC5ub2RlLFxuICAgICAgICAgICAgICAgIG8sXG4gICAgICAgICAgICAgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgICAgIGRpc3BsYXkgPSBub2RlLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgICAgICBnLndpbi5vcGVyYSAmJiBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIG8gPSBkcmFnaS5lbC5wYXBlci5nZXRFbGVtZW50QnlQb2ludCh4LCB5KTtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgICAgICBnLndpbi5vcGVyYSAmJiAobmV4dCA/IHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCkgOiBwYXJlbnQuYXBwZW5kQ2hpbGQobm9kZSkpO1xuICAgICAgICAgICAgbyAmJiBldmUoXCJyYXBoYWVsLmRyYWcub3Zlci5cIiArIGRyYWdpLmVsLmlkLCBkcmFnaS5lbCwgbyk7XG4gICAgICAgICAgICB4ICs9IHNjcm9sbFg7XG4gICAgICAgICAgICB5ICs9IHNjcm9sbFk7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmRyYWcubW92ZS5cIiArIGRyYWdpLmVsLmlkLCBkcmFnaS5tb3ZlX3Njb3BlIHx8IGRyYWdpLmVsLCB4IC0gZHJhZ2kuZWwuX2RyYWcueCwgeSAtIGRyYWdpLmVsLl9kcmFnLnksIHgsIHksIGUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBkcmFnVXAgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBSLnVubW91c2Vtb3ZlKGRyYWdNb3ZlKS51bm1vdXNldXAoZHJhZ1VwKTtcbiAgICAgICAgdmFyIGkgPSBkcmFnLmxlbmd0aCxcbiAgICAgICAgICAgIGRyYWdpO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBkcmFnaSA9IGRyYWdbaV07XG4gICAgICAgICAgICBkcmFnaS5lbC5fZHJhZyA9IHt9O1xuICAgICAgICAgICAgZXZlKFwicmFwaGFlbC5kcmFnLmVuZC5cIiArIGRyYWdpLmVsLmlkLCBkcmFnaS5lbmRfc2NvcGUgfHwgZHJhZ2kuc3RhcnRfc2NvcGUgfHwgZHJhZ2kubW92ZV9zY29wZSB8fCBkcmFnaS5lbCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgZHJhZyA9IFtdO1xuICAgIH0sXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZWxcbiAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICoqXG4gICAgICogWW91IGNhbiBhZGQgeW91ciBvd24gbWV0aG9kIHRvIGVsZW1lbnRzLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGhhY2sgZGVmYXVsdCBmdW5jdGlvbmFsaXR5IG9yXG4gICAgICogd2FudCB0byB3cmFwIHNvbWUgY29tbW9uIHRyYW5zZm9ybWF0aW9uIG9yIGF0dHJpYnV0ZXMgaW4gb25lIG1ldGhvZC4gSW4gZGlmZmVyZW5jZSB0byBjYW52YXMgbWV0aG9kcyxcbiAgICAgKiB5b3UgY2FuIHJlZGVmaW5lIGVsZW1lbnQgbWV0aG9kIGF0IGFueSB0aW1lLiBFeHBlbmRpbmcgZWxlbWVudCBtZXRob2RzIHdvdWxkbuKAmXQgYWZmZWN0IHNldC5cbiAgICAgPiBVc2FnZVxuICAgICB8IFJhcGhhZWwuZWwucmVkID0gZnVuY3Rpb24gKCkge1xuICAgICB8ICAgICB0aGlzLmF0dHIoe2ZpbGw6IFwiI2YwMFwifSk7XG4gICAgIHwgfTtcbiAgICAgfCAvLyB0aGVuIHVzZSBpdFxuICAgICB8IHBhcGVyLmNpcmNsZSgxMDAsIDEwMCwgMjApLnJlZCgpO1xuICAgIFxcKi9cbiAgICBlbHByb3RvID0gUi5lbCA9IHt9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmNsaWNrXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIGNsaWNrIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgY2xpY2sgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZGJsY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgZG91YmxlIGNsaWNrIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuZGJsY2xpY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgZG91YmxlIGNsaWNrIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50Lm1vdXNlZG93blxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZWRvd24gZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5tb3VzZWRvd25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2Vkb3duIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50Lm1vdXNlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZW1vdmUgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5tb3VzZW1vdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2Vtb3ZlIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50Lm1vdXNlb3V0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlb3V0IGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVubW91c2VvdXRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgbW91c2VvdXQgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2VvdmVyXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlb3ZlciBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bm1vdXNlb3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZW92ZXIgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuXG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQubW91c2V1cFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZXVwIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVubW91c2V1cFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVyIGZvciBtb3VzZXVwIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvdWNoc3RhcnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hzdGFydCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bnRvdWNoc3RhcnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hzdGFydCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b3VjaG1vdmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2htb3ZlIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVudG91Y2htb3ZlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNobW92ZSBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b3VjaGVuZFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciB0b3VjaGVuZCBmb3IgdGhlIGVsZW1lbnQuXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIGhhbmRsZXIgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC51bnRvdWNoZW5kXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNoZW5kIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pICNvcHRpb25hbCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cblxuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvdWNoY2FuY2VsXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIHRvdWNoY2FuY2VsIGZvciB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gaGFuZGxlciAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVudG91Y2hjYW5jZWxcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZXZlbnQgaGFuZGxlciBmb3IgdG91Y2hjYW5jZWwgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBoYW5kbGVyIChmdW5jdGlvbikgI29wdGlvbmFsIGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGZvciAodmFyIGkgPSBldmVudHMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgIChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgICAgICBSW2V2ZW50TmFtZV0gPSBlbHByb3RvW2V2ZW50TmFtZV0gPSBmdW5jdGlvbiAoZm4sIHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgaWYgKFIuaXMoZm4sIFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMgPSB0aGlzLmV2ZW50cyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMucHVzaCh7bmFtZTogZXZlbnROYW1lLCBmOiBmbiwgdW5iaW5kOiBhZGRFdmVudCh0aGlzLnNoYXBlIHx8IHRoaXMubm9kZSB8fCBnLmRvYywgZXZlbnROYW1lLCBmbiwgc2NvcGUgfHwgdGhpcyl9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgUltcInVuXCIgKyBldmVudE5hbWVdID0gZWxwcm90b1tcInVuXCIgKyBldmVudE5hbWVdID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICBsID0gZXZlbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobC0tKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50c1tsXS5uYW1lID09IGV2ZW50TmFtZSAmJiAoUi5pcyhmbiwgXCJ1bmRlZmluZWRcIikgfHwgZXZlbnRzW2xdLmYgPT0gZm4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHNbbF0udW5iaW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHMuc3BsaWNlKGwsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50cy5sZW5ndGggJiYgZGVsZXRlIHRoaXMuZXZlbnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkoZXZlbnRzW2ldKTtcbiAgICB9XG5cbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5kYXRhXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIG9yIHJldHJpZXZlcyBnaXZlbiB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4ga2V5LlxuICAgICAqKlxuICAgICAqIFNlZSBhbHNvIEBFbGVtZW50LnJlbW92ZURhdGFcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0ga2V5IChzdHJpbmcpIGtleSB0byBzdG9yZSBkYXRhXG4gICAgIC0gdmFsdWUgKGFueSkgI29wdGlvbmFsIHZhbHVlIHRvIHN0b3JlXG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICAgKiBvciwgaWYgdmFsdWUgaXMgbm90IHNwZWNpZmllZDpcbiAgICAgPSAoYW55KSB2YWx1ZVxuICAgICAqIG9yLCBpZiBrZXkgYW5kIHZhbHVlIGFyZSBub3Qgc3BlY2lmaWVkOlxuICAgICA9IChvYmplY3QpIEtleS92YWx1ZSBwYWlycyBmb3IgYWxsIHRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudC5cbiAgICAgPiBVc2FnZVxuICAgICB8IGZvciAodmFyIGkgPSAwLCBpIDwgNSwgaSsrKSB7XG4gICAgIHwgICAgIHBhcGVyLmNpcmNsZSgxMCArIDE1ICogaSwgMTAsIDEwKVxuICAgICB8ICAgICAgICAgIC5hdHRyKHtmaWxsOiBcIiMwMDBcIn0pXG4gICAgIHwgICAgICAgICAgLmRhdGEoXCJpXCIsIGkpXG4gICAgIHwgICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgfCAgICAgICAgICAgICBhbGVydCh0aGlzLmRhdGEoXCJpXCIpKTtcbiAgICAgfCAgICAgICAgICB9KTtcbiAgICAgfCB9XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhciBkYXRhID0gZWxkYXRhW3RoaXMuaWRdID0gZWxkYXRhW3RoaXMuaWRdIHx8IHt9O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBpZiAoUi5pcyhrZXksIFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBrZXkpIGlmIChrZXlbaGFzXShpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEoaSwga2V5W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmRhdGEuZ2V0LlwiICsgdGhpcy5pZCwgdGhpcywgZGF0YVtrZXldLCBrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgZXZlKFwicmFwaGFlbC5kYXRhLnNldC5cIiArIHRoaXMuaWQsIHRoaXMsIHZhbHVlLCBrZXkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlbW92ZURhdGFcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGFuIGVsZW1lbnQgYnkgZ2l2ZW4ga2V5LlxuICAgICAqIElmIGtleSBpcyBub3QgcHJvdmlkZWQsIHJlbW92ZXMgYWxsIHRoZSBkYXRhIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBrZXkgKHN0cmluZykgI29wdGlvbmFsIGtleVxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8ucmVtb3ZlRGF0YSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKGtleSA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbGRhdGFbdGhpcy5pZF0gPSB7fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZGF0YVt0aGlzLmlkXSAmJiBkZWxldGUgZWxkYXRhW3RoaXMuaWRdW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0RGF0YVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0cmlldmVzIHRoZSBlbGVtZW50IGRhdGFcbiAgICAgPSAob2JqZWN0KSBkYXRhXG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsb25lKGVsZGF0YVt0aGlzLmlkXSB8fCB7fSk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5ob3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQWRkcyBldmVudCBoYW5kbGVycyBmb3IgaG92ZXIgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBmX2luIChmdW5jdGlvbikgaGFuZGxlciBmb3IgaG92ZXIgaW5cbiAgICAgLSBmX291dCAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGhvdmVyIG91dFxuICAgICAtIGljb250ZXh0IChvYmplY3QpICNvcHRpb25hbCBjb250ZXh0IGZvciBob3ZlciBpbiBoYW5kbGVyXG4gICAgIC0gb2NvbnRleHQgKG9iamVjdCkgI29wdGlvbmFsIGNvbnRleHQgZm9yIGhvdmVyIG91dCBoYW5kbGVyXG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5ob3ZlciA9IGZ1bmN0aW9uIChmX2luLCBmX291dCwgc2NvcGVfaW4sIHNjb3BlX291dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb3VzZW92ZXIoZl9pbiwgc2NvcGVfaW4pLm1vdXNlb3V0KGZfb3V0LCBzY29wZV9vdXQgfHwgc2NvcGVfaW4pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudW5ob3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBldmVudCBoYW5kbGVycyBmb3IgaG92ZXIgZm9yIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBmX2luIChmdW5jdGlvbikgaGFuZGxlciBmb3IgaG92ZXIgaW5cbiAgICAgLSBmX291dCAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGhvdmVyIG91dFxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8udW5ob3ZlciA9IGZ1bmN0aW9uIChmX2luLCBmX291dCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bm1vdXNlb3ZlcihmX2luKS51bm1vdXNlb3V0KGZfb3V0KTtcbiAgICB9O1xuICAgIHZhciBkcmFnZ2FibGUgPSBbXTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5kcmFnXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXJzIGZvciBkcmFnIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBvbm1vdmUgKGZ1bmN0aW9uKSBoYW5kbGVyIGZvciBtb3ZpbmdcbiAgICAgLSBvbnN0YXJ0IChmdW5jdGlvbikgaGFuZGxlciBmb3IgZHJhZyBzdGFydFxuICAgICAtIG9uZW5kIChmdW5jdGlvbikgaGFuZGxlciBmb3IgZHJhZyBlbmRcbiAgICAgLSBtY29udGV4dCAob2JqZWN0KSAjb3B0aW9uYWwgY29udGV4dCBmb3IgbW92aW5nIGhhbmRsZXJcbiAgICAgLSBzY29udGV4dCAob2JqZWN0KSAjb3B0aW9uYWwgY29udGV4dCBmb3IgZHJhZyBzdGFydCBoYW5kbGVyXG4gICAgIC0gZWNvbnRleHQgKG9iamVjdCkgI29wdGlvbmFsIGNvbnRleHQgZm9yIGRyYWcgZW5kIGhhbmRsZXJcbiAgICAgKiBBZGRpdGlvbmFsbHkgZm9sbG93aW5nIGBkcmFnYCBldmVudHMgd2lsbCBiZSB0cmlnZ2VyZWQ6IGBkcmFnLnN0YXJ0LjxpZD5gIG9uIHN0YXJ0LFxuICAgICAqIGBkcmFnLmVuZC48aWQ+YCBvbiBlbmQgYW5kIGBkcmFnLm1vdmUuPGlkPmAgb24gZXZlcnkgbW92ZS4gV2hlbiBlbGVtZW50IHdpbGwgYmUgZHJhZ2dlZCBvdmVyIGFub3RoZXIgZWxlbWVudFxuICAgICAqIGBkcmFnLm92ZXIuPGlkPmAgd2lsbCBiZSBmaXJlZCBhcyB3ZWxsLlxuICAgICAqXG4gICAgICogU3RhcnQgZXZlbnQgYW5kIHN0YXJ0IGhhbmRsZXIgd2lsbCBiZSBjYWxsZWQgaW4gc3BlY2lmaWVkIGNvbnRleHQgb3IgaW4gY29udGV4dCBvZiB0aGUgZWxlbWVudCB3aXRoIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICAgICBvIHggKG51bWJlcikgeCBwb3NpdGlvbiBvZiB0aGUgbW91c2VcbiAgICAgbyB5IChudW1iZXIpIHkgcG9zaXRpb24gb2YgdGhlIG1vdXNlXG4gICAgIG8gZXZlbnQgKG9iamVjdCkgRE9NIGV2ZW50IG9iamVjdFxuICAgICAqIE1vdmUgZXZlbnQgYW5kIG1vdmUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiBzcGVjaWZpZWQgY29udGV4dCBvciBpbiBjb250ZXh0IG9mIHRoZSBlbGVtZW50IHdpdGggZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAgIG8gZHggKG51bWJlcikgc2hpZnQgYnkgeCBmcm9tIHRoZSBzdGFydCBwb2ludFxuICAgICBvIGR5IChudW1iZXIpIHNoaWZ0IGJ5IHkgZnJvbSB0aGUgc3RhcnQgcG9pbnRcbiAgICAgbyB4IChudW1iZXIpIHggcG9zaXRpb24gb2YgdGhlIG1vdXNlXG4gICAgIG8geSAobnVtYmVyKSB5IHBvc2l0aW9uIG9mIHRoZSBtb3VzZVxuICAgICBvIGV2ZW50IChvYmplY3QpIERPTSBldmVudCBvYmplY3RcbiAgICAgKiBFbmQgZXZlbnQgYW5kIGVuZCBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGluIHNwZWNpZmllZCBjb250ZXh0IG9yIGluIGNvbnRleHQgb2YgdGhlIGVsZW1lbnQgd2l0aCBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgbyBldmVudCAob2JqZWN0KSBET00gZXZlbnQgb2JqZWN0XG4gICAgID0gKG9iamVjdCkgQEVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5kcmFnID0gZnVuY3Rpb24gKG9ubW92ZSwgb25zdGFydCwgb25lbmQsIG1vdmVfc2NvcGUsIHN0YXJ0X3Njb3BlLCBlbmRfc2NvcGUpIHtcbiAgICAgICAgZnVuY3Rpb24gc3RhcnQoZSkge1xuICAgICAgICAgICAgKGUub3JpZ2luYWxFdmVudCB8fCBlKS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFgsXG4gICAgICAgICAgICAgICAgeSA9IGUuY2xpZW50WSxcbiAgICAgICAgICAgICAgICBzY3JvbGxZID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBnLmRvYy5ib2R5LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICBzY3JvbGxYID0gZy5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZy5kb2MuYm9keS5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgdGhpcy5fZHJhZy5pZCA9IGUuaWRlbnRpZmllcjtcbiAgICAgICAgICAgIGlmIChzdXBwb3J0c1RvdWNoICYmIGUudG91Y2hlcykge1xuICAgICAgICAgICAgICAgIHZhciBpID0gZS50b3VjaGVzLmxlbmd0aCwgdG91Y2g7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaCA9IGUudG91Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHJhZy5pZCA9IHRvdWNoLmlkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09IHRoaXMuX2RyYWcuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2RyYWcueCA9IHggKyBzY3JvbGxYO1xuICAgICAgICAgICAgdGhpcy5fZHJhZy55ID0geSArIHNjcm9sbFk7XG4gICAgICAgICAgICAhZHJhZy5sZW5ndGggJiYgUi5tb3VzZW1vdmUoZHJhZ01vdmUpLm1vdXNldXAoZHJhZ1VwKTtcbiAgICAgICAgICAgIGRyYWcucHVzaCh7ZWw6IHRoaXMsIG1vdmVfc2NvcGU6IG1vdmVfc2NvcGUsIHN0YXJ0X3Njb3BlOiBzdGFydF9zY29wZSwgZW5kX3Njb3BlOiBlbmRfc2NvcGV9KTtcbiAgICAgICAgICAgIG9uc3RhcnQgJiYgZXZlLm9uKFwicmFwaGFlbC5kcmFnLnN0YXJ0LlwiICsgdGhpcy5pZCwgb25zdGFydCk7XG4gICAgICAgICAgICBvbm1vdmUgJiYgZXZlLm9uKFwicmFwaGFlbC5kcmFnLm1vdmUuXCIgKyB0aGlzLmlkLCBvbm1vdmUpO1xuICAgICAgICAgICAgb25lbmQgJiYgZXZlLm9uKFwicmFwaGFlbC5kcmFnLmVuZC5cIiArIHRoaXMuaWQsIG9uZW5kKTtcbiAgICAgICAgICAgIGV2ZShcInJhcGhhZWwuZHJhZy5zdGFydC5cIiArIHRoaXMuaWQsIHN0YXJ0X3Njb3BlIHx8IG1vdmVfc2NvcGUgfHwgdGhpcywgZS5jbGllbnRYICsgc2Nyb2xsWCwgZS5jbGllbnRZICsgc2Nyb2xsWSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZHJhZyA9IHt9O1xuICAgICAgICBkcmFnZ2FibGUucHVzaCh7ZWw6IHRoaXMsIHN0YXJ0OiBzdGFydH0pO1xuICAgICAgICB0aGlzLm1vdXNlZG93bihzdGFydCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQub25EcmFnT3ZlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogU2hvcnRjdXQgZm9yIGFzc2lnbmluZyBldmVudCBoYW5kbGVyIGZvciBgZHJhZy5vdmVyLjxpZD5gIGV2ZW50LCB3aGVyZSBpZCBpcyBpZCBvZiB0aGUgZWxlbWVudCAoc2VlIEBFbGVtZW50LmlkKS5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZiAoZnVuY3Rpb24pIGhhbmRsZXIgZm9yIGV2ZW50LCBmaXJzdCBhcmd1bWVudCB3b3VsZCBiZSB0aGUgZWxlbWVudCB5b3UgYXJlIGRyYWdnaW5nIG92ZXJcbiAgICBcXCovXG4gICAgZWxwcm90by5vbkRyYWdPdmVyID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgZiA/IGV2ZS5vbihcInJhcGhhZWwuZHJhZy5vdmVyLlwiICsgdGhpcy5pZCwgZikgOiBldmUudW5iaW5kKFwicmFwaGFlbC5kcmFnLm92ZXIuXCIgKyB0aGlzLmlkKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnVuZHJhZ1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBhbGwgZHJhZyBldmVudCBoYW5kbGVycyBmcm9tIGdpdmVuIGVsZW1lbnQuXG4gICAgXFwqL1xuICAgIGVscHJvdG8udW5kcmFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaSA9IGRyYWdnYWJsZS5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIGlmIChkcmFnZ2FibGVbaV0uZWwgPT0gdGhpcykge1xuICAgICAgICAgICAgdGhpcy51bm1vdXNlZG93bihkcmFnZ2FibGVbaV0uc3RhcnQpO1xuICAgICAgICAgICAgZHJhZ2dhYmxlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGV2ZS51bmJpbmQoXCJyYXBoYWVsLmRyYWcuKi5cIiArIHRoaXMuaWQpO1xuICAgICAgICB9XG4gICAgICAgICFkcmFnZ2FibGUubGVuZ3RoICYmIFIudW5tb3VzZW1vdmUoZHJhZ01vdmUpLnVubW91c2V1cChkcmFnVXApO1xuICAgICAgICBkcmFnID0gW107XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuY2lyY2xlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEcmF3cyBhIGNpcmNsZS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRyZVxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmVcbiAgICAgLSByIChudW1iZXIpIHJhZGl1c1xuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0IHdpdGggdHlwZSDigJxjaXJjbGXigJ1cbiAgICAgKipcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciBjID0gcGFwZXIuY2lyY2xlKDUwLCA1MCwgNDApO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmNpcmNsZSA9IGZ1bmN0aW9uICh4LCB5LCByKSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUuY2lyY2xlKHRoaXMsIHggfHwgMCwgeSB8fCAwLCByIHx8IDApO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5yZWN0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKlxuICAgICAqIERyYXdzIGEgcmVjdGFuZ2xlLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgdG9wIGxlZnQgY29ybmVyXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHRvcCBsZWZ0IGNvcm5lclxuICAgICAtIHdpZHRoIChudW1iZXIpIHdpZHRoXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpIGhlaWdodFxuICAgICAtIHIgKG51bWJlcikgI29wdGlvbmFsIHJhZGl1cyBmb3Igcm91bmRlZCBjb3JuZXJzLCBkZWZhdWx0IGlzIDBcbiAgICAgPSAob2JqZWN0KSBSYXBoYcOrbCBlbGVtZW50IG9iamVjdCB3aXRoIHR5cGUg4oCccmVjdOKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgLy8gcmVndWxhciByZWN0YW5nbGVcbiAgICAgfCB2YXIgYyA9IHBhcGVyLnJlY3QoMTAsIDEwLCA1MCwgNTApO1xuICAgICB8IC8vIHJlY3RhbmdsZSB3aXRoIHJvdW5kZWQgY29ybmVyc1xuICAgICB8IHZhciBjID0gcGFwZXIucmVjdCg0MCwgNDAsIDUwLCA1MCwgMTApO1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnJlY3QgPSBmdW5jdGlvbiAoeCwgeSwgdywgaCwgcikge1xuICAgICAgICB2YXIgb3V0ID0gUi5fZW5naW5lLnJlY3QodGhpcywgeCB8fCAwLCB5IHx8IDAsIHcgfHwgMCwgaCB8fCAwLCByIHx8IDApO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5lbGxpcHNlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEcmF3cyBhbiBlbGxpcHNlLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSB4IChudW1iZXIpIHggY29vcmRpbmF0ZSBvZiB0aGUgY2VudHJlXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRyZVxuICAgICAtIHJ4IChudW1iZXIpIGhvcml6b250YWwgcmFkaXVzXG4gICAgIC0gcnkgKG51bWJlcikgdmVydGljYWwgcmFkaXVzXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3Qgd2l0aCB0eXBlIOKAnGVsbGlwc2XigJ1cbiAgICAgKipcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciBjID0gcGFwZXIuZWxsaXBzZSg1MCwgNTAsIDQwLCAyMCk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZWxsaXBzZSA9IGZ1bmN0aW9uICh4LCB5LCByeCwgcnkpIHtcbiAgICAgICAgdmFyIG91dCA9IFIuX2VuZ2luZS5lbGxpcHNlKHRoaXMsIHggfHwgMCwgeSB8fCAwLCByeCB8fCAwLCByeSB8fCAwKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIucGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBhIHBhdGggZWxlbWVudCBieSBnaXZlbiBwYXRoIGRhdGEgc3RyaW5nLlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBwYXRoU3RyaW5nIChzdHJpbmcpICNvcHRpb25hbCBwYXRoIHN0cmluZyBpbiBTVkcgZm9ybWF0LlxuICAgICAqIFBhdGggc3RyaW5nIGNvbnNpc3RzIG9mIG9uZS1sZXR0ZXIgY29tbWFuZHMsIGZvbGxvd2VkIGJ5IGNvbW1hIHNlcHJhcmF0ZWQgYXJndW1lbnRzIGluIG51bWVyY2FsIGZvcm0uIEV4YW1wbGU6XG4gICAgIHwgXCJNMTAsMjBMMzAsNDBcIlxuICAgICAqIEhlcmUgd2UgY2FuIHNlZSB0d28gY29tbWFuZHM6IOKAnE3igJ0sIHdpdGggYXJndW1lbnRzIGAoMTAsIDIwKWAgYW5kIOKAnEzigJ0gd2l0aCBhcmd1bWVudHMgYCgzMCwgNDApYC4gVXBwZXIgY2FzZSBsZXR0ZXIgbWVhbiBjb21tYW5kIGlzIGFic29sdXRlLCBsb3dlciBjYXNl4oCUcmVsYXRpdmUuXG4gICAgICpcbiAgICAgIyA8cD5IZXJlIGlzIHNob3J0IGxpc3Qgb2YgY29tbWFuZHMgYXZhaWxhYmxlLCBmb3IgbW9yZSBkZXRhaWxzIHNlZSA8YSBocmVmPVwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHL3BhdGhzLmh0bWwjUGF0aERhdGFcIiB0aXRsZT1cIkRldGFpbHMgb2YgYSBwYXRoJ3MgZGF0YSBhdHRyaWJ1dGUncyBmb3JtYXQgYXJlIGRlc2NyaWJlZCBpbiB0aGUgU1ZHIHNwZWNpZmljYXRpb24uXCI+U1ZHIHBhdGggc3RyaW5nIGZvcm1hdDwvYT4uPC9wPlxuICAgICAjIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5Db21tYW5kPC90aD48dGg+TmFtZTwvdGg+PHRoPlBhcmFtZXRlcnM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+XG4gICAgICMgPHRyPjx0ZD5NPC90ZD48dGQ+bW92ZXRvPC90ZD48dGQ+KHggeSkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+WjwvdGQ+PHRkPmNsb3NlcGF0aDwvdGQ+PHRkPihub25lKTwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPkw8L3RkPjx0ZD5saW5ldG88L3RkPjx0ZD4oeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5IPC90ZD48dGQ+aG9yaXpvbnRhbCBsaW5ldG88L3RkPjx0ZD54KzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPlY8L3RkPjx0ZD52ZXJ0aWNhbCBsaW5ldG88L3RkPjx0ZD55KzwvdGQ+PC90cj5cbiAgICAgIyA8dHI+PHRkPkM8L3RkPjx0ZD5jdXJ2ZXRvPC90ZD48dGQ+KHgxIHkxIHgyIHkyIHggeSkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+UzwvdGQ+PHRkPnNtb290aCBjdXJ2ZXRvPC90ZD48dGQ+KHgyIHkyIHggeSkrPC90ZD48L3RyPlxuICAgICAjIDx0cj48dGQ+UTwvdGQ+PHRkPnF1YWRyYXRpYyBCw6l6aWVyIGN1cnZldG88L3RkPjx0ZD4oeDEgeTEgeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5UPC90ZD48dGQ+c21vb3RoIHF1YWRyYXRpYyBCw6l6aWVyIGN1cnZldG88L3RkPjx0ZD4oeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5BPC90ZD48dGQ+ZWxsaXB0aWNhbCBhcmM8L3RkPjx0ZD4ocnggcnkgeC1heGlzLXJvdGF0aW9uIGxhcmdlLWFyYy1mbGFnIHN3ZWVwLWZsYWcgeCB5KSs8L3RkPjwvdHI+XG4gICAgICMgPHRyPjx0ZD5SPC90ZD48dGQ+PGEgaHJlZj1cImh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2F0bXVsbOKAk1JvbV9zcGxpbmUjQ2F0bXVsbC5FMi44MC45M1JvbV9zcGxpbmVcIj5DYXRtdWxsLVJvbSBjdXJ2ZXRvPC9hPio8L3RkPjx0ZD54MSB5MSAoeCB5KSs8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPlxuICAgICAqICog4oCcQ2F0bXVsbC1Sb20gY3VydmV0b+KAnSBpcyBhIG5vdCBzdGFuZGFyZCBTVkcgY29tbWFuZCBhbmQgYWRkZWQgaW4gMi4wIHRvIG1ha2UgbGlmZSBlYXNpZXIuXG4gICAgICogTm90ZTogdGhlcmUgaXMgYSBzcGVjaWFsIGNhc2Ugd2hlbiBwYXRoIGNvbnNpc3Qgb2YganVzdCB0aHJlZSBjb21tYW5kczog4oCcTTEwLDEwUuKApnrigJ0uIEluIHRoaXMgY2FzZSBwYXRoIHdpbGwgc21vb3RobHkgY29ubmVjdHMgdG8gaXRzIGJlZ2lubmluZy5cbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciBjID0gcGFwZXIucGF0aChcIk0xMCAxMEw5MCA5MFwiKTtcbiAgICAgfCAvLyBkcmF3IGEgZGlhZ29uYWwgbGluZTpcbiAgICAgfCAvLyBtb3ZlIHRvIDEwLDEwLCBsaW5lIHRvIDkwLDkwXG4gICAgICogRm9yIGV4YW1wbGUgb2YgcGF0aCBzdHJpbmdzLCBjaGVjayBvdXQgdGhlc2UgaWNvbnM6IGh0dHA6Ly9yYXBoYWVsanMuY29tL2ljb25zL1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnBhdGggPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xuICAgICAgICBwYXRoU3RyaW5nICYmICFSLmlzKHBhdGhTdHJpbmcsIHN0cmluZykgJiYgIVIuaXMocGF0aFN0cmluZ1swXSwgYXJyYXkpICYmIChwYXRoU3RyaW5nICs9IEUpO1xuICAgICAgICB2YXIgb3V0ID0gUi5fZW5naW5lLnBhdGgoUi5mb3JtYXRbYXBwbHldKFIsIGFyZ3VtZW50cyksIHRoaXMpO1xuICAgICAgICB0aGlzLl9fc2V0X18gJiYgdGhpcy5fX3NldF9fLnB1c2gob3V0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5pbWFnZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRW1iZWRzIGFuIGltYWdlIGludG8gdGhlIHN1cmZhY2UuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHNyYyAoc3RyaW5nKSBVUkkgb2YgdGhlIHNvdXJjZSBpbWFnZVxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIHBvc2l0aW9uXG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICAgLSB3aWR0aCAobnVtYmVyKSB3aWR0aCBvZiB0aGUgaW1hZ2VcbiAgICAgLSBoZWlnaHQgKG51bWJlcikgaGVpZ2h0IG9mIHRoZSBpbWFnZVxuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0IHdpdGggdHlwZSDigJxpbWFnZeKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIGMgPSBwYXBlci5pbWFnZShcImFwcGxlLnBuZ1wiLCAxMCwgMTAsIDgwLCA4MCk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uaW1hZ2UgPSBmdW5jdGlvbiAoc3JjLCB4LCB5LCB3LCBoKSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUuaW1hZ2UodGhpcywgc3JjIHx8IFwiYWJvdXQ6YmxhbmtcIiwgeCB8fCAwLCB5IHx8IDAsIHcgfHwgMCwgaCB8fCAwKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIudGV4dFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRHJhd3MgYSB0ZXh0IHN0cmluZy4gSWYgeW91IG5lZWQgbGluZSBicmVha3MsIHB1dCDigJxcXG7igJ0gaW4gdGhlIHN0cmluZy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICAgLSB5IChudW1iZXIpIHkgY29vcmRpbmF0ZSBwb3NpdGlvblxuICAgICAtIHRleHQgKHN0cmluZykgVGhlIHRleHQgc3RyaW5nIHRvIGRyYXdcbiAgICAgPSAob2JqZWN0KSBSYXBoYcOrbCBlbGVtZW50IG9iamVjdCB3aXRoIHR5cGUg4oCcdGV4dOKAnVxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIHQgPSBwYXBlci50ZXh0KDUwLCA1MCwgXCJSYXBoYcOrbFxcbmtpY2tzXFxuYnV0dCFcIik7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8udGV4dCA9IGZ1bmN0aW9uICh4LCB5LCB0ZXh0KSB7XG4gICAgICAgIHZhciBvdXQgPSBSLl9lbmdpbmUudGV4dCh0aGlzLCB4IHx8IDAsIHkgfHwgMCwgU3RyKHRleHQpKTtcbiAgICAgICAgdGhpcy5fX3NldF9fICYmIHRoaXMuX19zZXRfXy5wdXNoKG91dCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGtlZXAgYW5kIG9wZXJhdGUgc2V2ZXJhbCBlbGVtZW50cyBhdCBvbmNlLlxuICAgICAqIFdhcm5pbmc6IGl0IGRvZXNu4oCZdCBjcmVhdGUgYW55IGVsZW1lbnRzIGZvciBpdHNlbGYgaW4gdGhlIHBhZ2UsIGl0IGp1c3QgZ3JvdXBzIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAqIFNldHMgYWN0IGFzIHBzZXVkbyBlbGVtZW50cyDigJQgYWxsIG1ldGhvZHMgYXZhaWxhYmxlIHRvIGFuIGVsZW1lbnQgY2FuIGJlIHVzZWQgb24gYSBzZXQuXG4gICAgID0gKG9iamVjdCkgYXJyYXktbGlrZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHNldCBvZiBlbGVtZW50c1xuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgdmFyIHN0ID0gcGFwZXIuc2V0KCk7XG4gICAgIHwgc3QucHVzaChcbiAgICAgfCAgICAgcGFwZXIuY2lyY2xlKDEwLCAxMCwgNSksXG4gICAgIHwgICAgIHBhcGVyLmNpcmNsZSgzMCwgMTAsIDUpXG4gICAgIHwgKTtcbiAgICAgfCBzdC5hdHRyKHtmaWxsOiBcInJlZFwifSk7IC8vIGNoYW5nZXMgdGhlIGZpbGwgb2YgYm90aCBjaXJjbGVzXG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uc2V0ID0gZnVuY3Rpb24gKGl0ZW1zQXJyYXkpIHtcbiAgICAgICAgIVIuaXMoaXRlbXNBcnJheSwgXCJhcnJheVwiKSAmJiAoaXRlbXNBcnJheSA9IEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDAsIGFyZ3VtZW50cy5sZW5ndGgpKTtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBTZXQoaXRlbXNBcnJheSk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICBvdXRbXCJwYXBlclwiXSA9IHRoaXM7XG4gICAgICAgIG91dFtcInR5cGVcIl0gPSBcInNldFwiO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnNldFN0YXJ0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIEBQYXBlci5zZXQuIEFsbCBlbGVtZW50cyB0aGF0IHdpbGwgYmUgY3JlYXRlZCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIGFuZCBiZWZvcmUgY2FsbGluZ1xuICAgICAqIEBQYXBlci5zZXRGaW5pc2ggd2lsbCBiZSBhZGRlZCB0byB0aGUgc2V0LlxuICAgICAqKlxuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIuc2V0U3RhcnQoKTtcbiAgICAgfCBwYXBlci5jaXJjbGUoMTAsIDEwLCA1KSxcbiAgICAgfCBwYXBlci5jaXJjbGUoMzAsIDEwLCA1KVxuICAgICB8IHZhciBzdCA9IHBhcGVyLnNldEZpbmlzaCgpO1xuICAgICB8IHN0LmF0dHIoe2ZpbGw6IFwicmVkXCJ9KTsgLy8gY2hhbmdlcyB0aGUgZmlsbCBvZiBib3RoIGNpcmNsZXNcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5zZXRTdGFydCA9IGZ1bmN0aW9uIChzZXQpIHtcbiAgICAgICAgdGhpcy5fX3NldF9fID0gc2V0IHx8IHRoaXMuc2V0KCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0RmluaXNoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZWUgQFBhcGVyLnNldFN0YXJ0LiBUaGlzIG1ldGhvZCBmaW5pc2hlcyBjYXRjaGluZyBhbmQgcmV0dXJucyByZXN1bHRpbmcgc2V0LlxuICAgICAqKlxuICAgICA9IChvYmplY3QpIHNldFxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnNldEZpbmlzaCA9IGZ1bmN0aW9uIChzZXQpIHtcbiAgICAgICAgdmFyIG91dCA9IHRoaXMuX19zZXRfXztcbiAgICAgICAgZGVsZXRlIHRoaXMuX19zZXRfXztcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5nZXRTaXplXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBPYnRhaW5zIGN1cnJlbnQgcGFwZXIgYWN0dWFsIHNpemUuXG4gICAgICoqXG4gICAgID0gKG9iamVjdClcbiAgICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY2FudmFzLnBhcmVudE5vZGU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogY29udGFpbmVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBjb250YWluZXIub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAvKlxcXG4gICAgICogUGFwZXIuc2V0U2l6ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSWYgeW91IG5lZWQgdG8gY2hhbmdlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyBjYWxsIHRoaXMgbWV0aG9kXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHdpZHRoIChudW1iZXIpIG5ldyB3aWR0aCBvZiB0aGUgY2FudmFzXG4gICAgIC0gaGVpZ2h0IChudW1iZXIpIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhc1xuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICByZXR1cm4gUi5fZW5naW5lLnNldFNpemUuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5zZXRWaWV3Qm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZXRzIHRoZSB2aWV3IGJveCBvZiB0aGUgcGFwZXIuIFByYWN0aWNhbGx5IGl0IGdpdmVzIHlvdSBhYmlsaXR5IHRvIHpvb20gYW5kIHBhbiB3aG9sZSBwYXBlciBzdXJmYWNlIGJ5XG4gICAgICogc3BlY2lmeWluZyBuZXcgYm91bmRhcmllcy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSBuZXcgeCBwb3NpdGlvbiwgZGVmYXVsdCBpcyBgMGBcbiAgICAgLSB5IChudW1iZXIpIG5ldyB5IHBvc2l0aW9uLCBkZWZhdWx0IGlzIGAwYFxuICAgICAtIHcgKG51bWJlcikgbmV3IHdpZHRoIG9mIHRoZSBjYW52YXNcbiAgICAgLSBoIChudW1iZXIpIG5ldyBoZWlnaHQgb2YgdGhlIGNhbnZhc1xuICAgICAtIGZpdCAoYm9vbGVhbikgYHRydWVgIGlmIHlvdSB3YW50IGdyYXBoaWNzIHRvIGZpdCBpbnRvIG5ldyBib3VuZGFyeSBib3hcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5zZXRWaWV3Qm94ID0gZnVuY3Rpb24gKHgsIHksIHcsIGgsIGZpdCkge1xuICAgICAgICByZXR1cm4gUi5fZW5naW5lLnNldFZpZXdCb3guY2FsbCh0aGlzLCB4LCB5LCB3LCBoLCBmaXQpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnRvcFxuICAgICBbIHByb3BlcnR5IF1cbiAgICAgKipcbiAgICAgKiBQb2ludHMgdG8gdGhlIHRvcG1vc3QgZWxlbWVudCBvbiB0aGUgcGFwZXJcbiAgICBcXCovXG4gICAgLypcXFxuICAgICAqIFBhcGVyLmJvdHRvbVxuICAgICBbIHByb3BlcnR5IF1cbiAgICAgKipcbiAgICAgKiBQb2ludHMgdG8gdGhlIGJvdHRvbSBlbGVtZW50IG9uIHRoZSBwYXBlclxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnRvcCA9IHBhcGVycHJvdG8uYm90dG9tID0gbnVsbDtcbiAgICAvKlxcXG4gICAgICogUGFwZXIucmFwaGFlbFxuICAgICBbIHByb3BlcnR5IF1cbiAgICAgKipcbiAgICAgKiBQb2ludHMgdG8gdGhlIEBSYXBoYWVsIG9iamVjdC9mdW5jdGlvblxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLnJhcGhhZWwgPSBSO1xuICAgIHZhciBnZXRPZmZzZXQgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudCxcbiAgICAgICAgICAgIGJvZHkgPSBkb2MuYm9keSxcbiAgICAgICAgICAgIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgICAgICAgY2xpZW50VG9wID0gZG9jRWxlbS5jbGllbnRUb3AgfHwgYm9keS5jbGllbnRUb3AgfHwgMCwgY2xpZW50TGVmdCA9IGRvY0VsZW0uY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMCxcbiAgICAgICAgICAgIHRvcCAgPSBib3gudG9wICArIChnLndpbi5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcCB8fCBib2R5LnNjcm9sbFRvcCApIC0gY2xpZW50VG9wLFxuICAgICAgICAgICAgbGVmdCA9IGJveC5sZWZ0ICsgKGcud2luLnBhZ2VYT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsTGVmdCB8fCBib2R5LnNjcm9sbExlZnQpIC0gY2xpZW50TGVmdDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHk6IHRvcCxcbiAgICAgICAgICAgIHg6IGxlZnRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5nZXRFbGVtZW50QnlQb2ludFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyB5b3UgdG9wbW9zdCBlbGVtZW50IHVuZGVyIGdpdmVuIHBvaW50LlxuICAgICAqKlxuICAgICA9IChvYmplY3QpIFJhcGhhw6tsIGVsZW1lbnQgb2JqZWN0XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIGZyb20gdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgd2luZG93XG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgZnJvbSB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSB3aW5kb3dcbiAgICAgPiBVc2FnZVxuICAgICB8IHBhcGVyLmdldEVsZW1lbnRCeVBvaW50KG1vdXNlWCwgbW91c2VZKS5hdHRyKHtzdHJva2U6IFwiI2YwMFwifSk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0RWxlbWVudEJ5UG9pbnQgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgcGFwZXIgPSB0aGlzLFxuICAgICAgICAgICAgc3ZnID0gcGFwZXIuY2FudmFzLFxuICAgICAgICAgICAgdGFyZ2V0ID0gZy5kb2MuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgaWYgKGcud2luLm9wZXJhICYmIHRhcmdldC50YWdOYW1lID09IFwic3ZnXCIpIHtcbiAgICAgICAgICAgIHZhciBzbyA9IGdldE9mZnNldChzdmcpLFxuICAgICAgICAgICAgICAgIHNyID0gc3ZnLmNyZWF0ZVNWR1JlY3QoKTtcbiAgICAgICAgICAgIHNyLnggPSB4IC0gc28ueDtcbiAgICAgICAgICAgIHNyLnkgPSB5IC0gc28ueTtcbiAgICAgICAgICAgIHNyLndpZHRoID0gc3IuaGVpZ2h0ID0gMTtcbiAgICAgICAgICAgIHZhciBoaXRzID0gc3ZnLmdldEludGVyc2VjdGlvbkxpc3Qoc3IsIG51bGwpO1xuICAgICAgICAgICAgaWYgKGhpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gaGl0c1toaXRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0ICE9IHN2Zy5wYXJlbnROb2RlICYmICF0YXJnZXQucmFwaGFlbCkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID09IHBhcGVyLmNhbnZhcy5wYXJlbnROb2RlICYmICh0YXJnZXQgPSBzdmcpO1xuICAgICAgICB0YXJnZXQgPSB0YXJnZXQgJiYgdGFyZ2V0LnJhcGhhZWwgPyBwYXBlci5nZXRCeUlkKHRhcmdldC5yYXBoYWVsaWQpIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEVsZW1lbnRzQnlCQm94XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIHNldCBvZiBlbGVtZW50cyB0aGF0IGhhdmUgYW4gaW50ZXJzZWN0aW5nIGJvdW5kaW5nIGJveFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBiYm94IChvYmplY3QpIGJib3ggdG8gY2hlY2sgd2l0aFxuICAgICA9IChvYmplY3QpIEBTZXRcbiAgICAgXFwqL1xuICAgIHBhcGVycHJvdG8uZ2V0RWxlbWVudHNCeUJCb3ggPSBmdW5jdGlvbiAoYmJveCkge1xuICAgICAgICB2YXIgc2V0ID0gdGhpcy5zZXQoKTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKFIuaXNCQm94SW50ZXJzZWN0KGVsLmdldEJCb3goKSwgYmJveCkpIHtcbiAgICAgICAgICAgICAgICBzZXQucHVzaChlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2V0O1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUGFwZXIuZ2V0QnlJZFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyB5b3UgZWxlbWVudCBieSBpdHMgaW50ZXJuYWwgSUQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGlkIChudW1iZXIpIGlkXG4gICAgID0gKG9iamVjdCkgUmFwaGHDq2wgZWxlbWVudCBvYmplY3RcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBib3QgPSB0aGlzLmJvdHRvbTtcbiAgICAgICAgd2hpbGUgKGJvdCkge1xuICAgICAgICAgICAgaWYgKGJvdC5pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBib3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib3QgPSBib3QubmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5mb3JFYWNoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBFeGVjdXRlcyBnaXZlbiBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50IG9uIHRoZSBwYXBlclxuICAgICAqXG4gICAgICogSWYgY2FsbGJhY2sgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgIGl0IHdpbGwgc3RvcCBsb29wIHJ1bm5pbmcuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGNhbGxiYWNrIChmdW5jdGlvbikgZnVuY3Rpb24gdG8gcnVuXG4gICAgIC0gdGhpc0FyZyAob2JqZWN0KSBjb250ZXh0IG9iamVjdCBmb3IgdGhlIGNhbGxiYWNrXG4gICAgID0gKG9iamVjdCkgUGFwZXIgb2JqZWN0XG4gICAgID4gVXNhZ2VcbiAgICAgfCBwYXBlci5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICB8ICAgICBlbC5hdHRyKHsgc3Ryb2tlOiBcImJsdWVcIiB9KTtcbiAgICAgfCB9KTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBib3QgPSB0aGlzLmJvdHRvbTtcbiAgICAgICAgd2hpbGUgKGJvdCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwodGhpc0FyZywgYm90KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvdCA9IGJvdC5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEVsZW1lbnRzQnlQb2ludFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyBzZXQgb2YgZWxlbWVudHMgdGhhdCBoYXZlIGNvbW1vbiBwb2ludCBpbnNpZGVcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgIC0geSAobnVtYmVyKSB5IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gICAgID0gKG9iamVjdCkgQFNldFxuICAgIFxcKi9cbiAgICBwYXBlcnByb3RvLmdldEVsZW1lbnRzQnlQb2ludCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBzZXQgPSB0aGlzLnNldCgpO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWwuaXNQb2ludEluc2lkZSh4LCB5KSkge1xuICAgICAgICAgICAgICAgIHNldC5wdXNoKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfTtcbiAgICBmdW5jdGlvbiB4X3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKyBTICsgdGhpcy55O1xuICAgIH1cbiAgICBmdW5jdGlvbiB4X3lfd19oKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54ICsgUyArIHRoaXMueSArIFMgKyB0aGlzLndpZHRoICsgXCIgXFx4ZDcgXCIgKyB0aGlzLmhlaWdodDtcbiAgICB9XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaXNQb2ludEluc2lkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGdpdmVuIHBvaW50IGlzIGluc2lkZSB0aGlzIGVsZW1lbnTigJlzIHNoYXBlXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgcG9pbnQgaW5zaWRlIHRoZSBzaGFwZVxuICAgIFxcKi9cbiAgICBlbHByb3RvLmlzUG9pbnRJbnNpZGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgcnAgPSB0aGlzLnJlYWxQYXRoID0gZ2V0UGF0aFt0aGlzLnR5cGVdKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5hdHRyKCd0cmFuc2Zvcm0nKSAmJiB0aGlzLmF0dHIoJ3RyYW5zZm9ybScpLmxlbmd0aCkge1xuICAgICAgICAgICAgcnAgPSBSLnRyYW5zZm9ybVBhdGgocnAsIHRoaXMuYXR0cigndHJhbnNmb3JtJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSLmlzUG9pbnRJbnNpZGVQYXRoKHJwLCB4LCB5KTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmdldEJCb3hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybiBib3VuZGluZyBib3ggZm9yIGEgZ2l2ZW4gZWxlbWVudFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBpc1dpdGhvdXRUcmFuc2Zvcm0gKGJvb2xlYW4pIGZsYWcsIGB0cnVlYCBpZiB5b3Ugd2FudCB0byBoYXZlIGJvdW5kaW5nIGJveCBiZWZvcmUgdHJhbnNmb3JtYXRpb25zLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgID0gKG9iamVjdCkgQm91bmRpbmcgYm94IG9iamVjdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHRvcCBsZWZ0IGNvcm5lciB4XG4gICAgIG8gICAgIHk6IChudW1iZXIpIHRvcCBsZWZ0IGNvcm5lciB5XG4gICAgIG8gICAgIHgyOiAobnVtYmVyKSBib3R0b20gcmlnaHQgY29ybmVyIHhcbiAgICAgbyAgICAgeTI6IChudW1iZXIpIGJvdHRvbSByaWdodCBjb3JuZXIgeVxuICAgICBvICAgICB3aWR0aDogKG51bWJlcikgd2lkdGhcbiAgICAgbyAgICAgaGVpZ2h0OiAobnVtYmVyKSBoZWlnaHRcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0QkJveCA9IGZ1bmN0aW9uIChpc1dpdGhvdXRUcmFuc2Zvcm0pIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBfID0gdGhpcy5fO1xuICAgICAgICBpZiAoaXNXaXRob3V0VHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAoXy5kaXJ0eSB8fCAhXy5iYm94d3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWxQYXRoID0gZ2V0UGF0aFt0aGlzLnR5cGVdKHRoaXMpO1xuICAgICAgICAgICAgICAgIF8uYmJveHd0ID0gcGF0aERpbWVuc2lvbnModGhpcy5yZWFsUGF0aCk7XG4gICAgICAgICAgICAgICAgXy5iYm94d3QudG9TdHJpbmcgPSB4X3lfd19oO1xuICAgICAgICAgICAgICAgIF8uZGlydHkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF8uYmJveHd0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChfLmRpcnR5IHx8IF8uZGlydHlUIHx8ICFfLmJib3gpIHtcbiAgICAgICAgICAgIGlmIChfLmRpcnR5IHx8ICF0aGlzLnJlYWxQYXRoKSB7XG4gICAgICAgICAgICAgICAgXy5iYm94d3QgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmVhbFBhdGggPSBnZXRQYXRoW3RoaXMudHlwZV0odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfLmJib3ggPSBwYXRoRGltZW5zaW9ucyhtYXBQYXRoKHRoaXMucmVhbFBhdGgsIHRoaXMubWF0cml4KSk7XG4gICAgICAgICAgICBfLmJib3gudG9TdHJpbmcgPSB4X3lfd19oO1xuICAgICAgICAgICAgXy5kaXJ0eSA9IF8uZGlydHlUID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXy5iYm94O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuY2xvbmVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICA9IChvYmplY3QpIGNsb25lIG9mIGEgZ2l2ZW4gZWxlbWVudFxuICAgICAqKlxuICAgIFxcKi9cbiAgICBlbHByb3RvLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0ID0gdGhpcy5wYXBlclt0aGlzLnR5cGVdKCkuYXR0cih0aGlzLmF0dHIoKSk7XG4gICAgICAgIHRoaXMuX19zZXRfXyAmJiB0aGlzLl9fc2V0X18ucHVzaChvdXQpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2xvd1xuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIHNldCBvZiBlbGVtZW50cyB0aGF0IGNyZWF0ZSBnbG93LWxpa2UgZWZmZWN0IGFyb3VuZCBnaXZlbiBlbGVtZW50LiBTZWUgQFBhcGVyLnNldC5cbiAgICAgKlxuICAgICAqIE5vdGU6IEdsb3cgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgZWxlbWVudC4gSWYgeW91IGNoYW5nZSBlbGVtZW50IGF0dHJpYnV0ZXMgaXQgd29u4oCZdCBhZGp1c3QgaXRzZWxmLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBnbG93IChvYmplY3QpICNvcHRpb25hbCBwYXJhbWV0ZXJzIG9iamVjdCB3aXRoIGFsbCBwcm9wZXJ0aWVzIG9wdGlvbmFsOlxuICAgICBvIHtcbiAgICAgbyAgICAgd2lkdGggKG51bWJlcikgc2l6ZSBvZiB0aGUgZ2xvdywgZGVmYXVsdCBpcyBgMTBgXG4gICAgIG8gICAgIGZpbGwgKGJvb2xlYW4pIHdpbGwgaXQgYmUgZmlsbGVkLCBkZWZhdWx0IGlzIGBmYWxzZWBcbiAgICAgbyAgICAgb3BhY2l0eSAobnVtYmVyKSBvcGFjaXR5LCBkZWZhdWx0IGlzIGAwLjVgXG4gICAgIG8gICAgIG9mZnNldHggKG51bWJlcikgaG9yaXpvbnRhbCBvZmZzZXQsIGRlZmF1bHQgaXMgYDBgXG4gICAgIG8gICAgIG9mZnNldHkgKG51bWJlcikgdmVydGljYWwgb2Zmc2V0LCBkZWZhdWx0IGlzIGAwYFxuICAgICBvICAgICBjb2xvciAoc3RyaW5nKSBnbG93IGNvbG91ciwgZGVmYXVsdCBpcyBgYmxhY2tgXG4gICAgIG8gfVxuICAgICA9IChvYmplY3QpIEBQYXBlci5zZXQgb2YgZWxlbWVudHMgdGhhdCByZXByZXNlbnRzIGdsb3dcbiAgICBcXCovXG4gICAgZWxwcm90by5nbG93ID0gZnVuY3Rpb24gKGdsb3cpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcInRleHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZ2xvdyA9IGdsb3cgfHwge307XG4gICAgICAgIHZhciBzID0ge1xuICAgICAgICAgICAgd2lkdGg6IChnbG93LndpZHRoIHx8IDEwKSArICgrdGhpcy5hdHRyKFwic3Ryb2tlLXdpZHRoXCIpIHx8IDEpLFxuICAgICAgICAgICAgZmlsbDogZ2xvdy5maWxsIHx8IGZhbHNlLFxuICAgICAgICAgICAgb3BhY2l0eTogZ2xvdy5vcGFjaXR5ID09IG51bGwgPyAuNSA6IGdsb3cub3BhY2l0eSxcbiAgICAgICAgICAgIG9mZnNldHg6IGdsb3cub2Zmc2V0eCB8fCAwLFxuICAgICAgICAgICAgb2Zmc2V0eTogZ2xvdy5vZmZzZXR5IHx8IDAsXG4gICAgICAgICAgICBjb2xvcjogZ2xvdy5jb2xvciB8fCBcIiMwMDBcIlxuICAgICAgICB9LFxuICAgICAgICAgICAgYyA9IHMud2lkdGggLyAyLFxuICAgICAgICAgICAgciA9IHRoaXMucGFwZXIsXG4gICAgICAgICAgICBvdXQgPSByLnNldCgpLFxuICAgICAgICAgICAgcGF0aCA9IHRoaXMucmVhbFBhdGggfHwgZ2V0UGF0aFt0aGlzLnR5cGVdKHRoaXMpO1xuICAgICAgICBwYXRoID0gdGhpcy5tYXRyaXggPyBtYXBQYXRoKHBhdGgsIHRoaXMubWF0cml4KSA6IHBhdGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYyArIDE7IGkrKykge1xuICAgICAgICAgICAgb3V0LnB1c2goci5wYXRoKHBhdGgpLmF0dHIoe1xuICAgICAgICAgICAgICAgIHN0cm9rZTogcy5jb2xvcixcbiAgICAgICAgICAgICAgICBmaWxsOiBzLmZpbGwgPyBzLmNvbG9yIDogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgXCJzdHJva2UtbGluZWpvaW5cIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVjYXBcIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6ICsocy53aWR0aCAvIGMgKiBpKS50b0ZpeGVkKDMpLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6ICsocy5vcGFjaXR5IC8gYykudG9GaXhlZCgzKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQuaW5zZXJ0QmVmb3JlKHRoaXMpLnRyYW5zbGF0ZShzLm9mZnNldHgsIHMub2Zmc2V0eSk7XG4gICAgfTtcbiAgICB2YXIgY3VydmVzbGVuZ3RocyA9IHt9LFxuICAgIGdldFBvaW50QXRTZWdtZW50TGVuZ3RoID0gZnVuY3Rpb24gKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGxlbmd0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gYmV6bGVuKHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBSLmZpbmREb3RzQXRTZWdtZW50KHAxeCwgcDF5LCBjMXgsIGMxeSwgYzJ4LCBjMnksIHAyeCwgcDJ5LCBnZXRUYXRMZW4ocDF4LCBwMXksIGMxeCwgYzF5LCBjMngsIGMyeSwgcDJ4LCBwMnksIGxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRMZW5ndGhGYWN0b3J5ID0gZnVuY3Rpb24gKGlzdG90YWwsIHN1YnBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBsZW5ndGgsIG9ubHlzdGFydCkge1xuICAgICAgICAgICAgcGF0aCA9IHBhdGgyY3VydmUocGF0aCk7XG4gICAgICAgICAgICB2YXIgeCwgeSwgcCwgbCwgc3AgPSBcIlwiLCBzdWJwYXRocyA9IHt9LCBwb2ludCxcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcGF0aC5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcCA9IHBhdGhbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBbMF0gPT0gXCJNXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9ICtwWzFdO1xuICAgICAgICAgICAgICAgICAgICB5ID0gK3BbMl07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbCA9IGdldFBvaW50QXRTZWdtZW50TGVuZ3RoKHgsIHksIHBbMV0sIHBbMl0sIHBbM10sIHBbNF0sIHBbNV0sIHBbNl0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVuICsgbCA+IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnBhdGggJiYgIXN1YnBhdGhzLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSBnZXRQb2ludEF0U2VnbWVudExlbmd0aCh4LCB5LCBwWzFdLCBwWzJdLCBwWzNdLCBwWzRdLCBwWzVdLCBwWzZdLCBsZW5ndGggLSBsZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwICs9IFtcIkNcIiArIHBvaW50LnN0YXJ0LngsIHBvaW50LnN0YXJ0LnksIHBvaW50Lm0ueCwgcG9pbnQubS55LCBwb2ludC54LCBwb2ludC55XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25seXN0YXJ0KSB7cmV0dXJuIHNwO31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJwYXRocy5zdGFydCA9IHNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwID0gW1wiTVwiICsgcG9pbnQueCwgcG9pbnQueSArIFwiQ1wiICsgcG9pbnQubi54LCBwb2ludC5uLnksIHBvaW50LmVuZC54LCBwb2ludC5lbmQueSwgcFs1XSwgcFs2XV0uam9pbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbiArPSBsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSArcFs1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gK3BbNl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzdG90YWwgJiYgIXN1YnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludCA9IGdldFBvaW50QXRTZWdtZW50TGVuZ3RoKHgsIHksIHBbMV0sIHBbMl0sIHBbM10sIHBbNF0sIHBbNV0sIHBbNl0sIGxlbmd0aCAtIGxlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt4OiBwb2ludC54LCB5OiBwb2ludC55LCBhbHBoYTogcG9pbnQuYWxwaGF9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxlbiArPSBsO1xuICAgICAgICAgICAgICAgICAgICB4ID0gK3BbNV07XG4gICAgICAgICAgICAgICAgICAgIHkgPSArcFs2XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3AgKz0gcC5zaGlmdCgpICsgcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YnBhdGhzLmVuZCA9IHNwO1xuICAgICAgICAgICAgcG9pbnQgPSBpc3RvdGFsID8gbGVuIDogc3VicGF0aCA/IHN1YnBhdGhzIDogUi5maW5kRG90c0F0U2VnbWVudCh4LCB5LCBwWzBdLCBwWzFdLCBwWzJdLCBwWzNdLCBwWzRdLCBwWzVdLCAxKTtcbiAgICAgICAgICAgIHBvaW50LmFscGhhICYmIChwb2ludCA9IHt4OiBwb2ludC54LCB5OiBwb2ludC55LCBhbHBoYTogcG9pbnQuYWxwaGF9KTtcbiAgICAgICAgICAgIHJldHVybiBwb2ludDtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBnZXRUb3RhbExlbmd0aCA9IGdldExlbmd0aEZhY3RvcnkoMSksXG4gICAgICAgIGdldFBvaW50QXRMZW5ndGggPSBnZXRMZW5ndGhGYWN0b3J5KCksXG4gICAgICAgIGdldFN1YnBhdGhzQXRMZW5ndGggPSBnZXRMZW5ndGhGYWN0b3J5KDAsIDEpO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmdldFRvdGFsTGVuZ3RoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGxlbmd0aCBvZiB0aGUgZ2l2ZW4gcGF0aCBpbiBwaXhlbHMuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHBhdGggKHN0cmluZykgU1ZHIHBhdGggc3RyaW5nLlxuICAgICAqKlxuICAgICA9IChudW1iZXIpIGxlbmd0aC5cbiAgICBcXCovXG4gICAgUi5nZXRUb3RhbExlbmd0aCA9IGdldFRvdGFsTGVuZ3RoO1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLmdldFBvaW50QXRMZW5ndGhcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJldHVybiBjb29yZGluYXRlcyBvZiB0aGUgcG9pbnQgbG9jYXRlZCBhdCB0aGUgZ2l2ZW4gbGVuZ3RoIG9uIHRoZSBnaXZlbiBwYXRoLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBwYXRoIChzdHJpbmcpIFNWRyBwYXRoIHN0cmluZ1xuICAgICAtIGxlbmd0aCAobnVtYmVyKVxuICAgICAqKlxuICAgICA9IChvYmplY3QpIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwb2ludDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZVxuICAgICBvICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGVcbiAgICAgbyAgICAgYWxwaGE6IChudW1iZXIpIGFuZ2xlIG9mIGRlcml2YXRpdmVcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIFIuZ2V0UG9pbnRBdExlbmd0aCA9IGdldFBvaW50QXRMZW5ndGg7XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZ2V0U3VicGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIHN1YnBhdGggb2YgYSBnaXZlbiBwYXRoIGZyb20gZ2l2ZW4gbGVuZ3RoIHRvIGdpdmVuIGxlbmd0aC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGF0aCAoc3RyaW5nKSBTVkcgcGF0aCBzdHJpbmdcbiAgICAgLSBmcm9tIChudW1iZXIpIHBvc2l0aW9uIG9mIHRoZSBzdGFydCBvZiB0aGUgc2VnbWVudFxuICAgICAtIHRvIChudW1iZXIpIHBvc2l0aW9uIG9mIHRoZSBlbmQgb2YgdGhlIHNlZ21lbnRcbiAgICAgKipcbiAgICAgPSAoc3RyaW5nKSBwYXRoc3RyaW5nIGZvciB0aGUgc2VnbWVudFxuICAgIFxcKi9cbiAgICBSLmdldFN1YnBhdGggPSBmdW5jdGlvbiAocGF0aCwgZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VG90YWxMZW5ndGgocGF0aCkgLSB0byA8IDFlLTYpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRTdWJwYXRoc0F0TGVuZ3RoKHBhdGgsIGZyb20pLmVuZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYSA9IGdldFN1YnBhdGhzQXRMZW5ndGgocGF0aCwgdG8sIDEpO1xuICAgICAgICByZXR1cm4gZnJvbSA/IGdldFN1YnBhdGhzQXRMZW5ndGgoYSwgZnJvbSkuZW5kIDogYTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmdldFRvdGFsTGVuZ3RoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGxlbmd0aCBvZiB0aGUgcGF0aCBpbiBwaXhlbHMuIE9ubHkgd29ya3MgZm9yIGVsZW1lbnQgb2Yg4oCccGF0aOKAnSB0eXBlLlxuICAgICA9IChudW1iZXIpIGxlbmd0aC5cbiAgICBcXCovXG4gICAgZWxwcm90by5nZXRUb3RhbExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ub2RlLmdldFRvdGFsTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmdldFRvdGFsTGVuZ3RoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0VG90YWxMZW5ndGgocGF0aCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5nZXRQb2ludEF0TGVuZ3RoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm4gY29vcmRpbmF0ZXMgb2YgdGhlIHBvaW50IGxvY2F0ZWQgYXQgdGhlIGdpdmVuIGxlbmd0aCBvbiB0aGUgZ2l2ZW4gcGF0aC4gT25seSB3b3JrcyBmb3IgZWxlbWVudCBvZiDigJxwYXRo4oCdIHR5cGUuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGxlbmd0aCAobnVtYmVyKVxuICAgICAqKlxuICAgICA9IChvYmplY3QpIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwb2ludDpcbiAgICAgbyB7XG4gICAgIG8gICAgIHg6IChudW1iZXIpIHggY29vcmRpbmF0ZVxuICAgICBvICAgICB5OiAobnVtYmVyKSB5IGNvb3JkaW5hdGVcbiAgICAgbyAgICAgYWxwaGE6IChudW1iZXIpIGFuZ2xlIG9mIGRlcml2YXRpdmVcbiAgICAgbyB9XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0UG9pbnRBdExlbmd0aCA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLmdldFBhdGgoKTtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0UG9pbnRBdExlbmd0aChwYXRoLCBsZW5ndGgpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0UGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJucyBwYXRoIG9mIHRoZSBlbGVtZW50LiBPbmx5IHdvcmtzIGZvciBlbGVtZW50cyBvZiDigJxwYXRo4oCdIHR5cGUgYW5kIHNpbXBsZSBlbGVtZW50cyBsaWtlIGNpcmNsZS5cbiAgICAgPSAob2JqZWN0KSBwYXRoXG4gICAgICoqXG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0UGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhdGgsXG4gICAgICAgICAgICBnZXRQYXRoID0gUi5fZ2V0UGF0aFt0aGlzLnR5cGVdO1xuXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJ0ZXh0XCIgfHwgdGhpcy50eXBlID09IFwic2V0XCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnZXRQYXRoKSB7XG4gICAgICAgICAgICBwYXRoID0gZ2V0UGF0aCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuZ2V0U3VicGF0aFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmV0dXJuIHN1YnBhdGggb2YgYSBnaXZlbiBlbGVtZW50IGZyb20gZ2l2ZW4gbGVuZ3RoIHRvIGdpdmVuIGxlbmd0aC4gT25seSB3b3JrcyBmb3IgZWxlbWVudCBvZiDigJxwYXRo4oCdIHR5cGUuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGZyb20gKG51bWJlcikgcG9zaXRpb24gb2YgdGhlIHN0YXJ0IG9mIHRoZSBzZWdtZW50XG4gICAgIC0gdG8gKG51bWJlcikgcG9zaXRpb24gb2YgdGhlIGVuZCBvZiB0aGUgc2VnbWVudFxuICAgICAqKlxuICAgICA9IChzdHJpbmcpIHBhdGhzdHJpbmcgZm9yIHRoZSBzZWdtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uZ2V0U3VicGF0aCA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xuICAgICAgICB2YXIgcGF0aCA9IHRoaXMuZ2V0UGF0aCgpO1xuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBSLmdldFN1YnBhdGgocGF0aCwgZnJvbSwgdG8pO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzXG4gICAgIFsgcHJvcGVydHkgXVxuICAgICAqKlxuICAgICAqIE9iamVjdCB0aGF0IGNvbnRhaW5zIGVhc2luZyBmb3JtdWxhcyBmb3IgYW5pbWF0aW9uLiBZb3UgY291bGQgZXh0ZW5kIGl0IHdpdGggeW91ciBvd24uIEJ5IGRlZmF1bHQgaXQgaGFzIGZvbGxvd2luZyBsaXN0IG9mIGVhc2luZzpcbiAgICAgIyA8dWw+XG4gICAgICMgICAgIDxsaT7igJxsaW5lYXLigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcJmx0O+KAnSBvciDigJxlYXNlSW7igJ0gb3Ig4oCcZWFzZS1pbuKAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJw+4oCdIG9yIOKAnGVhc2VPdXTigJ0gb3Ig4oCcZWFzZS1vdXTigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcJmx0Oz7igJ0gb3Ig4oCcZWFzZUluT3V04oCdIG9yIOKAnGVhc2UtaW4tb3V04oCdPC9saT5cbiAgICAgIyAgICAgPGxpPuKAnGJhY2tJbuKAnSBvciDigJxiYWNrLWlu4oCdPC9saT5cbiAgICAgIyAgICAgPGxpPuKAnGJhY2tPdXTigJ0gb3Ig4oCcYmFjay1vdXTigJ08L2xpPlxuICAgICAjICAgICA8bGk+4oCcZWxhc3RpY+KAnTwvbGk+XG4gICAgICMgICAgIDxsaT7igJxib3VuY2XigJ08L2xpPlxuICAgICAjIDwvdWw+XG4gICAgICMgPHA+U2VlIGFsc28gPGEgaHJlZj1cImh0dHA6Ly9yYXBoYWVsanMuY29tL2Vhc2luZy5odG1sXCI+RWFzaW5nIGRlbW88L2E+LjwvcD5cbiAgICBcXCovXG4gICAgdmFyIGVmID0gUi5lYXNpbmdfZm9ybXVsYXMgPSB7XG4gICAgICAgIGxpbmVhcjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9LFxuICAgICAgICBcIjxcIjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHJldHVybiBwb3cobiwgMS43KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCI+XCI6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICByZXR1cm4gcG93KG4sIC40OCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiPD5cIjogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHZhciBxID0gLjQ4IC0gbiAvIDEuMDQsXG4gICAgICAgICAgICAgICAgUSA9IG1hdGguc3FydCguMTczNCArIHEgKiBxKSxcbiAgICAgICAgICAgICAgICB4ID0gUSAtIHEsXG4gICAgICAgICAgICAgICAgWCA9IHBvdyhhYnMoeCksIDEgLyAzKSAqICh4IDwgMCA/IC0xIDogMSksXG4gICAgICAgICAgICAgICAgeSA9IC1RIC0gcSxcbiAgICAgICAgICAgICAgICBZID0gcG93KGFicyh5KSwgMSAvIDMpICogKHkgPCAwID8gLTEgOiAxKSxcbiAgICAgICAgICAgICAgICB0ID0gWCArIFkgKyAuNTtcbiAgICAgICAgICAgIHJldHVybiAoMSAtIHQpICogMyAqIHQgKiB0ICsgdCAqIHQgKiB0O1xuICAgICAgICB9LFxuICAgICAgICBiYWNrSW46IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgICAgICByZXR1cm4gbiAqIG4gKiAoKHMgKyAxKSAqIG4gLSBzKTtcbiAgICAgICAgfSxcbiAgICAgICAgYmFja091dDogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIG4gPSBuIC0gMTtcbiAgICAgICAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgICAgICAgIHJldHVybiBuICogbiAqICgocyArIDEpICogbiArIHMpICsgMTtcbiAgICAgICAgfSxcbiAgICAgICAgZWxhc3RpYzogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIGlmIChuID09ICEhbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBvdygyLCAtMTAgKiBuKSAqIG1hdGguc2luKChuIC0gLjA3NSkgKiAoMiAqIFBJKSAvIC4zKSArIDE7XG4gICAgICAgIH0sXG4gICAgICAgIGJvdW5jZTogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHZhciBzID0gNy41NjI1LFxuICAgICAgICAgICAgICAgIHAgPSAyLjc1LFxuICAgICAgICAgICAgICAgIGw7XG4gICAgICAgICAgICBpZiAobiA8ICgxIC8gcCkpIHtcbiAgICAgICAgICAgICAgICBsID0gcyAqIG4gKiBuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobiA8ICgyIC8gcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbiAtPSAoMS41IC8gcCk7XG4gICAgICAgICAgICAgICAgICAgIGwgPSBzICogbiAqIG4gKyAuNzU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPCAoMi41IC8gcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gLT0gKDIuMjUgLyBwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBzICogbiAqIG4gKyAuOTM3NTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gLT0gKDIuNjI1IC8gcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsID0gcyAqIG4gKiBuICsgLjk4NDM3NTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlZi5lYXNlSW4gPSBlZltcImVhc2UtaW5cIl0gPSBlZltcIjxcIl07XG4gICAgZWYuZWFzZU91dCA9IGVmW1wiZWFzZS1vdXRcIl0gPSBlZltcIj5cIl07XG4gICAgZWYuZWFzZUluT3V0ID0gZWZbXCJlYXNlLWluLW91dFwiXSA9IGVmW1wiPD5cIl07XG4gICAgZWZbXCJiYWNrLWluXCJdID0gZWYuYmFja0luO1xuICAgIGVmW1wiYmFjay1vdXRcIl0gPSBlZi5iYWNrT3V0O1xuXG4gICAgdmFyIGFuaW1hdGlvbkVsZW1lbnRzID0gW10sXG4gICAgICAgIHJlcXVlc3RBbmltRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxNik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICBhbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgTm93ID0gK25ldyBEYXRlLFxuICAgICAgICAgICAgICAgIGwgPSAwO1xuICAgICAgICAgICAgZm9yICg7IGwgPCBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgICAgIHZhciBlID0gYW5pbWF0aW9uRWxlbWVudHNbbF07XG4gICAgICAgICAgICAgICAgaWYgKGUuZWwucmVtb3ZlZCB8fCBlLnBhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBOb3cgLSBlLnN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICBtcyA9IGUubXMsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZyA9IGUuZWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICBmcm9tID0gZS5mcm9tLFxuICAgICAgICAgICAgICAgICAgICBkaWZmID0gZS5kaWZmLFxuICAgICAgICAgICAgICAgICAgICB0byA9IGUudG8sXG4gICAgICAgICAgICAgICAgICAgIHQgPSBlLnQsXG4gICAgICAgICAgICAgICAgICAgIHRoYXQgPSBlLmVsLFxuICAgICAgICAgICAgICAgICAgICBzZXQgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgbm93LFxuICAgICAgICAgICAgICAgICAgICBpbml0ID0ge30sXG4gICAgICAgICAgICAgICAgICAgIGtleTtcbiAgICAgICAgICAgICAgICBpZiAoZS5pbml0c3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWUgPSAoZS5pbml0c3RhdHVzICogZS5hbmltLnRvcCAtIGUucHJldikgLyAoZS5wZXJjZW50IC0gZS5wcmV2KSAqIG1zO1xuICAgICAgICAgICAgICAgICAgICBlLnN0YXR1cyA9IGUuaW5pdHN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGUuaW5pdHN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wICYmIGFuaW1hdGlvbkVsZW1lbnRzLnNwbGljZShsLS0sIDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RhdHVzID0gKGUucHJldiArIChlLnBlcmNlbnQgLSBlLnByZXYpICogKHRpbWUgLyBtcykpIC8gZS5hbmltLnRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGltZSA8IG1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBlYXNpbmcodGltZSAvIG1zKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBmcm9tKSBpZiAoZnJvbVtoYXNdKGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGF2YWlsYWJsZUFuaW1BdHRyc1thdHRyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgbnU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9ICtmcm9tW2F0dHJdICsgcG9zICogbXMgKiBkaWZmW2F0dHJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29sb3VyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFwicmdiKFwiICsgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0bzI1NShyb3VuZChmcm9tW2F0dHJdLnIgKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl0ucikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0bzI1NShyb3VuZChmcm9tW2F0dHJdLmcgKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl0uZykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXB0bzI1NShyb3VuZChmcm9tW2F0dHJdLmIgKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl0uYikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbihcIixcIikgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhdGhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZyb21bYXR0cl0ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gW2Zyb21bYXR0cl1baV1bMF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gZnJvbVthdHRyXVtpXS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldW2pdID0gK2Zyb21bYXR0cl1baV1bal0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV1bal07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dbaV0gPSBub3dbaV0uam9pbihTKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBub3cuam9pbihTKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZlthdHRyXS5yZWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZnJvbVthdHRyXS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gW2Zyb21bYXR0cl1baV1bMF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gZnJvbVthdHRyXVtpXS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd1tpXVtqXSA9IGZyb21bYXR0cl1baV1bal0gKyBwb3MgKiBtcyAqIGRpZmZbYXR0cl1baV1bal07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICtmcm9tW2F0dHJdW2ldICsgcG9zICogbXMgKiBkaWZmW2F0dHJdW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdyA9IFtbXCJyXCIsIGdldCgyKSwgMCwgMF0sIFtcInRcIiwgZ2V0KDMpLCBnZXQoNCldLCBbXCJzXCIsIGdldCgwKSwgZ2V0KDEpLCAwLCAwXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbW1wibVwiLCBnZXQoMCksIGdldCgxKSwgZ2V0KDIpLCBnZXQoMyksIGdldCg0KSwgZ2V0KDUpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNzdlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ciA9PSBcImNsaXAtcmVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd1tpXSA9ICtmcm9tW2F0dHJdW2ldICsgcG9zICogbXMgKiBkaWZmW2F0dHJdW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm9tMiA9IFtdW2NvbmNhdF0oZnJvbVthdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhhdC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2F0dHJdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93W2ldID0gK2Zyb20yW2ldICsgcG9zICogbXMgKiBkaWZmW2F0dHJdW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0W2F0dHJdID0gbm93O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXR0cihzZXQpO1xuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGlkLCB0aGF0LCBhbmltKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIgKyBpZCwgdGhhdCwgYW5pbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSkodGhhdC5pZCwgdGhhdCwgZS5hbmltKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oZiwgZWwsIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiICsgZWwuaWQsIGVsLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uZmluaXNoLlwiICsgZWwuaWQsIGVsLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmlzKGYsIFwiZnVuY3Rpb25cIikgJiYgZi5jYWxsKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KShlLmNhbGxiYWNrLCB0aGF0LCBlLmFuaW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmF0dHIodG8pO1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UobC0tLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucmVwZWF0ID4gMSAmJiAhZS5uZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiB0bykgaWYgKHRvW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRba2V5XSA9IGUudG90YWxPcmlnaW5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZWwuYXR0cihpbml0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkFuaW1hdGlvbihlLmFuaW0sIGUuZWwsIGUuYW5pbS5wZXJjZW50c1swXSwgbnVsbCwgZS50b3RhbE9yaWdpbiwgZS5yZXBlYXQgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5uZXh0ICYmICFlLnN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkFuaW1hdGlvbihlLmFuaW0sIGUuZWwsIGUubmV4dCwgbnVsbCwgZS50b3RhbE9yaWdpbiwgZS5yZXBlYXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoICYmIHJlcXVlc3RBbmltRnJhbWUoYW5pbWF0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXB0bzI1NSA9IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbG9yID4gMjU1ID8gMjU1IDogY29sb3IgPCAwID8gMCA6IGNvbG9yO1xuICAgICAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LmFuaW1hdGVXaXRoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBY3RzIHNpbWlsYXIgdG8gQEVsZW1lbnQuYW5pbWF0ZSwgYnV0IGVuc3VyZSB0aGF0IGdpdmVuIGFuaW1hdGlvbiBydW5zIGluIHN5bmMgd2l0aCBhbm90aGVyIGdpdmVuIGVsZW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGVsIChvYmplY3QpIGVsZW1lbnQgdG8gc3luYyB3aXRoXG4gICAgIC0gYW5pbSAob2JqZWN0KSBhbmltYXRpb24gdG8gc3luYyB3aXRoXG4gICAgIC0gcGFyYW1zIChvYmplY3QpICNvcHRpb25hbCBmaW5hbCBhdHRyaWJ1dGVzIGZvciB0aGUgZWxlbWVudCwgc2VlIGFsc28gQEVsZW1lbnQuYXR0clxuICAgICAtIG1zIChudW1iZXIpICNvcHRpb25hbCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZvciBhbmltYXRpb24gdG8gcnVuXG4gICAgIC0gZWFzaW5nIChzdHJpbmcpICNvcHRpb25hbCBlYXNpbmcgdHlwZS4gQWNjZXB0IG9uIG9mIEBSYXBoYWVsLmVhc2luZ19mb3JtdWxhcyBvciBDU1MgZm9ybWF0OiBgY3ViaWMmI3gyMDEwO2JlemllcihYWCwmIzE2MDtYWCwmIzE2MDtYWCwmIzE2MDtYWClgXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSAjb3B0aW9uYWwgY2FsbGJhY2sgZnVuY3Rpb24uIFdpbGwgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW5pbWF0aW9uLlxuICAgICAqIG9yXG4gICAgIC0gZWxlbWVudCAob2JqZWN0KSBlbGVtZW50IHRvIHN5bmMgd2l0aFxuICAgICAtIGFuaW0gKG9iamVjdCkgYW5pbWF0aW9uIHRvIHN5bmMgd2l0aFxuICAgICAtIGFuaW1hdGlvbiAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdCwgc2VlIEBSYXBoYWVsLmFuaW1hdGlvblxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5hbmltYXRlV2l0aCA9IGZ1bmN0aW9uIChlbCwgYW5pbSwgcGFyYW1zLCBtcywgZWFzaW5nLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXM7XG4gICAgICAgIGlmIChlbGVtZW50LnJlbW92ZWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYSA9IHBhcmFtcyBpbnN0YW5jZW9mIEFuaW1hdGlvbiA/IHBhcmFtcyA6IFIuYW5pbWF0aW9uKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spLFxuICAgICAgICAgICAgeCwgeTtcbiAgICAgICAgcnVuQW5pbWF0aW9uKGEsIGVsZW1lbnQsIGEucGVyY2VudHNbMF0sIG51bGwsIGVsZW1lbnQuYXR0cigpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkVsZW1lbnRzW2ldLmFuaW0gPT0gYW5pbSAmJiBhbmltYXRpb25FbGVtZW50c1tpXS5lbCA9PSBlbCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkVsZW1lbnRzW2lpIC0gMV0uc3RhcnQgPSBhbmltYXRpb25FbGVtZW50c1tpXS5zdGFydDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgLy9cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdmFyIGEgPSBwYXJhbXMgPyBSLmFuaW1hdGlvbihwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSA6IGFuaW0sXG4gICAgICAgIC8vICAgICBzdGF0dXMgPSBlbGVtZW50LnN0YXR1cyhhbmltKTtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuYW5pbWF0ZShhKS5zdGF0dXMoYSwgc3RhdHVzICogYW5pbS5tcyAvIGEubXMpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gQ3ViaWNCZXppZXJBdFRpbWUodCwgcDF4LCBwMXksIHAyeCwgcDJ5LCBkdXJhdGlvbikge1xuICAgICAgICB2YXIgY3ggPSAzICogcDF4LFxuICAgICAgICAgICAgYnggPSAzICogKHAyeCAtIHAxeCkgLSBjeCxcbiAgICAgICAgICAgIGF4ID0gMSAtIGN4IC0gYngsXG4gICAgICAgICAgICBjeSA9IDMgKiBwMXksXG4gICAgICAgICAgICBieSA9IDMgKiAocDJ5IC0gcDF5KSAtIGN5LFxuICAgICAgICAgICAgYXkgPSAxIC0gY3kgLSBieTtcbiAgICAgICAgZnVuY3Rpb24gc2FtcGxlQ3VydmVYKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAoKGF4ICogdCArIGJ4KSAqIHQgKyBjeCkgKiB0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNvbHZlKHgsIGVwc2lsb24pIHtcbiAgICAgICAgICAgIHZhciB0ID0gc29sdmVDdXJ2ZVgoeCwgZXBzaWxvbik7XG4gICAgICAgICAgICByZXR1cm4gKChheSAqIHQgKyBieSkgKiB0ICsgY3kpICogdDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzb2x2ZUN1cnZlWCh4LCBlcHNpbG9uKSB7XG4gICAgICAgICAgICB2YXIgdDAsIHQxLCB0MiwgeDIsIGQyLCBpO1xuICAgICAgICAgICAgZm9yKHQyID0geCwgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICB4MiA9IHNhbXBsZUN1cnZlWCh0MikgLSB4O1xuICAgICAgICAgICAgICAgIGlmIChhYnMoeDIpIDwgZXBzaWxvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGQyID0gKDMgKiBheCAqIHQyICsgMiAqIGJ4KSAqIHQyICsgY3g7XG4gICAgICAgICAgICAgICAgaWYgKGFicyhkMikgPCAxZS02KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0MiA9IHQyIC0geDIgLyBkMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQwID0gMDtcbiAgICAgICAgICAgIHQxID0gMTtcbiAgICAgICAgICAgIHQyID0geDtcbiAgICAgICAgICAgIGlmICh0MiA8IHQwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQyID4gdDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAodDAgPCB0MSkge1xuICAgICAgICAgICAgICAgIHgyID0gc2FtcGxlQ3VydmVYKHQyKTtcbiAgICAgICAgICAgICAgICBpZiAoYWJzKHgyIC0geCkgPCBlcHNpbG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0MjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHggPiB4Mikge1xuICAgICAgICAgICAgICAgICAgICB0MCA9IHQyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHQxID0gdDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHQyID0gKHQxIC0gdDApIC8gMiArIHQwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHQyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb2x2ZSh0LCAxIC8gKDIwMCAqIGR1cmF0aW9uKSk7XG4gICAgfVxuICAgIGVscHJvdG8ub25BbmltYXRpb24gPSBmdW5jdGlvbiAoZikge1xuICAgICAgICBmID8gZXZlLm9uKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiICsgdGhpcy5pZCwgZikgOiBldmUudW5iaW5kKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiICsgdGhpcy5pZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uKGFuaW0sIG1zKSB7XG4gICAgICAgIHZhciBwZXJjZW50cyA9IFtdLFxuICAgICAgICAgICAgbmV3QW5pbSA9IHt9O1xuICAgICAgICB0aGlzLm1zID0gbXM7XG4gICAgICAgIHRoaXMudGltZXMgPSAxO1xuICAgICAgICBpZiAoYW5pbSkge1xuICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhbmltKSBpZiAoYW5pbVtoYXNdKGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgbmV3QW5pbVt0b0Zsb2F0KGF0dHIpXSA9IGFuaW1bYXR0cl07XG4gICAgICAgICAgICAgICAgcGVyY2VudHMucHVzaCh0b0Zsb2F0KGF0dHIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlcmNlbnRzLnNvcnQoc29ydEJ5TnVtYmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW0gPSBuZXdBbmltO1xuICAgICAgICB0aGlzLnRvcCA9IHBlcmNlbnRzW3BlcmNlbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLnBlcmNlbnRzID0gcGVyY2VudHM7XG4gICAgfVxuICAgIC8qXFxcbiAgICAgKiBBbmltYXRpb24uZGVsYXlcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENyZWF0ZXMgYSBjb3B5IG9mIGV4aXN0aW5nIGFuaW1hdGlvbiBvYmplY3Qgd2l0aCBnaXZlbiBkZWxheS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZGVsYXkgKG51bWJlcikgbnVtYmVyIG9mIG1zIHRvIHBhc3MgYmV0d2VlbiBhbmltYXRpb24gc3RhcnQgYW5kIGFjdHVhbCBhbmltYXRpb25cbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBuZXcgYWx0ZXJlZCBBbmltYXRpb24gb2JqZWN0XG4gICAgIHwgdmFyIGFuaW0gPSBSYXBoYWVsLmFuaW1hdGlvbih7Y3g6IDEwLCBjeTogMjB9LCAyZTMpO1xuICAgICB8IGNpcmNsZTEuYW5pbWF0ZShhbmltKTsgLy8gcnVuIHRoZSBnaXZlbiBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgfCBjaXJjbGUyLmFuaW1hdGUoYW5pbS5kZWxheSg1MDApKTsgLy8gcnVuIHRoZSBnaXZlbiBhbmltYXRpb24gYWZ0ZXIgNTAwIG1zXG4gICAgXFwqL1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbiAoZGVsYXkpIHtcbiAgICAgICAgdmFyIGEgPSBuZXcgQW5pbWF0aW9uKHRoaXMuYW5pbSwgdGhpcy5tcyk7XG4gICAgICAgIGEudGltZXMgPSB0aGlzLnRpbWVzO1xuICAgICAgICBhLmRlbCA9ICtkZWxheSB8fCAwO1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBBbmltYXRpb24ucmVwZWF0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGEgY29weSBvZiBleGlzdGluZyBhbmltYXRpb24gb2JqZWN0IHdpdGggZ2l2ZW4gcmVwZXRpdGlvbi5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcmVwZWF0IChudW1iZXIpIG51bWJlciBpdGVyYXRpb25zIG9mIGFuaW1hdGlvbi4gRm9yIGluZmluaXRlIGFuaW1hdGlvbiBwYXNzIGBJbmZpbml0eWBcbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBuZXcgYWx0ZXJlZCBBbmltYXRpb24gb2JqZWN0XG4gICAgXFwqL1xuICAgIEFuaW1hdGlvbi5wcm90b3R5cGUucmVwZWF0ID0gZnVuY3Rpb24gKHRpbWVzKSB7XG4gICAgICAgIHZhciBhID0gbmV3IEFuaW1hdGlvbih0aGlzLmFuaW0sIHRoaXMubXMpO1xuICAgICAgICBhLmRlbCA9IHRoaXMuZGVsO1xuICAgICAgICBhLnRpbWVzID0gbWF0aC5mbG9vcihtbWF4KHRpbWVzLCAwKSkgfHwgMTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBydW5BbmltYXRpb24oYW5pbSwgZWxlbWVudCwgcGVyY2VudCwgc3RhdHVzLCB0b3RhbE9yaWdpbiwgdGltZXMpIHtcbiAgICAgICAgcGVyY2VudCA9IHRvRmxvYXQocGVyY2VudCk7XG4gICAgICAgIHZhciBwYXJhbXMsXG4gICAgICAgICAgICBpc0luQW5pbSxcbiAgICAgICAgICAgIGlzSW5BbmltU2V0LFxuICAgICAgICAgICAgcGVyY2VudHMgPSBbXSxcbiAgICAgICAgICAgIG5leHQsXG4gICAgICAgICAgICBwcmV2LFxuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgbXMgPSBhbmltLm1zLFxuICAgICAgICAgICAgZnJvbSA9IHt9LFxuICAgICAgICAgICAgdG8gPSB7fSxcbiAgICAgICAgICAgIGRpZmYgPSB7fTtcbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBhbmltYXRpb25FbGVtZW50c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoZS5lbC5pZCA9PSBlbGVtZW50LmlkICYmIGUuYW5pbSA9PSBhbmltKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnBlcmNlbnQgIT0gcGVyY2VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbkFuaW1TZXQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbkFuaW0gPSBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXR0cihlLnRvdGFsT3JpZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzID0gK3RvOyAvLyBOYU5cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhbmltLnBlcmNlbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbmltLnBlcmNlbnRzW2ldID09IHBlcmNlbnQgfHwgYW5pbS5wZXJjZW50c1tpXSA+IHN0YXR1cyAqIGFuaW0udG9wKSB7XG4gICAgICAgICAgICAgICAgcGVyY2VudCA9IGFuaW0ucGVyY2VudHNbaV07XG4gICAgICAgICAgICAgICAgcHJldiA9IGFuaW0ucGVyY2VudHNbaSAtIDFdIHx8IDA7XG4gICAgICAgICAgICAgICAgbXMgPSBtcyAvIGFuaW0udG9wICogKHBlcmNlbnQgLSBwcmV2KTtcbiAgICAgICAgICAgICAgICBuZXh0ID0gYW5pbS5wZXJjZW50c1tpICsgMV07XG4gICAgICAgICAgICAgICAgcGFyYW1zID0gYW5pbS5hbmltW3BlcmNlbnRdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmF0dHIoYW5pbS5hbmltW2FuaW0ucGVyY2VudHNbaV1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNJbkFuaW0pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGF0dHIgaW4gcGFyYW1zKSBpZiAocGFyYW1zW2hhc10oYXR0cikpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmxlQW5pbUF0dHJzW2hhc10oYXR0cikgfHwgZWxlbWVudC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2hhc10oYXR0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbVthdHRyXSA9IGVsZW1lbnQuYXR0cihhdHRyKTtcbiAgICAgICAgICAgICAgICAgICAgKGZyb21bYXR0cl0gPT0gbnVsbCkgJiYgKGZyb21bYXR0cl0gPSBhdmFpbGFibGVBdHRyc1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgIHRvW2F0dHJdID0gcGFyYW1zW2F0dHJdO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGF2YWlsYWJsZUFuaW1BdHRyc1thdHRyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBudTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdID0gKHRvW2F0dHJdIC0gZnJvbVthdHRyXSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb2xvdXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gUi5nZXRSR0IoZnJvbVthdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvQ29sb3VyID0gUi5nZXRSR0IodG9bYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHI6ICh0b0NvbG91ci5yIC0gZnJvbVthdHRyXS5yKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnOiAodG9Db2xvdXIuZyAtIGZyb21bYXR0cl0uZykgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYjogKHRvQ29sb3VyLmIgLSBmcm9tW2F0dHJdLmIpIC8gbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhdGhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aGVzID0gcGF0aDJjdXJ2ZShmcm9tW2F0dHJdLCB0b1thdHRyXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvUGF0aCA9IHBhdGhlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gcGF0aGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGZyb21bYXR0cl0ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldID0gWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMSwgamogPSBmcm9tW2F0dHJdW2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV1bal0gPSAodG9QYXRoW2ldW2pdIC0gZnJvbVthdHRyXVtpXVtqXSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgXyA9IGVsZW1lbnQuXyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXEgPSBlcXVhbGlzZVRyYW5zZm9ybShfW2F0dHJdLCB0b1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21bYXR0cl0gPSBlcS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1thdHRyXSA9IGVxLnRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0ucmVhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZnJvbVthdHRyXS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldID0gW2Zyb21bYXR0cl1baV1bMF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMSwgamogPSBmcm9tW2F0dHJdW2ldLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmW2F0dHJdW2ldW2pdID0gKHRvW2F0dHJdW2ldW2pdIC0gZnJvbVthdHRyXVtpXVtqXSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gKGVsZW1lbnQubWF0cml4IHx8IG5ldyBNYXRyaXgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8yID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF86IHt0cmFuc2Zvcm06IF8udHJhbnNmb3JtfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRCQm94OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEJCb3goMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVthdHRyXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0VHJhbnNmb3JtKHRvMiwgdG9bYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1thdHRyXSA9IHRvMi5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0bzIubWF0cml4LmEgLSBtLmEpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG8yLm1hdHJpeC5iIC0gbS5iKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvMi5tYXRyaXguYyAtIG0uYykgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0bzIubWF0cml4LmQgLSBtLmQpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG8yLm1hdHJpeC5lIC0gbS5lKSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvMi5tYXRyaXguZiAtIG0uZikgLyBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tW2F0dHJdID0gW18uc3gsIF8uc3ksIF8uZGVnLCBfLmR4LCBfLmR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHRvMiA9IHtfOnt9LCBnZXRCQm94OiBmdW5jdGlvbiAoKSB7IHJldHVybiBlbGVtZW50LmdldEJCb3goKTsgfX07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4dHJhY3RUcmFuc2Zvcm0odG8yLCB0b1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZbYXR0cl0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAodG8yLl8uc3ggLSBfLnN4KSAvIG1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgKHRvMi5fLnN5IC0gXy5zeSkgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICh0bzIuXy5kZWcgLSBfLmRlZykgLyBtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICh0bzIuXy5keCAtIF8uZHgpIC8gbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAodG8yLl8uZHkgLSBfLmR5KSAvIG1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNzdlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBTdHIocGFyYW1zW2F0dHJdKVtzcGxpdF0oc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBTdHIoZnJvbVthdHRyXSlbc3BsaXRdKHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHIgPT0gXCJjbGlwLXJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tW2F0dHJdID0gZnJvbTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZyb20yLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZlthdHRyXVtpXSA9ICh2YWx1ZXNbaV0gLSBmcm9tW2F0dHJdW2ldKSAvIG1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvW2F0dHJdID0gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBbXVtjb25jYXRdKHBhcmFtc1thdHRyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBbXVtjb25jYXRdKGZyb21bYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZWxlbWVudC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2F0dHJdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZbYXR0cl1baV0gPSAoKHZhbHVlc1tpXSB8fCAwKSAtIChmcm9tMltpXSB8fCAwKSkgLyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWFzaW5nID0gcGFyYW1zLmVhc2luZyxcbiAgICAgICAgICAgICAgICBlYXN5ZWFzeSA9IFIuZWFzaW5nX2Zvcm11bGFzW2Vhc2luZ107XG4gICAgICAgICAgICBpZiAoIWVhc3llYXN5KSB7XG4gICAgICAgICAgICAgICAgZWFzeWVhc3kgPSBTdHIoZWFzaW5nKS5tYXRjaChiZXppZXJyZyk7XG4gICAgICAgICAgICAgICAgaWYgKGVhc3llYXN5ICYmIGVhc3llYXN5Lmxlbmd0aCA9PSA1KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJ2ZSA9IGVhc3llYXN5O1xuICAgICAgICAgICAgICAgICAgICBlYXN5ZWFzeSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ3ViaWNCZXppZXJBdFRpbWUodCwgK2N1cnZlWzFdLCArY3VydmVbMl0sICtjdXJ2ZVszXSwgK2N1cnZlWzRdLCBtcyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWFzeWVhc3kgPSBwaXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVzdGFtcCA9IHBhcmFtcy5zdGFydCB8fCBhbmltLnN0YXJ0IHx8ICtuZXcgRGF0ZTtcbiAgICAgICAgICAgIGUgPSB7XG4gICAgICAgICAgICAgICAgYW5pbTogYW5pbSxcbiAgICAgICAgICAgICAgICBwZXJjZW50OiBwZXJjZW50LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lc3RhbXAgKyAoYW5pbS5kZWwgfHwgMCksXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICAgIGluaXRzdGF0dXM6IHN0YXR1cyB8fCAwLFxuICAgICAgICAgICAgICAgIHN0b3A6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1zOiBtcyxcbiAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc3llYXN5LFxuICAgICAgICAgICAgICAgIGZyb206IGZyb20sXG4gICAgICAgICAgICAgICAgZGlmZjogZGlmZixcbiAgICAgICAgICAgICAgICB0bzogdG8sXG4gICAgICAgICAgICAgICAgZWw6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHBhcmFtcy5jYWxsYmFjayxcbiAgICAgICAgICAgICAgICBwcmV2OiBwcmV2LFxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHQsXG4gICAgICAgICAgICAgICAgcmVwZWF0OiB0aW1lcyB8fCBhbmltLnRpbWVzLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogZWxlbWVudC5hdHRyKCksXG4gICAgICAgICAgICAgICAgdG90YWxPcmlnaW46IHRvdGFsT3JpZ2luXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMucHVzaChlKTtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgJiYgIWlzSW5BbmltICYmICFpc0luQW5pbVNldCkge1xuICAgICAgICAgICAgICAgIGUuc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZS5zdGFydCA9IG5ldyBEYXRlIC0gbXMgKiBzdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNJbkFuaW1TZXQpIHtcbiAgICAgICAgICAgICAgICBlLnN0YXJ0ID0gbmV3IERhdGUgLSBlLm1zICogc3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoID09IDEgJiYgcmVxdWVzdEFuaW1GcmFtZShhbmltYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNJbkFuaW0uaW5pdHN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgICAgIGlzSW5BbmltLnN0YXJ0ID0gbmV3IERhdGUgLSBpc0luQW5pbS5tcyAqIHN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICBldmUoXCJyYXBoYWVsLmFuaW0uc3RhcnQuXCIgKyBlbGVtZW50LmlkLCBlbGVtZW50LCBhbmltKTtcbiAgICB9XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuYW5pbWF0aW9uXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBDcmVhdGVzIGFuIGFuaW1hdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBARWxlbWVudC5hbmltYXRlIG9yIEBFbGVtZW50LmFuaW1hdGVXaXRoIG1ldGhvZHMuXG4gICAgICogU2VlIGFsc28gQEFuaW1hdGlvbi5kZWxheSBhbmQgQEFuaW1hdGlvbi5yZXBlYXQgbWV0aG9kcy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGFyYW1zIChvYmplY3QpIGZpbmFsIGF0dHJpYnV0ZXMgZm9yIHRoZSBlbGVtZW50LCBzZWUgYWxzbyBARWxlbWVudC5hdHRyXG4gICAgIC0gbXMgKG51bWJlcikgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmb3IgYW5pbWF0aW9uIHRvIHJ1blxuICAgICAtIGVhc2luZyAoc3RyaW5nKSAjb3B0aW9uYWwgZWFzaW5nIHR5cGUuIEFjY2VwdCBvbmUgb2YgQFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzIG9yIENTUyBmb3JtYXQ6IGBjdWJpYyYjeDIwMTA7YmV6aWVyKFhYLCYjMTYwO1hYLCYjMTYwO1hYLCYjMTYwO1hYKWBcbiAgICAgLSBjYWxsYmFjayAoZnVuY3Rpb24pICNvcHRpb25hbCBjYWxsYmFjayBmdW5jdGlvbi4gV2lsbCBiZSBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbmltYXRpb24uXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgQEFuaW1hdGlvblxuICAgIFxcKi9cbiAgICBSLmFuaW1hdGlvbiA9IGZ1bmN0aW9uIChwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChwYXJhbXMgaW5zdGFuY2VvZiBBbmltYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFIuaXMoZWFzaW5nLCBcImZ1bmN0aW9uXCIpIHx8ICFlYXNpbmcpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZWFzaW5nIHx8IG51bGw7XG4gICAgICAgICAgICBlYXNpbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHBhcmFtcyA9IE9iamVjdChwYXJhbXMpO1xuICAgICAgICBtcyA9ICttcyB8fCAwO1xuICAgICAgICB2YXIgcCA9IHt9LFxuICAgICAgICAgICAganNvbixcbiAgICAgICAgICAgIGF0dHI7XG4gICAgICAgIGZvciAoYXR0ciBpbiBwYXJhbXMpIGlmIChwYXJhbXNbaGFzXShhdHRyKSAmJiB0b0Zsb2F0KGF0dHIpICE9IGF0dHIgJiYgdG9GbG9hdChhdHRyKSArIFwiJVwiICE9IGF0dHIpIHtcbiAgICAgICAgICAgIGpzb24gPSB0cnVlO1xuICAgICAgICAgICAgcFthdHRyXSA9IHBhcmFtc1thdHRyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWpzb24pIHtcbiAgICAgICAgICAgIC8vIGlmIHBlcmNlbnQtbGlrZSBzeW50YXggaXMgdXNlZCBhbmQgZW5kLW9mLWFsbCBhbmltYXRpb24gY2FsbGJhY2sgdXNlZFxuICAgICAgICAgICAgaWYoY2FsbGJhY2spe1xuICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGxhc3Qgb25lXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RLZXkgPSAwO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBwYXJhbXMpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9IHRvSW50KGkpO1xuICAgICAgICAgICAgICAgICAgICBpZihwYXJhbXNbaGFzXShpKSAmJiBwZXJjZW50ID4gbGFzdEtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0S2V5ID0gcGVyY2VudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0S2V5ICs9ICclJztcbiAgICAgICAgICAgICAgICAvLyBpZiBhbHJlYWR5IGRlZmluZWQgY2FsbGJhY2sgaW4gdGhlIGxhc3Qga2V5ZnJhbWUsIHNraXBcbiAgICAgICAgICAgICAgICAhcGFyYW1zW2xhc3RLZXldLmNhbGxiYWNrICYmIChwYXJhbXNbbGFzdEtleV0uY2FsbGJhY2sgPSBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBBbmltYXRpb24ocGFyYW1zLCBtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlYXNpbmcgJiYgKHAuZWFzaW5nID0gZWFzaW5nKTtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIChwLmNhbGxiYWNrID0gY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbmltYXRpb24oezEwMDogcH0sIG1zKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuYW5pbWF0ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBhbmQgc3RhcnRzIGFuaW1hdGlvbiBmb3IgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gcGFyYW1zIChvYmplY3QpIGZpbmFsIGF0dHJpYnV0ZXMgZm9yIHRoZSBlbGVtZW50LCBzZWUgYWxzbyBARWxlbWVudC5hdHRyXG4gICAgIC0gbXMgKG51bWJlcikgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmb3IgYW5pbWF0aW9uIHRvIHJ1blxuICAgICAtIGVhc2luZyAoc3RyaW5nKSAjb3B0aW9uYWwgZWFzaW5nIHR5cGUuIEFjY2VwdCBvbmUgb2YgQFJhcGhhZWwuZWFzaW5nX2Zvcm11bGFzIG9yIENTUyBmb3JtYXQ6IGBjdWJpYyYjeDIwMTA7YmV6aWVyKFhYLCYjMTYwO1hYLCYjMTYwO1hYLCYjMTYwO1hYKWBcbiAgICAgLSBjYWxsYmFjayAoZnVuY3Rpb24pICNvcHRpb25hbCBjYWxsYmFjayBmdW5jdGlvbi4gV2lsbCBiZSBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbmltYXRpb24uXG4gICAgICogb3JcbiAgICAgLSBhbmltYXRpb24gKG9iamVjdCkgYW5pbWF0aW9uIG9iamVjdCwgc2VlIEBSYXBoYWVsLmFuaW1hdGlvblxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5hbmltYXRlID0gZnVuY3Rpb24gKHBhcmFtcywgbXMsIGVhc2luZywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzO1xuICAgICAgICBpZiAoZWxlbWVudC5yZW1vdmVkKSB7XG4gICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuaW0gPSBwYXJhbXMgaW5zdGFuY2VvZiBBbmltYXRpb24gPyBwYXJhbXMgOiBSLmFuaW1hdGlvbihwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKTtcbiAgICAgICAgcnVuQW5pbWF0aW9uKGFuaW0sIGVsZW1lbnQsIGFuaW0ucGVyY2VudHNbMF0sIG51bGwsIGVsZW1lbnQuYXR0cigpKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zZXRUaW1lXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZXRzIHRoZSBzdGF0dXMgb2YgYW5pbWF0aW9uIG9mIHRoZSBlbGVtZW50IGluIG1pbGxpc2Vjb25kcy4gU2ltaWxhciB0byBARWxlbWVudC5zdGF0dXMgbWV0aG9kLlxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBhbmltIChvYmplY3QpIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgLSB2YWx1ZSAobnVtYmVyKSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgYW5pbWF0aW9uXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudCBpZiBgdmFsdWVgIGlzIHNwZWNpZmllZFxuICAgICAqIE5vdGUsIHRoYXQgZHVyaW5nIGFuaW1hdGlvbiBmb2xsb3dpbmcgZXZlbnRzIGFyZSB0cmlnZ2VyZWQ6XG4gICAgICpcbiAgICAgKiBPbiBlYWNoIGFuaW1hdGlvbiBmcmFtZSBldmVudCBgYW5pbS5mcmFtZS48aWQ+YCwgb24gc3RhcnQgYGFuaW0uc3RhcnQuPGlkPmAgYW5kIG9uIGVuZCBgYW5pbS5maW5pc2guPGlkPmAuXG4gICAgXFwqL1xuICAgIGVscHJvdG8uc2V0VGltZSA9IGZ1bmN0aW9uIChhbmltLCB2YWx1ZSkge1xuICAgICAgICBpZiAoYW5pbSAmJiB2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyhhbmltLCBtbWluKHZhbHVlLCBhbmltLm1zKSAvIGFuaW0ubXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuc3RhdHVzXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIHN0YXR1cyBvZiBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGFuaW0gKG9iamVjdCkgI29wdGlvbmFsIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgLSB2YWx1ZSAobnVtYmVyKSAjb3B0aW9uYWwgMCDigJMgMS4gSWYgc3BlY2lmaWVkLCBtZXRob2Qgd29ya3MgbGlrZSBhIHNldHRlciBhbmQgc2V0cyB0aGUgc3RhdHVzIG9mIGEgZ2l2ZW4gYW5pbWF0aW9uIHRvIHRoZSB2YWx1ZS4gVGhpcyB3aWxsIGNhdXNlIGFuaW1hdGlvbiB0byBqdW1wIHRvIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAgKipcbiAgICAgPSAobnVtYmVyKSBzdGF0dXNcbiAgICAgKiBvclxuICAgICA9IChhcnJheSkgc3RhdHVzIGlmIGBhbmltYCBpcyBub3Qgc3BlY2lmaWVkLiBBcnJheSBvZiBvYmplY3RzIGluIGZvcm1hdDpcbiAgICAgbyB7XG4gICAgIG8gICAgIGFuaW06IChvYmplY3QpIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgbyAgICAgc3RhdHVzOiAobnVtYmVyKSBzdGF0dXNcbiAgICAgbyB9XG4gICAgICogb3JcbiAgICAgPSAob2JqZWN0KSBvcmlnaW5hbCBlbGVtZW50IGlmIGB2YWx1ZWAgaXMgc3BlY2lmaWVkXG4gICAgXFwqL1xuICAgIGVscHJvdG8uc3RhdHVzID0gZnVuY3Rpb24gKGFuaW0sIHZhbHVlKSB7XG4gICAgICAgIHZhciBvdXQgPSBbXSxcbiAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgbGVuLFxuICAgICAgICAgICAgZTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJ1bkFuaW1hdGlvbihhbmltLCB0aGlzLCAtMSwgbW1pbih2YWx1ZSwgMSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZW4gPSBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZSA9IGFuaW1hdGlvbkVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChlLmVsLmlkID09IHRoaXMuaWQgJiYgKCFhbmltIHx8IGUuYW5pbSA9PSBhbmltKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW06IGUuYW5pbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZS5zdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFuaW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnBhdXNlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTdG9wcyBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQgd2l0aCBhYmlsaXR5IHRvIHJlc3VtZSBpdCBsYXRlciBvbi5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gYW5pbSAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdFxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5wYXVzZSA9IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpKyspIGlmIChhbmltYXRpb25FbGVtZW50c1tpXS5lbC5pZCA9PSB0aGlzLmlkICYmICghYW5pbSB8fCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltID09IGFuaW0pKSB7XG4gICAgICAgICAgICBpZiAoZXZlKFwicmFwaGFlbC5hbmltLnBhdXNlLlwiICsgdGhpcy5pZCwgdGhpcywgYW5pbWF0aW9uRWxlbWVudHNbaV0uYW5pbSkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uRWxlbWVudHNbaV0ucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlc3VtZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVzdW1lcyBhbmltYXRpb24gaWYgaXQgd2FzIHBhdXNlZCB3aXRoIEBFbGVtZW50LnBhdXNlIG1ldGhvZC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gYW5pbSAob2JqZWN0KSAjb3B0aW9uYWwgYW5pbWF0aW9uIG9iamVjdFxuICAgICAqKlxuICAgICA9IChvYmplY3QpIG9yaWdpbmFsIGVsZW1lbnRcbiAgICBcXCovXG4gICAgZWxwcm90by5yZXN1bWUgPSBmdW5jdGlvbiAoYW5pbSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1hdGlvbkVsZW1lbnRzLmxlbmd0aDsgaSsrKSBpZiAoYW5pbWF0aW9uRWxlbWVudHNbaV0uZWwuaWQgPT0gdGhpcy5pZCAmJiAoIWFuaW0gfHwgYW5pbWF0aW9uRWxlbWVudHNbaV0uYW5pbSA9PSBhbmltKSkge1xuICAgICAgICAgICAgdmFyIGUgPSBhbmltYXRpb25FbGVtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChldmUoXCJyYXBoYWVsLmFuaW0ucmVzdW1lLlwiICsgdGhpcy5pZCwgdGhpcywgZS5hbmltKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgZS5wYXVzZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMoZS5hbmltLCBlLnN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zdG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTdG9wcyBhbmltYXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGFuaW0gKG9iamVjdCkgI29wdGlvbmFsIGFuaW1hdGlvbiBvYmplY3RcbiAgICAgKipcbiAgICAgPSAob2JqZWN0KSBvcmlnaW5hbCBlbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uc3RvcCA9IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uRWxlbWVudHMubGVuZ3RoOyBpKyspIGlmIChhbmltYXRpb25FbGVtZW50c1tpXS5lbC5pZCA9PSB0aGlzLmlkICYmICghYW5pbSB8fCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltID09IGFuaW0pKSB7XG4gICAgICAgICAgICBpZiAoZXZlKFwicmFwaGFlbC5hbmltLnN0b3AuXCIgKyB0aGlzLmlkLCB0aGlzLCBhbmltYXRpb25FbGVtZW50c1tpXS5hbmltKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHN0b3BBbmltYXRpb24ocGFwZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25FbGVtZW50cy5sZW5ndGg7IGkrKykgaWYgKGFuaW1hdGlvbkVsZW1lbnRzW2ldLmVsLnBhcGVyID09IHBhcGVyKSB7XG4gICAgICAgICAgICBhbmltYXRpb25FbGVtZW50cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBldmUub24oXCJyYXBoYWVsLnJlbW92ZVwiLCBzdG9wQW5pbWF0aW9uKTtcbiAgICBldmUub24oXCJyYXBoYWVsLmNsZWFyXCIsIHN0b3BBbmltYXRpb24pO1xuICAgIGVscHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlJhcGhhXFx4ZWJsXFx1MjAxOXMgb2JqZWN0XCI7XG4gICAgfTtcblxuICAgIC8vIFNldFxuICAgIHZhciBTZXQgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMudHlwZSA9IFwic2V0XCI7XG4gICAgICAgIGlmIChpdGVtcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXSAmJiAoaXRlbXNbaV0uY29uc3RydWN0b3IgPT0gZWxwcm90by5jb25zdHJ1Y3RvciB8fCBpdGVtc1tpXS5jb25zdHJ1Y3RvciA9PSBTZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbdGhpcy5pdGVtcy5sZW5ndGhdID0gdGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aF0gPSBpdGVtc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldHByb3RvID0gU2V0LnByb3RvdHlwZTtcbiAgICAvKlxcXG4gICAgICogU2V0LnB1c2hcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgZWFjaCBhcmd1bWVudCB0byB0aGUgY3VycmVudCBzZXQuXG4gICAgID0gKG9iamVjdCkgb3JpZ2luYWwgZWxlbWVudFxuICAgIFxcKi9cbiAgICBzZXRwcm90by5wdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXRlbSxcbiAgICAgICAgICAgIGxlbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGl0ZW0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAoaXRlbSAmJiAoaXRlbS5jb25zdHJ1Y3RvciA9PSBlbHByb3RvLmNvbnN0cnVjdG9yIHx8IGl0ZW0uY29uc3RydWN0b3IgPT0gU2V0KSkge1xuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXNbbGVuXSA9IHRoaXMuaXRlbXNbbGVuXSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBTZXQucG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZW1vdmVzIGxhc3QgZWxlbWVudCBhbmQgcmV0dXJucyBpdC5cbiAgICAgPSAob2JqZWN0KSBlbGVtZW50XG4gICAgXFwqL1xuICAgIHNldHByb3RvLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggJiYgZGVsZXRlIHRoaXNbdGhpcy5sZW5ndGgtLV07XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLnBvcCgpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFNldC5mb3JFYWNoXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBFeGVjdXRlcyBnaXZlbiBmdW5jdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBzZXQuXG4gICAgICpcbiAgICAgKiBJZiBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAgaXQgd2lsbCBzdG9wIGxvb3AgcnVubmluZy5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gY2FsbGJhY2sgKGZ1bmN0aW9uKSBmdW5jdGlvbiB0byBydW5cbiAgICAgLSB0aGlzQXJnIChvYmplY3QpIGNvbnRleHQgb2JqZWN0IGZvciB0aGUgY2FsbGJhY2tcbiAgICAgPSAob2JqZWN0KSBTZXQgb2JqZWN0XG4gICAgXFwqL1xuICAgIHNldHByb3RvLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLml0ZW1zW2ldLCBpKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGZvciAodmFyIG1ldGhvZCBpbiBlbHByb3RvKSBpZiAoZWxwcm90b1toYXNdKG1ldGhvZCkpIHtcbiAgICAgICAgc2V0cHJvdG9bbWV0aG9kXSA9IChmdW5jdGlvbiAobWV0aG9kbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsW21ldGhvZG5hbWVdW2FwcGx5XShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxuICAgIHNldHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgJiYgUi5pcyhuYW1lLCBhcnJheSkgJiYgUi5pcyhuYW1lWzBdLCBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gbmFtZS5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tqXS5hdHRyKG5hbWVbal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5pdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5hdHRyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBTZXQuY2xlYXJcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGZyb20gdGhlIHNldFxuICAgIFxcKi9cbiAgICBzZXRwcm90by5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnBvcCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogU2V0LnNwbGljZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBnaXZlbiBlbGVtZW50IGZyb20gdGhlIHNldFxuICAgICAqKlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgKipcbiAgICAgLSBpbmRleCAobnVtYmVyKSBwb3NpdGlvbiBvZiB0aGUgZGVsZXRpb25cbiAgICAgLSBjb3VudCAobnVtYmVyKSBudW1iZXIgb2YgZWxlbWVudCB0byByZW1vdmVcbiAgICAgLSBpbnNlcnRpb27igKYgKG9iamVjdCkgI29wdGlvbmFsIGVsZW1lbnRzIHRvIGluc2VydFxuICAgICA9IChvYmplY3QpIHNldCBlbGVtZW50cyB0aGF0IHdlcmUgZGVsZXRlZFxuICAgIFxcKi9cbiAgICBzZXRwcm90by5zcGxpY2UgPSBmdW5jdGlvbiAoaW5kZXgsIGNvdW50LCBpbnNlcnRpb24pIHtcbiAgICAgICAgaW5kZXggPSBpbmRleCA8IDAgPyBtbWF4KHRoaXMubGVuZ3RoICsgaW5kZXgsIDApIDogaW5kZXg7XG4gICAgICAgIGNvdW50ID0gbW1heCgwLCBtbWluKHRoaXMubGVuZ3RoIC0gaW5kZXgsIGNvdW50KSk7XG4gICAgICAgIHZhciB0YWlsID0gW10sXG4gICAgICAgICAgICB0b2RlbCA9IFtdLFxuICAgICAgICAgICAgYXJncyA9IFtdLFxuICAgICAgICAgICAgaTtcbiAgICAgICAgZm9yIChpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHRvZGVsLnB1c2godGhpc1tpbmRleCArIGldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgaSA8IHRoaXMubGVuZ3RoIC0gaW5kZXg7IGkrKykge1xuICAgICAgICAgICAgdGFpbC5wdXNoKHRoaXNbaW5kZXggKyBpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFyZ2xlbiA9IGFyZ3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJnbGVuICsgdGFpbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpbmRleCArIGldID0gdGhpc1tpbmRleCArIGldID0gaSA8IGFyZ2xlbiA/IGFyZ3NbaV0gOiB0YWlsW2kgLSBhcmdsZW5dO1xuICAgICAgICB9XG4gICAgICAgIGkgPSB0aGlzLml0ZW1zLmxlbmd0aCA9IHRoaXMubGVuZ3RoIC09IGNvdW50IC0gYXJnbGVuO1xuICAgICAgICB3aGlsZSAodGhpc1tpXSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXNbaSsrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNldCh0b2RlbCk7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogU2V0LmV4Y2x1ZGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZ2l2ZW4gZWxlbWVudCBmcm9tIHRoZSBzZXRcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZWxlbWVudCAob2JqZWN0KSBlbGVtZW50IHRvIHJlbW92ZVxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgb2JqZWN0IHdhcyBmb3VuZCAmIHJlbW92ZWQgZnJvbSB0aGUgc2V0XG4gICAgXFwqL1xuICAgIHNldHByb3RvLmV4Y2x1ZGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAodGhpc1tpXSA9PSBlbCkge1xuICAgICAgICAgICAgdGhpcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgc2V0cHJvdG8uYW5pbWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIG1zLCBlYXNpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIChSLmlzKGVhc2luZywgXCJmdW5jdGlvblwiKSB8fCAhZWFzaW5nKSAmJiAoY2FsbGJhY2sgPSBlYXNpbmcgfHwgbnVsbCk7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGkgPSBsZW4sXG4gICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgc2V0ID0gdGhpcyxcbiAgICAgICAgICAgIGNvbGxlY3RvcjtcbiAgICAgICAgaWYgKCFsZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrICYmIChjb2xsZWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAhLS1sZW4gJiYgY2FsbGJhY2suY2FsbChzZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWFzaW5nID0gUi5pcyhlYXNpbmcsIHN0cmluZykgPyBlYXNpbmcgOiBjb2xsZWN0b3I7XG4gICAgICAgIHZhciBhbmltID0gUi5hbmltYXRpb24ocGFyYW1zLCBtcywgZWFzaW5nLCBjb2xsZWN0b3IpO1xuICAgICAgICBpdGVtID0gdGhpcy5pdGVtc1stLWldLmFuaW1hdGUoYW5pbSk7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0gJiYgIXRoaXMuaXRlbXNbaV0ucmVtb3ZlZCAmJiB0aGlzLml0ZW1zW2ldLmFuaW1hdGVXaXRoKGl0ZW0sIGFuaW0sIGFuaW0pO1xuICAgICAgICAgICAgKHRoaXMuaXRlbXNbaV0gJiYgIXRoaXMuaXRlbXNbaV0ucmVtb3ZlZCkgfHwgbGVuLS07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBzZXRwcm90by5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgaSA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2ldLmluc2VydEFmdGVyKGVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHNldHByb3RvLmdldEJCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB4ID0gW10sXG4gICAgICAgICAgICB5ID0gW10sXG4gICAgICAgICAgICB4MiA9IFtdLFxuICAgICAgICAgICAgeTIgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuaXRlbXMubGVuZ3RoOyBpLS07KSBpZiAoIXRoaXMuaXRlbXNbaV0ucmVtb3ZlZCkge1xuICAgICAgICAgICAgdmFyIGJveCA9IHRoaXMuaXRlbXNbaV0uZ2V0QkJveCgpO1xuICAgICAgICAgICAgeC5wdXNoKGJveC54KTtcbiAgICAgICAgICAgIHkucHVzaChib3gueSk7XG4gICAgICAgICAgICB4Mi5wdXNoKGJveC54ICsgYm94LndpZHRoKTtcbiAgICAgICAgICAgIHkyLnB1c2goYm94LnkgKyBib3guaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB4ID0gbW1pblthcHBseV0oMCwgeCk7XG4gICAgICAgIHkgPSBtbWluW2FwcGx5XSgwLCB5KTtcbiAgICAgICAgeDIgPSBtbWF4W2FwcGx5XSgwLCB4Mik7XG4gICAgICAgIHkyID0gbW1heFthcHBseV0oMCwgeTIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB4MjogeDIsXG4gICAgICAgICAgICB5MjogeTIsXG4gICAgICAgICAgICB3aWR0aDogeDIgLSB4LFxuICAgICAgICAgICAgaGVpZ2h0OiB5MiAtIHlcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHNldHByb3RvLmNsb25lID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgcyA9IHRoaXMucGFwZXIuc2V0KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuaXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMuaXRlbXNbaV0uY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbiAgICBzZXRwcm90by50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmFwaGFcXHhlYmxcXHUyMDE4cyBzZXRcIjtcbiAgICB9O1xuXG4gICAgc2V0cHJvdG8uZ2xvdyA9IGZ1bmN0aW9uKGdsb3dDb25maWcpIHtcbiAgICAgICAgdmFyIHJldCA9IHRoaXMucGFwZXIuc2V0KCk7XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbihzaGFwZSwgaW5kZXgpe1xuICAgICAgICAgICAgdmFyIGcgPSBzaGFwZS5nbG93KGdsb3dDb25maWcpO1xuICAgICAgICAgICAgaWYoZyAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICBnLmZvckVhY2goZnVuY3Rpb24oc2hhcGUyLCBpbmRleDIpe1xuICAgICAgICAgICAgICAgICAgICByZXQucHVzaChzaGFwZTIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuXG5cbiAgICAvKlxcXG4gICAgICogU2V0LmlzUG9pbnRJbnNpZGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERldGVybWluZSBpZiBnaXZlbiBwb2ludCBpcyBpbnNpZGUgdGhpcyBzZXTigJlzIGVsZW1lbnRzXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHggKG51bWJlcikgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICAtIHkgKG51bWJlcikgeSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA9IChib29sZWFuKSBgdHJ1ZWAgaWYgcG9pbnQgaXMgaW5zaWRlIGFueSBvZiB0aGUgc2V0J3MgZWxlbWVudHNcbiAgICAgXFwqL1xuICAgIHNldHByb3RvLmlzUG9pbnRJbnNpZGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgaXNQb2ludEluc2lkZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWwuaXNQb2ludEluc2lkZSh4LCB5KSkge1xuICAgICAgICAgICAgICAgIGlzUG9pbnRJbnNpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gc3RvcCBsb29wXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNQb2ludEluc2lkZTtcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwucmVnaXN0ZXJGb250XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBBZGRzIGdpdmVuIGZvbnQgdG8gdGhlIHJlZ2lzdGVyZWQgc2V0IG9mIGZvbnRzIGZvciBSYXBoYcOrbC4gU2hvdWxkIGJlIHVzZWQgYXMgYW4gaW50ZXJuYWwgY2FsbCBmcm9tIHdpdGhpbiBDdWbDs27igJlzIGZvbnQgZmlsZS5cbiAgICAgKiBSZXR1cm5zIG9yaWdpbmFsIHBhcmFtZXRlciwgc28gaXQgY291bGQgYmUgdXNlZCB3aXRoIGNoYWluaW5nLlxuICAgICAjIDxhIGhyZWY9XCJodHRwOi8vd2lraS5naXRodWIuY29tL3NvcmNjdS9jdWZvbi9hYm91dFwiPk1vcmUgYWJvdXQgQ3Vmw7NuIGFuZCBob3cgdG8gY29udmVydCB5b3VyIGZvbnQgZm9ybSBUVEYsIE9URiwgZXRjIHRvIEphdmFTY3JpcHQgZmlsZS48L2E+XG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIGZvbnQgKG9iamVjdCkgdGhlIGZvbnQgdG8gcmVnaXN0ZXJcbiAgICAgPSAob2JqZWN0KSB0aGUgZm9udCB5b3UgcGFzc2VkIGluXG4gICAgID4gVXNhZ2VcbiAgICAgfCBDdWZvbi5yZWdpc3RlckZvbnQoUmFwaGFlbC5yZWdpc3RlckZvbnQoe+KApn0pKTtcbiAgICBcXCovXG4gICAgUi5yZWdpc3RlckZvbnQgPSBmdW5jdGlvbiAoZm9udCkge1xuICAgICAgICBpZiAoIWZvbnQuZmFjZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb250cyA9IHRoaXMuZm9udHMgfHwge307XG4gICAgICAgIHZhciBmb250Y29weSA9IHtcbiAgICAgICAgICAgICAgICB3OiBmb250LncsXG4gICAgICAgICAgICAgICAgZmFjZToge30sXG4gICAgICAgICAgICAgICAgZ2x5cGhzOiB7fVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbWlseSA9IGZvbnQuZmFjZVtcImZvbnQtZmFtaWx5XCJdO1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGZvbnQuZmFjZSkgaWYgKGZvbnQuZmFjZVtoYXNdKHByb3ApKSB7XG4gICAgICAgICAgICBmb250Y29weS5mYWNlW3Byb3BdID0gZm9udC5mYWNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvbnRzW2ZhbWlseV0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9udHNbZmFtaWx5XS5wdXNoKGZvbnRjb3B5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZm9udHNbZmFtaWx5XSA9IFtmb250Y29weV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmb250LnN2Zykge1xuICAgICAgICAgICAgZm9udGNvcHkuZmFjZVtcInVuaXRzLXBlci1lbVwiXSA9IHRvSW50KGZvbnQuZmFjZVtcInVuaXRzLXBlci1lbVwiXSwgMTApO1xuICAgICAgICAgICAgZm9yICh2YXIgZ2x5cGggaW4gZm9udC5nbHlwaHMpIGlmIChmb250LmdseXBoc1toYXNdKGdseXBoKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gZm9udC5nbHlwaHNbZ2x5cGhdO1xuICAgICAgICAgICAgICAgIGZvbnRjb3B5LmdseXBoc1tnbHlwaF0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHc6IHBhdGgudyxcbiAgICAgICAgICAgICAgICAgICAgazoge30sXG4gICAgICAgICAgICAgICAgICAgIGQ6IHBhdGguZCAmJiBcIk1cIiArIHBhdGguZC5yZXBsYWNlKC9bbWxjeHRydl0vZywgZnVuY3Rpb24gKGNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2w6IFwiTFwiLCBjOiBcIkNcIiwgeDogXCJ6XCIsIHQ6IFwibVwiLCByOiBcImxcIiwgdjogXCJjXCJ9W2NvbW1hbmRdIHx8IFwiTVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgKyBcInpcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHBhdGguaykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHBhdGguaykgaWYgKHBhdGhbaGFzXShrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udGNvcHkuZ2x5cGhzW2dseXBoXS5rW2tdID0gcGF0aC5rW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb250O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLmdldEZvbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEZpbmRzIGZvbnQgb2JqZWN0IGluIHRoZSByZWdpc3RlcmVkIGZvbnRzIGJ5IGdpdmVuIHBhcmFtZXRlcnMuIFlvdSBjb3VsZCBzcGVjaWZ5IG9ubHkgb25lIHdvcmQgZnJvbSB0aGUgZm9udCBuYW1lLCBsaWtlIOKAnE15cmlhZOKAnSBmb3Ig4oCcTXlyaWFkIFByb+KAnS5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gZmFtaWx5IChzdHJpbmcpIGZvbnQgZmFtaWx5IG5hbWUgb3IgYW55IHdvcmQgZnJvbSBpdFxuICAgICAtIHdlaWdodCAoc3RyaW5nKSAjb3B0aW9uYWwgZm9udCB3ZWlnaHRcbiAgICAgLSBzdHlsZSAoc3RyaW5nKSAjb3B0aW9uYWwgZm9udCBzdHlsZVxuICAgICAtIHN0cmV0Y2ggKHN0cmluZykgI29wdGlvbmFsIGZvbnQgc3RyZXRjaFxuICAgICA9IChvYmplY3QpIHRoZSBmb250IG9iamVjdFxuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIucHJpbnQoMTAwLCAxMDAsIFwiVGVzdCBzdHJpbmdcIiwgcGFwZXIuZ2V0Rm9udChcIlRpbWVzXCIsIDgwMCksIDMwKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5nZXRGb250ID0gZnVuY3Rpb24gKGZhbWlseSwgd2VpZ2h0LCBzdHlsZSwgc3RyZXRjaCkge1xuICAgICAgICBzdHJldGNoID0gc3RyZXRjaCB8fCBcIm5vcm1hbFwiO1xuICAgICAgICBzdHlsZSA9IHN0eWxlIHx8IFwibm9ybWFsXCI7XG4gICAgICAgIHdlaWdodCA9ICt3ZWlnaHQgfHwge25vcm1hbDogNDAwLCBib2xkOiA3MDAsIGxpZ2h0ZXI6IDMwMCwgYm9sZGVyOiA4MDB9W3dlaWdodF0gfHwgNDAwO1xuICAgICAgICBpZiAoIVIuZm9udHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm9udCA9IFIuZm9udHNbZmFtaWx5XTtcbiAgICAgICAgaWYgKCFmb250KSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIiArIGZhbWlseS5yZXBsYWNlKC9bXlxcd1xcZFxccyshfi46Xy1dL2csIEUpICsgXCIoXFxcXHN8JClcIiwgXCJpXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgZm9udE5hbWUgaW4gUi5mb250cykgaWYgKFIuZm9udHNbaGFzXShmb250TmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZS50ZXN0KGZvbnROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBmb250ID0gUi5mb250c1tmb250TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhlZm9udDtcbiAgICAgICAgaWYgKGZvbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoZWZvbnQgPSBmb250W2ldO1xuICAgICAgICAgICAgICAgIGlmICh0aGVmb250LmZhY2VbXCJmb250LXdlaWdodFwiXSA9PSB3ZWlnaHQgJiYgKHRoZWZvbnQuZmFjZVtcImZvbnQtc3R5bGVcIl0gPT0gc3R5bGUgfHwgIXRoZWZvbnQuZmFjZVtcImZvbnQtc3R5bGVcIl0pICYmIHRoZWZvbnQuZmFjZVtcImZvbnQtc3RyZXRjaFwiXSA9PSBzdHJldGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhlZm9udDtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5wcmludFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ3JlYXRlcyBwYXRoIHRoYXQgcmVwcmVzZW50IGdpdmVuIHRleHQgd3JpdHRlbiB1c2luZyBnaXZlbiBmb250IGF0IGdpdmVuIHBvc2l0aW9uIHdpdGggZ2l2ZW4gc2l6ZS5cbiAgICAgKiBSZXN1bHQgb2YgdGhlIG1ldGhvZCBpcyBwYXRoIGVsZW1lbnQgdGhhdCBjb250YWlucyB3aG9sZSB0ZXh0IGFzIGEgc2VwYXJhdGUgcGF0aC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0geCAobnVtYmVyKSB4IHBvc2l0aW9uIG9mIHRoZSB0ZXh0XG4gICAgIC0geSAobnVtYmVyKSB5IHBvc2l0aW9uIG9mIHRoZSB0ZXh0XG4gICAgIC0gc3RyaW5nIChzdHJpbmcpIHRleHQgdG8gcHJpbnRcbiAgICAgLSBmb250IChvYmplY3QpIGZvbnQgb2JqZWN0LCBzZWUgQFBhcGVyLmdldEZvbnRcbiAgICAgLSBzaXplIChudW1iZXIpICNvcHRpb25hbCBzaXplIG9mIHRoZSBmb250LCBkZWZhdWx0IGlzIGAxNmBcbiAgICAgLSBvcmlnaW4gKHN0cmluZykgI29wdGlvbmFsIGNvdWxkIGJlIGBcImJhc2VsaW5lXCJgIG9yIGBcIm1pZGRsZVwiYCwgZGVmYXVsdCBpcyBgXCJtaWRkbGVcImBcbiAgICAgLSBsZXR0ZXJfc3BhY2luZyAobnVtYmVyKSAjb3B0aW9uYWwgbnVtYmVyIGluIHJhbmdlIGAtMS4uMWAsIGRlZmF1bHQgaXMgYDBgXG4gICAgIC0gbGluZV9zcGFjaW5nIChudW1iZXIpICNvcHRpb25hbCBudW1iZXIgaW4gcmFuZ2UgYDEuLjNgLCBkZWZhdWx0IGlzIGAxYFxuICAgICA9IChvYmplY3QpIHJlc3VsdGluZyBwYXRoIGVsZW1lbnQsIHdoaWNoIGNvbnNpc3Qgb2YgYWxsIGxldHRlcnNcbiAgICAgPiBVc2FnZVxuICAgICB8IHZhciB0eHQgPSByLnByaW50KDEwLCA1MCwgXCJwcmludFwiLCByLmdldEZvbnQoXCJNdXNlb1wiKSwgMzApLmF0dHIoe2ZpbGw6IFwiI2ZmZlwifSk7XG4gICAgXFwqL1xuICAgIHBhcGVycHJvdG8ucHJpbnQgPSBmdW5jdGlvbiAoeCwgeSwgc3RyaW5nLCBmb250LCBzaXplLCBvcmlnaW4sIGxldHRlcl9zcGFjaW5nLCBsaW5lX3NwYWNpbmcpIHtcbiAgICAgICAgb3JpZ2luID0gb3JpZ2luIHx8IFwibWlkZGxlXCI7IC8vIGJhc2VsaW5lfG1pZGRsZVxuICAgICAgICBsZXR0ZXJfc3BhY2luZyA9IG1tYXgobW1pbihsZXR0ZXJfc3BhY2luZyB8fCAwLCAxKSwgLTEpO1xuICAgICAgICBsaW5lX3NwYWNpbmcgPSBtbWF4KG1taW4obGluZV9zcGFjaW5nIHx8IDEsIDMpLCAxKTtcbiAgICAgICAgdmFyIGxldHRlcnMgPSBTdHIoc3RyaW5nKVtzcGxpdF0oRSksXG4gICAgICAgICAgICBzaGlmdCA9IDAsXG4gICAgICAgICAgICBub3RmaXJzdCA9IDAsXG4gICAgICAgICAgICBwYXRoID0gRSxcbiAgICAgICAgICAgIHNjYWxlO1xuICAgICAgICBSLmlzKGZvbnQsIFwic3RyaW5nXCIpICYmIChmb250ID0gdGhpcy5nZXRGb250KGZvbnQpKTtcbiAgICAgICAgaWYgKGZvbnQpIHtcbiAgICAgICAgICAgIHNjYWxlID0gKHNpemUgfHwgMTYpIC8gZm9udC5mYWNlW1widW5pdHMtcGVyLWVtXCJdO1xuICAgICAgICAgICAgdmFyIGJiID0gZm9udC5mYWNlLmJib3hbc3BsaXRdKHNlcGFyYXRvciksXG4gICAgICAgICAgICAgICAgdG9wID0gK2JiWzBdLFxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQgPSBiYlszXSAtIGJiWzFdLFxuICAgICAgICAgICAgICAgIHNoaWZ0eSA9IDAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gK2JiWzFdICsgKG9yaWdpbiA9PSBcImJhc2VsaW5lXCIgPyBsaW5lSGVpZ2h0ICsgKCtmb250LmZhY2UuZGVzY2VudCkgOiBsaW5lSGVpZ2h0IC8gMik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsZXR0ZXJzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGV0dGVyc1tpXSA9PSBcIlxcblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgY3VyciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIG5vdGZpcnN0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2hpZnR5ICs9IGxpbmVIZWlnaHQgKiBsaW5lX3NwYWNpbmc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXYgPSBub3RmaXJzdCAmJiBmb250LmdseXBoc1tsZXR0ZXJzW2kgLSAxXV0gfHwge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gZm9udC5nbHlwaHNbbGV0dGVyc1tpXV07XG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0ICs9IG5vdGZpcnN0ID8gKHByZXYudyB8fCBmb250LncpICsgKHByZXYuayAmJiBwcmV2LmtbbGV0dGVyc1tpXV0gfHwgMCkgKyAoZm9udC53ICogbGV0dGVyX3NwYWNpbmcpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgbm90Zmlyc3QgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VyciAmJiBjdXJyLmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBSLnRyYW5zZm9ybVBhdGgoY3Vyci5kLCBbXCJ0XCIsIHNoaWZ0ICogc2NhbGUsIHNoaWZ0eSAqIHNjYWxlLCBcInNcIiwgc2NhbGUsIHNjYWxlLCB0b3AsIGhlaWdodCwgXCJ0XCIsICh4IC0gdG9wKSAvIHNjYWxlLCAoeSAtIGhlaWdodCkgLyBzY2FsZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wYXRoKHBhdGgpLmF0dHIoe1xuICAgICAgICAgICAgZmlsbDogXCIjMDAwXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKlxcXG4gICAgICogUGFwZXIuYWRkXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJbXBvcnRzIGVsZW1lbnRzIGluIEpTT04gYXJyYXkgaW4gZm9ybWF0IGB7dHlwZTogdHlwZSwgPGF0dHJpYnV0ZXM+fWBcbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0ganNvbiAoYXJyYXkpXG4gICAgID0gKG9iamVjdCkgcmVzdWx0aW5nIHNldCBvZiBpbXBvcnRlZCBlbGVtZW50c1xuICAgICA+IFVzYWdlXG4gICAgIHwgcGFwZXIuYWRkKFtcbiAgICAgfCAgICAge1xuICAgICB8ICAgICAgICAgdHlwZTogXCJjaXJjbGVcIixcbiAgICAgfCAgICAgICAgIGN4OiAxMCxcbiAgICAgfCAgICAgICAgIGN5OiAxMCxcbiAgICAgfCAgICAgICAgIHI6IDVcbiAgICAgfCAgICAgfSxcbiAgICAgfCAgICAge1xuICAgICB8ICAgICAgICAgdHlwZTogXCJyZWN0XCIsXG4gICAgIHwgICAgICAgICB4OiAxMCxcbiAgICAgfCAgICAgICAgIHk6IDEwLFxuICAgICB8ICAgICAgICAgd2lkdGg6IDEwLFxuICAgICB8ICAgICAgICAgaGVpZ2h0OiAxMCxcbiAgICAgfCAgICAgICAgIGZpbGw6IFwiI2ZjMFwiXG4gICAgIHwgICAgIH1cbiAgICAgfCBdKTtcbiAgICBcXCovXG4gICAgcGFwZXJwcm90by5hZGQgPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgICBpZiAoUi5pcyhqc29uLCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gdGhpcy5zZXQoKSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBpaSA9IGpzb24ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGo7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBqID0ganNvbltpXSB8fCB7fTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1toYXNdKGoudHlwZSkgJiYgcmVzLnB1c2godGhpc1tqLnR5cGVdKCkuYXR0cihqKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZm9ybWF0XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTaW1wbGUgZm9ybWF0IGZ1bmN0aW9uLiBSZXBsYWNlcyBjb25zdHJ1Y3Rpb24gb2YgdHlwZSDigJxgezxudW1iZXI+fWDigJ0gdG8gdGhlIGNvcnJlc3BvbmRpbmcgYXJndW1lbnQuXG4gICAgICoqXG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAqKlxuICAgICAtIHRva2VuIChzdHJpbmcpIHN0cmluZyB0byBmb3JtYXRcbiAgICAgLSDigKYgKHN0cmluZykgcmVzdCBvZiBhcmd1bWVudHMgd2lsbCBiZSB0cmVhdGVkIGFzIHBhcmFtZXRlcnMgZm9yIHJlcGxhY2VtZW50XG4gICAgID0gKHN0cmluZykgZm9ybWF0ZWQgc3RyaW5nXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgeCA9IDEwLFxuICAgICB8ICAgICB5ID0gMjAsXG4gICAgIHwgICAgIHdpZHRoID0gNDAsXG4gICAgIHwgICAgIGhlaWdodCA9IDUwO1xuICAgICB8IC8vIHRoaXMgd2lsbCBkcmF3IGEgcmVjdGFuZ3VsYXIgc2hhcGUgZXF1aXZhbGVudCB0byBcIk0xMCwyMGg0MHY1MGgtNDB6XCJcbiAgICAgfCBwYXBlci5wYXRoKFJhcGhhZWwuZm9ybWF0KFwiTXswfSx7MX1oezJ9dnszfWh7NH16XCIsIHgsIHksIHdpZHRoLCBoZWlnaHQsIC13aWR0aCkpO1xuICAgIFxcKi9cbiAgICBSLmZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbiwgcGFyYW1zKSB7XG4gICAgICAgIHZhciBhcmdzID0gUi5pcyhwYXJhbXMsIGFycmF5KSA/IFswXVtjb25jYXRdKHBhcmFtcykgOiBhcmd1bWVudHM7XG4gICAgICAgIHRva2VuICYmIFIuaXModG9rZW4sIHN0cmluZykgJiYgYXJncy5sZW5ndGggLSAxICYmICh0b2tlbiA9IHRva2VuLnJlcGxhY2UoZm9ybWF0cmcsIGZ1bmN0aW9uIChzdHIsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmdzWysraV0gPT0gbnVsbCA/IEUgOiBhcmdzW2ldO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBFO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFJhcGhhZWwuZnVsbGZpbGxcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEEgbGl0dGxlIGJpdCBtb3JlIGFkdmFuY2VkIGZvcm1hdCBmdW5jdGlvbiB0aGFuIEBSYXBoYWVsLmZvcm1hdC4gUmVwbGFjZXMgY29uc3RydWN0aW9uIG9mIHR5cGUg4oCcYHs8bmFtZT59YOKAnSB0byB0aGUgY29ycmVzcG9uZGluZyBhcmd1bWVudC5cbiAgICAgKipcbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgICoqXG4gICAgIC0gdG9rZW4gKHN0cmluZykgc3RyaW5nIHRvIGZvcm1hdFxuICAgICAtIGpzb24gKG9iamVjdCkgb2JqZWN0IHdoaWNoIHByb3BlcnRpZXMgd2lsbCBiZSB1c2VkIGFzIGEgcmVwbGFjZW1lbnRcbiAgICAgPSAoc3RyaW5nKSBmb3JtYXRlZCBzdHJpbmdcbiAgICAgPiBVc2FnZVxuICAgICB8IC8vIHRoaXMgd2lsbCBkcmF3IGEgcmVjdGFuZ3VsYXIgc2hhcGUgZXF1aXZhbGVudCB0byBcIk0xMCwyMGg0MHY1MGgtNDB6XCJcbiAgICAgfCBwYXBlci5wYXRoKFJhcGhhZWwuZnVsbGZpbGwoXCJNe3h9LHt5fWh7ZGltLndpZHRofXZ7ZGltLmhlaWdodH1oe2RpbVsnbmVnYXRpdmUgd2lkdGgnXX16XCIsIHtcbiAgICAgfCAgICAgeDogMTAsXG4gICAgIHwgICAgIHk6IDIwLFxuICAgICB8ICAgICBkaW06IHtcbiAgICAgfCAgICAgICAgIHdpZHRoOiA0MCxcbiAgICAgfCAgICAgICAgIGhlaWdodDogNTAsXG4gICAgIHwgICAgICAgICBcIm5lZ2F0aXZlIHdpZHRoXCI6IC00MFxuICAgICB8ICAgICB9XG4gICAgIHwgfSkpO1xuICAgIFxcKi9cbiAgICBSLmZ1bGxmaWxsID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuUmVnZXggPSAvXFx7KFteXFx9XSspXFx9L2csXG4gICAgICAgICAgICBvYmpOb3RhdGlvblJlZ2V4ID0gLyg/Oig/Ol58XFwuKSguKz8pKD89XFxbfFxcLnwkfFxcKCl8XFxbKCd8XCIpKC4rPylcXDJcXF0pKFxcKFxcKSk/L2csIC8vIG1hdGNoZXMgLnh4eHh4IG9yIFtcInh4eHh4XCJdIHRvIHJ1biBvdmVyIG9iamVjdCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICByZXBsYWNlciA9IGZ1bmN0aW9uIChhbGwsIGtleSwgb2JqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IG9iajtcbiAgICAgICAgICAgICAgICBrZXkucmVwbGFjZShvYmpOb3RhdGlvblJlZ2V4LCBmdW5jdGlvbiAoYWxsLCBuYW1lLCBxdW90ZSwgcXVvdGVkTmFtZSwgaXNGdW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lIHx8IHF1b3RlZE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lIGluIHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiByZXMgPT0gXCJmdW5jdGlvblwiICYmIGlzRnVuYyAmJiAocmVzID0gcmVzKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVzID0gKHJlcyA9PSBudWxsIHx8IHJlcyA9PSBvYmogPyBhbGwgOiByZXMpICsgXCJcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIsIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UodG9rZW5SZWdleCwgZnVuY3Rpb24gKGFsbCwga2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VyKGFsbCwga2V5LCBvYmopO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcbiAgICAvKlxcXG4gICAgICogUmFwaGFlbC5uaW5qYVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSWYgeW91IHdhbnQgdG8gbGVhdmUgbm8gdHJhY2Ugb2YgUmFwaGHDq2wgKFdlbGwsIFJhcGhhw6tsIGNyZWF0ZXMgb25seSBvbmUgZ2xvYmFsIHZhcmlhYmxlIGBSYXBoYWVsYCwgYnV0IGFueXdheS4pIFlvdSBjYW4gdXNlIGBuaW5qYWAgbWV0aG9kLlxuICAgICAqIEJld2FyZSwgdGhhdCBpbiB0aGlzIGNhc2UgcGx1Z2lucyBjb3VsZCBzdG9wIHdvcmtpbmcsIGJlY2F1c2UgdGhleSBhcmUgZGVwZW5kaW5nIG9uIGdsb2JhbCB2YXJpYWJsZSBleGlzdGVuY2UuXG4gICAgICoqXG4gICAgID0gKG9iamVjdCkgUmFwaGFlbCBvYmplY3RcbiAgICAgPiBVc2FnZVxuICAgICB8IChmdW5jdGlvbiAobG9jYWxfcmFwaGFlbCkge1xuICAgICB8ICAgICB2YXIgcGFwZXIgPSBsb2NhbF9yYXBoYWVsKDEwLCAxMCwgMzIwLCAyMDApO1xuICAgICB8ICAgICDigKZcbiAgICAgfCB9KShSYXBoYWVsLm5pbmphKCkpO1xuICAgIFxcKi9cbiAgICBSLm5pbmphID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAob2xkUmFwaGFlbC53YXMpIHtcbiAgICAgICAgICAgIGcud2luLlJhcGhhZWwgPSBvbGRSYXBoYWVsLmlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSUU4IHJhaXNlcyBhbiBlcnJvciB3aGVuIGRlbGV0aW5nIHdpbmRvdyBwcm9wZXJ0eVxuICAgICAgICAgICAgd2luZG93LlJhcGhhZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3cuUmFwaGFlbDtcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUjtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBSYXBoYWVsLnN0XG4gICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAqKlxuICAgICAqIFlvdSBjYW4gYWRkIHlvdXIgb3duIG1ldGhvZCB0byBlbGVtZW50cyBhbmQgc2V0cy4gSXQgaXMgd2lzZSB0byBhZGQgYSBzZXQgbWV0aG9kIGZvciBlYWNoIGVsZW1lbnQgbWV0aG9kXG4gICAgICogeW91IGFkZGVkLCBzbyB5b3Ugd2lsbCBiZSBhYmxlIHRvIGNhbGwgdGhlIHNhbWUgbWV0aG9kIG9uIHNldHMgdG9vLlxuICAgICAqKlxuICAgICAqIFNlZSBhbHNvIEBSYXBoYWVsLmVsLlxuICAgICA+IFVzYWdlXG4gICAgIHwgUmFwaGFlbC5lbC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgIHwgICAgIHRoaXMuYXR0cih7ZmlsbDogXCIjZjAwXCJ9KTtcbiAgICAgfCB9O1xuICAgICB8IFJhcGhhZWwuc3QucmVkID0gZnVuY3Rpb24gKCkge1xuICAgICB8ICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgIHwgICAgICAgICBlbC5yZWQoKTtcbiAgICAgfCAgICAgfSk7XG4gICAgIHwgfTtcbiAgICAgfCAvLyB0aGVuIHVzZSBpdFxuICAgICB8IHBhcGVyLnNldChwYXBlci5jaXJjbGUoMTAwLCAxMDAsIDIwKSwgcGFwZXIuY2lyY2xlKDExMCwgMTAwLCAyMCkpLnJlZCgpO1xuICAgIFxcKi9cbiAgICBSLnN0ID0gc2V0cHJvdG87XG5cbiAgICBldmUub24oXCJyYXBoYWVsLkRPTWxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2FkZWQgPSB0cnVlO1xuICAgIH0pO1xuXG4gICAgLy8gRmlyZWZveCA8My42IGZpeDogaHR0cDovL3dlYnJlZmxlY3Rpb24uYmxvZ3Nwb3QuY29tLzIwMDkvMTEvMTk1LWNoYXJzLXRvLWhlbHAtbGF6eS1sb2FkaW5nLmh0bWxcbiAgICAoZnVuY3Rpb24gKGRvYywgbG9hZGVkLCBmKSB7XG4gICAgICAgIGlmIChkb2MucmVhZHlTdGF0ZSA9PSBudWxsICYmIGRvYy5hZGRFdmVudExpc3RlbmVyKXtcbiAgICAgICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKGxvYWRlZCwgZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihsb2FkZWQsIGYsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkb2MucmVhZHlTdGF0ZSA9IFwiY29tcGxldGVcIjtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIGRvYy5yZWFkeVN0YXRlID0gXCJsb2FkaW5nXCI7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaXNMb2FkZWQoKSB7XG4gICAgICAgICAgICAoL2luLykudGVzdChkb2MucmVhZHlTdGF0ZSkgPyBzZXRUaW1lb3V0KGlzTG9hZGVkLCA5KSA6IFIuZXZlKFwicmFwaGFlbC5ET01sb2FkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlzTG9hZGVkKCk7XG4gICAgfSkoZG9jdW1lbnQsIFwiRE9NQ29udGVudExvYWRlZFwiKTtcblxuICAgIHJldHVybiBSO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./dev/raphael.core.js\n')
          },
          "./dev/raphael.svg.js": function(module, exports, __webpack_require__) {
            eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ "./dev/raphael.core.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n    if (R && !R.svg) {\n        return;\n    }\n\n    var has = "hasOwnProperty",\n        Str = String,\n        toFloat = parseFloat,\n        toInt = parseInt,\n        math = Math,\n        mmax = math.max,\n        abs = math.abs,\n        pow = math.pow,\n        separator = /[, ]+/,\n        eve = R.eve,\n        E = "",\n        S = " ";\n    var xlink = "http://www.w3.org/1999/xlink",\n        markers = {\n            block: "M5,0 0,2.5 5,5z",\n            classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z",\n            diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z",\n            open: "M6,1 1,3.5 6,6",\n            oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"\n        },\n        markerCounter = {};\n    R.toString = function () {\n        return  "Your browser supports SVG.\\nYou are running Rapha\\xebl " + this.version;\n    };\n    var $ = function (el, attr) {\n        if (attr) {\n            if (typeof el == "string") {\n                el = $(el);\n            }\n            for (var key in attr) if (attr[has](key)) {\n                if (key.substring(0, 6) == "xlink:") {\n                    el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));\n                } else {\n                    el.setAttribute(key, Str(attr[key]));\n                }\n            }\n        } else {\n            el = R._g.doc.createElementNS("http://www.w3.org/2000/svg", el);\n            el.style && (el.style.webkitTapHighlightColor = "rgba(0,0,0,0)");\n        }\n        return el;\n    },\n    addGradientFill = function (element, gradient) {\n        var type = "linear",\n            id = element.id + gradient,\n            fx = .5, fy = .5,\n            o = element.node,\n            SVG = element.paper,\n            s = o.style,\n            el = R._g.doc.getElementById(id);\n        if (!el) {\n            gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {\n                type = "radial";\n                if (_fx && _fy) {\n                    fx = toFloat(_fx);\n                    fy = toFloat(_fy);\n                    var dir = ((fy > .5) * 2 - 1);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&\n                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&\n                        fy != .5 &&\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\n                }\n                return E;\n            });\n            gradient = gradient.split(/\\s*\\-\\s*/);\n            if (type == "linear") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n                var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],\n                    max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n                vector[2] *= max;\n                vector[3] *= max;\n                if (vector[2] < 0) {\n                    vector[0] = -vector[2];\n                    vector[2] = 0;\n                }\n                if (vector[3] < 0) {\n                    vector[1] = -vector[3];\n                    vector[3] = 0;\n                }\n            }\n            var dots = R._parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            id = id.replace(/[\\(\\)\\s,\\xb0#]/g, "_");\n\n            if (element.gradient && id != element.gradient.id) {\n                SVG.defs.removeChild(element.gradient);\n                delete element.gradient;\n            }\n\n            if (!element.gradient) {\n                el = $(type + "Gradient", {id: id});\n                element.gradient = el;\n                $(el, type == "radial" ? {\n                    fx: fx,\n                    fy: fy\n                } : {\n                    x1: vector[0],\n                    y1: vector[1],\n                    x2: vector[2],\n                    y2: vector[3],\n                    gradientTransform: element.matrix.invert()\n                });\n                SVG.defs.appendChild(el);\n                for (var i = 0, ii = dots.length; i < ii; i++) {\n                    el.appendChild($("stop", {\n                        offset: dots[i].offset ? dots[i].offset : i ? "100%" : "0%",\n                        "stop-color": dots[i].color || "#fff",\n                        "stop-opacity": isFinite(dots[i].opacity) ? dots[i].opacity : 1\n                    }));\n                }\n            }\n        }\n        $(o, {\n            fill: fillurl(id),\n            opacity: 1,\n            "fill-opacity": 1\n        });\n        s.fill = E;\n        s.opacity = 1;\n        s.fillOpacity = 1;\n        return 1;\n    },\n    isIE9or10 = function () {\n      var mode = document.documentMode;\n      return mode && (mode === 9 || mode === 10);\n    },\n    fillurl = function (id) {\n      if (isIE9or10()) {\n          return "url(\'#" + id + "\')";\n      }\n      var location = document.location;\n      var locationString = (\n          location.protocol + \'//\' +\n          location.host +\n          location.pathname +\n          location.search\n      );\n      return "url(\'" + locationString + "#" + id + "\')";\n    },\n    updatePosition = function (o) {\n        var bbox = o.getBBox(1);\n        $(o.pattern, {patternTransform: o.matrix.invert() + " translate(" + bbox.x + "," + bbox.y + ")"});\n    },\n    addArrow = function (o, value, isEnd) {\n        if (o.type == "path") {\n            var values = Str(value).toLowerCase().split("-"),\n                p = o.paper,\n                se = isEnd ? "end" : "start",\n                node = o.node,\n                attrs = o.attrs,\n                stroke = attrs["stroke-width"],\n                i = values.length,\n                type = "classic",\n                from,\n                to,\n                dx,\n                refX,\n                attr,\n                w = 3,\n                h = 3,\n                t = 5;\n            while (i--) {\n                switch (values[i]) {\n                    case "block":\n                    case "classic":\n                    case "oval":\n                    case "diamond":\n                    case "open":\n                    case "none":\n                        type = values[i];\n                        break;\n                    case "wide": h = 5; break;\n                    case "narrow": h = 2; break;\n                    case "long": w = 5; break;\n                    case "short": w = 2; break;\n                }\n            }\n            if (type == "open") {\n                w += 2;\n                h += 2;\n                t += 2;\n                dx = 1;\n                refX = isEnd ? 4 : 1;\n                attr = {\n                    fill: "none",\n                    stroke: attrs.stroke\n                };\n            } else {\n                refX = dx = w / 2;\n                attr = {\n                    fill: attrs.stroke,\n                    stroke: "none"\n                };\n            }\n            if (o._.arrows) {\n                if (isEnd) {\n                    o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\n                    o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\n                } else {\n                    o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\n                    o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\n                }\n            } else {\n                o._.arrows = {};\n            }\n            if (type != "none") {\n                var pathId = "raphael-marker-" + type,\n                    markerId = "raphael-marker-" + se + type + w + h + "-obj" + o.id;\n                if (!R._g.doc.getElementById(pathId)) {\n                    p.defs.appendChild($($("path"), {\n                        "stroke-linecap": "round",\n                        d: markers[type],\n                        id: pathId\n                    }));\n                    markerCounter[pathId] = 1;\n                } else {\n                    markerCounter[pathId]++;\n                }\n                var marker = R._g.doc.getElementById(markerId),\n                    use;\n                if (!marker) {\n                    marker = $($("marker"), {\n                        id: markerId,\n                        markerHeight: h,\n                        markerWidth: w,\n                        orient: "auto",\n                        refX: refX,\n                        refY: h / 2\n                    });\n                    use = $($("use"), {\n                        "xlink:href": "#" + pathId,\n                        transform: (isEnd ? "rotate(180 " + w / 2 + " " + h / 2 + ") " : E) + "scale(" + w / t + "," + h / t + ")",\n                        "stroke-width": (1 / ((w / t + h / t) / 2)).toFixed(4)\n                    });\n                    marker.appendChild(use);\n                    p.defs.appendChild(marker);\n                    markerCounter[markerId] = 1;\n                } else {\n                    markerCounter[markerId]++;\n                    use = marker.getElementsByTagName("use")[0];\n                }\n                $(use, attr);\n                var delta = dx * (type != "diamond" && type != "oval");\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - delta * stroke;\n                } else {\n                    from = delta * stroke;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                attr = {};\n                attr["marker-" + se] = "url(#" + markerId + ")";\n                if (to || from) {\n                    attr.d = R.getSubpath(attrs.path, from, to);\n                }\n                $(node, attr);\n                o._.arrows[se + "Path"] = pathId;\n                o._.arrows[se + "Marker"] = markerId;\n                o._.arrows[se + "dx"] = delta;\n                o._.arrows[se + "Type"] = type;\n                o._.arrows[se + "String"] = value;\n            } else {\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - from;\n                } else {\n                    from = 0;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                o._.arrows[se + "Path"] && $(node, {d: R.getSubpath(attrs.path, from, to)});\n                delete o._.arrows[se + "Path"];\n                delete o._.arrows[se + "Marker"];\n                delete o._.arrows[se + "dx"];\n                delete o._.arrows[se + "Type"];\n                delete o._.arrows[se + "String"];\n            }\n            for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {\n                var item = R._g.doc.getElementById(attr);\n                item && item.parentNode.removeChild(item);\n            }\n        }\n    },\n    dasharray = {\n        "-": [3, 1],\n        ".": [1, 1],\n        "-.": [3, 1, 1, 1],\n        "-..": [3, 1, 1, 1, 1, 1],\n        ". ": [1, 3],\n        "- ": [4, 7],\n        "--": [8, 3],\n        "- .": [4, 3, 1, 3],\n        "--.": [8, 3, 1, 3],\n        "--..": [8, 3, 1, 3, 1, 3]\n    },\n    addDashes = function (o, value, params) {\n        value = dasharray[Str(value).toLowerCase()];\n        if (value) {\n            var width = o.attrs["stroke-width"] || "1",\n                butt = {round: width, square: width, butt: 0}[o.attrs["stroke-linecap"] || params["stroke-linecap"]] || 0,\n                dashes = [],\n                i = value.length;\n            while (i--) {\n                dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;\n            }\n            $(o.node, {"stroke-dasharray": dashes.join(",")});\n        }\n        else {\n          $(o.node, {"stroke-dasharray": "none"});\n        }\n    },\n    setFillAndStroke = function (o, params) {\n        var node = o.node,\n            attrs = o.attrs,\n            vis = node.style.visibility;\n        node.style.visibility = "hidden";\n        for (var att in params) {\n            if (params[has](att)) {\n                if (!R._availableAttrs[has](att)) {\n                    continue;\n                }\n                var value = params[att];\n                attrs[att] = value;\n                switch (att) {\n                    case "blur":\n                        o.blur(value);\n                        break;\n                    case "title":\n                        var title = node.getElementsByTagName("title");\n\n                        // Use the existing <title>.\n                        if (title.length && (title = title[0])) {\n                          title.firstChild.nodeValue = value;\n                        } else {\n                          title = $("title");\n                          var val = R._g.doc.createTextNode(value);\n                          title.appendChild(val);\n                          node.appendChild(title);\n                        }\n                        break;\n                    case "href":\n                    case "target":\n                        var pn = node.parentNode;\n                        if (pn.tagName.toLowerCase() != "a") {\n                            var hl = $("a");\n                            pn.insertBefore(hl, node);\n                            hl.appendChild(node);\n                            pn = hl;\n                        }\n                        if (att == "target") {\n                            pn.setAttributeNS(xlink, "show", value == "blank" ? "new" : value);\n                        } else {\n                            pn.setAttributeNS(xlink, att, value);\n                        }\n                        break;\n                    case "cursor":\n                        node.style.cursor = value;\n                        break;\n                    case "transform":\n                        o.transform(value);\n                        break;\n                    case "arrow-start":\n                        addArrow(o, value);\n                        break;\n                    case "arrow-end":\n                        addArrow(o, value, 1);\n                        break;\n                    case "clip-rect":\n                        var rect = Str(value).split(separator);\n                        if (rect.length == 4) {\n                            o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\n                            var el = $("clipPath"),\n                                rc = $("rect");\n                            el.id = R.createUUID();\n                            $(rc, {\n                                x: rect[0],\n                                y: rect[1],\n                                width: rect[2],\n                                height: rect[3]\n                            });\n                            el.appendChild(rc);\n                            o.paper.defs.appendChild(el);\n                            $(node, {"clip-path": "url(#" + el.id + ")"});\n                            o.clip = rc;\n                        }\n                        if (!value) {\n                            var path = node.getAttribute("clip-path");\n                            if (path) {\n                                var clip = R._g.doc.getElementById(path.replace(/(^url\\(#|\\)$)/g, E));\n                                clip && clip.parentNode.removeChild(clip);\n                                $(node, {"clip-path": E});\n                                delete o.clip;\n                            }\n                        }\n                    break;\n                    case "path":\n                        if (o.type == "path") {\n                            $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : "M0,0"});\n                            o._.dirty = 1;\n                            if (o._.arrows) {\n                                "startString" in o._.arrows && addArrow(o, o._.arrows.startString);\n                                "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                            }\n                        }\n                        break;\n                    case "width":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fx) {\n                            att = "x";\n                            value = attrs.x;\n                        } else {\n                            break;\n                        }\n                    case "x":\n                        if (attrs.fx) {\n                            value = -attrs.x - (attrs.width || 0);\n                        }\n                    case "rx":\n                        if (att == "rx" && o.type == "rect") {\n                            break;\n                        }\n                    case "cx":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case "height":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fy) {\n                            att = "y";\n                            value = attrs.y;\n                        } else {\n                            break;\n                        }\n                    case "y":\n                        if (attrs.fy) {\n                            value = -attrs.y - (attrs.height || 0);\n                        }\n                    case "ry":\n                        if (att == "ry" && o.type == "rect") {\n                            break;\n                        }\n                    case "cy":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case "r":\n                        if (o.type == "rect") {\n                            $(node, {rx: value, ry: value});\n                        } else {\n                            node.setAttribute(att, value);\n                        }\n                        o._.dirty = 1;\n                        break;\n                    case "src":\n                        if (o.type == "image") {\n                            node.setAttributeNS(xlink, "href", value);\n                        }\n                        break;\n                    case "stroke-width":\n                        if (o._.sx != 1 || o._.sy != 1) {\n                            value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\n                        }\n                        node.setAttribute(att, value);\n                        if (attrs["stroke-dasharray"]) {\n                            addDashes(o, attrs["stroke-dasharray"], params);\n                        }\n                        if (o._.arrows) {\n                            "startString" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case "stroke-dasharray":\n                        addDashes(o, value, params);\n                        break;\n                    case "fill":\n                        var isURL = Str(value).match(R._ISURL);\n                        if (isURL) {\n                            el = $("pattern");\n                            var ig = $("image");\n                            el.id = R.createUUID();\n                            $(el, {x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1});\n                            $(ig, {x: 0, y: 0, "xlink:href": isURL[1]});\n                            el.appendChild(ig);\n\n                            (function (el) {\n                                R._preload(isURL[1], function () {\n                                    var w = this.offsetWidth,\n                                        h = this.offsetHeight;\n                                    $(el, {width: w, height: h});\n                                    $(ig, {width: w, height: h});\n                                });\n                            })(el);\n                            o.paper.defs.appendChild(el);\n                            $(node, {fill: "url(#" + el.id + ")"});\n                            o.pattern = el;\n                            o.pattern && updatePosition(o);\n                            break;\n                        }\n                        var clr = R.getRGB(value);\n                        if (!clr.error) {\n                            delete params.gradient;\n                            delete attrs.gradient;\n                            !R.is(attrs.opacity, "undefined") &&\n                                R.is(params.opacity, "undefined") &&\n                                $(node, {opacity: attrs.opacity});\n                            !R.is(attrs["fill-opacity"], "undefined") &&\n                                R.is(params["fill-opacity"], "undefined") &&\n                                $(node, {"fill-opacity": attrs["fill-opacity"]});\n                        } else if ((o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value)) {\n                            if ("opacity" in attrs || "fill-opacity" in attrs) {\n                                var gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\\(#|\\)$/g, E));\n                                if (gradient) {\n                                    var stops = gradient.getElementsByTagName("stop");\n                                    $(stops[stops.length - 1], {"stop-opacity": ("opacity" in attrs ? attrs.opacity : 1) * ("fill-opacity" in attrs ? attrs["fill-opacity"] : 1)});\n                                }\n                            }\n                            attrs.gradient = value;\n                            attrs.fill = "none";\n                            break;\n                        }\n                        clr[has]("opacity") && $(node, {"fill-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                    case "stroke":\n                        clr = R.getRGB(value);\n                        node.setAttribute(att, clr.hex);\n                        att == "stroke" && clr[has]("opacity") && $(node, {"stroke-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                        if (att == "stroke" && o._.arrows) {\n                            "startString" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case "gradient":\n                        (o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value);\n                        break;\n                    case "opacity":\n                        if (attrs.gradient && !attrs[has]("stroke-opacity")) {\n                            $(node, {"stroke-opacity": value > 1 ? value / 100 : value});\n                        }\n                        // fall\n                    case "fill-opacity":\n                        if (attrs.gradient) {\n                            gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\\(#|\\)$/g, E));\n                            if (gradient) {\n                                stops = gradient.getElementsByTagName("stop");\n                                $(stops[stops.length - 1], {"stop-opacity": value});\n                            }\n                            break;\n                        }\n                    default:\n                        att == "font-size" && (value = toInt(value, 10) + "px");\n                        var cssrule = att.replace(/(\\-.)/g, function (w) {\n                            return w.substring(1).toUpperCase();\n                        });\n                        node.style[cssrule] = value;\n                        o._.dirty = 1;\n                        node.setAttribute(att, value);\n                        break;\n                }\n            }\n        }\n\n        tuneText(o, params);\n        node.style.visibility = vis;\n    },\n    leading = 1.2,\n    tuneText = function (el, params) {\n        if (el.type != "text" || !(params[has]("text") || params[has]("font") || params[has]("font-size") || params[has]("x") || params[has]("y"))) {\n            return;\n        }\n        var a = el.attrs,\n            node = el.node,\n            fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue("font-size"), 10) : 10;\n\n        if (params[has]("text")) {\n            a.text = params.text;\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n            var texts = Str(params.text).split("\\n"),\n                tspans = [],\n                tspan;\n            for (var i = 0, ii = texts.length; i < ii; i++) {\n                tspan = $("tspan");\n                i && $(tspan, {dy: fontSize * leading, x: a.x});\n                tspan.appendChild(R._g.doc.createTextNode(texts[i]));\n                node.appendChild(tspan);\n                tspans[i] = tspan;\n            }\n        } else {\n            tspans = node.getElementsByTagName("tspan");\n            for (i = 0, ii = tspans.length; i < ii; i++) if (i) {\n                $(tspans[i], {dy: fontSize * leading, x: a.x});\n            } else {\n                $(tspans[0], {dy: 0});\n            }\n        }\n        $(node, {x: a.x, y: a.y});\n        el._.dirty = 1;\n        var bb = el._getBBox(), \n            dif = (bb.width == 0) ? 2.5 : a.y - (bb.y + bb.height / 2);  \n        dif && R.is(dif, "finite") && $(tspans[0], {dy: dif});\n    },\n    getRealNode = function (node) {\n        if (node.parentNode && node.parentNode.tagName.toLowerCase() === "a") {\n            return node.parentNode;\n        } else {\n            return node;\n        }\n    },\n    Element = function (node, svg) {\n        var X = 0,\n            Y = 0;\n        /*\\\n         * Element.node\n         [ property (object) ]\n         **\n         * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\n         **\n         * Note: Dont mess with it.\n         > Usage\n         | // draw a circle at coordinate 10,10 with radius of 10\n         | var c = paper.circle(10, 10, 10);\n         | c.node.onclick = function () {\n         |     c.attr("fill", "red");\n         | };\n        \\*/\n        this[0] = this.node = node;\n        /*\\\n         * Element.raphael\n         [ property (object) ]\n         **\n         * Internal reference to @Raphael object. In case it is not available.\n         > Usage\n         | Raphael.el.red = function () {\n         |     var hsb = this.paper.raphael.rgb2hsb(this.attr("fill"));\n         |     hsb.h = 1;\n         |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});\n         | }\n        \\*/\n        node.raphael = true;\n        /*\\\n         * Element.id\n         [ property (number) ]\n         **\n         * Unique id of the element. Especially useful when you want to listen to events of the element,\n         * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.\n        \\*/\n        this.id = guid();\n        node.raphaelid = this.id;\n\n        /**\n        * Method that returns a 5 letter/digit id, enough for 36^5 = 60466176 elements\n        * @returns {string} id\n        */\n        function guid() {\n            return ("0000" + (Math.random()*Math.pow(36,5) << 0).toString(36)).slice(-5);\n        }\n\n        this.matrix = R.matrix();\n        this.realPath = null;\n        /*\\\n         * Element.paper\n         [ property (object) ]\n         **\n         * Internal reference to paper where object drawn. Mainly for use in plugins and element extensions.\n         > Usage\n         | Raphael.el.cross = function () {\n         |     this.attr({fill: "red"});\n         |     this.paper.path("M10,10L50,50M50,10L10,50")\n         |         .attr({stroke: "red"});\n         | }\n        \\*/\n        this.paper = svg;\n        this.attrs = this.attrs || {};\n        this._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            deg: 0,\n            dx: 0,\n            dy: 0,\n            dirty: 1\n        };\n        !svg.bottom && (svg.bottom = this);\n        /*\\\n         * Element.prev\n         [ property (object) ]\n         **\n         * Reference to the previous element in the hierarchy.\n        \\*/\n        this.prev = svg.top;\n        svg.top && (svg.top.next = this);\n        svg.top = this;\n        /*\\\n         * Element.next\n         [ property (object) ]\n         **\n         * Reference to the next element in the hierarchy.\n        \\*/\n        this.next = null;\n    },\n    elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n\n    R._engine.path = function (pathString, SVG) {\n        var el = $("path");\n        SVG.canvas && SVG.canvas.appendChild(el);\n        var p = new Element(el, SVG);\n        p.type = "path";\n        setFillAndStroke(p, {\n            fill: "none",\n            stroke: "#000",\n            path: pathString\n        });\n        return p;\n    };\n    /*\\\n     * Element.rotate\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds rotation by given angle around given point to the list of\n     * transformations of the element.\n     > Parameters\n     - deg (number) angle in degrees\n     - cx (number) #optional x coordinate of the centre of rotation\n     - cy (number) #optional y coordinate of the centre of rotation\n     * If cx & cy arent specified centre of the shape is used as a point of rotation.\n     = (object) @Element\n    \\*/\n    elproto.rotate = function (deg, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        this.transform(this._.transform.concat([["r", deg, cx, cy]]));\n        return this;\n    };\n    /*\\\n     * Element.scale\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds scale by given amount relative to given point to the list of\n     * transformations of the element.\n     > Parameters\n     - sx (number) horisontal scale amount\n     - sy (number) vertical scale amount\n     - cx (number) #optional x coordinate of the centre of scale\n     - cy (number) #optional y coordinate of the centre of scale\n     * If cx & cy arent specified centre of the shape is used instead.\n     = (object) @Element\n    \\*/\n    elproto.scale = function (sx, sy, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));\n        return this;\n    };\n    /*\\\n     * Element.translate\n     [ method ]\n     **\n     * Deprecated! Use @Element.transform instead.\n     * Adds translation by given amount to the list of transformations of the element.\n     > Parameters\n     - dx (number) horisontal shift\n     - dy (number) vertical shift\n     = (object) @Element\n    \\*/\n    elproto.translate = function (dx, dy) {\n        if (this.removed) {\n            return this;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        this.transform(this._.transform.concat([["t", dx, dy]]));\n        return this;\n    };\n    /*\\\n     * Element.transform\n     [ method ]\n     **\n     * Adds transformation to the element which is separate to other attributes,\n     * i.e. translation doesnt change `x` or `y` of the rectange. The format\n     * of transformation string is similar to the path string syntax:\n     | "t100,100r30,100,100s2,2,100,100r45s1.5"\n     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for\n     * scale and `m` is for matrix.\n     *\n     * There are also alternative absolute translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.\n     *\n     * So, the example line above could be read like translate by 100, 100; rotate 30 around 100, 100; scale twice around 100, 100;\n     * rotate 45 around centre; scale 1.5 times relative to centre. As you can see rotate and scale commands have origin\n     * coordinates as optional parameters, the default is the centre point of the element.\n     * Matrix accepts six parameters.\n     > Usage\n     | var el = paper.rect(10, 20, 300, 200);\n     | // translate 100, 100, rotate 45, translate -100, 0\n     | el.transform("t100,100r45t-100,0");\n     | // if you want you can append or prepend transformations\n     | el.transform("...t50,50");\n     | el.transform("s2...");\n     | // or even wrap\n     | el.transform("t50,50...t-50-50");\n     | // to reset transformation call method with empty string\n     | el.transform("");\n     | // to get current value call it without parameters\n     | console.log(el.transform());\n     > Parameters\n     - tstr (string) #optional transformation string\n     * If tstr isnt specified\n     = (string) current transformation string\n     * else\n     = (object) @Element\n    \\*/\n    elproto.transform = function (tstr) {\n        var _ = this._;\n        if (tstr == null) {\n            return _.transform;\n        }\n        R._extractTransform(this, tstr);\n\n        this.clip && $(this.clip, {transform: this.matrix.invert()});\n        this.pattern && updatePosition(this);\n        this.node && $(this.node, {transform: this.matrix});\n\n        if (_.sx != 1 || _.sy != 1) {\n            var sw = this.attrs[has]("stroke-width") ? this.attrs["stroke-width"] : 1;\n            this.attr({"stroke-width": sw});\n        }\n\n        return this;\n    };\n    /*\\\n     * Element.hide\n     [ method ]\n     **\n     * Makes element invisible. See @Element.show.\n     = (object) @Element\n    \\*/\n    elproto.hide = function () {\n        if(!this.removed) this.node.style.display = "none";\n        return this;\n    };\n    /*\\\n     * Element.show\n     [ method ]\n     **\n     * Makes element visible. See @Element.hide.\n     = (object) @Element\n    \\*/\n    elproto.show = function () {\n        if(!this.removed) this.node.style.display = "";\n        return this;\n    };\n    /*\\\n     * Element.remove\n     [ method ]\n     **\n     * Removes element from the paper.\n    \\*/\n    elproto.remove = function () {\n        var node = getRealNode(this.node);\n        if (this.removed || !node.parentNode) {\n            return;\n        }\n        var paper = this.paper;\n        paper.__set__ && paper.__set__.exclude(this);\n        eve.unbind("raphael.*.*." + this.id);\n        if (this.gradient) {\n            paper.defs.removeChild(this.gradient);\n        }\n        R._tear(this, paper);\n\n        node.parentNode.removeChild(node);\n\n        // Remove custom data for element\n        this.removeData();\n\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    elproto._getBBox = function () {\n        if (this.node.style.display == "none") {\n            this.show();\n            var hide = true;\n        }\n        var canvasHidden = false,\n            containerStyle;\n        if (this.paper.canvas.parentElement) {\n          containerStyle = this.paper.canvas.parentElement.style;\n        } //IE10+ can\'t find parentElement\n        else if (this.paper.canvas.parentNode) {\n          containerStyle = this.paper.canvas.parentNode.style;\n        }\n\n        if(containerStyle && containerStyle.display == "none") {\n          canvasHidden = true;\n          containerStyle.display = "";\n        }\n        var bbox = {};\n        try {\n            bbox = this.node.getBBox();\n        } catch(e) {\n            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix\n            bbox = {\n                x: this.node.clientLeft,\n                y: this.node.clientTop,\n                width: this.node.clientWidth,\n                height: this.node.clientHeight\n            }\n        } finally {\n            bbox = bbox || {};\n            if(canvasHidden){\n              containerStyle.display = "none";\n            }\n        }\n        hide && this.hide();\n        return bbox;\n    };\n    /*\\\n     * Element.attr\n     [ method ]\n     **\n     * Sets the attributes of the element.\n     > Parameters\n     - attrName (string) attributes name\n     - value (string) value\n     * or\n     - params (object) object of name/value pairs\n     * or\n     - attrName (string) attributes name\n     * or\n     - attrNames (array) in this case method returns array of current values for given attribute names\n     = (object) @Element if attrsName & value or params are passed in.\n     = (...) value of the attribute if only attrsName is passed in.\n     = (array) array of values of the attribute if attrsNames is passed in.\n     = (object) object of attributes if nothing is passed in.\n     > Possible parameters\n     # <p>Please refer to the <a href="http://www.w3.org/TR/SVG/" title="The W3C Recommendation for the SVG language describes these properties in detail.">SVG specification</a> for an explanation of these parameters.</p>\n     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.\n     o clip-rect (string) comma or space separated values: x, y, width and height\n     o cursor (string) CSS type of the cursor\n     o cx (number) the x-axis coordinate of the center of the circle, or ellipse\n     o cy (number) the y-axis coordinate of the center of the circle, or ellipse\n     o fill (string) colour, gradient or image\n     o fill-opacity (number)\n     o font (string)\n     o font-family (string)\n     o font-size (number) font size in pixels\n     o font-weight (string)\n     o height (number)\n     o href (string) URL, if specified element behaves as hyperlink\n     o opacity (number)\n     o path (string) SVG path string format\n     o r (number) radius of the circle, ellipse or rounded corner on the rect\n     o rx (number) horisontal radius of the ellipse\n     o ry (number) vertical radius of the ellipse\n     o src (string) image URL, only works for @Element.image element\n     o stroke (string) stroke colour\n     o stroke-dasharray (string) [, none, `-`, `.`, `-.`, `-..`, `. `, `- `, `--`, `- .`, `--.`, `--..`]\n     o stroke-linecap (string) [`butt`, `square`, `round`]\n     o stroke-linejoin (string) [`bevel`, `round`, `miter`]\n     o stroke-miterlimit (number)\n     o stroke-opacity (number)\n     o stroke-width (number) stroke width in pixels, default is \'1\'\n     o target (string) used with href\n     o text (string) contents of the text element. Use `\\n` for multiline text\n     o text-anchor (string) [`start`, `middle`, `end`], default is `middle`\n     o title (string) will create tooltip with a given text\n     o transform (string) see @Element.transform\n     o width (number)\n     o x (number)\n     o y (number)\n     > Gradients\n     * Linear gradient format: `angle-colour[-colour[:offset]]*-colour`, example: `90-#fff-#000`  90\n     * gradient from white to black or `0-#fff-#f00:20-#000`  0 gradient from white via red (at 20%) to black.\n     *\n     * radial gradient: `r[(fx, fy)]colour[-colour[:offset]]*-colour`, example: `r#fff-#000` \n     * gradient from white to black or `r(0.25, 0.75)#fff-#000`  gradient from white to black with focus point\n     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.\n     > Path String\n     # <p>Please refer to <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a paths data attributes format are described in the SVG specification.">SVG documentation regarding path string</a>. Raphal fully supports it.</p>\n     > Colour Parsing\n     # <ul>\n     #     <li>Colour name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>\n     #     <li>#  shortened HTML colour: (<code>#000</code>, <code>#fc0</code>, etc)</li>\n     #     <li>#  full length HTML colour: (<code>#000000</code>, <code>#bd2300</code>)</li>\n     #     <li>rgb(, , )  red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>\n     #     <li>rgb(%, %, %)  same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>\n     #     <li>rgba(, , , )  red, green and blue channels values: (<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>)</li>\n     #     <li>rgba(%, %, %, %)  same as above, but in %: (<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>)</li>\n     #     <li>hsb(, , )  hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>\n     #     <li>hsb(%, %, %)  same as above, but in %</li>\n     #     <li>hsba(, , , )  same as above, but with opacity</li>\n     #     <li>hsl(, , )  almost the same as hsb, see <a href="http://en.wikipedia.org/wiki/HSL_and_HSV" title="HSL and HSV - Wikipedia, the free encyclopedia">Wikipedia page</a></li>\n     #     <li>hsl(%, %, %)  same as above, but in %</li>\n     #     <li>hsla(, , , )  same as above, but with opacity</li>\n     #     <li>Optionally for hsb and hsl you could specify hue as a degree: <code>hsl(240deg,&nbsp;1,&nbsp;.5)</code> or, if you want to go fancy, <code>hsl(240,&nbsp;1,&nbsp;.5)</code></li>\n     # </ul>\n    \\*/\n    elproto.attr = function (name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs) if (this.attrs[has](a)) {\n                res[a] = this.attrs[a];\n            }\n            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            return res;\n        }\n        if (value == null && R.is(name, "string")) {\n            if (name == "fill" && this.attrs.fill == "none" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            if (name == "transform") {\n                return this._.transform;\n            }\n            var names = name.split(separator),\n                out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.paper.customAttributes[name], "function")) {\n                    out[name] = this.paper.customAttributes[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (value == null && R.is(name, "array")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        if (value != null) {\n            var params = {};\n            params[name] = value;\n        } else if (name != null && R.is(name, "object")) {\n            params = name;\n        }\n        for (var key in params) {\n            eve("raphael.attr." + key + "." + this.id, this, params[key]);\n        }\n        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {\n            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\n            this.attrs[key] = params[key];\n            for (var subkey in par) if (par[has](subkey)) {\n                params[subkey] = par[subkey];\n            }\n        }\n        setFillAndStroke(this, params);\n        return this;\n    };\n    /*\\\n     * Element.toFront\n     [ method ]\n     **\n     * Moves the element so it is the closest to the viewers eyes, on top of other elements.\n     = (object) @Element\n    \\*/\n    elproto.toFront = function () {\n        if (this.removed) {\n            return this;\n        }\n        var node = getRealNode(this.node);\n        node.parentNode.appendChild(node);\n        var svg = this.paper;\n        svg.top != this && R._tofront(this, svg);\n        return this;\n    };\n    /*\\\n     * Element.toBack\n     [ method ]\n     **\n     * Moves the element so it is the furthest from the viewers eyes, behind other elements.\n     = (object) @Element\n    \\*/\n    elproto.toBack = function () {\n        if (this.removed) {\n            return this;\n        }\n        var node = getRealNode(this.node);\n        var parentNode = node.parentNode;\n        parentNode.insertBefore(node, parentNode.firstChild);\n        R._toback(this, this.paper);\n        var svg = this.paper;\n        return this;\n    };\n    /*\\\n     * Element.insertAfter\n     [ method ]\n     **\n     * Inserts current object after the given one.\n     = (object) @Element\n    \\*/\n    elproto.insertAfter = function (element) {\n        if (this.removed || !element) {\n            return this;\n        }\n\n        var node = getRealNode(this.node);\n        var afterNode = getRealNode(element.node || element[element.length - 1].node);\n        if (afterNode.nextSibling) {\n            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);\n        } else {\n            afterNode.parentNode.appendChild(node);\n        }\n        R._insertafter(this, element, this.paper);\n        return this;\n    };\n    /*\\\n     * Element.insertBefore\n     [ method ]\n     **\n     * Inserts current object before the given one.\n     = (object) @Element\n    \\*/\n    elproto.insertBefore = function (element) {\n        if (this.removed || !element) {\n            return this;\n        }\n\n        var node = getRealNode(this.node);\n        var beforeNode = getRealNode(element.node || element[0].node);\n        beforeNode.parentNode.insertBefore(node, beforeNode);\n        R._insertbefore(this, element, this.paper);\n        return this;\n    };\n    elproto.blur = function (size) {\n        // Experimental. No Safari support. Use it on your own risk.\n        var t = this;\n        if (+size !== 0) {\n            var fltr = $("filter"),\n                blur = $("feGaussianBlur");\n            t.attrs.blur = size;\n            fltr.id = R.createUUID();\n            $(blur, {stdDeviation: +size || 1.5});\n            fltr.appendChild(blur);\n            t.paper.defs.appendChild(fltr);\n            t._blur = fltr;\n            $(t.node, {filter: "url(#" + fltr.id + ")"});\n        } else {\n            if (t._blur) {\n                t._blur.parentNode.removeChild(t._blur);\n                delete t._blur;\n                delete t.attrs.blur;\n            }\n            t.node.removeAttribute("filter");\n        }\n        return t;\n    };\n    R._engine.circle = function (svg, x, y, r) {\n        var el = $("circle");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {cx: x, cy: y, r: r, fill: "none", stroke: "#000"};\n        res.type = "circle";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.rect = function (svg, x, y, w, h, r) {\n        var el = $("rect");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: "none", stroke: "#000"};\n        res.type = "rect";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.ellipse = function (svg, x, y, rx, ry) {\n        var el = $("ellipse");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: "none", stroke: "#000"};\n        res.type = "ellipse";\n        $(el, res.attrs);\n        return res;\n    };\n    R._engine.image = function (svg, src, x, y, w, h) {\n        var el = $("image");\n        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: "none"});\n        el.setAttributeNS(xlink, "href", src);\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {x: x, y: y, width: w, height: h, src: src};\n        res.type = "image";\n        return res;\n    };\n    R._engine.text = function (svg, x, y, text) {\n        var el = $("text");\n        svg.canvas && svg.canvas.appendChild(el);\n        var res = new Element(el, svg);\n        res.attrs = {\n            x: x,\n            y: y,\n            "text-anchor": "middle",\n            text: text,\n            "font-family": R._availableAttrs["font-family"],\n            "font-size": R._availableAttrs["font-size"],\n            stroke: "none",\n            fill: "#000"\n        };\n        res.type = "text";\n        setFillAndStroke(res, res.attrs);\n        return res;\n    };\n    R._engine.setSize = function (width, height) {\n        this.width = width || this.width;\n        this.height = height || this.height;\n        this.canvas.setAttribute("width", this.width);\n        this.canvas.setAttribute("height", this.height);\n        if (this._viewBox) {\n            this.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments),\n            container = con && con.container,\n            x = con.x,\n            y = con.y,\n            width = con.width,\n            height = con.height;\n        if (!container) {\n            throw new Error("SVG container not found.");\n        }\n        var cnvs = $("svg"),\n            css = "overflow:hidden;",\n            isFloating;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        $(cnvs, {\n            height: height,\n            version: 1.1,\n            width: width,\n            xmlns: "http://www.w3.org/2000/svg",\n            "xmlns:xlink": "http://www.w3.org/1999/xlink"\n        });\n        if (container == 1) {\n            cnvs.style.cssText = css + "position:absolute;left:" + x + "px;top:" + y + "px";\n            R._g.doc.body.appendChild(cnvs);\n            isFloating = 1;\n        } else {\n            cnvs.style.cssText = css + "position:relative";\n            if (container.firstChild) {\n                container.insertBefore(cnvs, container.firstChild);\n            } else {\n                container.appendChild(cnvs);\n            }\n        }\n        container = new R._Paper;\n        container.width = width;\n        container.height = height;\n        container.canvas = cnvs;\n        container.clear();\n        container._left = container._top = 0;\n        isFloating && (container.renderfix = function () {});\n        container.renderfix();\n        return container;\n    };\n    R._engine.setViewBox = function (x, y, w, h, fit) {\n        eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);\n        var paperSize = this.getSize(),\n            size = mmax(w / paperSize.width, h / paperSize.height),\n            top = this.top,\n            aspectRatio = fit ? "xMidYMid meet" : "xMinYMin",\n            vb,\n            sw;\n        if (x == null) {\n            if (this._vbSize) {\n                size = 1;\n            }\n            delete this._vbSize;\n            vb = "0 0 " + this.width + S + this.height;\n        } else {\n            this._vbSize = size;\n            vb = x + S + y + S + w + S + h;\n        }\n        $(this.canvas, {\n            viewBox: vb,\n            preserveAspectRatio: aspectRatio\n        });\n        while (size && top) {\n            sw = "stroke-width" in top.attrs ? top.attrs["stroke-width"] : 1;\n            top.attr({"stroke-width": sw});\n            top._.dirty = 1;\n            top._.dirtyT = 1;\n            top = top.prev;\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        return this;\n    };\n    /*\\\n     * Paper.renderfix\n     [ method ]\n     **\n     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependent\n     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.\n     * This method fixes the issue.\n     **\n       Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.\n    \\*/\n    R.prototype.renderfix = function () {\n        var cnvs = this.canvas,\n            s = cnvs.style,\n            pos;\n        try {\n            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\n        } catch (e) {\n            pos = cnvs.createSVGMatrix();\n        }\n        var left = -pos.e % 1,\n            top = -pos.f % 1;\n        if (left || top) {\n            if (left) {\n                this._left = (this._left + left) % 1;\n                s.left = this._left + "px";\n            }\n            if (top) {\n                this._top = (this._top + top) % 1;\n                s.top = this._top + "px";\n            }\n        }\n    };\n    /*\\\n     * Paper.clear\n     [ method ]\n     **\n     * Clears the paper, i.e. removes all the elements.\n    \\*/\n    R.prototype.clear = function () {\n        R.eve("raphael.clear", this);\n        var c = this.canvas;\n        while (c.firstChild) {\n            c.removeChild(c.firstChild);\n        }\n        this.bottom = this.top = null;\n        (this.desc = $("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\\xebl " + R.version));\n        c.appendChild(this.desc);\n        c.appendChild(this.defs = $("defs"));\n    };\n    /*\\\n     * Paper.remove\n     [ method ]\n     **\n     * Removes the paper from the DOM.\n    \\*/\n    R.prototype.remove = function () {\n        eve("raphael.remove", this);\n        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n    };\n    var setproto = R.st;\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC5zdmcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwuc3ZnLmpzP2Q4YzciXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCJdLCBmdW5jdGlvbihSKSB7XG4gICAgaWYgKFIgJiYgIVIuc3ZnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGFzID0gXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICB0b0ludCA9IHBhcnNlSW50LFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgbW1heCA9IG1hdGgubWF4LFxuICAgICAgICBhYnMgPSBtYXRoLmFicyxcbiAgICAgICAgcG93ID0gbWF0aC5wb3csXG4gICAgICAgIHNlcGFyYXRvciA9IC9bLCBdKy8sXG4gICAgICAgIGV2ZSA9IFIuZXZlLFxuICAgICAgICBFID0gXCJcIixcbiAgICAgICAgUyA9IFwiIFwiO1xuICAgIHZhciB4bGluayA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICAgICAgICBtYXJrZXJzID0ge1xuICAgICAgICAgICAgYmxvY2s6IFwiTTUsMCAwLDIuNSA1LDV6XCIsXG4gICAgICAgICAgICBjbGFzc2ljOiBcIk01LDAgMCwyLjUgNSw1IDMuNSwzIDMuNSwyelwiLFxuICAgICAgICAgICAgZGlhbW9uZDogXCJNMi41LDAgNSwyLjUgMi41LDUgMCwyLjV6XCIsXG4gICAgICAgICAgICBvcGVuOiBcIk02LDEgMSwzLjUgNiw2XCIsXG4gICAgICAgICAgICBvdmFsOiBcIk0yLjUsMEEyLjUsMi41LDAsMCwxLDIuNSw1IDIuNSwyLjUsMCwwLDEsMi41LDB6XCJcbiAgICAgICAgfSxcbiAgICAgICAgbWFya2VyQ291bnRlciA9IHt9O1xuICAgIFIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAgXCJZb3VyIGJyb3dzZXIgc3VwcG9ydHMgU1ZHLlxcbllvdSBhcmUgcnVubmluZyBSYXBoYVxceGVibCBcIiArIHRoaXMudmVyc2lvbjtcbiAgICB9O1xuICAgIHZhciAkID0gZnVuY3Rpb24gKGVsLCBhdHRyKSB7XG4gICAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBlbCA9ICQoZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGF0dHIpIGlmIChhdHRyW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3Vic3RyaW5nKDAsIDYpID09IFwieGxpbms6XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmssIGtleS5zdWJzdHJpbmcoNiksIFN0cihhdHRyW2tleV0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBTdHIoYXR0cltrZXldKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwgPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBlbCk7XG4gICAgICAgICAgICBlbC5zdHlsZSAmJiAoZWwuc3R5bGUud2Via2l0VGFwSGlnaGxpZ2h0Q29sb3IgPSBcInJnYmEoMCwwLDAsMClcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH0sXG4gICAgYWRkR3JhZGllbnRGaWxsID0gZnVuY3Rpb24gKGVsZW1lbnQsIGdyYWRpZW50KSB7XG4gICAgICAgIHZhciB0eXBlID0gXCJsaW5lYXJcIixcbiAgICAgICAgICAgIGlkID0gZWxlbWVudC5pZCArIGdyYWRpZW50LFxuICAgICAgICAgICAgZnggPSAuNSwgZnkgPSAuNSxcbiAgICAgICAgICAgIG8gPSBlbGVtZW50Lm5vZGUsXG4gICAgICAgICAgICBTVkcgPSBlbGVtZW50LnBhcGVyLFxuICAgICAgICAgICAgcyA9IG8uc3R5bGUsXG4gICAgICAgICAgICBlbCA9IFIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgZ3JhZGllbnQgPSBTdHIoZ3JhZGllbnQpLnJlcGxhY2UoUi5fcmFkaWFsX2dyYWRpZW50LCBmdW5jdGlvbiAoYWxsLCBfZngsIF9meSkge1xuICAgICAgICAgICAgICAgIHR5cGUgPSBcInJhZGlhbFwiO1xuICAgICAgICAgICAgICAgIGlmIChfZnggJiYgX2Z5KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ4ID0gdG9GbG9hdChfZngpO1xuICAgICAgICAgICAgICAgICAgICBmeSA9IHRvRmxvYXQoX2Z5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpciA9ICgoZnkgPiAuNSkgKiAyIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHBvdyhmeCAtIC41LCAyKSArIHBvdyhmeSAtIC41LCAyKSA+IC4yNSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGZ5ID0gbWF0aC5zcXJ0KC4yNSAtIHBvdyhmeCAtIC41LCAyKSkgKiBkaXIgKyAuNSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ5ICE9IC41ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoZnkgPSBmeS50b0ZpeGVkKDUpIC0gMWUtNSAqIGRpcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBFO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBncmFkaWVudCA9IGdyYWRpZW50LnNwbGl0KC9cXHMqXFwtXFxzKi8pO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJsaW5lYXJcIikge1xuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IGdyYWRpZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgYW5nbGUgPSAtdG9GbG9hdChhbmdsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGFuZ2xlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZlY3RvciA9IFswLCAwLCBtYXRoLmNvcyhSLnJhZChhbmdsZSkpLCBtYXRoLnNpbihSLnJhZChhbmdsZSkpXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gMSAvIChtbWF4KGFicyh2ZWN0b3JbMl0pLCBhYnModmVjdG9yWzNdKSkgfHwgMSk7XG4gICAgICAgICAgICAgICAgdmVjdG9yWzJdICo9IG1heDtcbiAgICAgICAgICAgICAgICB2ZWN0b3JbM10gKj0gbWF4O1xuICAgICAgICAgICAgICAgIGlmICh2ZWN0b3JbMl0gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclswXSA9IC12ZWN0b3JbMl07XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclsyXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2ZWN0b3JbM10gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclsxXSA9IC12ZWN0b3JbM107XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvclszXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRvdHMgPSBSLl9wYXJzZURvdHMoZ3JhZGllbnQpO1xuICAgICAgICAgICAgaWYgKCFkb3RzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZCA9IGlkLnJlcGxhY2UoL1tcXChcXClcXHMsXFx4YjAjXS9nLCBcIl9cIik7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LmdyYWRpZW50ICYmIGlkICE9IGVsZW1lbnQuZ3JhZGllbnQuaWQpIHtcbiAgICAgICAgICAgICAgICBTVkcuZGVmcy5yZW1vdmVDaGlsZChlbGVtZW50LmdyYWRpZW50KTtcbiAgICAgICAgICAgICAgICBkZWxldGUgZWxlbWVudC5ncmFkaWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgZWwgPSAkKHR5cGUgKyBcIkdyYWRpZW50XCIsIHtpZDogaWR9KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmdyYWRpZW50ID0gZWw7XG4gICAgICAgICAgICAgICAgJChlbCwgdHlwZSA9PSBcInJhZGlhbFwiID8ge1xuICAgICAgICAgICAgICAgICAgICBmeDogZngsXG4gICAgICAgICAgICAgICAgICAgIGZ5OiBmeVxuICAgICAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgICAgIHgxOiB2ZWN0b3JbMF0sXG4gICAgICAgICAgICAgICAgICAgIHkxOiB2ZWN0b3JbMV0sXG4gICAgICAgICAgICAgICAgICAgIHgyOiB2ZWN0b3JbMl0sXG4gICAgICAgICAgICAgICAgICAgIHkyOiB2ZWN0b3JbM10sXG4gICAgICAgICAgICAgICAgICAgIGdyYWRpZW50VHJhbnNmb3JtOiBlbGVtZW50Lm1hdHJpeC5pbnZlcnQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFNWRy5kZWZzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkb3RzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoJChcInN0b3BcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBkb3RzW2ldLm9mZnNldCA/IGRvdHNbaV0ub2Zmc2V0IDogaSA/IFwiMTAwJVwiIDogXCIwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdG9wLWNvbG9yXCI6IGRvdHNbaV0uY29sb3IgfHwgXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0b3Atb3BhY2l0eVwiOiBpc0Zpbml0ZShkb3RzW2ldLm9wYWNpdHkpID8gZG90c1tpXS5vcGFjaXR5IDogMVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICQobywge1xuICAgICAgICAgICAgZmlsbDogZmlsbHVybChpZCksXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgXCJmaWxsLW9wYWNpdHlcIjogMVxuICAgICAgICB9KTtcbiAgICAgICAgcy5maWxsID0gRTtcbiAgICAgICAgcy5vcGFjaXR5ID0gMTtcbiAgICAgICAgcy5maWxsT3BhY2l0eSA9IDE7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0sXG4gICAgaXNJRTlvcjEwID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGU7XG4gICAgICByZXR1cm4gbW9kZSAmJiAobW9kZSA9PT0gOSB8fCBtb2RlID09PSAxMCk7XG4gICAgfSxcbiAgICBmaWxsdXJsID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBpZiAoaXNJRTlvcjEwKCkpIHtcbiAgICAgICAgICByZXR1cm4gXCJ1cmwoJyNcIiArIGlkICsgXCInKVwiO1xuICAgICAgfVxuICAgICAgdmFyIGxvY2F0aW9uID0gZG9jdW1lbnQubG9jYXRpb247XG4gICAgICB2YXIgbG9jYXRpb25TdHJpbmcgPSAoXG4gICAgICAgICAgbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICtcbiAgICAgICAgICBsb2NhdGlvbi5ob3N0ICtcbiAgICAgICAgICBsb2NhdGlvbi5wYXRobmFtZSArXG4gICAgICAgICAgbG9jYXRpb24uc2VhcmNoXG4gICAgICApO1xuICAgICAgcmV0dXJuIFwidXJsKCdcIiArIGxvY2F0aW9uU3RyaW5nICsgXCIjXCIgKyBpZCArIFwiJylcIjtcbiAgICB9LFxuICAgIHVwZGF0ZVBvc2l0aW9uID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIGJib3ggPSBvLmdldEJCb3goMSk7XG4gICAgICAgICQoby5wYXR0ZXJuLCB7cGF0dGVyblRyYW5zZm9ybTogby5tYXRyaXguaW52ZXJ0KCkgKyBcIiB0cmFuc2xhdGUoXCIgKyBiYm94LnggKyBcIixcIiArIGJib3gueSArIFwiKVwifSk7XG4gICAgfSxcbiAgICBhZGRBcnJvdyA9IGZ1bmN0aW9uIChvLCB2YWx1ZSwgaXNFbmQpIHtcbiAgICAgICAgaWYgKG8udHlwZSA9PSBcInBhdGhcIikge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFN0cih2YWx1ZSkudG9Mb3dlckNhc2UoKS5zcGxpdChcIi1cIiksXG4gICAgICAgICAgICAgICAgcCA9IG8ucGFwZXIsXG4gICAgICAgICAgICAgICAgc2UgPSBpc0VuZCA/IFwiZW5kXCIgOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgbm9kZSA9IG8ubm9kZSxcbiAgICAgICAgICAgICAgICBhdHRycyA9IG8uYXR0cnMsXG4gICAgICAgICAgICAgICAgc3Ryb2tlID0gYXR0cnNbXCJzdHJva2Utd2lkdGhcIl0sXG4gICAgICAgICAgICAgICAgaSA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiY2xhc3NpY1wiLFxuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgZHgsXG4gICAgICAgICAgICAgICAgcmVmWCxcbiAgICAgICAgICAgICAgICBhdHRyLFxuICAgICAgICAgICAgICAgIHcgPSAzLFxuICAgICAgICAgICAgICAgIGggPSAzLFxuICAgICAgICAgICAgICAgIHQgPSA1O1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWVzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2xhc3NpY1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3ZhbFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3BlblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9uZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwid2lkZVwiOiBoID0gNTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYXJyb3dcIjogaCA9IDI7IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibG9uZ1wiOiB3ID0gNTsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzaG9ydFwiOiB3ID0gMjsgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJvcGVuXCIpIHtcbiAgICAgICAgICAgICAgICB3ICs9IDI7XG4gICAgICAgICAgICAgICAgaCArPSAyO1xuICAgICAgICAgICAgICAgIHQgKz0gMjtcbiAgICAgICAgICAgICAgICBkeCA9IDE7XG4gICAgICAgICAgICAgICAgcmVmWCA9IGlzRW5kID8gNCA6IDE7XG4gICAgICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogYXR0cnMuc3Ryb2tlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVmWCA9IGR4ID0gdyAvIDI7XG4gICAgICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogYXR0cnMuc3Ryb2tlLFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvLl8uYXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG8uXy5hcnJvd3MuZW5kUGF0aCAmJiBtYXJrZXJDb3VudGVyW28uXy5hcnJvd3MuZW5kUGF0aF0tLTtcbiAgICAgICAgICAgICAgICAgICAgby5fLmFycm93cy5lbmRNYXJrZXIgJiYgbWFya2VyQ291bnRlcltvLl8uYXJyb3dzLmVuZE1hcmtlcl0tLTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvLl8uYXJyb3dzLnN0YXJ0UGF0aCAmJiBtYXJrZXJDb3VudGVyW28uXy5hcnJvd3Muc3RhcnRQYXRoXS0tO1xuICAgICAgICAgICAgICAgICAgICBvLl8uYXJyb3dzLnN0YXJ0TWFya2VyICYmIG1hcmtlckNvdW50ZXJbby5fLmFycm93cy5zdGFydE1hcmtlcl0tLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3MgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlICE9IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGhJZCA9IFwicmFwaGFlbC1tYXJrZXItXCIgKyB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJJZCA9IFwicmFwaGFlbC1tYXJrZXItXCIgKyBzZSArIHR5cGUgKyB3ICsgaCArIFwiLW9ialwiICsgby5pZDtcbiAgICAgICAgICAgICAgICBpZiAoIVIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKHBhdGhJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZzLmFwcGVuZENoaWxkKCQoJChcInBhdGhcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLWxpbmVjYXBcIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZDogbWFya2Vyc1t0eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXRoSWRcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb3VudGVyW3BhdGhJZF0gPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNvdW50ZXJbcGF0aElkXSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gUi5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQobWFya2VySWQpLFxuICAgICAgICAgICAgICAgICAgICB1c2U7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyID0gJCgkKFwibWFya2VyXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogbWFya2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJIZWlnaHQ6IGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJXaWR0aDogdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudDogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZYOiByZWZYLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmWTogaCAvIDJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHVzZSA9ICQoJChcInVzZVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4bGluazpocmVmXCI6IFwiI1wiICsgcGF0aElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAoaXNFbmQgPyBcInJvdGF0ZSgxODAgXCIgKyB3IC8gMiArIFwiIFwiICsgaCAvIDIgKyBcIikgXCIgOiBFKSArIFwic2NhbGUoXCIgKyB3IC8gdCArIFwiLFwiICsgaCAvIHQgKyBcIilcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6ICgxIC8gKCh3IC8gdCArIGggLyB0KSAvIDIpKS50b0ZpeGVkKDQpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuYXBwZW5kQ2hpbGQodXNlKTtcbiAgICAgICAgICAgICAgICAgICAgcC5kZWZzLmFwcGVuZENoaWxkKG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNvdW50ZXJbbWFya2VySWRdID0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJDb3VudGVyW21hcmtlcklkXSsrO1xuICAgICAgICAgICAgICAgICAgICB1c2UgPSBtYXJrZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ1c2VcIilbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQodXNlLCBhdHRyKTtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBkeCAqICh0eXBlICE9IFwiZGlhbW9uZFwiICYmIHR5cGUgIT0gXCJvdmFsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gby5fLmFycm93cy5zdGFydGR4ICogc3Ryb2tlIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIHRvID0gUi5nZXRUb3RhbExlbmd0aChhdHRycy5wYXRoKSAtIGRlbHRhICogc3Ryb2tlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBkZWx0YSAqIHN0cm9rZTtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gKG8uXy5hcnJvd3MuZW5kZHggKiBzdHJva2UgfHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF0dHIgPSB7fTtcbiAgICAgICAgICAgICAgICBhdHRyW1wibWFya2VyLVwiICsgc2VdID0gXCJ1cmwoI1wiICsgbWFya2VySWQgKyBcIilcIjtcbiAgICAgICAgICAgICAgICBpZiAodG8gfHwgZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyLmQgPSBSLmdldFN1YnBhdGgoYXR0cnMucGF0aCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKG5vZGUsIGF0dHIpO1xuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3Nbc2UgKyBcIlBhdGhcIl0gPSBwYXRoSWQ7XG4gICAgICAgICAgICAgICAgby5fLmFycm93c1tzZSArIFwiTWFya2VyXCJdID0gbWFya2VySWQ7XG4gICAgICAgICAgICAgICAgby5fLmFycm93c1tzZSArIFwiZHhcIl0gPSBkZWx0YTtcbiAgICAgICAgICAgICAgICBvLl8uYXJyb3dzW3NlICsgXCJUeXBlXCJdID0gdHlwZTtcbiAgICAgICAgICAgICAgICBvLl8uYXJyb3dzW3NlICsgXCJTdHJpbmdcIl0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBvLl8uYXJyb3dzLnN0YXJ0ZHggKiBzdHJva2UgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gZnJvbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSBSLmdldFRvdGFsTGVuZ3RoKGF0dHJzLnBhdGgpIC0gKG8uXy5hcnJvd3MuZW5kZHggKiBzdHJva2UgfHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG8uXy5hcnJvd3Nbc2UgKyBcIlBhdGhcIl0gJiYgJChub2RlLCB7ZDogUi5nZXRTdWJwYXRoKGF0dHJzLnBhdGgsIGZyb20sIHRvKX0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJQYXRoXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJNYXJrZXJcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlIG8uXy5hcnJvd3Nbc2UgKyBcImR4XCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJUeXBlXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvLl8uYXJyb3dzW3NlICsgXCJTdHJpbmdcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGF0dHIgaW4gbWFya2VyQ291bnRlcikgaWYgKG1hcmtlckNvdW50ZXJbaGFzXShhdHRyKSAmJiAhbWFya2VyQ291bnRlclthdHRyXSkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gUi5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQoYXR0cik7XG4gICAgICAgICAgICAgICAgaXRlbSAmJiBpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRhc2hhcnJheSA9IHtcbiAgICAgICAgXCItXCI6IFszLCAxXSxcbiAgICAgICAgXCIuXCI6IFsxLCAxXSxcbiAgICAgICAgXCItLlwiOiBbMywgMSwgMSwgMV0sXG4gICAgICAgIFwiLS4uXCI6IFszLCAxLCAxLCAxLCAxLCAxXSxcbiAgICAgICAgXCIuIFwiOiBbMSwgM10sXG4gICAgICAgIFwiLSBcIjogWzQsIDNdLFxuICAgICAgICBcIi0tXCI6IFs4LCAzXSxcbiAgICAgICAgXCItIC5cIjogWzQsIDMsIDEsIDNdLFxuICAgICAgICBcIi0tLlwiOiBbOCwgMywgMSwgM10sXG4gICAgICAgIFwiLS0uLlwiOiBbOCwgMywgMSwgMywgMSwgM11cbiAgICB9LFxuICAgIGFkZERhc2hlcyA9IGZ1bmN0aW9uIChvLCB2YWx1ZSwgcGFyYW1zKSB7XG4gICAgICAgIHZhbHVlID0gZGFzaGFycmF5W1N0cih2YWx1ZSkudG9Mb3dlckNhc2UoKV07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gby5hdHRyc1tcInN0cm9rZS13aWR0aFwiXSB8fCBcIjFcIixcbiAgICAgICAgICAgICAgICBidXR0ID0ge3JvdW5kOiB3aWR0aCwgc3F1YXJlOiB3aWR0aCwgYnV0dDogMH1bby5hdHRyc1tcInN0cm9rZS1saW5lY2FwXCJdIHx8IHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdXSB8fCAwLFxuICAgICAgICAgICAgICAgIGRhc2hlcyA9IFtdLFxuICAgICAgICAgICAgICAgIGkgPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgZGFzaGVzW2ldID0gdmFsdWVbaV0gKiB3aWR0aCArICgoaSAlIDIpID8gMSA6IC0xKSAqIGJ1dHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKG8ubm9kZSwge1wic3Ryb2tlLWRhc2hhcnJheVwiOiBkYXNoZXMuam9pbihcIixcIil9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAkKG8ubm9kZSwge1wic3Ryb2tlLWRhc2hhcnJheVwiOiBcIm5vbmVcIn0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXRGaWxsQW5kU3Ryb2tlID0gZnVuY3Rpb24gKG8sIHBhcmFtcykge1xuICAgICAgICB2YXIgbm9kZSA9IG8ubm9kZSxcbiAgICAgICAgICAgIGF0dHJzID0gby5hdHRycyxcbiAgICAgICAgICAgIHZpcyA9IG5vZGUuc3R5bGUudmlzaWJpbGl0eTtcbiAgICAgICAgbm9kZS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgZm9yICh2YXIgYXR0IGluIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHBhcmFtc1toYXNdKGF0dCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIVIuX2F2YWlsYWJsZUF0dHJzW2hhc10oYXR0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2F0dF07XG4gICAgICAgICAgICAgICAgYXR0cnNbYXR0XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJibHVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBvLmJsdXIodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aXRsZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRpdGxlXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIDx0aXRsZT4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGUubGVuZ3RoICYmICh0aXRsZSA9IHRpdGxlWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZS5maXJzdENoaWxkLm5vZGVWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkKFwidGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZENoaWxkKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJocmVmXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0YXJnZXRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbiA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbi50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gXCJhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGwgPSAkKFwiYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbi5pbnNlcnRCZWZvcmUoaGwsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhsLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuID0gaGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ID09IFwidGFyZ2V0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbi5zZXRBdHRyaWJ1dGVOUyh4bGluaywgXCJzaG93XCIsIHZhbHVlID09IFwiYmxhbmtcIiA/IFwibmV3XCIgOiB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBuLnNldEF0dHJpYnV0ZU5TKHhsaW5rLCBhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3Vyc29yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmN1cnNvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG8udHJhbnNmb3JtKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3ctc3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFycm93KG8sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3ctZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRBcnJvdyhvLCB2YWx1ZSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNsaXAtcmVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBTdHIodmFsdWUpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2xpcCAmJiBvLmNsaXAucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8uY2xpcC5wYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSAkKFwiY2xpcFBhdGhcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjID0gJChcInJlY3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHJjLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHJlY3RbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHJlY3RbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0WzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3RbM11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChyYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wYXBlci5kZWZzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcImNsaXAtcGF0aFwiOiBcInVybCgjXCIgKyBlbC5pZCArIFwiKVwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jbGlwID0gcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSBub2RlLmdldEF0dHJpYnV0ZShcImNsaXAtcGF0aFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IFIuX2cuZG9jLmdldEVsZW1lbnRCeUlkKHBhdGgucmVwbGFjZSgvKF51cmxcXCgjfFxcKSQpL2csIEUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcCAmJiBjbGlwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge1wiY2xpcC1wYXRoXCI6IEV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG8uY2xpcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGF0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcInBhdGhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge2Q6IHZhbHVlID8gYXR0cnMucGF0aCA9IFIuX3BhdGhUb0Fic29sdXRlKHZhbHVlKSA6IFwiTTAsMFwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5fLmFycm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXJ0U3RyaW5nXCIgaW4gby5fLmFycm93cyAmJiBhZGRBcnJvdyhvLCBvLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmRTdHJpbmdcIiBpbiBvLl8uYXJyb3dzICYmIGFkZEFycm93KG8sIG8uXy5hcnJvd3MuZW5kU3RyaW5nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIndpZHRoXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cnMuZngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHQgPSBcInhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF0dHJzLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmZ4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAtYXR0cnMueCAtIChhdHRycy53aWR0aCB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ID09IFwicnhcIiAmJiBvLnR5cGUgPT0gXCJyZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImN4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucGF0dGVybiAmJiB1cGRhdGVQb3NpdGlvbihvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhlaWdodFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZGlydHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmZ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0ID0gXCJ5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhdHRycy55O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRycy5meSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gLWF0dHJzLnkgLSAoYXR0cnMuaGVpZ2h0IHx8IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicnlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQgPT0gXCJyeVwiICYmIG8udHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3lcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5wYXR0ZXJuICYmIHVwZGF0ZVBvc2l0aW9uKG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8udHlwZSA9PSBcInJlY3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge3J4OiB2YWx1ZSwgcnk6IHZhbHVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3JjXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby50eXBlID09IFwiaW1hZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoeGxpbmssIFwiaHJlZlwiLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9rZS13aWR0aFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uXy5zeCAhPSAxIHx8IG8uXy5zeSAhPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgLz0gbW1heChhYnMoby5fLnN4KSwgYWJzKG8uXy5zeSkpIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyc1tcInN0cm9rZS1kYXNoYXJyYXlcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGREYXNoZXMobywgYXR0cnNbXCJzdHJva2UtZGFzaGFycmF5XCJdLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uXy5hcnJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0YXJ0U3RyaW5nXCIgaW4gby5fLmFycm93cyAmJiBhZGRBcnJvdyhvLCBvLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFN0cmluZ1wiIGluIG8uXy5hcnJvd3MgJiYgYWRkQXJyb3cobywgby5fLmFycm93cy5lbmRTdHJpbmcsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdHJva2UtZGFzaGFycmF5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGREYXNoZXMobywgdmFsdWUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1VSTCA9IFN0cih2YWx1ZSkubWF0Y2goUi5fSVNVUkwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSAkKFwicGF0dGVyblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWcgPSAkKFwiaW1hZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGVsLCB7eDogMCwgeTogMCwgcGF0dGVyblVuaXRzOiBcInVzZXJTcGFjZU9uVXNlXCIsIGhlaWdodDogMSwgd2lkdGg6IDF9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGlnLCB7eDogMCwgeTogMCwgXCJ4bGluazpocmVmXCI6IGlzVVJMWzFdfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLl9wcmVsb2FkKGlzVVJMWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IHRoaXMub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHRoaXMub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbCwge3dpZHRoOiB3LCBoZWlnaHQ6IGh9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoaWcsIHt3aWR0aDogdywgaGVpZ2h0OiBofSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhcGVyLmRlZnMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQobm9kZSwge2ZpbGw6IFwidXJsKCNcIiArIGVsLmlkICsgXCIpXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhdHRlcm4gPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnBhdHRlcm4gJiYgdXBkYXRlUG9zaXRpb24obyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xyID0gUi5nZXRSR0IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbHIuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdyYWRpZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRycy5ncmFkaWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhUi5pcyhhdHRycy5vcGFjaXR5LCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLmlzKHBhcmFtcy5vcGFjaXR5LCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtvcGFjaXR5OiBhdHRycy5vcGFjaXR5fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIVIuaXMoYXR0cnNbXCJmaWxsLW9wYWNpdHlcIl0sIFwidW5kZWZpbmVkXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuaXMocGFyYW1zW1wiZmlsbC1vcGFjaXR5XCJdLCBcInVuZGVmaW5lZFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcImZpbGwtb3BhY2l0eVwiOiBhdHRyc1tcImZpbGwtb3BhY2l0eVwiXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoby50eXBlID09IFwiY2lyY2xlXCIgfHwgby50eXBlID09IFwiZWxsaXBzZVwiIHx8IFN0cih2YWx1ZSkuY2hhckF0KCkgIT0gXCJyXCIpICYmIGFkZEdyYWRpZW50RmlsbChvLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJvcGFjaXR5XCIgaW4gYXR0cnMgfHwgXCJmaWxsLW9wYWNpdHlcIiBpbiBhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JhZGllbnQgPSBSLl9nLmRvYy5nZXRFbGVtZW50QnlJZChub2RlLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLCBFKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFkaWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3BzID0gZ3JhZGllbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChzdG9wc1tzdG9wcy5sZW5ndGggLSAxXSwge1wic3RvcC1vcGFjaXR5XCI6IChcIm9wYWNpdHlcIiBpbiBhdHRycyA/IGF0dHJzLm9wYWNpdHkgOiAxKSAqIChcImZpbGwtb3BhY2l0eVwiIGluIGF0dHJzID8gYXR0cnNbXCJmaWxsLW9wYWNpdHlcIl0gOiAxKX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLmdyYWRpZW50ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuZmlsbCA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xyW2hhc10oXCJvcGFjaXR5XCIpICYmICQobm9kZSwge1wiZmlsbC1vcGFjaXR5XCI6IGNsci5vcGFjaXR5ID4gMSA/IGNsci5vcGFjaXR5IC8gMTAwIDogY2xyLm9wYWNpdHl9KTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cm9rZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xyID0gUi5nZXRSR0IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCBjbHIuaGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dCA9PSBcInN0cm9rZVwiICYmIGNscltoYXNdKFwib3BhY2l0eVwiKSAmJiAkKG5vZGUsIHtcInN0cm9rZS1vcGFjaXR5XCI6IGNsci5vcGFjaXR5ID4gMSA/IGNsci5vcGFjaXR5IC8gMTAwIDogY2xyLm9wYWNpdHl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHQgPT0gXCJzdHJva2VcIiAmJiBvLl8uYXJyb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzdGFydFN0cmluZ1wiIGluIG8uXy5hcnJvd3MgJiYgYWRkQXJyb3cobywgby5fLmFycm93cy5zdGFydFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmRTdHJpbmdcIiBpbiBvLl8uYXJyb3dzICYmIGFkZEFycm93KG8sIG8uXy5hcnJvd3MuZW5kU3RyaW5nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ3JhZGllbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIChvLnR5cGUgPT0gXCJjaXJjbGVcIiB8fCBvLnR5cGUgPT0gXCJlbGxpcHNlXCIgfHwgU3RyKHZhbHVlKS5jaGFyQXQoKSAhPSBcInJcIikgJiYgYWRkR3JhZGllbnRGaWxsKG8sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3BhY2l0eVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmdyYWRpZW50ICYmICFhdHRyc1toYXNdKFwic3Ryb2tlLW9wYWNpdHlcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKG5vZGUsIHtcInN0cm9rZS1vcGFjaXR5XCI6IHZhbHVlID4gMSA/IHZhbHVlIC8gMTAwIDogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhbGxcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbGwtb3BhY2l0eVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzLmdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnQgPSBSLl9nLmRvYy5nZXRFbGVtZW50QnlJZChub2RlLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLCBFKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyYWRpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BzID0gZ3JhZGllbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHN0b3BzW3N0b3BzLmxlbmd0aCAtIDFdLCB7XCJzdG9wLW9wYWNpdHlcIjogdmFsdWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHQgPT0gXCJmb250LXNpemVcIiAmJiAodmFsdWUgPSB0b0ludCh2YWx1ZSwgMTApICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjc3NydWxlID0gYXR0LnJlcGxhY2UoLyhcXC0uKS9nLCBmdW5jdGlvbiAodykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3LnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnN0eWxlW2Nzc3J1bGVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZGlydHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0dW5lVGV4dChvLCBwYXJhbXMpO1xuICAgICAgICBub2RlLnN0eWxlLnZpc2liaWxpdHkgPSB2aXM7XG4gICAgfSxcbiAgICBsZWFkaW5nID0gMS4yLFxuICAgIHR1bmVUZXh0ID0gZnVuY3Rpb24gKGVsLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKGVsLnR5cGUgIT0gXCJ0ZXh0XCIgfHwgIShwYXJhbXNbaGFzXShcInRleHRcIikgfHwgcGFyYW1zW2hhc10oXCJmb250XCIpIHx8IHBhcmFtc1toYXNdKFwiZm9udC1zaXplXCIpIHx8IHBhcmFtc1toYXNdKFwieFwiKSB8fCBwYXJhbXNbaGFzXShcInlcIikpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGEgPSBlbC5hdHRycyxcbiAgICAgICAgICAgIG5vZGUgPSBlbC5ub2RlLFxuICAgICAgICAgICAgZm9udFNpemUgPSBub2RlLmZpcnN0Q2hpbGQgPyB0b0ludChSLl9nLmRvYy5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG5vZGUuZmlyc3RDaGlsZCwgRSkuZ2V0UHJvcGVydHlWYWx1ZShcImZvbnQtc2l6ZVwiKSwgMTApIDogMTA7XG5cbiAgICAgICAgaWYgKHBhcmFtc1toYXNdKFwidGV4dFwiKSkge1xuICAgICAgICAgICAgYS50ZXh0ID0gcGFyYW1zLnRleHQ7XG4gICAgICAgICAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRleHRzID0gU3RyKHBhcmFtcy50ZXh0KS5zcGxpdChcIlxcblwiKSxcbiAgICAgICAgICAgICAgICB0c3BhbnMgPSBbXSxcbiAgICAgICAgICAgICAgICB0c3BhbjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRleHRzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0c3BhbiA9ICQoXCJ0c3BhblwiKTtcbiAgICAgICAgICAgICAgICBpICYmICQodHNwYW4sIHtkeTogZm9udFNpemUgKiBsZWFkaW5nLCB4OiBhLnh9KTtcbiAgICAgICAgICAgICAgICB0c3Bhbi5hcHBlbmRDaGlsZChSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0c1tpXSkpO1xuICAgICAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQodHNwYW4pO1xuICAgICAgICAgICAgICAgIHRzcGFuc1tpXSA9IHRzcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHNwYW5zID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRzcGFuXCIpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSB0c3BhbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICAkKHRzcGFuc1tpXSwge2R5OiBmb250U2l6ZSAqIGxlYWRpbmcsIHg6IGEueH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRzcGFuc1swXSwge2R5OiAwfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJChub2RlLCB7eDogYS54LCB5OiBhLnl9KTtcbiAgICAgICAgZWwuXy5kaXJ0eSA9IDE7XG4gICAgICAgIHZhciBiYiA9IGVsLl9nZXRCQm94KCksXG4gICAgICAgICAgICBkaWYgPSBhLnkgLSAoYmIueSArIGJiLmhlaWdodCAvIDIpO1xuICAgICAgICBkaWYgJiYgUi5pcyhkaWYsIFwiZmluaXRlXCIpICYmICQodHNwYW5zWzBdLCB7ZHk6IGRpZn0pO1xuICAgIH0sXG4gICAgZ2V0UmVhbE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5wYXJlbnROb2RlICYmIG5vZGUucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSwgc3ZnKSB7XG4gICAgICAgIHZhciBYID0gMCxcbiAgICAgICAgICAgIFkgPSAwO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQubm9kZVxuICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBHaXZlcyB5b3UgYSByZWZlcmVuY2UgdG8gdGhlIERPTSBvYmplY3QsIHNvIHlvdSBjYW4gYXNzaWduIGV2ZW50IGhhbmRsZXJzIG9yIGp1c3QgbWVzcyBhcm91bmQuXG4gICAgICAgICAqKlxuICAgICAgICAgKiBOb3RlOiBEb27igJl0IG1lc3Mgd2l0aCBpdC5cbiAgICAgICAgID4gVXNhZ2VcbiAgICAgICAgIHwgLy8gZHJhdyBhIGNpcmNsZSBhdCBjb29yZGluYXRlIDEwLDEwIHdpdGggcmFkaXVzIG9mIDEwXG4gICAgICAgICB8IHZhciBjID0gcGFwZXIuY2lyY2xlKDEwLCAxMCwgMTApO1xuICAgICAgICAgfCBjLm5vZGUub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIHwgICAgIGMuYXR0cihcImZpbGxcIiwgXCJyZWRcIik7XG4gICAgICAgICB8IH07XG4gICAgICAgIFxcKi9cbiAgICAgICAgdGhpc1swXSA9IHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIC8qXFxcbiAgICAgICAgICogRWxlbWVudC5yYXBoYWVsXG4gICAgICAgICBbIHByb3BlcnR5IChvYmplY3QpIF1cbiAgICAgICAgICoqXG4gICAgICAgICAqIEludGVybmFsIHJlZmVyZW5jZSB0byBAUmFwaGFlbCBvYmplY3QuIEluIGNhc2UgaXQgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgID4gVXNhZ2VcbiAgICAgICAgIHwgUmFwaGFlbC5lbC5yZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICB8ICAgICB2YXIgaHNiID0gdGhpcy5wYXBlci5yYXBoYWVsLnJnYjJoc2IodGhpcy5hdHRyKFwiZmlsbFwiKSk7XG4gICAgICAgICB8ICAgICBoc2IuaCA9IDE7XG4gICAgICAgICB8ICAgICB0aGlzLmF0dHIoe2ZpbGw6IHRoaXMucGFwZXIucmFwaGFlbC5oc2IycmdiKGhzYikuaGV4fSk7XG4gICAgICAgICB8IH1cbiAgICAgICAgXFwqL1xuICAgICAgICBub2RlLnJhcGhhZWwgPSB0cnVlO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQuaWRcbiAgICAgICAgIFsgcHJvcGVydHkgKG51bWJlcikgXVxuICAgICAgICAgKipcbiAgICAgICAgICogVW5pcXVlIGlkIG9mIHRoZSBlbGVtZW50LiBFc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIHlvdSB3YW50IHRvIGxpc3RlbiB0byBldmVudHMgb2YgdGhlIGVsZW1lbnQsXG4gICAgICAgICAqIGJlY2F1c2UgYWxsIGV2ZW50cyBhcmUgZmlyZWQgaW4gZm9ybWF0IGA8bW9kdWxlPi48YWN0aW9uPi48aWQ+YC4gQWxzbyB1c2VmdWwgZm9yIEBQYXBlci5nZXRCeUlkIG1ldGhvZC5cbiAgICAgICAgXFwqL1xuICAgICAgICB0aGlzLmlkID0gZ3VpZCgpO1xuICAgICAgICBub2RlLnJhcGhhZWxpZCA9IHRoaXMuaWQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogTWV0aG9kIHRoYXQgcmV0dXJucyBhIDUgbGV0dGVyL2RpZ2l0IGlkLCBlbm91Z2ggZm9yIDM2XjUgPSA2MDQ2NjE3NiBlbGVtZW50c1xuICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGlkXG4gICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGd1aWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gKFwiMDAwMFwiICsgKE1hdGgucmFuZG9tKCkqTWF0aC5wb3coMzYsNSkgPDwgMCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hdHJpeCA9IFIubWF0cml4KCk7XG4gICAgICAgIHRoaXMucmVhbFBhdGggPSBudWxsO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQucGFwZXJcbiAgICAgICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAgICAgKipcbiAgICAgICAgICogSW50ZXJuYWwgcmVmZXJlbmNlIHRvIOKAnHBhcGVy4oCdIHdoZXJlIG9iamVjdCBkcmF3bi4gTWFpbmx5IGZvciB1c2UgaW4gcGx1Z2lucyBhbmQgZWxlbWVudCBleHRlbnNpb25zLlxuICAgICAgICAgPiBVc2FnZVxuICAgICAgICAgfCBSYXBoYWVsLmVsLmNyb3NzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgfCAgICAgdGhpcy5hdHRyKHtmaWxsOiBcInJlZFwifSk7XG4gICAgICAgICB8ICAgICB0aGlzLnBhcGVyLnBhdGgoXCJNMTAsMTBMNTAsNTBNNTAsMTBMMTAsNTBcIilcbiAgICAgICAgIHwgICAgICAgICAuYXR0cih7c3Ryb2tlOiBcInJlZFwifSk7XG4gICAgICAgICB8IH1cbiAgICAgICAgXFwqL1xuICAgICAgICB0aGlzLnBhcGVyID0gc3ZnO1xuICAgICAgICB0aGlzLmF0dHJzID0gdGhpcy5hdHRycyB8fCB7fTtcbiAgICAgICAgdGhpcy5fID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBbXSxcbiAgICAgICAgICAgIHN4OiAxLFxuICAgICAgICAgICAgc3k6IDEsXG4gICAgICAgICAgICBkZWc6IDAsXG4gICAgICAgICAgICBkeDogMCxcbiAgICAgICAgICAgIGR5OiAwLFxuICAgICAgICAgICAgZGlydHk6IDFcbiAgICAgICAgfTtcbiAgICAgICAgIXN2Zy5ib3R0b20gJiYgKHN2Zy5ib3R0b20gPSB0aGlzKTtcbiAgICAgICAgLypcXFxuICAgICAgICAgKiBFbGVtZW50LnByZXZcbiAgICAgICAgIFsgcHJvcGVydHkgKG9iamVjdCkgXVxuICAgICAgICAgKipcbiAgICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBwcmV2aW91cyBlbGVtZW50IGluIHRoZSBoaWVyYXJjaHkuXG4gICAgICAgIFxcKi9cbiAgICAgICAgdGhpcy5wcmV2ID0gc3ZnLnRvcDtcbiAgICAgICAgc3ZnLnRvcCAmJiAoc3ZnLnRvcC5uZXh0ID0gdGhpcyk7XG4gICAgICAgIHN2Zy50b3AgPSB0aGlzO1xuICAgICAgICAvKlxcXG4gICAgICAgICAqIEVsZW1lbnQubmV4dFxuICAgICAgICAgWyBwcm9wZXJ0eSAob2JqZWN0KSBdXG4gICAgICAgICAqKlxuICAgICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIG5leHQgZWxlbWVudCBpbiB0aGUgaGllcmFyY2h5LlxuICAgICAgICBcXCovXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgfSxcbiAgICBlbHByb3RvID0gUi5lbDtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlID0gZWxwcm90bztcbiAgICBlbHByb3RvLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcblxuICAgIFIuX2VuZ2luZS5wYXRoID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcsIFNWRykge1xuICAgICAgICB2YXIgZWwgPSAkKFwicGF0aFwiKTtcbiAgICAgICAgU1ZHLmNhbnZhcyAmJiBTVkcuY2FudmFzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHAgPSBuZXcgRWxlbWVudChlbCwgU1ZHKTtcbiAgICAgICAgcC50eXBlID0gXCJwYXRoXCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocCwge1xuICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICBzdHJva2U6IFwiIzAwMFwiLFxuICAgICAgICAgICAgcGF0aDogcGF0aFN0cmluZ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5yb3RhdGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERlcHJlY2F0ZWQhIFVzZSBARWxlbWVudC50cmFuc2Zvcm0gaW5zdGVhZC5cbiAgICAgKiBBZGRzIHJvdGF0aW9uIGJ5IGdpdmVuIGFuZ2xlIGFyb3VuZCBnaXZlbiBwb2ludCB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gZGVnIChudW1iZXIpIGFuZ2xlIGluIGRlZ3JlZXNcbiAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygcm90YXRpb25cbiAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWwgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygcm90YXRpb25cbiAgICAgKiBJZiBjeCAmIGN5IGFyZW7igJl0IHNwZWNpZmllZCBjZW50cmUgb2YgdGhlIHNoYXBlIGlzIHVzZWQgYXMgYSBwb2ludCBvZiByb3RhdGlvbi5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJvdGF0ZSA9IGZ1bmN0aW9uIChkZWcsIGN4LCBjeSkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBkZWcgPSBTdHIoZGVnKS5zcGxpdChzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoZGVnLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGN4ID0gdG9GbG9hdChkZWdbMV0pO1xuICAgICAgICAgICAgY3kgPSB0b0Zsb2F0KGRlZ1syXSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVnID0gdG9GbG9hdChkZWdbMF0pO1xuICAgICAgICAoY3kgPT0gbnVsbCkgJiYgKGN4ID0gY3kpO1xuICAgICAgICBpZiAoY3ggPT0gbnVsbCB8fCBjeSA9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgYmJveCA9IHRoaXMuZ2V0QkJveCgxKTtcbiAgICAgICAgICAgIGN4ID0gYmJveC54ICsgYmJveC53aWR0aCAvIDI7XG4gICAgICAgICAgICBjeSA9IGJib3gueSArIGJib3guaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wiclwiLCBkZWcsIGN4LCBjeV1dKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuc2NhbGVcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIERlcHJlY2F0ZWQhIFVzZSBARWxlbWVudC50cmFuc2Zvcm0gaW5zdGVhZC5cbiAgICAgKiBBZGRzIHNjYWxlIGJ5IGdpdmVuIGFtb3VudCByZWxhdGl2ZSB0byBnaXZlbiBwb2ludCB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRyYW5zZm9ybWF0aW9ucyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gc3ggKG51bWJlcikgaG9yaXNvbnRhbCBzY2FsZSBhbW91bnRcbiAgICAgLSBzeSAobnVtYmVyKSB2ZXJ0aWNhbCBzY2FsZSBhbW91bnRcbiAgICAgLSBjeCAobnVtYmVyKSAjb3B0aW9uYWwgeCBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygc2NhbGVcbiAgICAgLSBjeSAobnVtYmVyKSAjb3B0aW9uYWwgeSBjb29yZGluYXRlIG9mIHRoZSBjZW50cmUgb2Ygc2NhbGVcbiAgICAgKiBJZiBjeCAmIGN5IGFyZW7igJl0IHNwZWNpZmllZCBjZW50cmUgb2YgdGhlIHNoYXBlIGlzIHVzZWQgaW5zdGVhZC5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBzeSwgY3gsIGN5KSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHN4ID0gU3RyKHN4KS5zcGxpdChzZXBhcmF0b3IpO1xuICAgICAgICBpZiAoc3gubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgc3kgPSB0b0Zsb2F0KHN4WzFdKTtcbiAgICAgICAgICAgIGN4ID0gdG9GbG9hdChzeFsyXSk7XG4gICAgICAgICAgICBjeSA9IHRvRmxvYXQoc3hbM10pO1xuICAgICAgICB9XG4gICAgICAgIHN4ID0gdG9GbG9hdChzeFswXSk7XG4gICAgICAgIChzeSA9PSBudWxsKSAmJiAoc3kgPSBzeCk7XG4gICAgICAgIChjeSA9PSBudWxsKSAmJiAoY3ggPSBjeSk7XG4gICAgICAgIGlmIChjeCA9PSBudWxsIHx8IGN5ID09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBiYm94ID0gdGhpcy5nZXRCQm94KDEpO1xuICAgICAgICB9XG4gICAgICAgIGN4ID0gY3ggPT0gbnVsbCA/IGJib3gueCArIGJib3gud2lkdGggLyAyIDogY3g7XG4gICAgICAgIGN5ID0gY3kgPT0gbnVsbCA/IGJib3gueSArIGJib3guaGVpZ2h0IC8gMiA6IGN5O1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wic1wiLCBzeCwgc3ksIGN4LCBjeV1dKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQudHJhbnNsYXRlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBEZXByZWNhdGVkISBVc2UgQEVsZW1lbnQudHJhbnNmb3JtIGluc3RlYWQuXG4gICAgICogQWRkcyB0cmFuc2xhdGlvbiBieSBnaXZlbiBhbW91bnQgdG8gdGhlIGxpc3Qgb2YgdHJhbnNmb3JtYXRpb25zIG9mIHRoZSBlbGVtZW50LlxuICAgICA+IFBhcmFtZXRlcnNcbiAgICAgLSBkeCAobnVtYmVyKSBob3Jpc29udGFsIHNoaWZ0XG4gICAgIC0gZHkgKG51bWJlcikgdmVydGljYWwgc2hpZnRcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkeCwgZHkpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZHggPSBTdHIoZHgpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBkeSA9IHRvRmxvYXQoZHhbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGR4ID0gdG9GbG9hdChkeFswXSkgfHwgMDtcbiAgICAgICAgZHkgPSArZHkgfHwgMDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInRcIiwgZHgsIGR5XV0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50cmFuc2Zvcm1cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEFkZHMgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGVsZW1lbnQgd2hpY2ggaXMgc2VwYXJhdGUgdG8gb3RoZXIgYXR0cmlidXRlcyxcbiAgICAgKiBpLmUuIHRyYW5zbGF0aW9uIGRvZXNu4oCZdCBjaGFuZ2UgYHhgIG9yIGB5YCBvZiB0aGUgcmVjdGFuZ2UuIFRoZSBmb3JtYXRcbiAgICAgKiBvZiB0cmFuc2Zvcm1hdGlvbiBzdHJpbmcgaXMgc2ltaWxhciB0byB0aGUgcGF0aCBzdHJpbmcgc3ludGF4OlxuICAgICB8IFwidDEwMCwxMDByMzAsMTAwLDEwMHMyLDIsMTAwLDEwMHI0NXMxLjVcIlxuICAgICAqIEVhY2ggbGV0dGVyIGlzIGEgY29tbWFuZC4gVGhlcmUgYXJlIGZvdXIgY29tbWFuZHM6IGB0YCBpcyBmb3IgdHJhbnNsYXRlLCBgcmAgaXMgZm9yIHJvdGF0ZSwgYHNgIGlzIGZvclxuICAgICAqIHNjYWxlIGFuZCBgbWAgaXMgZm9yIG1hdHJpeC5cbiAgICAgKlxuICAgICAqIFRoZXJlIGFyZSBhbHNvIGFsdGVybmF0aXZlIOKAnGFic29sdXRl4oCdIHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGU6IGBUYCwgYFJgIGFuZCBgU2AuIFRoZXkgd2lsbCBub3QgdGFrZSBwcmV2aW91cyB0cmFuc2Zvcm1hdGlvbiBpbnRvIGFjY291bnQuIEZvciBleGFtcGxlLCBgLi4uVDEwMCwwYCB3aWxsIGFsd2F5cyBtb3ZlIGVsZW1lbnQgMTAwIHB4IGhvcmlzb250YWxseSwgd2hpbGUgYC4uLnQxMDAsMGAgY291bGQgbW92ZSBpdCB2ZXJ0aWNhbGx5IGlmIHRoZXJlIGlzIGByOTBgIGJlZm9yZS4gSnVzdCBjb21wYXJlIHJlc3VsdHMgb2YgYHI5MHQxMDAsMGAgYW5kIGByOTBUMTAwLDBgLlxuICAgICAqXG4gICAgICogU28sIHRoZSBleGFtcGxlIGxpbmUgYWJvdmUgY291bGQgYmUgcmVhZCBsaWtlIOKAnHRyYW5zbGF0ZSBieSAxMDAsIDEwMDsgcm90YXRlIDMwwrAgYXJvdW5kIDEwMCwgMTAwOyBzY2FsZSB0d2ljZSBhcm91bmQgMTAwLCAxMDA7XG4gICAgICogcm90YXRlIDQ1wrAgYXJvdW5kIGNlbnRyZTsgc2NhbGUgMS41IHRpbWVzIHJlbGF0aXZlIHRvIGNlbnRyZeKAnS4gQXMgeW91IGNhbiBzZWUgcm90YXRlIGFuZCBzY2FsZSBjb21tYW5kcyBoYXZlIG9yaWdpblxuICAgICAqIGNvb3JkaW5hdGVzIGFzIG9wdGlvbmFsIHBhcmFtZXRlcnMsIHRoZSBkZWZhdWx0IGlzIHRoZSBjZW50cmUgcG9pbnQgb2YgdGhlIGVsZW1lbnQuXG4gICAgICogTWF0cml4IGFjY2VwdHMgc2l4IHBhcmFtZXRlcnMuXG4gICAgID4gVXNhZ2VcbiAgICAgfCB2YXIgZWwgPSBwYXBlci5yZWN0KDEwLCAyMCwgMzAwLCAyMDApO1xuICAgICB8IC8vIHRyYW5zbGF0ZSAxMDAsIDEwMCwgcm90YXRlIDQ1wrAsIHRyYW5zbGF0ZSAtMTAwLCAwXG4gICAgIHwgZWwudHJhbnNmb3JtKFwidDEwMCwxMDByNDV0LTEwMCwwXCIpO1xuICAgICB8IC8vIGlmIHlvdSB3YW50IHlvdSBjYW4gYXBwZW5kIG9yIHByZXBlbmQgdHJhbnNmb3JtYXRpb25zXG4gICAgIHwgZWwudHJhbnNmb3JtKFwiLi4udDUwLDUwXCIpO1xuICAgICB8IGVsLnRyYW5zZm9ybShcInMyLi4uXCIpO1xuICAgICB8IC8vIG9yIGV2ZW4gd3JhcFxuICAgICB8IGVsLnRyYW5zZm9ybShcInQ1MCw1MC4uLnQtNTAtNTBcIik7XG4gICAgIHwgLy8gdG8gcmVzZXQgdHJhbnNmb3JtYXRpb24gY2FsbCBtZXRob2Qgd2l0aCBlbXB0eSBzdHJpbmdcbiAgICAgfCBlbC50cmFuc2Zvcm0oXCJcIik7XG4gICAgIHwgLy8gdG8gZ2V0IGN1cnJlbnQgdmFsdWUgY2FsbCBpdCB3aXRob3V0IHBhcmFtZXRlcnNcbiAgICAgfCBjb25zb2xlLmxvZyhlbC50cmFuc2Zvcm0oKSk7XG4gICAgID4gUGFyYW1ldGVyc1xuICAgICAtIHRzdHIgKHN0cmluZykgI29wdGlvbmFsIHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAqIElmIHRzdHIgaXNu4oCZdCBzcGVjaWZpZWRcbiAgICAgPSAoc3RyaW5nKSBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIHN0cmluZ1xuICAgICAqIGVsc2VcbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0c3RyKSB7XG4gICAgICAgIHZhciBfID0gdGhpcy5fO1xuICAgICAgICBpZiAodHN0ciA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gXy50cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgUi5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLCB0c3RyKTtcblxuICAgICAgICB0aGlzLmNsaXAgJiYgJCh0aGlzLmNsaXAsIHt0cmFuc2Zvcm06IHRoaXMubWF0cml4LmludmVydCgpfSk7XG4gICAgICAgIHRoaXMucGF0dGVybiAmJiB1cGRhdGVQb3NpdGlvbih0aGlzKTtcbiAgICAgICAgdGhpcy5ub2RlICYmICQodGhpcy5ub2RlLCB7dHJhbnNmb3JtOiB0aGlzLm1hdHJpeH0pO1xuXG4gICAgICAgIGlmIChfLnN4ICE9IDEgfHwgXy5zeSAhPSAxKSB7XG4gICAgICAgICAgICB2YXIgc3cgPSB0aGlzLmF0dHJzW2hhc10oXCJzdHJva2Utd2lkdGhcIikgPyB0aGlzLmF0dHJzW1wic3Ryb2tlLXdpZHRoXCJdIDogMTtcbiAgICAgICAgICAgIHRoaXMuYXR0cih7XCJzdHJva2Utd2lkdGhcIjogc3d9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaGlkZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogTWFrZXMgZWxlbWVudCBpbnZpc2libGUuIFNlZSBARWxlbWVudC5zaG93LlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCkgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5zaG93XG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBNYWtlcyBlbGVtZW50IHZpc2libGUuIFNlZSBARWxlbWVudC5oaWRlLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYoIXRoaXMucmVtb3ZlZCkgdGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnJlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyBlbGVtZW50IGZyb20gdGhlIHBhcGVyLlxuICAgIFxcKi9cbiAgICBlbHByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBnZXRSZWFsTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkIHx8ICFub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFwZXIgPSB0aGlzLnBhcGVyO1xuICAgICAgICBwYXBlci5fX3NldF9fICYmIHBhcGVyLl9fc2V0X18uZXhjbHVkZSh0aGlzKTtcbiAgICAgICAgZXZlLnVuYmluZChcInJhcGhhZWwuKi4qLlwiICsgdGhpcy5pZCk7XG4gICAgICAgIGlmICh0aGlzLmdyYWRpZW50KSB7XG4gICAgICAgICAgICBwYXBlci5kZWZzLnJlbW92ZUNoaWxkKHRoaXMuZ3JhZGllbnQpO1xuICAgICAgICB9XG4gICAgICAgIFIuX3RlYXIodGhpcywgcGFwZXIpO1xuXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblxuICAgICAgICAvLyBSZW1vdmUgY3VzdG9tIGRhdGEgZm9yIGVsZW1lbnRcbiAgICAgICAgdGhpcy5yZW1vdmVEYXRhKCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdHlwZW9mIHRoaXNbaV0gPT0gXCJmdW5jdGlvblwiID8gUi5fcmVtb3ZlZEZhY3RvcnkoaSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlZCA9IHRydWU7XG4gICAgfTtcbiAgICBlbHByb3RvLl9nZXRCQm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGhpZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYW52YXNIaWRkZW4gPSBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlO1xuICAgICAgICBpZiAodGhpcy5wYXBlci5jYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIGNvbnRhaW5lclN0eWxlID0gdGhpcy5wYXBlci5jYW52YXMucGFyZW50RWxlbWVudC5zdHlsZTtcbiAgICAgICAgfSAvL0lFMTArIGNhbid0IGZpbmQgcGFyZW50RWxlbWVudFxuICAgICAgICBlbHNlIGlmICh0aGlzLnBhcGVyLmNhbnZhcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgY29udGFpbmVyU3R5bGUgPSB0aGlzLnBhcGVyLmNhbnZhcy5wYXJlbnROb2RlLnN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoY29udGFpbmVyU3R5bGUgJiYgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9PSBcIm5vbmVcIikge1xuICAgICAgICAgIGNhbnZhc0hpZGRlbiA9IHRydWU7XG4gICAgICAgICAgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJib3ggPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGJib3ggPSB0aGlzLm5vZGUuZ2V0QkJveCgpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggMy4wLngsIDI1LjAuMSAocHJvYmFibHkgbW9yZSB2ZXJzaW9ucyBhZmZlY3RlZCkgcGxheSBiYWRseSBoZXJlIC0gcG9zc2libGUgZml4XG4gICAgICAgICAgICBiYm94ID0ge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMubm9kZS5jbGllbnRMZWZ0LFxuICAgICAgICAgICAgICAgIHk6IHRoaXMubm9kZS5jbGllbnRUb3AsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMubm9kZS5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMubm9kZS5jbGllbnRIZWlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGJib3ggPSBiYm94IHx8IHt9O1xuICAgICAgICAgICAgaWYoY2FudmFzSGlkZGVuKXtcbiAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGhpZGUgJiYgdGhpcy5oaWRlKCk7XG4gICAgICAgIHJldHVybiBiYm94O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuYXR0clxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogU2V0cyB0aGUgYXR0cmlidXRlcyBvZiB0aGUgZWxlbWVudC5cbiAgICAgPiBQYXJhbWV0ZXJzXG4gICAgIC0gYXR0ck5hbWUgKHN0cmluZykgYXR0cmlidXRl4oCZcyBuYW1lXG4gICAgIC0gdmFsdWUgKHN0cmluZykgdmFsdWVcbiAgICAgKiBvclxuICAgICAtIHBhcmFtcyAob2JqZWN0KSBvYmplY3Qgb2YgbmFtZS92YWx1ZSBwYWlyc1xuICAgICAqIG9yXG4gICAgIC0gYXR0ck5hbWUgKHN0cmluZykgYXR0cmlidXRl4oCZcyBuYW1lXG4gICAgICogb3JcbiAgICAgLSBhdHRyTmFtZXMgKGFycmF5KSBpbiB0aGlzIGNhc2UgbWV0aG9kIHJldHVybnMgYXJyYXkgb2YgY3VycmVudCB2YWx1ZXMgZm9yIGdpdmVuIGF0dHJpYnV0ZSBuYW1lc1xuICAgICA9IChvYmplY3QpIEBFbGVtZW50IGlmIGF0dHJzTmFtZSAmIHZhbHVlIG9yIHBhcmFtcyBhcmUgcGFzc2VkIGluLlxuICAgICA9ICguLi4pIHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgaWYgb25seSBhdHRyc05hbWUgaXMgcGFzc2VkIGluLlxuICAgICA9IChhcnJheSkgYXJyYXkgb2YgdmFsdWVzIG9mIHRoZSBhdHRyaWJ1dGUgaWYgYXR0cnNOYW1lcyBpcyBwYXNzZWQgaW4uXG4gICAgID0gKG9iamVjdCkgb2JqZWN0IG9mIGF0dHJpYnV0ZXMgaWYgbm90aGluZyBpcyBwYXNzZWQgaW4uXG4gICAgID4gUG9zc2libGUgcGFyYW1ldGVyc1xuICAgICAjIDxwPlBsZWFzZSByZWZlciB0byB0aGUgPGEgaHJlZj1cImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRy9cIiB0aXRsZT1cIlRoZSBXM0MgUmVjb21tZW5kYXRpb24gZm9yIHRoZSBTVkcgbGFuZ3VhZ2UgZGVzY3JpYmVzIHRoZXNlIHByb3BlcnRpZXMgaW4gZGV0YWlsLlwiPlNWRyBzcGVjaWZpY2F0aW9uPC9hPiBmb3IgYW4gZXhwbGFuYXRpb24gb2YgdGhlc2UgcGFyYW1ldGVycy48L3A+XG4gICAgIG8gYXJyb3ctZW5kIChzdHJpbmcpIGFycm93aGVhZCBvbiB0aGUgZW5kIG9mIHRoZSBwYXRoLiBUaGUgZm9ybWF0IGZvciBzdHJpbmcgaXMgYDx0eXBlPlstPHdpZHRoPlstPGxlbmd0aD5dXWAuIFBvc3NpYmxlIHR5cGVzOiBgY2xhc3NpY2AsIGBibG9ja2AsIGBvcGVuYCwgYG92YWxgLCBgZGlhbW9uZGAsIGBub25lYCwgd2lkdGg6IGB3aWRlYCwgYG5hcnJvd2AsIGBtZWRpdW1gLCBsZW5ndGg6IGBsb25nYCwgYHNob3J0YCwgYG1pZGl1bWAuXG4gICAgIG8gY2xpcC1yZWN0IChzdHJpbmcpIGNvbW1hIG9yIHNwYWNlIHNlcGFyYXRlZCB2YWx1ZXM6IHgsIHksIHdpZHRoIGFuZCBoZWlnaHRcbiAgICAgbyBjdXJzb3IgKHN0cmluZykgQ1NTIHR5cGUgb2YgdGhlIGN1cnNvclxuICAgICBvIGN4IChudW1iZXIpIHRoZSB4LWF4aXMgY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIG9mIHRoZSBjaXJjbGUsIG9yIGVsbGlwc2VcbiAgICAgbyBjeSAobnVtYmVyKSB0aGUgeS1heGlzIGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBvZiB0aGUgY2lyY2xlLCBvciBlbGxpcHNlXG4gICAgIG8gZmlsbCAoc3RyaW5nKSBjb2xvdXIsIGdyYWRpZW50IG9yIGltYWdlXG4gICAgIG8gZmlsbC1vcGFjaXR5IChudW1iZXIpXG4gICAgIG8gZm9udCAoc3RyaW5nKVxuICAgICBvIGZvbnQtZmFtaWx5IChzdHJpbmcpXG4gICAgIG8gZm9udC1zaXplIChudW1iZXIpIGZvbnQgc2l6ZSBpbiBwaXhlbHNcbiAgICAgbyBmb250LXdlaWdodCAoc3RyaW5nKVxuICAgICBvIGhlaWdodCAobnVtYmVyKVxuICAgICBvIGhyZWYgKHN0cmluZykgVVJMLCBpZiBzcGVjaWZpZWQgZWxlbWVudCBiZWhhdmVzIGFzIGh5cGVybGlua1xuICAgICBvIG9wYWNpdHkgKG51bWJlcilcbiAgICAgbyBwYXRoIChzdHJpbmcpIFNWRyBwYXRoIHN0cmluZyBmb3JtYXRcbiAgICAgbyByIChudW1iZXIpIHJhZGl1cyBvZiB0aGUgY2lyY2xlLCBlbGxpcHNlIG9yIHJvdW5kZWQgY29ybmVyIG9uIHRoZSByZWN0XG4gICAgIG8gcnggKG51bWJlcikgaG9yaXNvbnRhbCByYWRpdXMgb2YgdGhlIGVsbGlwc2VcbiAgICAgbyByeSAobnVtYmVyKSB2ZXJ0aWNhbCByYWRpdXMgb2YgdGhlIGVsbGlwc2VcbiAgICAgbyBzcmMgKHN0cmluZykgaW1hZ2UgVVJMLCBvbmx5IHdvcmtzIGZvciBARWxlbWVudC5pbWFnZSBlbGVtZW50XG4gICAgIG8gc3Ryb2tlIChzdHJpbmcpIHN0cm9rZSBjb2xvdXJcbiAgICAgbyBzdHJva2UtZGFzaGFycmF5IChzdHJpbmcpIFvigJzigJ0sIOKAnG5vbmXigJ0sIOKAnGAtYOKAnSwg4oCcYC5g4oCdLCDigJxgLS5g4oCdLCDigJxgLS4uYOKAnSwg4oCcYC4gYOKAnSwg4oCcYC0gYOKAnSwg4oCcYC0tYOKAnSwg4oCcYC0gLmDigJ0sIOKAnGAtLS5g4oCdLCDigJxgLS0uLmDigJ1dXG4gICAgIG8gc3Ryb2tlLWxpbmVjYXAgKHN0cmluZykgW+KAnGBidXR0YOKAnSwg4oCcYHNxdWFyZWDigJ0sIOKAnGByb3VuZGDigJ1dXG4gICAgIG8gc3Ryb2tlLWxpbmVqb2luIChzdHJpbmcpIFvigJxgYmV2ZWxg4oCdLCDigJxgcm91bmRg4oCdLCDigJxgbWl0ZXJg4oCdXVxuICAgICBvIHN0cm9rZS1taXRlcmxpbWl0IChudW1iZXIpXG4gICAgIG8gc3Ryb2tlLW9wYWNpdHkgKG51bWJlcilcbiAgICAgbyBzdHJva2Utd2lkdGggKG51bWJlcikgc3Ryb2tlIHdpZHRoIGluIHBpeGVscywgZGVmYXVsdCBpcyAnMSdcbiAgICAgbyB0YXJnZXQgKHN0cmluZykgdXNlZCB3aXRoIGhyZWZcbiAgICAgbyB0ZXh0IChzdHJpbmcpIGNvbnRlbnRzIG9mIHRoZSB0ZXh0IGVsZW1lbnQuIFVzZSBgXFxuYCBmb3IgbXVsdGlsaW5lIHRleHRcbiAgICAgbyB0ZXh0LWFuY2hvciAoc3RyaW5nKSBb4oCcYHN0YXJ0YOKAnSwg4oCcYG1pZGRsZWDigJ0sIOKAnGBlbmRg4oCdXSwgZGVmYXVsdCBpcyDigJxgbWlkZGxlYOKAnVxuICAgICBvIHRpdGxlIChzdHJpbmcpIHdpbGwgY3JlYXRlIHRvb2x0aXAgd2l0aCBhIGdpdmVuIHRleHRcbiAgICAgbyB0cmFuc2Zvcm0gKHN0cmluZykgc2VlIEBFbGVtZW50LnRyYW5zZm9ybVxuICAgICBvIHdpZHRoIChudW1iZXIpXG4gICAgIG8geCAobnVtYmVyKVxuICAgICBvIHkgKG51bWJlcilcbiAgICAgPiBHcmFkaWVudHNcbiAgICAgKiBMaW5lYXIgZ3JhZGllbnQgZm9ybWF0OiDigJxg4oC5YW5nbGXigLot4oC5Y29sb3Vy4oC6Wy3igLljb2xvdXLigLpbOuKAuW9mZnNldOKAul1dKi3igLljb2xvdXLigLpg4oCdLCBleGFtcGxlOiDigJxgOTAtI2ZmZi0jMDAwYOKAnSDigJMgOTDCsFxuICAgICAqIGdyYWRpZW50IGZyb20gd2hpdGUgdG8gYmxhY2sgb3Ig4oCcYDAtI2ZmZi0jZjAwOjIwLSMwMDBg4oCdIOKAkyAwwrAgZ3JhZGllbnQgZnJvbSB3aGl0ZSB2aWEgcmVkIChhdCAyMCUpIHRvIGJsYWNrLlxuICAgICAqXG4gICAgICogcmFkaWFsIGdyYWRpZW50OiDigJxgclso4oC5ZnjigLosIOKAuWZ54oC6KV3igLljb2xvdXLigLpbLeKAuWNvbG91cuKAuls64oC5b2Zmc2V04oC6XV0qLeKAuWNvbG91cuKAumDigJ0sIGV4YW1wbGU6IOKAnGByI2ZmZi0jMDAwYOKAnSDigJNcbiAgICAgKiBncmFkaWVudCBmcm9tIHdoaXRlIHRvIGJsYWNrIG9yIOKAnGByKDAuMjUsIDAuNzUpI2ZmZi0jMDAwYOKAnSDigJMgZ3JhZGllbnQgZnJvbSB3aGl0ZSB0byBibGFjayB3aXRoIGZvY3VzIHBvaW50XG4gICAgICogYXQgMC4yNSwgMC43NS4gRm9jdXMgcG9pbnQgY29vcmRpbmF0ZXMgYXJlIGluIDAuLjEgcmFuZ2UuIFJhZGlhbCBncmFkaWVudHMgY2FuIG9ubHkgYmUgYXBwbGllZCB0byBjaXJjbGVzIGFuZCBlbGxpcHNlcy5cbiAgICAgPiBQYXRoIFN0cmluZ1xuICAgICAjIDxwPlBsZWFzZSByZWZlciB0byA8YSBocmVmPVwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHL3BhdGhzLmh0bWwjUGF0aERhdGFcIiB0aXRsZT1cIkRldGFpbHMgb2YgYSBwYXRo4oCZcyBkYXRhIGF0dHJpYnV0ZeKAmXMgZm9ybWF0IGFyZSBkZXNjcmliZWQgaW4gdGhlIFNWRyBzcGVjaWZpY2F0aW9uLlwiPlNWRyBkb2N1bWVudGF0aW9uIHJlZ2FyZGluZyBwYXRoIHN0cmluZzwvYT4uIFJhcGhhw6tsIGZ1bGx5IHN1cHBvcnRzIGl0LjwvcD5cbiAgICAgPiBDb2xvdXIgUGFyc2luZ1xuICAgICAjIDx1bD5cbiAgICAgIyAgICAgPGxpPkNvbG91ciBuYW1lICjigJw8Y29kZT5yZWQ8L2NvZGU+4oCdLCDigJw8Y29kZT5ncmVlbjwvY29kZT7igJ0sIOKAnDxjb2RlPmNvcm5mbG93ZXJibHVlPC9jb2RlPuKAnSwgZXRjKTwvbGk+XG4gICAgICMgICAgIDxsaT4j4oCi4oCi4oCiIOKAlCBzaG9ydGVuZWQgSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2ZjMDwvY29kZT7igJ0sIGV0Yyk8L2xpPlxuICAgICAjICAgICA8bGk+I+KAouKAouKAouKAouKAouKAoiDigJQgZnVsbCBsZW5ndGggSFRNTCBjb2xvdXI6ICjigJw8Y29kZT4jMDAwMDAwPC9jb2RlPuKAnSwg4oCcPGNvZGU+I2JkMjMwMDwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2IoMjAwLCZuYnNwOzEwMCwmbmJzcDswKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2IoMTAwJSwmbmJzcDsxNzUlLCZuYnNwOzAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPnJnYmEo4oCi4oCi4oCiLCDigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgcmVkLCBncmVlbiBhbmQgYmx1ZSBjaGFubmVsc+KAmSB2YWx1ZXM6ICjigJw8Y29kZT5yZ2JhKDIwMCwmbmJzcDsxMDAsJm5ic3A7MCwgLjUpPC9jb2RlPuKAnSk8L2xpPlxuICAgICAjICAgICA8bGk+cmdiYSjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU6ICjigJw8Y29kZT5yZ2JhKDEwMCUsJm5ic3A7MTc1JSwmbmJzcDswJSwgNTAlKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgaHVlLCBzYXR1cmF0aW9uIGFuZCBicmlnaHRuZXNzIHZhbHVlczogKOKAnDxjb2RlPmhzYigwLjUsJm5ic3A7MC4yNSwmbmJzcDsxKTwvY29kZT7igJ0pPC9saT5cbiAgICAgIyAgICAgPGxpPmhzYijigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNiYSjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBvcGFjaXR5PC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiKSDigJQgYWxtb3N0IHRoZSBzYW1lIGFzIGhzYiwgc2VlIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTTF9hbmRfSFNWXCIgdGl0bGU9XCJIU0wgYW5kIEhTViAtIFdpa2lwZWRpYSwgdGhlIGZyZWUgZW5jeWNsb3BlZGlhXCI+V2lraXBlZGlhIHBhZ2U8L2E+PC9saT5cbiAgICAgIyAgICAgPGxpPmhzbCjigKLigKLigKIlLCDigKLigKLigKIlLCDigKLigKLigKIlKSDigJQgc2FtZSBhcyBhYm92ZSwgYnV0IGluICU8L2xpPlxuICAgICAjICAgICA8bGk+aHNsYSjigKLigKLigKIsIOKAouKAouKAoiwg4oCi4oCi4oCiLCDigKLigKLigKIpIOKAlCBzYW1lIGFzIGFib3ZlLCBidXQgd2l0aCBvcGFjaXR5PC9saT5cbiAgICAgIyAgICAgPGxpPk9wdGlvbmFsbHkgZm9yIGhzYiBhbmQgaHNsIHlvdSBjb3VsZCBzcGVjaWZ5IGh1ZSBhcyBhIGRlZ3JlZTog4oCcPGNvZGU+aHNsKDI0MGRlZywmbmJzcDsxLCZuYnNwOy41KTwvY29kZT7igJ0gb3IsIGlmIHlvdSB3YW50IHRvIGdvIGZhbmN5LCDigJw8Y29kZT5oc2woMjQwwrAsJm5ic3A7MSwmbmJzcDsuNSk8L2NvZGU+4oCdPC9saT5cbiAgICAgIyA8L3VsPlxuICAgIFxcKi9cbiAgICBlbHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmF0dHJzKSBpZiAodGhpcy5hdHRyc1toYXNdKGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzW2FdID0gdGhpcy5hdHRyc1thXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5ncmFkaWVudCAmJiByZXMuZmlsbCA9PSBcIm5vbmVcIiAmJiAocmVzLmZpbGwgPSByZXMuZ3JhZGllbnQpICYmIGRlbGV0ZSByZXMuZ3JhZGllbnQ7XG4gICAgICAgICAgICByZXMudHJhbnNmb3JtID0gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJmaWxsXCIgJiYgdGhpcy5hdHRycy5maWxsID09IFwibm9uZVwiICYmIHRoaXMuYXR0cnMuZ3JhZGllbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdHRycy5ncmFkaWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYW1lID09IFwidHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgaW4gdGhpcy5hdHRycykge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSB0aGlzLmF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0sIFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0W25hbWVdID0gdGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW25hbWVdLmRlZjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSBSLl9hdmFpbGFibGVBdHRyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaWkgLSAxID8gb3V0IDogb3V0W25hbWVzWzBdXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiBSLmlzKG5hbWUsIFwiYXJyYXlcIikpIHtcbiAgICAgICAgICAgIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBuYW1lLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvdXRbbmFtZVtpXV0gPSB0aGlzLmF0dHIobmFtZVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lICE9IG51bGwgJiYgUi5pcyhuYW1lLCBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgcGFyYW1zID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmF0dHIuXCIgKyBrZXkgKyBcIi5cIiArIHRoaXMuaWQsIHRoaXMsIHBhcmFtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpIGlmICh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShrZXkpICYmIHBhcmFtc1toYXNdKGtleSkgJiYgUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgdmFyIHBhciA9IHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1trZXldLmFwcGx5KHRoaXMsIFtdLmNvbmNhdChwYXJhbXNba2V5XSkpO1xuICAgICAgICAgICAgdGhpcy5hdHRyc1trZXldID0gcGFyYW1zW2tleV07XG4gICAgICAgICAgICBmb3IgKHZhciBzdWJrZXkgaW4gcGFyKSBpZiAocGFyW2hhc10oc3Via2V5KSkge1xuICAgICAgICAgICAgICAgIHBhcmFtc1tzdWJrZXldID0gcGFyW3N1YmtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0RmlsbEFuZFN0cm9rZSh0aGlzLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBFbGVtZW50LnRvRnJvbnRcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE1vdmVzIHRoZSBlbGVtZW50IHNvIGl0IGlzIHRoZSBjbG9zZXN0IHRvIHRoZSB2aWV3ZXLigJlzIGV5ZXMsIG9uIHRvcCBvZiBvdGhlciBlbGVtZW50cy5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRvRnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub2RlID0gZ2V0UmVhbE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICB2YXIgc3ZnID0gdGhpcy5wYXBlcjtcbiAgICAgICAgc3ZnLnRvcCAhPSB0aGlzICYmIFIuX3RvZnJvbnQodGhpcywgc3ZnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC50b0JhY2tcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIE1vdmVzIHRoZSBlbGVtZW50IHNvIGl0IGlzIHRoZSBmdXJ0aGVzdCBmcm9tIHRoZSB2aWV3ZXLigJlzIGV5ZXMsIGJlaGluZCBvdGhlciBlbGVtZW50cy5cbiAgICAgPSAob2JqZWN0KSBARWxlbWVudFxuICAgIFxcKi9cbiAgICBlbHByb3RvLnRvQmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vZGUgPSBnZXRSZWFsTm9kZSh0aGlzLm5vZGUpO1xuICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgcGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbiAgICAgICAgUi5fdG9iYWNrKHRoaXMsIHRoaXMucGFwZXIpO1xuICAgICAgICB2YXIgc3ZnID0gdGhpcy5wYXBlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogRWxlbWVudC5pbnNlcnRBZnRlclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogSW5zZXJ0cyBjdXJyZW50IG9iamVjdCBhZnRlciB0aGUgZ2l2ZW4gb25lLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmVkIHx8ICFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBub2RlID0gZ2V0UmVhbE5vZGUodGhpcy5ub2RlKTtcbiAgICAgICAgdmFyIGFmdGVyTm9kZSA9IGdldFJlYWxOb2RlKGVsZW1lbnQubm9kZSB8fCBlbGVtZW50W2VsZW1lbnQubGVuZ3RoIC0gMV0ubm9kZSk7XG4gICAgICAgIGlmIChhZnRlck5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgIGFmdGVyTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBhZnRlck5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWZ0ZXJOb2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgUi5faW5zZXJ0YWZ0ZXIodGhpcywgZWxlbWVudCwgdGhpcy5wYXBlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIEVsZW1lbnQuaW5zZXJ0QmVmb3JlXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJbnNlcnRzIGN1cnJlbnQgb2JqZWN0IGJlZm9yZSB0aGUgZ2l2ZW4gb25lLlxuICAgICA9IChvYmplY3QpIEBFbGVtZW50XG4gICAgXFwqL1xuICAgIGVscHJvdG8uaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCB8fCAhZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbm9kZSA9IGdldFJlYWxOb2RlKHRoaXMubm9kZSk7XG4gICAgICAgIHZhciBiZWZvcmVOb2RlID0gZ2V0UmVhbE5vZGUoZWxlbWVudC5ub2RlIHx8IGVsZW1lbnRbMF0ubm9kZSk7XG4gICAgICAgIGJlZm9yZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgIFIuX2luc2VydGJlZm9yZSh0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmJsdXIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICAvLyBFeHBlcmltZW50YWwuIE5vIFNhZmFyaSBzdXBwb3J0LiBVc2UgaXQgb24geW91ciBvd24gcmlzay5cbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAoK3NpemUgIT09IDApIHtcbiAgICAgICAgICAgIHZhciBmbHRyID0gJChcImZpbHRlclwiKSxcbiAgICAgICAgICAgICAgICBibHVyID0gJChcImZlR2F1c3NpYW5CbHVyXCIpO1xuICAgICAgICAgICAgdC5hdHRycy5ibHVyID0gc2l6ZTtcbiAgICAgICAgICAgIGZsdHIuaWQgPSBSLmNyZWF0ZVVVSUQoKTtcbiAgICAgICAgICAgICQoYmx1ciwge3N0ZERldmlhdGlvbjogK3NpemUgfHwgMS41fSk7XG4gICAgICAgICAgICBmbHRyLmFwcGVuZENoaWxkKGJsdXIpO1xuICAgICAgICAgICAgdC5wYXBlci5kZWZzLmFwcGVuZENoaWxkKGZsdHIpO1xuICAgICAgICAgICAgdC5fYmx1ciA9IGZsdHI7XG4gICAgICAgICAgICAkKHQubm9kZSwge2ZpbHRlcjogXCJ1cmwoI1wiICsgZmx0ci5pZCArIFwiKVwifSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodC5fYmx1cikge1xuICAgICAgICAgICAgICAgIHQuX2JsdXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0Ll9ibHVyKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdC5fYmx1cjtcbiAgICAgICAgICAgICAgICBkZWxldGUgdC5hdHRycy5ibHVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5ub2RlLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5jaXJjbGUgPSBmdW5jdGlvbiAoc3ZnLCB4LCB5LCByKSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJjaXJjbGVcIik7XG4gICAgICAgIHN2Zy5jYW52YXMgJiYgc3ZnLmNhbnZhcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZXMgPSBuZXcgRWxlbWVudChlbCwgc3ZnKTtcbiAgICAgICAgcmVzLmF0dHJzID0ge2N4OiB4LCBjeTogeSwgcjogciwgZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCIjMDAwXCJ9O1xuICAgICAgICByZXMudHlwZSA9IFwiY2lyY2xlXCI7XG4gICAgICAgICQoZWwsIHJlcy5hdHRycyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUucmVjdCA9IGZ1bmN0aW9uIChzdmcsIHgsIHksIHcsIGgsIHIpIHtcbiAgICAgICAgdmFyIGVsID0gJChcInJlY3RcIik7XG4gICAgICAgIHN2Zy5jYW52YXMgJiYgc3ZnLmNhbnZhcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZXMgPSBuZXcgRWxlbWVudChlbCwgc3ZnKTtcbiAgICAgICAgcmVzLmF0dHJzID0ge3g6IHgsIHk6IHksIHdpZHRoOiB3LCBoZWlnaHQ6IGgsIHJ4OiByIHx8IDAsIHJ5OiByIHx8IDAsIGZpbGw6IFwibm9uZVwiLCBzdHJva2U6IFwiIzAwMFwifTtcbiAgICAgICAgcmVzLnR5cGUgPSBcInJlY3RcIjtcbiAgICAgICAgJChlbCwgcmVzLmF0dHJzKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5lbGxpcHNlID0gZnVuY3Rpb24gKHN2ZywgeCwgeSwgcngsIHJ5KSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJlbGxpcHNlXCIpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHtjeDogeCwgY3k6IHksIHJ4OiByeCwgcnk6IHJ5LCBmaWxsOiBcIm5vbmVcIiwgc3Ryb2tlOiBcIiMwMDBcIn07XG4gICAgICAgIHJlcy50eXBlID0gXCJlbGxpcHNlXCI7XG4gICAgICAgICQoZWwsIHJlcy5hdHRycyk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuaW1hZ2UgPSBmdW5jdGlvbiAoc3ZnLCBzcmMsIHgsIHksIHcsIGgpIHtcbiAgICAgICAgdmFyIGVsID0gJChcImltYWdlXCIpO1xuICAgICAgICAkKGVsLCB7eDogeCwgeTogeSwgd2lkdGg6IHcsIGhlaWdodDogaCwgcHJlc2VydmVBc3BlY3RSYXRpbzogXCJub25lXCJ9KTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmssIFwiaHJlZlwiLCBzcmMpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHt4OiB4LCB5OiB5LCB3aWR0aDogdywgaGVpZ2h0OiBoLCBzcmM6IHNyY307XG4gICAgICAgIHJlcy50eXBlID0gXCJpbWFnZVwiO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnRleHQgPSBmdW5jdGlvbiAoc3ZnLCB4LCB5LCB0ZXh0KSB7XG4gICAgICAgIHZhciBlbCA9ICQoXCJ0ZXh0XCIpO1xuICAgICAgICBzdmcuY2FudmFzICYmIHN2Zy5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmVzID0gbmV3IEVsZW1lbnQoZWwsIHN2Zyk7XG4gICAgICAgIHJlcy5hdHRycyA9IHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgXCJ0ZXh0LWFuY2hvclwiOiBcIm1pZGRsZVwiLFxuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIFwiZm9udC1mYW1pbHlcIjogUi5fYXZhaWxhYmxlQXR0cnNbXCJmb250LWZhbWlseVwiXSxcbiAgICAgICAgICAgIFwiZm9udC1zaXplXCI6IFIuX2F2YWlsYWJsZUF0dHJzW1wiZm9udC1zaXplXCJdLFxuICAgICAgICAgICAgc3Ryb2tlOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZpbGw6IFwiIzAwMFwiXG4gICAgICAgIH07XG4gICAgICAgIHJlcy50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocmVzLCByZXMuYXR0cnMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnNldFNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGggfHwgdGhpcy53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQgfHwgdGhpcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMud2lkdGgpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5oZWlnaHQpO1xuICAgICAgICBpZiAodGhpcy5fdmlld0JveCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsIHRoaXMuX3ZpZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbiA9IFIuX2dldENvbnRhaW5lci5hcHBseSgwLCBhcmd1bWVudHMpLFxuICAgICAgICAgICAgY29udGFpbmVyID0gY29uICYmIGNvbi5jb250YWluZXIsXG4gICAgICAgICAgICB4ID0gY29uLngsXG4gICAgICAgICAgICB5ID0gY29uLnksXG4gICAgICAgICAgICB3aWR0aCA9IGNvbi53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCA9IGNvbi5oZWlnaHQ7XG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVkcgY29udGFpbmVyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNudnMgPSAkKFwic3ZnXCIpLFxuICAgICAgICAgICAgY3NzID0gXCJvdmVyZmxvdzpoaWRkZW47XCIsXG4gICAgICAgICAgICBpc0Zsb2F0aW5nO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIHx8IDUxMjtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDM0MjtcbiAgICAgICAgJChjbnZzLCB7XG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHZlcnNpb246IDEuMSxcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgICAgICAgICBcInhtbG5zOnhsaW5rXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29udGFpbmVyID09IDEpIHtcbiAgICAgICAgICAgIGNudnMuc3R5bGUuY3NzVGV4dCA9IGNzcyArIFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDpcIiArIHggKyBcInB4O3RvcDpcIiArIHkgKyBcInB4XCI7XG4gICAgICAgICAgICBSLl9nLmRvYy5ib2R5LmFwcGVuZENoaWxkKGNudnMpO1xuICAgICAgICAgICAgaXNGbG9hdGluZyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbnZzLnN0eWxlLmNzc1RleHQgPSBjc3MgKyBcInBvc2l0aW9uOnJlbGF0aXZlXCI7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGNudnMsIGNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNudnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRhaW5lciA9IG5ldyBSLl9QYXBlcjtcbiAgICAgICAgY29udGFpbmVyLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGNvbnRhaW5lci5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGNvbnRhaW5lci5jYW52YXMgPSBjbnZzO1xuICAgICAgICBjb250YWluZXIuY2xlYXIoKTtcbiAgICAgICAgY29udGFpbmVyLl9sZWZ0ID0gY29udGFpbmVyLl90b3AgPSAwO1xuICAgICAgICBpc0Zsb2F0aW5nICYmIChjb250YWluZXIucmVuZGVyZml4ID0gZnVuY3Rpb24gKCkge30pO1xuICAgICAgICBjb250YWluZXIucmVuZGVyZml4KCk7XG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuc2V0Vmlld0JveCA9IGZ1bmN0aW9uICh4LCB5LCB3LCBoLCBmaXQpIHtcbiAgICAgICAgZXZlKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsIHRoaXMsIHRoaXMuX3ZpZXdCb3gsIFt4LCB5LCB3LCBoLCBmaXRdKTtcbiAgICAgICAgdmFyIHBhcGVyU2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgc2l6ZSA9IG1tYXgodyAvIHBhcGVyU2l6ZS53aWR0aCwgaCAvIHBhcGVyU2l6ZS5oZWlnaHQpLFxuICAgICAgICAgICAgdG9wID0gdGhpcy50b3AsXG4gICAgICAgICAgICBhc3BlY3RSYXRpbyA9IGZpdCA/IFwieE1pZFlNaWQgbWVldFwiIDogXCJ4TWluWU1pblwiLFxuICAgICAgICAgICAgdmIsXG4gICAgICAgICAgICBzdztcbiAgICAgICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3ZiU2l6ZSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3ZiU2l6ZTtcbiAgICAgICAgICAgIHZiID0gXCIwIDAgXCIgKyB0aGlzLndpZHRoICsgUyArIHRoaXMuaGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdmJTaXplID0gc2l6ZTtcbiAgICAgICAgICAgIHZiID0geCArIFMgKyB5ICsgUyArIHcgKyBTICsgaDtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMuY2FudmFzLCB7XG4gICAgICAgICAgICB2aWV3Qm94OiB2YixcbiAgICAgICAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvXG4gICAgICAgIH0pO1xuICAgICAgICB3aGlsZSAoc2l6ZSAmJiB0b3ApIHtcbiAgICAgICAgICAgIHN3ID0gXCJzdHJva2Utd2lkdGhcIiBpbiB0b3AuYXR0cnMgPyB0b3AuYXR0cnNbXCJzdHJva2Utd2lkdGhcIl0gOiAxO1xuICAgICAgICAgICAgdG9wLmF0dHIoe1wic3Ryb2tlLXdpZHRoXCI6IHN3fSk7XG4gICAgICAgICAgICB0b3AuXy5kaXJ0eSA9IDE7XG4gICAgICAgICAgICB0b3AuXy5kaXJ0eVQgPSAxO1xuICAgICAgICAgICAgdG9wID0gdG9wLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmlld0JveCA9IFt4LCB5LCB3LCBoLCAhIWZpdF07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlbmRlcmZpeFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogRml4ZXMgdGhlIGlzc3VlIG9mIEZpcmVmb3ggYW5kIElFOSByZWdhcmRpbmcgc3VicGl4ZWwgcmVuZGVyaW5nLiBJZiBwYXBlciBpcyBkZXBlbmRlbnRcbiAgICAgKiBvbiBvdGhlciBlbGVtZW50cyBhZnRlciByZWZsb3cgaXQgY291bGQgc2hpZnQgaGFsZiBwaXhlbCB3aGljaCBjYXVzZSBmb3IgbGluZXMgdG8gbG9zdCB0aGVpciBjcmlzcG5lc3MuXG4gICAgICogVGhpcyBtZXRob2QgZml4ZXMgdGhlIGlzc3VlLlxuICAgICAqKlxuICAgICAgIFNwZWNpYWwgdGhhbmtzIHRvIE1hcml1c3ogTm93YWsgKGh0dHA6Ly93d3cubWVkaWtvby5jb20vKSBmb3IgdGhpcyBtZXRob2QuXG4gICAgXFwqL1xuICAgIFIucHJvdG90eXBlLnJlbmRlcmZpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNudnMgPSB0aGlzLmNhbnZhcyxcbiAgICAgICAgICAgIHMgPSBjbnZzLnN0eWxlLFxuICAgICAgICAgICAgcG9zO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcG9zID0gY252cy5nZXRTY3JlZW5DVE0oKSB8fCBjbnZzLmNyZWF0ZVNWR01hdHJpeCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBwb3MgPSBjbnZzLmNyZWF0ZVNWR01hdHJpeCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZWZ0ID0gLXBvcy5lICUgMSxcbiAgICAgICAgICAgIHRvcCA9IC1wb3MuZiAlIDE7XG4gICAgICAgIGlmIChsZWZ0IHx8IHRvcCkge1xuICAgICAgICAgICAgaWYgKGxlZnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sZWZ0ID0gKHRoaXMuX2xlZnQgKyBsZWZ0KSAlIDE7XG4gICAgICAgICAgICAgICAgcy5sZWZ0ID0gdGhpcy5fbGVmdCArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b3AgPSAodGhpcy5fdG9wICsgdG9wKSAlIDE7XG4gICAgICAgICAgICAgICAgcy50b3AgPSB0aGlzLl90b3AgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBQYXBlci5jbGVhclxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ2xlYXJzIHRoZSBwYXBlciwgaS5lLiByZW1vdmVzIGFsbCB0aGUgZWxlbWVudHMuXG4gICAgXFwqL1xuICAgIFIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBSLmV2ZShcInJhcGhhZWwuY2xlYXJcIiwgdGhpcyk7XG4gICAgICAgIHZhciBjID0gdGhpcy5jYW52YXM7XG4gICAgICAgIHdoaWxlIChjLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJvdHRvbSA9IHRoaXMudG9wID0gbnVsbDtcbiAgICAgICAgKHRoaXMuZGVzYyA9ICQoXCJkZXNjXCIpKS5hcHBlbmRDaGlsZChSLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZShcIkNyZWF0ZWQgd2l0aCBSYXBoYVxceGVibCBcIiArIFIudmVyc2lvbikpO1xuICAgICAgICBjLmFwcGVuZENoaWxkKHRoaXMuZGVzYyk7XG4gICAgICAgIGMuYXBwZW5kQ2hpbGQodGhpcy5kZWZzID0gJChcImRlZnNcIikpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIFBhcGVyLnJlbW92ZVxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogUmVtb3ZlcyB0aGUgcGFwZXIgZnJvbSB0aGUgRE9NLlxuICAgIFxcKi9cbiAgICBSLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGV2ZShcInJhcGhhZWwucmVtb3ZlXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy5wYXJlbnROb2RlICYmIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSB0eXBlb2YgdGhpc1tpXSA9PSBcImZ1bmN0aW9uXCIgPyBSLl9yZW1vdmVkRmFjdG9yeShpKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBzZXRwcm90byA9IFIuc3Q7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSAmJiAhc2V0cHJvdG9baGFzXShtZXRob2QpKSB7XG4gICAgICAgIHNldHByb3RvW21ldGhvZF0gPSAoZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RuYW1lXS5hcHBseShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./dev/raphael.svg.js\n')
          },
          "./dev/raphael.vml.js": function(module, exports, __webpack_require__) {
            eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./raphael.core */ "./dev/raphael.core.js")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(R) {\n    if (R && !R.vml) {\n        return;\n    }\n\n    var has = "hasOwnProperty",\n        Str = String,\n        toFloat = parseFloat,\n        math = Math,\n        round = math.round,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        fillString = "fill",\n        separator = /[, ]+/,\n        eve = R.eve,\n        ms = " progid:DXImageTransform.Microsoft",\n        S = " ",\n        E = "",\n        map = {M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x"},\n        bites = /([clmz]),?([^clmz]*)/gi,\n        blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n        val = /-?[^,\\s-]+/g,\n        cssDot = "position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",\n        zoom = 21600,\n        pathTypes = {path: 1, rect: 1, image: 1},\n        ovalTypes = {circle: 1, ellipse: 1},\n        path2vml = function (path) {\n            var total =  /[ahqstv]/ig,\n                command = R._pathToAbsolute;\n            Str(path).match(total) && (command = R._path2curve);\n            total = /[clmz]/g;\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\n                var res = Str(path).replace(bites, function (all, command, args) {\n                    var vals = [],\n                        isMove = command.toLowerCase() == "m",\n                        res = map[command];\n                    args.replace(val, function (value) {\n                        if (isMove && vals.length == 2) {\n                            res += vals + map[command == "m" ? "l" : "L"];\n                            vals = [];\n                        }\n                        vals.push(round(value * zoom));\n                    });\n                    return res + vals;\n                });\n                return res;\n            }\n            var pa = command(path), p, r;\n            res = [];\n            for (var i = 0, ii = pa.length; i < ii; i++) {\n                p = pa[i];\n                r = pa[i][0].toLowerCase();\n                r == "z" && (r = "x");\n                for (var j = 1, jj = p.length; j < jj; j++) {\n                    r += round(p[j] * zoom) + (j != jj - 1 ? "," : E);\n                }\n                res.push(r);\n            }\n            return res.join(S);\n        },\n        compensation = function (deg, dx, dy) {\n            var m = R.matrix();\n            m.rotate(-deg, .5, .5);\n            return {\n                dx: m.x(dx, dy),\n                dy: m.y(dx, dy)\n            };\n        },\n        setCoords = function (p, sx, sy, dx, dy, deg) {\n            var _ = p._,\n                m = p.matrix,\n                fillpos = _.fillpos,\n                o = p.node,\n                s = o.style,\n                y = 1,\n                flip = "",\n                dxdy,\n                kx = zoom / sx,\n                ky = zoom / sy;\n            s.visibility = "hidden";\n            if (!sx || !sy) {\n                return;\n            }\n            o.coordsize = abs(kx) + S + abs(ky);\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\n            if (deg) {\n                var c = compensation(deg, dx, dy);\n                dx = c.dx;\n                dy = c.dy;\n            }\n            sx < 0 && (flip += "x");\n            sy < 0 && (flip += " y") && (y = -1);\n            s.flip = flip;\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\n            if (fillpos || _.fillsize) {\n                var fill = o.getElementsByTagName(fillString);\n                fill = fill && fill[0];\n                o.removeChild(fill);\n                if (fillpos) {\n                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\n                    fill.position = c.dx * y + S + c.dy * y;\n                }\n                if (_.fillsize) {\n                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\n                }\n                o.appendChild(fill);\n            }\n            s.visibility = "visible";\n        };\n    R.toString = function () {\n        return  "Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl " + this.version;\n    };\n    var addArrow = function (o, value, isEnd) {\n        var values = Str(value).toLowerCase().split("-"),\n            se = isEnd ? "end" : "start",\n            i = values.length,\n            type = "classic",\n            w = "medium",\n            h = "medium";\n        while (i--) {\n            switch (values[i]) {\n                case "block":\n                case "classic":\n                case "oval":\n                case "diamond":\n                case "open":\n                case "none":\n                    type = values[i];\n                    break;\n                case "wide":\n                case "narrow": h = values[i]; break;\n                case "long":\n                case "short": w = values[i]; break;\n            }\n        }\n        var stroke = o.node.getElementsByTagName("stroke")[0];\n        stroke[se + "arrow"] = type;\n        stroke[se + "arrowlength"] = w;\n        stroke[se + "arrowwidth"] = h;\n    },\n    setFillAndStroke = function (o, params) {\n        // o.paper.canvas.style.display = "none";\n        o.attrs = o.attrs || {};\n        var node = o.node,\n            a = o.attrs,\n            s = node.style,\n            xy,\n            newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\n            isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\n            res = o;\n\n\n        for (var par in params) if (params[has](par)) {\n            a[par] = params[par];\n        }\n        if (newpath) {\n            a.path = R._getPath[o.type](o);\n            o._.dirty = 1;\n        }\n        params.href && (node.href = params.href);\n        params.title && (node.title = params.title);\n        params.target && (node.target = params.target);\n        params.cursor && (s.cursor = params.cursor);\n        "blur" in params && o.blur(params.blur);\n        if (params.path && o.type == "path" || newpath) {\n            node.path = path2vml(~Str(a.path).toLowerCase().indexOf("r") ? R._pathToAbsolute(a.path) : a.path);\n            o._.dirty = 1;\n            if (o.type == "image") {\n                o._.fillpos = [a.x, a.y];\n                o._.fillsize = [a.width, a.height];\n                setCoords(o, 1, 1, 0, 0, 0);\n            }\n        }\n        "transform" in params && o.transform(params.transform);\n        if (isOval) {\n            var cx = +a.cx,\n                cy = +a.cy,\n                rx = +a.rx || +a.r || 0,\n                ry = +a.ry || +a.r || 0;\n            node.path = R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\n            o._.dirty = 1;\n        }\n        if ("clip-rect" in params) {\n            var rect = Str(params["clip-rect"]).split(separator);\n            if (rect.length == 4) {\n                rect[2] = +rect[2] + (+rect[0]);\n                rect[3] = +rect[3] + (+rect[1]);\n                var div = node.clipRect || R._g.doc.createElement("div"),\n                    dstyle = div.style;\n                dstyle.clip = R.format("rect({1}px {2}px {3}px {0}px)", rect);\n                if (!node.clipRect) {\n                    dstyle.position = "absolute";\n                    dstyle.top = 0;\n                    dstyle.left = 0;\n                    dstyle.width = o.paper.width + "px";\n                    dstyle.height = o.paper.height + "px";\n                    node.parentNode.insertBefore(div, node);\n                    div.appendChild(node);\n                    node.clipRect = div;\n                }\n            }\n            if (!params["clip-rect"]) {\n                node.clipRect && (node.clipRect.style.clip = "auto");\n            }\n        }\n        if (o.textpath) {\n            var textpathStyle = o.textpath.style;\n            params.font && (textpathStyle.font = params.font);\n            params["font-family"] && (textpathStyle.fontFamily = \'"\' + params["font-family"].split(",")[0].replace(/^[\'"]+|[\'"]+$/g, E) + \'"\');\n            params["font-size"] && (textpathStyle.fontSize = params["font-size"]);\n            params["font-weight"] && (textpathStyle.fontWeight = params["font-weight"]);\n            params["font-style"] && (textpathStyle.fontStyle = params["font-style"]);\n        }\n        if ("arrow-start" in params) {\n            addArrow(res, params["arrow-start"]);\n        }\n        if ("arrow-end" in params) {\n            addArrow(res, params["arrow-end"], 1);\n        }\n        if (params.opacity != null ||\n            params.fill != null ||\n            params.src != null ||\n            params.stroke != null ||\n            params["stroke-width"] != null ||\n            params["stroke-opacity"] != null ||\n            params["fill-opacity"] != null ||\n            params["stroke-dasharray"] != null ||\n            params["stroke-miterlimit"] != null ||\n            params["stroke-linejoin"] != null ||\n            params["stroke-linecap"] != null) {\n            var fill = node.getElementsByTagName(fillString),\n                newfill = false;\n            fill = fill && fill[0];\n            !fill && (newfill = fill = createNode(fillString));\n            if (o.type == "image" && params.src) {\n                fill.src = params.src;\n            }\n            params.fill && (fill.on = true);\n            if (fill.on == null || params.fill == "none" || params.fill === null) {\n                fill.on = false;\n            }\n            if (fill.on && params.fill) {\n                var isURL = Str(params.fill).match(R._ISURL);\n                if (isURL) {\n                    fill.parentNode == node && node.removeChild(fill);\n                    fill.rotate = true;\n                    fill.src = isURL[1];\n                    fill.type = "tile";\n                    var bbox = o.getBBox(1);\n                    fill.position = bbox.x + S + bbox.y;\n                    o._.fillpos = [bbox.x, bbox.y];\n\n                    R._preload(isURL[1], function () {\n                        o._.fillsize = [this.offsetWidth, this.offsetHeight];\n                    });\n                } else {\n                    fill.color = R.getRGB(params.fill).hex;\n                    fill.src = E;\n                    fill.type = "solid";\n                    if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != "r") && addGradientFill(res, params.fill, fill)) {\n                        a.fill = "none";\n                        a.gradient = params.fill;\n                        fill.rotate = false;\n                    }\n                }\n            }\n            if ("fill-opacity" in params || "opacity" in params) {\n                var opacity = ((+a["fill-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);\n                opacity = mmin(mmax(opacity, 0), 1);\n                fill.opacity = opacity;\n                if (fill.src) {\n                    fill.color = "none";\n                }\n            }\n            node.appendChild(fill);\n            var stroke = (node.getElementsByTagName("stroke") && node.getElementsByTagName("stroke")[0]),\n            newstroke = false;\n            !stroke && (newstroke = stroke = createNode("stroke"));\n            if ((params.stroke && params.stroke != "none") ||\n                params["stroke-width"] ||\n                params["stroke-opacity"] != null ||\n                params["stroke-dasharray"] ||\n                params["stroke-miterlimit"] ||\n                params["stroke-linejoin"] ||\n                params["stroke-linecap"]) {\n                stroke.on = true;\n            }\n            (params.stroke == "none" || params.stroke === null || stroke.on == null || params.stroke == 0 || params["stroke-width"] == 0) && (stroke.on = false);\n            var strokeColor = R.getRGB(params.stroke);\n            stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n            opacity = ((+a["stroke-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);\n            var width = (toFloat(params["stroke-width"]) || 1) * .75;\n            opacity = mmin(mmax(opacity, 0), 1);\n            params["stroke-width"] == null && (width = a["stroke-width"]);\n            params["stroke-width"] && (stroke.weight = width);\n            width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n            stroke.opacity = opacity;\n\n            params["stroke-linejoin"] && (stroke.joinstyle = params["stroke-linejoin"] || "miter");\n            stroke.miterlimit = params["stroke-miterlimit"] || 8;\n            params["stroke-linecap"] && (stroke.endcap = params["stroke-linecap"] == "butt" ? "flat" : params["stroke-linecap"] == "square" ? "square" : "round");\n            if ("stroke-dasharray" in params) {\n                var dasharray = {\n                    "-": "shortdash",\n                    ".": "shortdot",\n                    "-.": "shortdashdot",\n                    "-..": "shortdashdotdot",\n                    ". ": "dot",\n                    "- ": "dash",\n                    "--": "longdash",\n                    "- .": "dashdot",\n                    "--.": "longdashdot",\n                    "--..": "longdashdotdot"\n                };\n                stroke.dashstyle = dasharray[has](params["stroke-dasharray"]) ? dasharray[params["stroke-dasharray"]] : E;\n            }\n            newstroke && node.appendChild(stroke);\n        }\n        if (res.type == "text") {\n            res.paper.canvas.style.display = E;\n            var span = res.paper.span,\n                m = 100,\n                fontSize = a.font && a.font.match(/\\d+(?:\\.\\d*)?(?=px)/);\n            s = span.style;\n            a.font && (s.font = a.font);\n            a["font-family"] && (s.fontFamily = a["font-family"]);\n            a["font-weight"] && (s.fontWeight = a["font-weight"]);\n            a["font-style"] && (s.fontStyle = a["font-style"]);\n            fontSize = toFloat(a["font-size"] || fontSize && fontSize[0]) || 10;\n            s.fontSize = fontSize * m + "px";\n            res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\\n/g, "<br>"));\n            var brect = span.getBoundingClientRect();\n            res.W = a.w = (brect.right - brect.left) / m;\n            res.H = a.h = (brect.bottom - brect.top) / m;\n            // res.paper.canvas.style.display = "none";\n            res.X = a.x;\n            res.Y = a.y + res.H / 2;\n\n            ("x" in params || "y" in params) && (res.path.v = R.format("m{0},{1}l{2},{1}", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));\n            var dirtyattrs = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"];\n            for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {\n                res._.dirty = 1;\n                break;\n            }\n\n            // text-anchor emulation\n            switch (a["text-anchor"]) {\n                case "start":\n                    res.textpath.style["v-text-align"] = "left";\n                    res.bbx = res.W / 2;\n                break;\n                case "end":\n                    res.textpath.style["v-text-align"] = "right";\n                    res.bbx = -res.W / 2;\n                break;\n                default:\n                    res.textpath.style["v-text-align"] = "center";\n                    res.bbx = 0;\n                break;\n            }\n            res.textpath.style["v-text-kern"] = true;\n        }\n        // res.paper.canvas.style.display = E;\n    },\n    addGradientFill = function (o, gradient, fill) {\n        o.attrs = o.attrs || {};\n        var attrs = o.attrs,\n            pow = Math.pow,\n            opacity,\n            oindex,\n            type = "linear",\n            fxfy = ".5 .5";\n        o.attrs.gradient = gradient;\n        gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {\n            type = "radial";\n            if (fx && fy) {\n                fx = toFloat(fx);\n                fy = toFloat(fy);\n                pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                fxfy = fx + S + fy;\n            }\n            return E;\n        });\n        gradient = gradient.split(/\\s*\\-\\s*/);\n        if (type == "linear") {\n            var angle = gradient.shift();\n            angle = -toFloat(angle);\n            if (isNaN(angle)) {\n                return null;\n            }\n        }\n        var dots = R._parseDots(gradient);\n        if (!dots) {\n            return null;\n        }\n        o = o.shape || o.node;\n        if (dots.length) {\n            o.removeChild(fill);\n            fill.on = true;\n            fill.method = "none";\n            fill.color = dots[0].color;\n            fill.color2 = dots[dots.length - 1].color;\n            var clrs = [];\n            for (var i = 0, ii = dots.length; i < ii; i++) {\n                dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\n            }\n            fill.colors = clrs.length ? clrs.join() : "0% " + fill.color;\n            if (type == "radial") {\n                fill.type = "gradientTitle";\n                fill.focus = "100%";\n                fill.focussize = "0 0";\n                fill.focusposition = fxfy;\n                fill.angle = 0;\n            } else {\n                // fill.rotate= true;\n                fill.type = "gradient";\n                fill.angle = (270 - angle) % 360;\n            }\n            o.appendChild(fill);\n        }\n        return 1;\n    },\n    Element = function (node, vml) {\n        this[0] = this.node = node;\n        node.raphael = true;\n        this.id = R._oid++;\n        node.raphaelid = this.id;\n        this.X = 0;\n        this.Y = 0;\n        this.attrs = {};\n        this.paper = vml;\n        this.matrix = R.matrix();\n        this._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            dx: 0,\n            dy: 0,\n            deg: 0,\n            dirty: 1,\n            dirtyT: 1\n        };\n        !vml.bottom && (vml.bottom = this);\n        this.prev = vml.top;\n        vml.top && (vml.top.next = this);\n        vml.top = this;\n        this.next = null;\n    };\n    var elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n    elproto.transform = function (tstr) {\n        if (tstr == null) {\n            return this._.transform;\n        }\n        var vbs = this.paper._viewBoxShift,\n            vbt = vbs ? "s" + [vbs.scale, vbs.scale] + "-1-1t" + [vbs.dx, vbs.dy] : E,\n            oldt;\n        if (vbs) {\n            oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, this._.transform || E);\n        }\n        R._extractTransform(this, vbt + tstr);\n        var matrix = this.matrix.clone(),\n            skew = this.skew,\n            o = this.node,\n            split,\n            isGrad = ~Str(this.attrs.fill).indexOf("-"),\n            isPatt = !Str(this.attrs.fill).indexOf("url(");\n        matrix.translate(1, 1);\n        if (isPatt || isGrad || this.type == "image") {\n            skew.matrix = "1 0 0 1";\n            skew.offset = "0 0";\n            split = matrix.split();\n            if ((isGrad && split.noRotation) || !split.isSimple) {\n                o.style.filter = matrix.toFilter();\n                var bb = this.getBBox(),\n                    bbt = this.getBBox(1),\n                    dx = bb.x - bbt.x,\n                    dy = bb.y - bbt.y;\n                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\n                setCoords(this, 1, 1, dx, dy, 0);\n            } else {\n                o.style.filter = E;\n                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\n            }\n        } else {\n            o.style.filter = E;\n            skew.matrix = Str(matrix);\n            skew.offset = matrix.offset();\n        }\n        if (oldt !== null) { // empty string value is true as well\n            this._.transform = oldt;\n            R._extractTransform(this, oldt);\n        }\n        return this;\n    };\n    elproto.rotate = function (deg, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        if (deg == null) {\n            return;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        this._.dirtyT = 1;\n        this.transform(this._.transform.concat([["r", deg, cx, cy]]));\n        return this;\n    };\n    elproto.translate = function (dx, dy) {\n        if (this.removed) {\n            return this;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        if (this._.bbox) {\n            this._.bbox.x += dx;\n            this._.bbox.y += dy;\n        }\n        this.transform(this._.transform.concat([["t", dx, dy]]));\n        return this;\n    };\n    elproto.scale = function (sx, sy, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n            isNaN(cx) && (cx = null);\n            isNaN(cy) && (cy = null);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = this.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n\n        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));\n        this._.dirtyT = 1;\n        return this;\n    };\n    elproto.hide = function () {\n        !this.removed && (this.node.style.display = "none");\n        return this;\n    };\n    elproto.show = function () {\n        !this.removed && (this.node.style.display = E);\n        return this;\n    };\n    // Needed to fix the vml setViewBox issues\n    elproto.auxGetBBox = R.el.getBBox;\n    elproto.getBBox = function(){\n      var b = this.auxGetBBox();\n      if (this.paper && this.paper._viewBoxShift)\n      {\n        var c = {};\n        var z = 1/this.paper._viewBoxShift.scale;\n        c.x = b.x - this.paper._viewBoxShift.dx;\n        c.x *= z;\n        c.y = b.y - this.paper._viewBoxShift.dy;\n        c.y *= z;\n        c.width  = b.width  * z;\n        c.height = b.height * z;\n        c.x2 = c.x + c.width;\n        c.y2 = c.y + c.height;\n        return c;\n      }\n      return b;\n    };\n    elproto._getBBox = function () {\n        if (this.removed) {\n            return {};\n        }\n        return {\n            x: this.X + (this.bbx || 0) - this.W / 2,\n            y: this.Y - this.H,\n            width: this.W,\n            height: this.H\n        };\n    };\n    elproto.remove = function () {\n        if (this.removed || !this.node.parentNode) {\n            return;\n        }\n        this.paper.__set__ && this.paper.__set__.exclude(this);\n        R.eve.unbind("raphael.*.*." + this.id);\n        R._tear(this, this.paper);\n        this.node.parentNode.removeChild(this.node);\n        this.shape && this.shape.parentNode.removeChild(this.shape);\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    elproto.attr = function (name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs) if (this.attrs[has](a)) {\n                res[a] = this.attrs[a];\n            }\n            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            return res;\n        }\n        if (value == null && R.is(name, "string")) {\n            if (name == fillString && this.attrs.fill == "none" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            var names = name.split(separator),\n                out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.paper.customAttributes[name], "function")) {\n                    out[name] = this.paper.customAttributes[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (this.attrs && value == null && R.is(name, "array")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        var params;\n        if (value != null) {\n            params = {};\n            params[name] = value;\n        }\n        value == null && R.is(name, "object") && (params = name);\n        for (var key in params) {\n            eve("raphael.attr." + key + "." + this.id, this, params[key]);\n        }\n        if (params) {\n            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {\n                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\n                this.attrs[key] = params[key];\n                for (var subkey in par) if (par[has](subkey)) {\n                    params[subkey] = par[subkey];\n                }\n            }\n            // this.paper.canvas.style.display = "none";\n            if (params.text && this.type == "text") {\n                this.textpath.string = params.text;\n            }\n            setFillAndStroke(this, params);\n            // this.paper.canvas.style.display = E;\n        }\n        return this;\n    };\n    elproto.toFront = function () {\n        !this.removed && this.node.parentNode.appendChild(this.node);\n        this.paper && this.paper.top != this && R._tofront(this, this.paper);\n        return this;\n    };\n    elproto.toBack = function () {\n        if (this.removed) {\n            return this;\n        }\n        if (this.node.parentNode.firstChild != this.node) {\n            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);\n            R._toback(this, this.paper);\n        }\n        return this;\n    };\n    elproto.insertAfter = function (element) {\n        if (this.removed) {\n            return this;\n        }\n        if (element.constructor == R.st.constructor) {\n            element = element[element.length - 1];\n        }\n        if (element.node.nextSibling) {\n            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);\n        } else {\n            element.node.parentNode.appendChild(this.node);\n        }\n        R._insertafter(this, element, this.paper);\n        return this;\n    };\n    elproto.insertBefore = function (element) {\n        if (this.removed) {\n            return this;\n        }\n        if (element.constructor == R.st.constructor) {\n            element = element[0];\n        }\n        element.node.parentNode.insertBefore(this.node, element.node);\n        R._insertbefore(this, element, this.paper);\n        return this;\n    };\n    elproto.blur = function (size) {\n        var s = this.node.runtimeStyle,\n            f = s.filter;\n        f = f.replace(blurregexp, E);\n        if (+size !== 0) {\n            this.attrs.blur = size;\n            s.filter = f + S + ms + ".Blur(pixelradius=" + (+size || 1.5) + ")";\n            s.margin = R.format("-{0}px 0 0 -{0}px", round(+size || 1.5));\n        } else {\n            s.filter = f;\n            s.margin = 0;\n            delete this.attrs.blur;\n        }\n        return this;\n    };\n\n    R._engine.path = function (pathString, vml) {\n        var el = createNode("shape");\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = vml.coordorigin;\n        var p = new Element(el, vml),\n            attr = {fill: "none", stroke: "#000"};\n        pathString && (attr.path = pathString);\n        p.type = "path";\n        p.path = [];\n        p.Path = E;\n        setFillAndStroke(p, attr);\n        vml.canvas && vml.canvas.appendChild(el);\n        var skew = createNode("skew");\n        skew.on = true;\n        el.appendChild(skew);\n        p.skew = skew;\n        p.transform(E);\n        return p;\n    };\n    R._engine.rect = function (vml, x, y, w, h, r) {\n        var path = R._rectPath(x, y, w, h, r),\n            res = vml.path(path),\n            a = res.attrs;\n        res.X = a.x = x;\n        res.Y = a.y = y;\n        res.W = a.width = w;\n        res.H = a.height = h;\n        a.r = r;\n        a.path = path;\n        res.type = "rect";\n        return res;\n    };\n    R._engine.ellipse = function (vml, x, y, rx, ry) {\n        var res = vml.path(),\n            a = res.attrs;\n        res.X = x - rx;\n        res.Y = y - ry;\n        res.W = rx * 2;\n        res.H = ry * 2;\n        res.type = "ellipse";\n        setFillAndStroke(res, {\n            cx: x,\n            cy: y,\n            rx: rx,\n            ry: ry\n        });\n        return res;\n    };\n    R._engine.circle = function (vml, x, y, r) {\n        var res = vml.path(),\n            a = res.attrs;\n        res.X = x - r;\n        res.Y = y - r;\n        res.W = res.H = r * 2;\n        res.type = "circle";\n        setFillAndStroke(res, {\n            cx: x,\n            cy: y,\n            r: r\n        });\n        return res;\n    };\n    R._engine.image = function (vml, src, x, y, w, h) {\n        var path = R._rectPath(x, y, w, h),\n            res = vml.path(path).attr({stroke: "none"}),\n            a = res.attrs,\n            node = res.node,\n            fill = node.getElementsByTagName(fillString)[0];\n        a.src = src;\n        res.X = a.x = x;\n        res.Y = a.y = y;\n        res.W = a.width = w;\n        res.H = a.height = h;\n        a.path = path;\n        res.type = "image";\n        fill.parentNode == node && node.removeChild(fill);\n        fill.rotate = true;\n        fill.src = src;\n        fill.type = "tile";\n        res._.fillpos = [x, y];\n        res._.fillsize = [w, h];\n        node.appendChild(fill);\n        setCoords(res, 1, 1, 0, 0, 0);\n        return res;\n    };\n    R._engine.text = function (vml, x, y, text) {\n        var el = createNode("shape"),\n            path = createNode("path"),\n            o = createNode("textpath");\n        x = x || 0;\n        y = y || 0;\n        text = text || "";\n        path.v = R.format("m{0},{1}l{2},{1}", round(x * zoom), round(y * zoom), round(x * zoom) + 1);\n        path.textpathok = true;\n        o.string = Str(text);\n        o.on = true;\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = "0 0";\n        var p = new Element(el, vml),\n            attr = {\n                fill: "#000",\n                stroke: "none",\n                font: R._availableAttrs.font,\n                text: text\n            };\n        p.shape = el;\n        p.path = path;\n        p.textpath = o;\n        p.type = "text";\n        p.attrs.text = Str(text);\n        p.attrs.x = x;\n        p.attrs.y = y;\n        p.attrs.w = 1;\n        p.attrs.h = 1;\n        setFillAndStroke(p, attr);\n        el.appendChild(o);\n        el.appendChild(path);\n        vml.canvas.appendChild(el);\n        var skew = createNode("skew");\n        skew.on = true;\n        el.appendChild(skew);\n        p.skew = skew;\n        p.transform(E);\n        return p;\n    };\n    R._engine.setSize = function (width, height) {\n        var cs = this.canvas.style;\n        this.width = width;\n        this.height = height;\n        width == +width && (width += "px");\n        height == +height && (height += "px");\n        cs.width = width;\n        cs.height = height;\n        cs.clip = "rect(0 " + width + " " + height + " 0)";\n        if (this._viewBox) {\n            R._engine.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.setViewBox = function (x, y, w, h, fit) {\n        R.eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);\n        var paperSize = this.getSize(),\n            width = paperSize.width,\n            height = paperSize.height,\n            H, W;\n        if (fit) {\n            H = height / h;\n            W = width / w;\n            if (w * H < width) {\n                x -= (width - w * H) / 2 / H;\n            }\n            if (h * W < height) {\n                y -= (height - h * W) / 2 / W;\n            }\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        this._viewBoxShift = {\n            dx: -x,\n            dy: -y,\n            scale: paperSize\n        };\n        this.forEach(function (el) {\n            el.transform("...");\n        });\n        return this;\n    };\n    var createNode;\n    R._engine.initWin = function (win) {\n            var doc = win.document;\n            if (doc.styleSheets.length < 31) {\n                doc.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");\n            } else {\n                // no more room, add to the existing one\n                // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\n                doc.styleSheets[0].addRule(".rvml", "behavior:url(#default#VML)");\n            }\n            try {\n                !doc.namespaces.rvml && doc.namespaces.add("rvml", "urn:schemas-microsoft-com:vml");\n                createNode = function (tagName) {\n                    return doc.createElement(\'<rvml:\' + tagName + \' class="rvml">\');\n                };\n            } catch (e) {\n                createNode = function (tagName) {\n                    return doc.createElement(\'<\' + tagName + \' xmlns="urn:schemas-microsoft.com:vml" class="rvml">\');\n                };\n            }\n        };\n    R._engine.initWin(R._g.win);\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments),\n            container = con.container,\n            height = con.height,\n            s,\n            width = con.width,\n            x = con.x,\n            y = con.y;\n        if (!container) {\n            throw new Error("VML container not found.");\n        }\n        var res = new R._Paper,\n            c = res.canvas = R._g.doc.createElement("div"),\n            cs = c.style;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        res.width = width;\n        res.height = height;\n        width == +width && (width += "px");\n        height == +height && (height += "px");\n        res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n        res.coordorigin = "0 0";\n        res.span = R._g.doc.createElement("span");\n        res.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";\n        c.appendChild(res.span);\n        cs.cssText = R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", width, height);\n        if (container == 1) {\n            R._g.doc.body.appendChild(c);\n            cs.left = x + "px";\n            cs.top = y + "px";\n            cs.position = "absolute";\n        } else {\n            if (container.firstChild) {\n                container.insertBefore(c, container.firstChild);\n            } else {\n                container.appendChild(c);\n            }\n        }\n        res.renderfix = function () {};\n        return res;\n    };\n    R.prototype.clear = function () {\n        R.eve("raphael.clear", this);\n        this.canvas.innerHTML = E;\n        this.span = R._g.doc.createElement("span");\n        this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";\n        this.canvas.appendChild(this.span);\n        this.bottom = this.top = null;\n    };\n    R.prototype.remove = function () {\n        R.eve("raphael.remove", this);\n        this.canvas.parentNode.removeChild(this.canvas);\n        for (var i in this) {\n            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;\n        }\n        return true;\n    };\n\n    var setproto = R.st;\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9kZXYvcmFwaGFlbC52bWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9SYXBoYWVsLy4vZGV2L3JhcGhhZWwudm1sLmpzP2JhZjAiXSwic291cmNlc0NvbnRlbnQiOlsiZGVmaW5lKFtcIi4vcmFwaGFlbC5jb3JlXCJdLCBmdW5jdGlvbihSKSB7XG4gICAgaWYgKFIgJiYgIVIudm1sKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaGFzID0gXCJoYXNPd25Qcm9wZXJ0eVwiLFxuICAgICAgICBTdHIgPSBTdHJpbmcsXG4gICAgICAgIHRvRmxvYXQgPSBwYXJzZUZsb2F0LFxuICAgICAgICBtYXRoID0gTWF0aCxcbiAgICAgICAgcm91bmQgPSBtYXRoLnJvdW5kLFxuICAgICAgICBtbWF4ID0gbWF0aC5tYXgsXG4gICAgICAgIG1taW4gPSBtYXRoLm1pbixcbiAgICAgICAgYWJzID0gbWF0aC5hYnMsXG4gICAgICAgIGZpbGxTdHJpbmcgPSBcImZpbGxcIixcbiAgICAgICAgc2VwYXJhdG9yID0gL1ssIF0rLyxcbiAgICAgICAgZXZlID0gUi5ldmUsXG4gICAgICAgIG1zID0gXCIgcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0XCIsXG4gICAgICAgIFMgPSBcIiBcIixcbiAgICAgICAgRSA9IFwiXCIsXG4gICAgICAgIG1hcCA9IHtNOiBcIm1cIiwgTDogXCJsXCIsIEM6IFwiY1wiLCBaOiBcInhcIiwgbTogXCJ0XCIsIGw6IFwiclwiLCBjOiBcInZcIiwgejogXCJ4XCJ9LFxuICAgICAgICBiaXRlcyA9IC8oW2NsbXpdKSw/KFteY2xtel0qKS9naSxcbiAgICAgICAgYmx1cnJlZ2V4cCA9IC8gcHJvZ2lkOlxcUytCbHVyXFwoW15cXCldK1xcKS9nLFxuICAgICAgICB2YWwgPSAvLT9bXixcXHMtXSsvZyxcbiAgICAgICAgY3NzRG90ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7YmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIixcbiAgICAgICAgem9vbSA9IDIxNjAwLFxuICAgICAgICBwYXRoVHlwZXMgPSB7cGF0aDogMSwgcmVjdDogMSwgaW1hZ2U6IDF9LFxuICAgICAgICBvdmFsVHlwZXMgPSB7Y2lyY2xlOiAxLCBlbGxpcHNlOiAxfSxcbiAgICAgICAgcGF0aDJ2bWwgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsID0gIC9bYWhxc3R2XS9pZyxcbiAgICAgICAgICAgICAgICBjb21tYW5kID0gUi5fcGF0aFRvQWJzb2x1dGU7XG4gICAgICAgICAgICBTdHIocGF0aCkubWF0Y2godG90YWwpICYmIChjb21tYW5kID0gUi5fcGF0aDJjdXJ2ZSk7XG4gICAgICAgICAgICB0b3RhbCA9IC9bY2xtel0vZztcbiAgICAgICAgICAgIGlmIChjb21tYW5kID09IFIuX3BhdGhUb0Fic29sdXRlICYmICFTdHIocGF0aCkubWF0Y2godG90YWwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcyA9IFN0cihwYXRoKS5yZXBsYWNlKGJpdGVzLCBmdW5jdGlvbiAoYWxsLCBjb21tYW5kLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWxzID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc01vdmUgPSBjb21tYW5kLnRvTG93ZXJDYXNlKCkgPT0gXCJtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBtYXBbY29tbWFuZF07XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MucmVwbGFjZSh2YWwsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW92ZSAmJiB2YWxzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IHZhbHMgKyBtYXBbY29tbWFuZCA9PSBcIm1cIiA/IFwibFwiIDogXCJMXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaChyb3VuZCh2YWx1ZSAqIHpvb20pKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMgKyB2YWxzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGEgPSBjb21tYW5kKHBhdGgpLCBwLCByO1xuICAgICAgICAgICAgcmVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwYS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcCA9IHBhW2ldO1xuICAgICAgICAgICAgICAgIHIgPSBwYVtpXVswXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHIgPT0gXCJ6XCIgJiYgKHIgPSBcInhcIik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDEsIGpqID0gcC5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHIgKz0gcm91bmQocFtqXSAqIHpvb20pICsgKGogIT0gamogLSAxID8gXCIsXCIgOiBFKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzLnB1c2gocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpvaW4oUyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBlbnNhdGlvbiA9IGZ1bmN0aW9uIChkZWcsIGR4LCBkeSkge1xuICAgICAgICAgICAgdmFyIG0gPSBSLm1hdHJpeCgpO1xuICAgICAgICAgICAgbS5yb3RhdGUoLWRlZywgLjUsIC41KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZHg6IG0ueChkeCwgZHkpLFxuICAgICAgICAgICAgICAgIGR5OiBtLnkoZHgsIGR5KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0Q29vcmRzID0gZnVuY3Rpb24gKHAsIHN4LCBzeSwgZHgsIGR5LCBkZWcpIHtcbiAgICAgICAgICAgIHZhciBfID0gcC5fLFxuICAgICAgICAgICAgICAgIG0gPSBwLm1hdHJpeCxcbiAgICAgICAgICAgICAgICBmaWxscG9zID0gXy5maWxscG9zLFxuICAgICAgICAgICAgICAgIG8gPSBwLm5vZGUsXG4gICAgICAgICAgICAgICAgcyA9IG8uc3R5bGUsXG4gICAgICAgICAgICAgICAgeSA9IDEsXG4gICAgICAgICAgICAgICAgZmxpcCA9IFwiXCIsXG4gICAgICAgICAgICAgICAgZHhkeSxcbiAgICAgICAgICAgICAgICBreCA9IHpvb20gLyBzeCxcbiAgICAgICAgICAgICAgICBreSA9IHpvb20gLyBzeTtcbiAgICAgICAgICAgIHMudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBpZiAoIXN4IHx8ICFzeSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG8uY29vcmRzaXplID0gYWJzKGt4KSArIFMgKyBhYnMoa3kpO1xuICAgICAgICAgICAgcy5yb3RhdGlvbiA9IGRlZyAqIChzeCAqIHN5IDwgMCA/IC0xIDogMSk7XG4gICAgICAgICAgICBpZiAoZGVnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBjb21wZW5zYXRpb24oZGVnLCBkeCwgZHkpO1xuICAgICAgICAgICAgICAgIGR4ID0gYy5keDtcbiAgICAgICAgICAgICAgICBkeSA9IGMuZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzeCA8IDAgJiYgKGZsaXAgKz0gXCJ4XCIpO1xuICAgICAgICAgICAgc3kgPCAwICYmIChmbGlwICs9IFwiIHlcIikgJiYgKHkgPSAtMSk7XG4gICAgICAgICAgICBzLmZsaXAgPSBmbGlwO1xuICAgICAgICAgICAgby5jb29yZG9yaWdpbiA9IChkeCAqIC1reCkgKyBTICsgKGR5ICogLWt5KTtcbiAgICAgICAgICAgIGlmIChmaWxscG9zIHx8IF8uZmlsbHNpemUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsbCA9IG8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZmlsbFN0cmluZyk7XG4gICAgICAgICAgICAgICAgZmlsbCA9IGZpbGwgJiYgZmlsbFswXTtcbiAgICAgICAgICAgICAgICBvLnJlbW92ZUNoaWxkKGZpbGwpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxscG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBjb21wZW5zYXRpb24oZGVnLCBtLngoZmlsbHBvc1swXSwgZmlsbHBvc1sxXSksIG0ueShmaWxscG9zWzBdLCBmaWxscG9zWzFdKSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwucG9zaXRpb24gPSBjLmR4ICogeSArIFMgKyBjLmR5ICogeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF8uZmlsbHNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5zaXplID0gXy5maWxsc2l6ZVswXSAqIGFicyhzeCkgKyBTICsgXy5maWxsc2l6ZVsxXSAqIGFicyhzeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG8uYXBwZW5kQ2hpbGQoZmlsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICAgICAgfTtcbiAgICBSLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIFwiWW91ciBicm93c2VyIGRvZXNuXFx1MjAxOXQgc3VwcG9ydCBTVkcuIEZhbGxpbmcgZG93biB0byBWTUwuXFxuWW91IGFyZSBydW5uaW5nIFJhcGhhXFx4ZWJsIFwiICsgdGhpcy52ZXJzaW9uO1xuICAgIH07XG4gICAgdmFyIGFkZEFycm93ID0gZnVuY3Rpb24gKG8sIHZhbHVlLCBpc0VuZCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gU3RyKHZhbHVlKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLVwiKSxcbiAgICAgICAgICAgIHNlID0gaXNFbmQgPyBcImVuZFwiIDogXCJzdGFydFwiLFxuICAgICAgICAgICAgaSA9IHZhbHVlcy5sZW5ndGgsXG4gICAgICAgICAgICB0eXBlID0gXCJjbGFzc2ljXCIsXG4gICAgICAgICAgICB3ID0gXCJtZWRpdW1cIixcbiAgICAgICAgICAgIGggPSBcIm1lZGl1bVwiO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHZhbHVlc1tpXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJibG9ja1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJjbGFzc2ljXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIm92YWxcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIndpZGVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwibmFycm93XCI6IGggPSB2YWx1ZXNbaV07IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInNob3J0XCI6IHcgPSB2YWx1ZXNbaV07IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJva2UgPSBvLm5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF07XG4gICAgICAgIHN0cm9rZVtzZSArIFwiYXJyb3dcIl0gPSB0eXBlO1xuICAgICAgICBzdHJva2Vbc2UgKyBcImFycm93bGVuZ3RoXCJdID0gdztcbiAgICAgICAgc3Ryb2tlW3NlICsgXCJhcnJvd3dpZHRoXCJdID0gaDtcbiAgICB9LFxuICAgIHNldEZpbGxBbmRTdHJva2UgPSBmdW5jdGlvbiAobywgcGFyYW1zKSB7XG4gICAgICAgIC8vIG8ucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgby5hdHRycyA9IG8uYXR0cnMgfHwge307XG4gICAgICAgIHZhciBub2RlID0gby5ub2RlLFxuICAgICAgICAgICAgYSA9IG8uYXR0cnMsXG4gICAgICAgICAgICBzID0gbm9kZS5zdHlsZSxcbiAgICAgICAgICAgIHh5LFxuICAgICAgICAgICAgbmV3cGF0aCA9IHBhdGhUeXBlc1tvLnR5cGVdICYmIChwYXJhbXMueCAhPSBhLnggfHwgcGFyYW1zLnkgIT0gYS55IHx8IHBhcmFtcy53aWR0aCAhPSBhLndpZHRoIHx8IHBhcmFtcy5oZWlnaHQgIT0gYS5oZWlnaHQgfHwgcGFyYW1zLmN4ICE9IGEuY3ggfHwgcGFyYW1zLmN5ICE9IGEuY3kgfHwgcGFyYW1zLnJ4ICE9IGEucnggfHwgcGFyYW1zLnJ5ICE9IGEucnkgfHwgcGFyYW1zLnIgIT0gYS5yKSxcbiAgICAgICAgICAgIGlzT3ZhbCA9IG92YWxUeXBlc1tvLnR5cGVdICYmIChhLmN4ICE9IHBhcmFtcy5jeCB8fCBhLmN5ICE9IHBhcmFtcy5jeSB8fCBhLnIgIT0gcGFyYW1zLnIgfHwgYS5yeCAhPSBwYXJhbXMucnggfHwgYS5yeSAhPSBwYXJhbXMucnkpLFxuICAgICAgICAgICAgcmVzID0gbztcblxuXG4gICAgICAgIGZvciAodmFyIHBhciBpbiBwYXJhbXMpIGlmIChwYXJhbXNbaGFzXShwYXIpKSB7XG4gICAgICAgICAgICBhW3Bhcl0gPSBwYXJhbXNbcGFyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3cGF0aCkge1xuICAgICAgICAgICAgYS5wYXRoID0gUi5fZ2V0UGF0aFtvLnR5cGVdKG8pO1xuICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBwYXJhbXMuaHJlZiAmJiAobm9kZS5ocmVmID0gcGFyYW1zLmhyZWYpO1xuICAgICAgICBwYXJhbXMudGl0bGUgJiYgKG5vZGUudGl0bGUgPSBwYXJhbXMudGl0bGUpO1xuICAgICAgICBwYXJhbXMudGFyZ2V0ICYmIChub2RlLnRhcmdldCA9IHBhcmFtcy50YXJnZXQpO1xuICAgICAgICBwYXJhbXMuY3Vyc29yICYmIChzLmN1cnNvciA9IHBhcmFtcy5jdXJzb3IpO1xuICAgICAgICBcImJsdXJcIiBpbiBwYXJhbXMgJiYgby5ibHVyKHBhcmFtcy5ibHVyKTtcbiAgICAgICAgaWYgKHBhcmFtcy5wYXRoICYmIG8udHlwZSA9PSBcInBhdGhcIiB8fCBuZXdwYXRoKSB7XG4gICAgICAgICAgICBub2RlLnBhdGggPSBwYXRoMnZtbCh+U3RyKGEucGF0aCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiclwiKSA/IFIuX3BhdGhUb0Fic29sdXRlKGEucGF0aCkgOiBhLnBhdGgpO1xuICAgICAgICAgICAgby5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgIGlmIChvLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICAgICAgby5fLmZpbGxwb3MgPSBbYS54LCBhLnldO1xuICAgICAgICAgICAgICAgIG8uXy5maWxsc2l6ZSA9IFthLndpZHRoLCBhLmhlaWdodF07XG4gICAgICAgICAgICAgICAgc2V0Q29vcmRzKG8sIDEsIDEsIDAsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFwidHJhbnNmb3JtXCIgaW4gcGFyYW1zICYmIG8udHJhbnNmb3JtKHBhcmFtcy50cmFuc2Zvcm0pO1xuICAgICAgICBpZiAoaXNPdmFsKSB7XG4gICAgICAgICAgICB2YXIgY3ggPSArYS5jeCxcbiAgICAgICAgICAgICAgICBjeSA9ICthLmN5LFxuICAgICAgICAgICAgICAgIHJ4ID0gK2EucnggfHwgK2EuciB8fCAwLFxuICAgICAgICAgICAgICAgIHJ5ID0gK2EucnkgfHwgK2EuciB8fCAwO1xuICAgICAgICAgICAgbm9kZS5wYXRoID0gUi5mb3JtYXQoXCJhcnswfSx7MX0sezJ9LHszfSx7NH0sezF9LHs0fSx7MX14XCIsIHJvdW5kKChjeCAtIHJ4KSAqIHpvb20pLCByb3VuZCgoY3kgLSByeSkgKiB6b29tKSwgcm91bmQoKGN4ICsgcngpICogem9vbSksIHJvdW5kKChjeSArIHJ5KSAqIHpvb20pLCByb3VuZChjeCAqIHpvb20pKTtcbiAgICAgICAgICAgIG8uXy5kaXJ0eSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiY2xpcC1yZWN0XCIgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IFN0cihwYXJhbXNbXCJjbGlwLXJlY3RcIl0pLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgICAgICBpZiAocmVjdC5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgIHJlY3RbMl0gPSArcmVjdFsyXSArICgrcmVjdFswXSk7XG4gICAgICAgICAgICAgICAgcmVjdFszXSA9ICtyZWN0WzNdICsgKCtyZWN0WzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gbm9kZS5jbGlwUmVjdCB8fCBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgICAgICAgICBkc3R5bGUgPSBkaXYuc3R5bGU7XG4gICAgICAgICAgICAgICAgZHN0eWxlLmNsaXAgPSBSLmZvcm1hdChcInJlY3QoezF9cHggezJ9cHggezN9cHggezB9cHgpXCIsIHJlY3QpO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZS5jbGlwUmVjdCkge1xuICAgICAgICAgICAgICAgICAgICBkc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS50b3AgPSAwO1xuICAgICAgICAgICAgICAgICAgICBkc3R5bGUubGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS53aWR0aCA9IG8ucGFwZXIud2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGRzdHlsZS5oZWlnaHQgPSBvLnBhcGVyLmhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkaXYsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2xpcFJlY3QgPSBkaXY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwYXJhbXNbXCJjbGlwLXJlY3RcIl0pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNsaXBSZWN0ICYmIChub2RlLmNsaXBSZWN0LnN0eWxlLmNsaXAgPSBcImF1dG9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG8udGV4dHBhdGgpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0cGF0aFN0eWxlID0gby50ZXh0cGF0aC5zdHlsZTtcbiAgICAgICAgICAgIHBhcmFtcy5mb250ICYmICh0ZXh0cGF0aFN0eWxlLmZvbnQgPSBwYXJhbXMuZm9udCk7XG4gICAgICAgICAgICBwYXJhbXNbXCJmb250LWZhbWlseVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250RmFtaWx5ID0gJ1wiJyArIHBhcmFtc1tcImZvbnQtZmFtaWx5XCJdLnNwbGl0KFwiLFwiKVswXS5yZXBsYWNlKC9eWydcIl0rfFsnXCJdKyQvZywgRSkgKyAnXCInKTtcbiAgICAgICAgICAgIHBhcmFtc1tcImZvbnQtc2l6ZVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250U2l6ZSA9IHBhcmFtc1tcImZvbnQtc2l6ZVwiXSk7XG4gICAgICAgICAgICBwYXJhbXNbXCJmb250LXdlaWdodFwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250V2VpZ2h0ID0gcGFyYW1zW1wiZm9udC13ZWlnaHRcIl0pO1xuICAgICAgICAgICAgcGFyYW1zW1wiZm9udC1zdHlsZVwiXSAmJiAodGV4dHBhdGhTdHlsZS5mb250U3R5bGUgPSBwYXJhbXNbXCJmb250LXN0eWxlXCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJhcnJvdy1zdGFydFwiIGluIHBhcmFtcykge1xuICAgICAgICAgICAgYWRkQXJyb3cocmVzLCBwYXJhbXNbXCJhcnJvdy1zdGFydFwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiYXJyb3ctZW5kXCIgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBhZGRBcnJvdyhyZXMsIHBhcmFtc1tcImFycm93LWVuZFwiXSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtcy5vcGFjaXR5ICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtcy5maWxsICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtcy5zcmMgIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zLnN0cm9rZSAhPSBudWxsIHx8XG4gICAgICAgICAgICBwYXJhbXNbXCJzdHJva2Utd2lkdGhcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW9wYWNpdHlcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wiZmlsbC1vcGFjaXR5XCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1kYXNoYXJyYXlcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gIT0gbnVsbCB8fFxuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLWxpbmVqb2luXCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBmaWxsID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZShmaWxsU3RyaW5nKSxcbiAgICAgICAgICAgICAgICBuZXdmaWxsID0gZmFsc2U7XG4gICAgICAgICAgICBmaWxsID0gZmlsbCAmJiBmaWxsWzBdO1xuICAgICAgICAgICAgIWZpbGwgJiYgKG5ld2ZpbGwgPSBmaWxsID0gY3JlYXRlTm9kZShmaWxsU3RyaW5nKSk7XG4gICAgICAgICAgICBpZiAoby50eXBlID09IFwiaW1hZ2VcIiAmJiBwYXJhbXMuc3JjKSB7XG4gICAgICAgICAgICAgICAgZmlsbC5zcmMgPSBwYXJhbXMuc3JjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zLmZpbGwgJiYgKGZpbGwub24gPSB0cnVlKTtcbiAgICAgICAgICAgIGlmIChmaWxsLm9uID09IG51bGwgfHwgcGFyYW1zLmZpbGwgPT0gXCJub25lXCIgfHwgcGFyYW1zLmZpbGwgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmaWxsLm9uID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsbC5vbiAmJiBwYXJhbXMuZmlsbCkge1xuICAgICAgICAgICAgICAgIHZhciBpc1VSTCA9IFN0cihwYXJhbXMuZmlsbCkubWF0Y2goUi5fSVNVUkwpO1xuICAgICAgICAgICAgICAgIGlmIChpc1VSTCkge1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnBhcmVudE5vZGUgPT0gbm9kZSAmJiBub2RlLnJlbW92ZUNoaWxkKGZpbGwpO1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnJvdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwuc3JjID0gaXNVUkxbMV07XG4gICAgICAgICAgICAgICAgICAgIGZpbGwudHlwZSA9IFwidGlsZVwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmJveCA9IG8uZ2V0QkJveCgxKTtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5wb3NpdGlvbiA9IGJib3gueCArIFMgKyBiYm94Lnk7XG4gICAgICAgICAgICAgICAgICAgIG8uXy5maWxscG9zID0gW2Jib3gueCwgYmJveC55XTtcblxuICAgICAgICAgICAgICAgICAgICBSLl9wcmVsb2FkKGlzVVJMWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLl8uZmlsbHNpemUgPSBbdGhpcy5vZmZzZXRXaWR0aCwgdGhpcy5vZmZzZXRIZWlnaHRdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaWxsLmNvbG9yID0gUi5nZXRSR0IocGFyYW1zLmZpbGwpLmhleDtcbiAgICAgICAgICAgICAgICAgICAgZmlsbC5zcmMgPSBFO1xuICAgICAgICAgICAgICAgICAgICBmaWxsLnR5cGUgPSBcInNvbGlkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChSLmdldFJHQihwYXJhbXMuZmlsbCkuZXJyb3IgJiYgKHJlcy50eXBlIGluIHtjaXJjbGU6IDEsIGVsbGlwc2U6IDF9IHx8IFN0cihwYXJhbXMuZmlsbCkuY2hhckF0KCkgIT0gXCJyXCIpICYmIGFkZEdyYWRpZW50RmlsbChyZXMsIHBhcmFtcy5maWxsLCBmaWxsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5maWxsID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhLmdyYWRpZW50ID0gcGFyYW1zLmZpbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsLnJvdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFwiZmlsbC1vcGFjaXR5XCIgaW4gcGFyYW1zIHx8IFwib3BhY2l0eVwiIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gKCgrYVtcImZpbGwtb3BhY2l0eVwiXSArIDEgfHwgMikgLSAxKSAqICgoK2Eub3BhY2l0eSArIDEgfHwgMikgLSAxKSAqICgoK1IuZ2V0UkdCKHBhcmFtcy5maWxsKS5vICsgMSB8fCAyKSAtIDEpO1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgPSBtbWluKG1tYXgob3BhY2l0eSwgMCksIDEpO1xuICAgICAgICAgICAgICAgIGZpbGwub3BhY2l0eSA9IG9wYWNpdHk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGwuc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwuY29sb3IgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZpbGwpO1xuICAgICAgICAgICAgdmFyIHN0cm9rZSA9IChub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpICYmIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF0pLFxuICAgICAgICAgICAgbmV3c3Ryb2tlID0gZmFsc2U7XG4gICAgICAgICAgICAhc3Ryb2tlICYmIChuZXdzdHJva2UgPSBzdHJva2UgPSBjcmVhdGVOb2RlKFwic3Ryb2tlXCIpKTtcbiAgICAgICAgICAgIGlmICgocGFyYW1zLnN0cm9rZSAmJiBwYXJhbXMuc3Ryb2tlICE9IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSB8fFxuICAgICAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1vcGFjaXR5XCJdICE9IG51bGwgfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtZGFzaGFycmF5XCJdIHx8XG4gICAgICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gfHxcbiAgICAgICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWNhcFwiXSkge1xuICAgICAgICAgICAgICAgIHN0cm9rZS5vbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAocGFyYW1zLnN0cm9rZSA9PSBcIm5vbmVcIiB8fCBwYXJhbXMuc3Ryb2tlID09PSBudWxsIHx8IHN0cm9rZS5vbiA9PSBudWxsIHx8IHBhcmFtcy5zdHJva2UgPT0gMCB8fCBwYXJhbXNbXCJzdHJva2Utd2lkdGhcIl0gPT0gMCkgJiYgKHN0cm9rZS5vbiA9IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBzdHJva2VDb2xvciA9IFIuZ2V0UkdCKHBhcmFtcy5zdHJva2UpO1xuICAgICAgICAgICAgc3Ryb2tlLm9uICYmIHBhcmFtcy5zdHJva2UgJiYgKHN0cm9rZS5jb2xvciA9IHN0cm9rZUNvbG9yLmhleCk7XG4gICAgICAgICAgICBvcGFjaXR5ID0gKCgrYVtcInN0cm9rZS1vcGFjaXR5XCJdICsgMSB8fCAyKSAtIDEpICogKCgrYS5vcGFjaXR5ICsgMSB8fCAyKSAtIDEpICogKCgrc3Ryb2tlQ29sb3IubyArIDEgfHwgMikgLSAxKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICh0b0Zsb2F0KHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSkgfHwgMSkgKiAuNzU7XG4gICAgICAgICAgICBvcGFjaXR5ID0gbW1pbihtbWF4KG9wYWNpdHksIDApLCAxKTtcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS13aWR0aFwiXSA9PSBudWxsICYmICh3aWR0aCA9IGFbXCJzdHJva2Utd2lkdGhcIl0pO1xuICAgICAgICAgICAgcGFyYW1zW1wic3Ryb2tlLXdpZHRoXCJdICYmIChzdHJva2Uud2VpZ2h0ID0gd2lkdGgpO1xuICAgICAgICAgICAgd2lkdGggJiYgd2lkdGggPCAxICYmIChvcGFjaXR5ICo9IHdpZHRoKSAmJiAoc3Ryb2tlLndlaWdodCA9IDEpO1xuICAgICAgICAgICAgc3Ryb2tlLm9wYWNpdHkgPSBvcGFjaXR5O1xuXG4gICAgICAgICAgICBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gJiYgKHN0cm9rZS5qb2luc3R5bGUgPSBwYXJhbXNbXCJzdHJva2UtbGluZWpvaW5cIl0gfHwgXCJtaXRlclwiKTtcbiAgICAgICAgICAgIHN0cm9rZS5taXRlcmxpbWl0ID0gcGFyYW1zW1wic3Ryb2tlLW1pdGVybGltaXRcIl0gfHwgODtcbiAgICAgICAgICAgIHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdICYmIChzdHJva2UuZW5kY2FwID0gcGFyYW1zW1wic3Ryb2tlLWxpbmVjYXBcIl0gPT0gXCJidXR0XCIgPyBcImZsYXRcIiA6IHBhcmFtc1tcInN0cm9rZS1saW5lY2FwXCJdID09IFwic3F1YXJlXCIgPyBcInNxdWFyZVwiIDogXCJyb3VuZFwiKTtcbiAgICAgICAgICAgIGlmIChcInN0cm9rZS1kYXNoYXJyYXlcIiBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGFzaGFycmF5ID0ge1xuICAgICAgICAgICAgICAgICAgICBcIi1cIjogXCJzaG9ydGRhc2hcIixcbiAgICAgICAgICAgICAgICAgICAgXCIuXCI6IFwic2hvcnRkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgXCItLlwiOiBcInNob3J0ZGFzaGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0uLlwiOiBcInNob3J0ZGFzaGRvdGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi4gXCI6IFwiZG90XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLSBcIjogXCJkYXNoXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiLS1cIjogXCJsb25nZGFzaFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0gLlwiOiBcImRhc2hkb3RcIixcbiAgICAgICAgICAgICAgICAgICAgXCItLS5cIjogXCJsb25nZGFzaGRvdFwiLFxuICAgICAgICAgICAgICAgICAgICBcIi0tLi5cIjogXCJsb25nZGFzaGRvdGRvdFwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzdHJva2UuZGFzaHN0eWxlID0gZGFzaGFycmF5W2hhc10ocGFyYW1zW1wic3Ryb2tlLWRhc2hhcnJheVwiXSkgPyBkYXNoYXJyYXlbcGFyYW1zW1wic3Ryb2tlLWRhc2hhcnJheVwiXV0gOiBFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3c3Ryb2tlICYmIG5vZGUuYXBwZW5kQ2hpbGQoc3Ryb2tlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgIHJlcy5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheSA9IEU7XG4gICAgICAgICAgICB2YXIgc3BhbiA9IHJlcy5wYXBlci5zcGFuLFxuICAgICAgICAgICAgICAgIG0gPSAxMDAsXG4gICAgICAgICAgICAgICAgZm9udFNpemUgPSBhLmZvbnQgJiYgYS5mb250Lm1hdGNoKC9cXGQrKD86XFwuXFxkKik/KD89cHgpLyk7XG4gICAgICAgICAgICBzID0gc3Bhbi5zdHlsZTtcbiAgICAgICAgICAgIGEuZm9udCAmJiAocy5mb250ID0gYS5mb250KTtcbiAgICAgICAgICAgIGFbXCJmb250LWZhbWlseVwiXSAmJiAocy5mb250RmFtaWx5ID0gYVtcImZvbnQtZmFtaWx5XCJdKTtcbiAgICAgICAgICAgIGFbXCJmb250LXdlaWdodFwiXSAmJiAocy5mb250V2VpZ2h0ID0gYVtcImZvbnQtd2VpZ2h0XCJdKTtcbiAgICAgICAgICAgIGFbXCJmb250LXN0eWxlXCJdICYmIChzLmZvbnRTdHlsZSA9IGFbXCJmb250LXN0eWxlXCJdKTtcbiAgICAgICAgICAgIGZvbnRTaXplID0gdG9GbG9hdChhW1wiZm9udC1zaXplXCJdIHx8IGZvbnRTaXplICYmIGZvbnRTaXplWzBdKSB8fCAxMDtcbiAgICAgICAgICAgIHMuZm9udFNpemUgPSBmb250U2l6ZSAqIG0gKyBcInB4XCI7XG4gICAgICAgICAgICByZXMudGV4dHBhdGguc3RyaW5nICYmIChzcGFuLmlubmVySFRNTCA9IFN0cihyZXMudGV4dHBhdGguc3RyaW5nKS5yZXBsYWNlKC88L2csIFwiJiM2MDtcIikucmVwbGFjZSgvJi9nLCBcIiYjMzg7XCIpLnJlcGxhY2UoL1xcbi9nLCBcIjxicj5cIikpO1xuICAgICAgICAgICAgdmFyIGJyZWN0ID0gc3Bhbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHJlcy5XID0gYS53ID0gKGJyZWN0LnJpZ2h0IC0gYnJlY3QubGVmdCkgLyBtO1xuICAgICAgICAgICAgcmVzLkggPSBhLmggPSAoYnJlY3QuYm90dG9tIC0gYnJlY3QudG9wKSAvIG07XG4gICAgICAgICAgICAvLyByZXMucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHJlcy5YID0gYS54O1xuICAgICAgICAgICAgcmVzLlkgPSBhLnkgKyByZXMuSCAvIDI7XG5cbiAgICAgICAgICAgIChcInhcIiBpbiBwYXJhbXMgfHwgXCJ5XCIgaW4gcGFyYW1zKSAmJiAocmVzLnBhdGgudiA9IFIuZm9ybWF0KFwibXswfSx7MX1sezJ9LHsxfVwiLCByb3VuZChhLnggKiB6b29tKSwgcm91bmQoYS55ICogem9vbSksIHJvdW5kKGEueCAqIHpvb20pICsgMSkpO1xuICAgICAgICAgICAgdmFyIGRpcnR5YXR0cnMgPSBbXCJ4XCIsIFwieVwiLCBcInRleHRcIiwgXCJmb250XCIsIFwiZm9udC1mYW1pbHlcIiwgXCJmb250LXdlaWdodFwiLCBcImZvbnQtc3R5bGVcIiwgXCJmb250LXNpemVcIl07XG4gICAgICAgICAgICBmb3IgKHZhciBkID0gMCwgZGQgPSBkaXJ0eWF0dHJzLmxlbmd0aDsgZCA8IGRkOyBkKyspIGlmIChkaXJ0eWF0dHJzW2RdIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJlcy5fLmRpcnR5ID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGV4dC1hbmNob3IgZW11bGF0aW9uXG4gICAgICAgICAgICBzd2l0Y2ggKGFbXCJ0ZXh0LWFuY2hvclwiXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICByZXMudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQtYWxpZ25cIl0gPSBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IHJlcy5XIC8gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgIHJlcy50ZXh0cGF0aC5zdHlsZVtcInYtdGV4dC1hbGlnblwiXSA9IFwicmlnaHRcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IC1yZXMuVyAvIDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzLnRleHRwYXRoLnN0eWxlW1widi10ZXh0LWFsaWduXCJdID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmJieCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXMudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQta2VyblwiXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzLnBhcGVyLmNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gRTtcbiAgICB9LFxuICAgIGFkZEdyYWRpZW50RmlsbCA9IGZ1bmN0aW9uIChvLCBncmFkaWVudCwgZmlsbCkge1xuICAgICAgICBvLmF0dHJzID0gby5hdHRycyB8fCB7fTtcbiAgICAgICAgdmFyIGF0dHJzID0gby5hdHRycyxcbiAgICAgICAgICAgIHBvdyA9IE1hdGgucG93LFxuICAgICAgICAgICAgb3BhY2l0eSxcbiAgICAgICAgICAgIG9pbmRleCxcbiAgICAgICAgICAgIHR5cGUgPSBcImxpbmVhclwiLFxuICAgICAgICAgICAgZnhmeSA9IFwiLjUgLjVcIjtcbiAgICAgICAgby5hdHRycy5ncmFkaWVudCA9IGdyYWRpZW50O1xuICAgICAgICBncmFkaWVudCA9IFN0cihncmFkaWVudCkucmVwbGFjZShSLl9yYWRpYWxfZ3JhZGllbnQsIGZ1bmN0aW9uIChhbGwsIGZ4LCBmeSkge1xuICAgICAgICAgICAgdHlwZSA9IFwicmFkaWFsXCI7XG4gICAgICAgICAgICBpZiAoZnggJiYgZnkpIHtcbiAgICAgICAgICAgICAgICBmeCA9IHRvRmxvYXQoZngpO1xuICAgICAgICAgICAgICAgIGZ5ID0gdG9GbG9hdChmeSk7XG4gICAgICAgICAgICAgICAgcG93KGZ4IC0gLjUsIDIpICsgcG93KGZ5IC0gLjUsIDIpID4gLjI1ICYmIChmeSA9IG1hdGguc3FydCguMjUgLSBwb3coZnggLSAuNSwgMikpICogKChmeSA+IC41KSAqIDIgLSAxKSArIC41KTtcbiAgICAgICAgICAgICAgICBmeGZ5ID0gZnggKyBTICsgZnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gRTtcbiAgICAgICAgfSk7XG4gICAgICAgIGdyYWRpZW50ID0gZ3JhZGllbnQuc3BsaXQoL1xccypcXC1cXHMqLyk7XG4gICAgICAgIGlmICh0eXBlID09IFwibGluZWFyXCIpIHtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IGdyYWRpZW50LnNoaWZ0KCk7XG4gICAgICAgICAgICBhbmdsZSA9IC10b0Zsb2F0KGFuZ2xlKTtcbiAgICAgICAgICAgIGlmIChpc05hTihhbmdsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZG90cyA9IFIuX3BhcnNlRG90cyhncmFkaWVudCk7XG4gICAgICAgIGlmICghZG90cykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbyA9IG8uc2hhcGUgfHwgby5ub2RlO1xuICAgICAgICBpZiAoZG90cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG8ucmVtb3ZlQ2hpbGQoZmlsbCk7XG4gICAgICAgICAgICBmaWxsLm9uID0gdHJ1ZTtcbiAgICAgICAgICAgIGZpbGwubWV0aG9kID0gXCJub25lXCI7XG4gICAgICAgICAgICBmaWxsLmNvbG9yID0gZG90c1swXS5jb2xvcjtcbiAgICAgICAgICAgIGZpbGwuY29sb3IyID0gZG90c1tkb3RzLmxlbmd0aCAtIDFdLmNvbG9yO1xuICAgICAgICAgICAgdmFyIGNscnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGRvdHMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGRvdHNbaV0ub2Zmc2V0ICYmIGNscnMucHVzaChkb3RzW2ldLm9mZnNldCArIFMgKyBkb3RzW2ldLmNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGwuY29sb3JzID0gY2xycy5sZW5ndGggPyBjbHJzLmpvaW4oKSA6IFwiMCUgXCIgKyBmaWxsLmNvbG9yO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJyYWRpYWxcIikge1xuICAgICAgICAgICAgICAgIGZpbGwudHlwZSA9IFwiZ3JhZGllbnRUaXRsZVwiO1xuICAgICAgICAgICAgICAgIGZpbGwuZm9jdXMgPSBcIjEwMCVcIjtcbiAgICAgICAgICAgICAgICBmaWxsLmZvY3Vzc2l6ZSA9IFwiMCAwXCI7XG4gICAgICAgICAgICAgICAgZmlsbC5mb2N1c3Bvc2l0aW9uID0gZnhmeTtcbiAgICAgICAgICAgICAgICBmaWxsLmFuZ2xlID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZmlsbC5yb3RhdGU9IHRydWU7XG4gICAgICAgICAgICAgICAgZmlsbC50eXBlID0gXCJncmFkaWVudFwiO1xuICAgICAgICAgICAgICAgIGZpbGwuYW5nbGUgPSAoMjcwIC0gYW5nbGUpICUgMzYwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgby5hcHBlbmRDaGlsZChmaWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMTtcbiAgICB9LFxuICAgIEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSwgdm1sKSB7XG4gICAgICAgIHRoaXNbMF0gPSB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICBub2RlLnJhcGhhZWwgPSB0cnVlO1xuICAgICAgICB0aGlzLmlkID0gUi5fb2lkKys7XG4gICAgICAgIG5vZGUucmFwaGFlbGlkID0gdGhpcy5pZDtcbiAgICAgICAgdGhpcy5YID0gMDtcbiAgICAgICAgdGhpcy5ZID0gMDtcbiAgICAgICAgdGhpcy5hdHRycyA9IHt9O1xuICAgICAgICB0aGlzLnBhcGVyID0gdm1sO1xuICAgICAgICB0aGlzLm1hdHJpeCA9IFIubWF0cml4KCk7XG4gICAgICAgIHRoaXMuXyA9IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogW10sXG4gICAgICAgICAgICBzeDogMSxcbiAgICAgICAgICAgIHN5OiAxLFxuICAgICAgICAgICAgZHg6IDAsXG4gICAgICAgICAgICBkeTogMCxcbiAgICAgICAgICAgIGRlZzogMCxcbiAgICAgICAgICAgIGRpcnR5OiAxLFxuICAgICAgICAgICAgZGlydHlUOiAxXG4gICAgICAgIH07XG4gICAgICAgICF2bWwuYm90dG9tICYmICh2bWwuYm90dG9tID0gdGhpcyk7XG4gICAgICAgIHRoaXMucHJldiA9IHZtbC50b3A7XG4gICAgICAgIHZtbC50b3AgJiYgKHZtbC50b3AubmV4dCA9IHRoaXMpO1xuICAgICAgICB2bWwudG9wID0gdGhpcztcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICB9O1xuICAgIHZhciBlbHByb3RvID0gUi5lbDtcblxuICAgIEVsZW1lbnQucHJvdG90eXBlID0gZWxwcm90bztcbiAgICBlbHByb3RvLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcbiAgICBlbHByb3RvLnRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0c3RyKSB7XG4gICAgICAgIGlmICh0c3RyID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8udHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2YnMgPSB0aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQsXG4gICAgICAgICAgICB2YnQgPSB2YnMgPyBcInNcIiArIFt2YnMuc2NhbGUsIHZicy5zY2FsZV0gKyBcIi0xLTF0XCIgKyBbdmJzLmR4LCB2YnMuZHldIDogRSxcbiAgICAgICAgICAgIG9sZHQ7XG4gICAgICAgIGlmICh2YnMpIHtcbiAgICAgICAgICAgIG9sZHQgPSB0c3RyID0gU3RyKHRzdHIpLnJlcGxhY2UoL1xcLnszfXxcXHUyMDI2L2csIHRoaXMuXy50cmFuc2Zvcm0gfHwgRSk7XG4gICAgICAgIH1cbiAgICAgICAgUi5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLCB2YnQgKyB0c3RyKTtcbiAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMubWF0cml4LmNsb25lKCksXG4gICAgICAgICAgICBza2V3ID0gdGhpcy5za2V3LFxuICAgICAgICAgICAgbyA9IHRoaXMubm9kZSxcbiAgICAgICAgICAgIHNwbGl0LFxuICAgICAgICAgICAgaXNHcmFkID0gflN0cih0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCItXCIpLFxuICAgICAgICAgICAgaXNQYXR0ID0gIVN0cih0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCJ1cmwoXCIpO1xuICAgICAgICBtYXRyaXgudHJhbnNsYXRlKDEsIDEpO1xuICAgICAgICBpZiAoaXNQYXR0IHx8IGlzR3JhZCB8fCB0aGlzLnR5cGUgPT0gXCJpbWFnZVwiKSB7XG4gICAgICAgICAgICBza2V3Lm1hdHJpeCA9IFwiMSAwIDAgMVwiO1xuICAgICAgICAgICAgc2tldy5vZmZzZXQgPSBcIjAgMFwiO1xuICAgICAgICAgICAgc3BsaXQgPSBtYXRyaXguc3BsaXQoKTtcbiAgICAgICAgICAgIGlmICgoaXNHcmFkICYmIHNwbGl0Lm5vUm90YXRpb24pIHx8ICFzcGxpdC5pc1NpbXBsZSkge1xuICAgICAgICAgICAgICAgIG8uc3R5bGUuZmlsdGVyID0gbWF0cml4LnRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIGJiID0gdGhpcy5nZXRCQm94KCksXG4gICAgICAgICAgICAgICAgICAgIGJidCA9IHRoaXMuZ2V0QkJveCgxKSxcbiAgICAgICAgICAgICAgICAgICAgZHggPSBiYi54IC0gYmJ0LngsXG4gICAgICAgICAgICAgICAgICAgIGR5ID0gYmIueSAtIGJidC55O1xuICAgICAgICAgICAgICAgIG8uY29vcmRvcmlnaW4gPSAoZHggKiAtem9vbSkgKyBTICsgKGR5ICogLXpvb20pO1xuICAgICAgICAgICAgICAgIHNldENvb3Jkcyh0aGlzLCAxLCAxLCBkeCwgZHksIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvLnN0eWxlLmZpbHRlciA9IEU7XG4gICAgICAgICAgICAgICAgc2V0Q29vcmRzKHRoaXMsIHNwbGl0LnNjYWxleCwgc3BsaXQuc2NhbGV5LCBzcGxpdC5keCwgc3BsaXQuZHksIHNwbGl0LnJvdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLnN0eWxlLmZpbHRlciA9IEU7XG4gICAgICAgICAgICBza2V3Lm1hdHJpeCA9IFN0cihtYXRyaXgpO1xuICAgICAgICAgICAgc2tldy5vZmZzZXQgPSBtYXRyaXgub2Zmc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9sZHQgIT09IG51bGwpIHsgLy8gZW1wdHkgc3RyaW5nIHZhbHVlIGlzIHRydWUgYXMgd2VsbFxuICAgICAgICAgICAgdGhpcy5fLnRyYW5zZm9ybSA9IG9sZHQ7XG4gICAgICAgICAgICBSLl9leHRyYWN0VHJhbnNmb3JtKHRoaXMsIG9sZHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZWxwcm90by5yb3RhdGUgPSBmdW5jdGlvbiAoZGVnLCBjeCwgY3kpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGVnID0gU3RyKGRlZykuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKGRlZy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjeCA9IHRvRmxvYXQoZGVnWzFdKTtcbiAgICAgICAgICAgIGN5ID0gdG9GbG9hdChkZWdbMl0pO1xuICAgICAgICB9XG4gICAgICAgIGRlZyA9IHRvRmxvYXQoZGVnWzBdKTtcbiAgICAgICAgKGN5ID09IG51bGwpICYmIChjeCA9IGN5KTtcbiAgICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmdldEJCb3goMSk7XG4gICAgICAgICAgICBjeCA9IGJib3gueCArIGJib3gud2lkdGggLyAyO1xuICAgICAgICAgICAgY3kgPSBiYm94LnkgKyBiYm94LmhlaWdodCAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fLmRpcnR5VCA9IDE7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJyXCIsIGRlZywgY3gsIGN5XV0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkeCwgZHkpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZHggPSBTdHIoZHgpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBkeSA9IHRvRmxvYXQoZHhbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGR4ID0gdG9GbG9hdChkeFswXSkgfHwgMDtcbiAgICAgICAgZHkgPSArZHkgfHwgMDtcbiAgICAgICAgaWYgKHRoaXMuXy5iYm94KSB7XG4gICAgICAgICAgICB0aGlzLl8uYmJveC54ICs9IGR4O1xuICAgICAgICAgICAgdGhpcy5fLmJib3gueSArPSBkeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1widFwiLCBkeCwgZHldXSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGVscHJvdG8uc2NhbGUgPSBmdW5jdGlvbiAoc3gsIHN5LCBjeCwgY3kpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgc3ggPSBTdHIoc3gpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChzeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBzeSA9IHRvRmxvYXQoc3hbMV0pO1xuICAgICAgICAgICAgY3ggPSB0b0Zsb2F0KHN4WzJdKTtcbiAgICAgICAgICAgIGN5ID0gdG9GbG9hdChzeFszXSk7XG4gICAgICAgICAgICBpc05hTihjeCkgJiYgKGN4ID0gbnVsbCk7XG4gICAgICAgICAgICBpc05hTihjeSkgJiYgKGN5ID0gbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ggPSB0b0Zsb2F0KHN4WzBdKTtcbiAgICAgICAgKHN5ID09IG51bGwpICYmIChzeSA9IHN4KTtcbiAgICAgICAgKGN5ID09IG51bGwpICYmIChjeCA9IGN5KTtcbiAgICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJib3ggPSB0aGlzLmdldEJCb3goMSk7XG4gICAgICAgIH1cbiAgICAgICAgY3ggPSBjeCA9PSBudWxsID8gYmJveC54ICsgYmJveC53aWR0aCAvIDIgOiBjeDtcbiAgICAgICAgY3kgPSBjeSA9PSBudWxsID8gYmJveC55ICsgYmJveC5oZWlnaHQgLyAyIDogY3k7XG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInNcIiwgc3gsIHN5LCBjeCwgY3ldXSkpO1xuICAgICAgICB0aGlzLl8uZGlydHlUID0gMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLnJlbW92ZWQgJiYgKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGVscHJvdG8uc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgIXRoaXMucmVtb3ZlZCAmJiAodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXkgPSBFKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyBOZWVkZWQgdG8gZml4IHRoZSB2bWwgc2V0Vmlld0JveCBpc3N1ZXNcbiAgICBlbHByb3RvLmF1eEdldEJCb3ggPSBSLmVsLmdldEJCb3g7XG4gICAgZWxwcm90by5nZXRCQm94ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBiID0gdGhpcy5hdXhHZXRCQm94KCk7XG4gICAgICBpZiAodGhpcy5wYXBlciAmJiB0aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQpXG4gICAgICB7XG4gICAgICAgIHZhciBjID0ge307XG4gICAgICAgIHZhciB6ID0gMS90aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQuc2NhbGU7XG4gICAgICAgIGMueCA9IGIueCAtIHRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdC5keDtcbiAgICAgICAgYy54ICo9IHo7XG4gICAgICAgIGMueSA9IGIueSAtIHRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdC5keTtcbiAgICAgICAgYy55ICo9IHo7XG4gICAgICAgIGMud2lkdGggID0gYi53aWR0aCAgKiB6O1xuICAgICAgICBjLmhlaWdodCA9IGIuaGVpZ2h0ICogejtcbiAgICAgICAgYy54MiA9IGMueCArIGMud2lkdGg7XG4gICAgICAgIGMueTIgPSBjLnkgKyBjLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgICB9XG4gICAgICByZXR1cm4gYjtcbiAgICB9O1xuICAgIGVscHJvdG8uX2dldEJCb3ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogdGhpcy5YICsgKHRoaXMuYmJ4IHx8IDApIC0gdGhpcy5XIC8gMixcbiAgICAgICAgICAgIHk6IHRoaXMuWSAtIHRoaXMuSCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLlcsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuSFxuICAgICAgICB9O1xuICAgIH07XG4gICAgZWxwcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQgfHwgIXRoaXMubm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXBlci5fX3NldF9fICYmIHRoaXMucGFwZXIuX19zZXRfXy5leGNsdWRlKHRoaXMpO1xuICAgICAgICBSLmV2ZS51bmJpbmQoXCJyYXBoYWVsLiouKi5cIiArIHRoaXMuaWQpO1xuICAgICAgICBSLl90ZWFyKHRoaXMsIHRoaXMucGFwZXIpO1xuICAgICAgICB0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpO1xuICAgICAgICB0aGlzLnNoYXBlICYmIHRoaXMuc2hhcGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNoYXBlKTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzKSB7XG4gICAgICAgICAgICB0aGlzW2ldID0gdHlwZW9mIHRoaXNbaV0gPT0gXCJmdW5jdGlvblwiID8gUi5fcmVtb3ZlZEZhY3RvcnkoaSkgOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlZCA9IHRydWU7XG4gICAgfTtcbiAgICBlbHByb3RvLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgYSBpbiB0aGlzLmF0dHJzKSBpZiAodGhpcy5hdHRyc1toYXNdKGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzW2FdID0gdGhpcy5hdHRyc1thXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcy5ncmFkaWVudCAmJiByZXMuZmlsbCA9PSBcIm5vbmVcIiAmJiAocmVzLmZpbGwgPSByZXMuZ3JhZGllbnQpICYmIGRlbGV0ZSByZXMuZ3JhZGllbnQ7XG4gICAgICAgICAgICByZXMudHJhbnNmb3JtID0gdGhpcy5fLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT0gZmlsbFN0cmluZyAmJiB0aGlzLmF0dHJzLmZpbGwgPT0gXCJub25lXCIgJiYgdGhpcy5hdHRycy5ncmFkaWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0dHJzLmdyYWRpZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5hbWVzID0gbmFtZS5zcGxpdChzZXBhcmF0b3IpLFxuICAgICAgICAgICAgICAgIG91dCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSBpbiB0aGlzLmF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtuYW1lXSA9IHRoaXMuYXR0cnNbbmFtZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChSLmlzKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tuYW1lXSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRbbmFtZV0gPSB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0uZGVmO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG91dFtuYW1lXSA9IFIuX2F2YWlsYWJsZUF0dHJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpaSAtIDEgPyBvdXQgOiBvdXRbbmFtZXNbMF1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF0dHJzICYmIHZhbHVlID09IG51bGwgJiYgUi5pcyhuYW1lLCBcImFycmF5XCIpKSB7XG4gICAgICAgICAgICBvdXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gbmFtZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0W25hbWVbaV1dID0gdGhpcy5hdHRyKG5hbWVbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1zO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgcGFyYW1zID0ge307XG4gICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9PSBudWxsICYmIFIuaXMobmFtZSwgXCJvYmplY3RcIikgJiYgKHBhcmFtcyA9IG5hbWUpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBldmUoXCJyYXBoYWVsLmF0dHIuXCIgKyBrZXkgKyBcIi5cIiArIHRoaXMuaWQsIHRoaXMsIHBhcmFtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpIGlmICh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbaGFzXShrZXkpICYmIHBhcmFtc1toYXNdKGtleSkgJiYgUi5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSwgXCJmdW5jdGlvblwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXIgPSB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNba2V5XS5hcHBseSh0aGlzLCBbXS5jb25jYXQocGFyYW1zW2tleV0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJzW2tleV0gPSBwYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzdWJrZXkgaW4gcGFyKSBpZiAocGFyW2hhc10oc3Via2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbc3Via2V5XSA9IHBhcltzdWJrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMucGFwZXIuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGlmIChwYXJhbXMudGV4dCAmJiB0aGlzLnR5cGUgPT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRwYXRoLnN0cmluZyA9IHBhcmFtcy50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0RmlsbEFuZFN0cm9rZSh0aGlzLCBwYXJhbXMpO1xuICAgICAgICAgICAgLy8gdGhpcy5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheSA9IEU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLnRvRnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICF0aGlzLnJlbW92ZWQgJiYgdGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgdGhpcy5wYXBlciAmJiB0aGlzLnBhcGVyLnRvcCAhPSB0aGlzICYmIFIuX3RvZnJvbnQodGhpcywgdGhpcy5wYXBlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZWxwcm90by50b0JhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkICE9IHRoaXMubm9kZSkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSwgdGhpcy5ub2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICBSLl90b2JhY2sodGhpcywgdGhpcy5wYXBlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmluc2VydEFmdGVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMucmVtb3ZlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQuY29uc3RydWN0b3IgPT0gUi5zdC5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRbZWxlbWVudC5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5ub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICBlbGVtZW50Lm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLCBlbGVtZW50Lm5vZGUubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBSLl9pbnNlcnRhZnRlcih0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50LmNvbnN0cnVjdG9yID09IFIuc3QuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsIGVsZW1lbnQubm9kZSk7XG4gICAgICAgIFIuX2luc2VydGJlZm9yZSh0aGlzLCBlbGVtZW50LCB0aGlzLnBhcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBlbHByb3RvLmJsdXIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMubm9kZS5ydW50aW1lU3R5bGUsXG4gICAgICAgICAgICBmID0gcy5maWx0ZXI7XG4gICAgICAgIGYgPSBmLnJlcGxhY2UoYmx1cnJlZ2V4cCwgRSk7XG4gICAgICAgIGlmICgrc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5hdHRycy5ibHVyID0gc2l6ZTtcbiAgICAgICAgICAgIHMuZmlsdGVyID0gZiArIFMgKyBtcyArIFwiLkJsdXIocGl4ZWxyYWRpdXM9XCIgKyAoK3NpemUgfHwgMS41KSArIFwiKVwiO1xuICAgICAgICAgICAgcy5tYXJnaW4gPSBSLmZvcm1hdChcIi17MH1weCAwIDAgLXswfXB4XCIsIHJvdW5kKCtzaXplIHx8IDEuNSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcy5maWx0ZXIgPSBmO1xuICAgICAgICAgICAgcy5tYXJnaW4gPSAwO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXR0cnMuYmx1cjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgUi5fZW5naW5lLnBhdGggPSBmdW5jdGlvbiAocGF0aFN0cmluZywgdm1sKSB7XG4gICAgICAgIHZhciBlbCA9IGNyZWF0ZU5vZGUoXCJzaGFwZVwiKTtcbiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGNzc0RvdDtcbiAgICAgICAgZWwuY29vcmRzaXplID0gem9vbSArIFMgKyB6b29tO1xuICAgICAgICBlbC5jb29yZG9yaWdpbiA9IHZtbC5jb29yZG9yaWdpbjtcbiAgICAgICAgdmFyIHAgPSBuZXcgRWxlbWVudChlbCwgdm1sKSxcbiAgICAgICAgICAgIGF0dHIgPSB7ZmlsbDogXCJub25lXCIsIHN0cm9rZTogXCIjMDAwXCJ9O1xuICAgICAgICBwYXRoU3RyaW5nICYmIChhdHRyLnBhdGggPSBwYXRoU3RyaW5nKTtcbiAgICAgICAgcC50eXBlID0gXCJwYXRoXCI7XG4gICAgICAgIHAucGF0aCA9IFtdO1xuICAgICAgICBwLlBhdGggPSBFO1xuICAgICAgICBzZXRGaWxsQW5kU3Ryb2tlKHAsIGF0dHIpO1xuICAgICAgICB2bWwuY2FudmFzICYmIHZtbC5jYW52YXMuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgc2tldyA9IGNyZWF0ZU5vZGUoXCJza2V3XCIpO1xuICAgICAgICBza2V3Lm9uID0gdHJ1ZTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoc2tldyk7XG4gICAgICAgIHAuc2tldyA9IHNrZXc7XG4gICAgICAgIHAudHJhbnNmb3JtKEUpO1xuICAgICAgICByZXR1cm4gcDtcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5yZWN0ID0gZnVuY3Rpb24gKHZtbCwgeCwgeSwgdywgaCwgcikge1xuICAgICAgICB2YXIgcGF0aCA9IFIuX3JlY3RQYXRoKHgsIHksIHcsIGgsIHIpLFxuICAgICAgICAgICAgcmVzID0gdm1sLnBhdGgocGF0aCksXG4gICAgICAgICAgICBhID0gcmVzLmF0dHJzO1xuICAgICAgICByZXMuWCA9IGEueCA9IHg7XG4gICAgICAgIHJlcy5ZID0gYS55ID0geTtcbiAgICAgICAgcmVzLlcgPSBhLndpZHRoID0gdztcbiAgICAgICAgcmVzLkggPSBhLmhlaWdodCA9IGg7XG4gICAgICAgIGEuciA9IHI7XG4gICAgICAgIGEucGF0aCA9IHBhdGg7XG4gICAgICAgIHJlcy50eXBlID0gXCJyZWN0XCI7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuZWxsaXBzZSA9IGZ1bmN0aW9uICh2bWwsIHgsIHksIHJ4LCByeSkge1xuICAgICAgICB2YXIgcmVzID0gdm1sLnBhdGgoKSxcbiAgICAgICAgICAgIGEgPSByZXMuYXR0cnM7XG4gICAgICAgIHJlcy5YID0geCAtIHJ4O1xuICAgICAgICByZXMuWSA9IHkgLSByeTtcbiAgICAgICAgcmVzLlcgPSByeCAqIDI7XG4gICAgICAgIHJlcy5IID0gcnkgKiAyO1xuICAgICAgICByZXMudHlwZSA9IFwiZWxsaXBzZVwiO1xuICAgICAgICBzZXRGaWxsQW5kU3Ryb2tlKHJlcywge1xuICAgICAgICAgICAgY3g6IHgsXG4gICAgICAgICAgICBjeTogeSxcbiAgICAgICAgICAgIHJ4OiByeCxcbiAgICAgICAgICAgIHJ5OiByeVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5jaXJjbGUgPSBmdW5jdGlvbiAodm1sLCB4LCB5LCByKSB7XG4gICAgICAgIHZhciByZXMgPSB2bWwucGF0aCgpLFxuICAgICAgICAgICAgYSA9IHJlcy5hdHRycztcbiAgICAgICAgcmVzLlggPSB4IC0gcjtcbiAgICAgICAgcmVzLlkgPSB5IC0gcjtcbiAgICAgICAgcmVzLlcgPSByZXMuSCA9IHIgKiAyO1xuICAgICAgICByZXMudHlwZSA9IFwiY2lyY2xlXCI7XG4gICAgICAgIHNldEZpbGxBbmRTdHJva2UocmVzLCB7XG4gICAgICAgICAgICBjeDogeCxcbiAgICAgICAgICAgIGN5OiB5LFxuICAgICAgICAgICAgcjogclxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS5pbWFnZSA9IGZ1bmN0aW9uICh2bWwsIHNyYywgeCwgeSwgdywgaCkge1xuICAgICAgICB2YXIgcGF0aCA9IFIuX3JlY3RQYXRoKHgsIHksIHcsIGgpLFxuICAgICAgICAgICAgcmVzID0gdm1sLnBhdGgocGF0aCkuYXR0cih7c3Ryb2tlOiBcIm5vbmVcIn0pLFxuICAgICAgICAgICAgYSA9IHJlcy5hdHRycyxcbiAgICAgICAgICAgIG5vZGUgPSByZXMubm9kZSxcbiAgICAgICAgICAgIGZpbGwgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKGZpbGxTdHJpbmcpWzBdO1xuICAgICAgICBhLnNyYyA9IHNyYztcbiAgICAgICAgcmVzLlggPSBhLnggPSB4O1xuICAgICAgICByZXMuWSA9IGEueSA9IHk7XG4gICAgICAgIHJlcy5XID0gYS53aWR0aCA9IHc7XG4gICAgICAgIHJlcy5IID0gYS5oZWlnaHQgPSBoO1xuICAgICAgICBhLnBhdGggPSBwYXRoO1xuICAgICAgICByZXMudHlwZSA9IFwiaW1hZ2VcIjtcbiAgICAgICAgZmlsbC5wYXJlbnROb2RlID09IG5vZGUgJiYgbm9kZS5yZW1vdmVDaGlsZChmaWxsKTtcbiAgICAgICAgZmlsbC5yb3RhdGUgPSB0cnVlO1xuICAgICAgICBmaWxsLnNyYyA9IHNyYztcbiAgICAgICAgZmlsbC50eXBlID0gXCJ0aWxlXCI7XG4gICAgICAgIHJlcy5fLmZpbGxwb3MgPSBbeCwgeV07XG4gICAgICAgIHJlcy5fLmZpbGxzaXplID0gW3csIGhdO1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGZpbGwpO1xuICAgICAgICBzZXRDb29yZHMocmVzLCAxLCAxLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICAgIFIuX2VuZ2luZS50ZXh0ID0gZnVuY3Rpb24gKHZtbCwgeCwgeSwgdGV4dCkge1xuICAgICAgICB2YXIgZWwgPSBjcmVhdGVOb2RlKFwic2hhcGVcIiksXG4gICAgICAgICAgICBwYXRoID0gY3JlYXRlTm9kZShcInBhdGhcIiksXG4gICAgICAgICAgICBvID0gY3JlYXRlTm9kZShcInRleHRwYXRoXCIpO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB0ZXh0ID0gdGV4dCB8fCBcIlwiO1xuICAgICAgICBwYXRoLnYgPSBSLmZvcm1hdChcIm17MH0sezF9bHsyfSx7MX1cIiwgcm91bmQoeCAqIHpvb20pLCByb3VuZCh5ICogem9vbSksIHJvdW5kKHggKiB6b29tKSArIDEpO1xuICAgICAgICBwYXRoLnRleHRwYXRob2sgPSB0cnVlO1xuICAgICAgICBvLnN0cmluZyA9IFN0cih0ZXh0KTtcbiAgICAgICAgby5vbiA9IHRydWU7XG4gICAgICAgIGVsLnN0eWxlLmNzc1RleHQgPSBjc3NEb3Q7XG4gICAgICAgIGVsLmNvb3Jkc2l6ZSA9IHpvb20gKyBTICsgem9vbTtcbiAgICAgICAgZWwuY29vcmRvcmlnaW4gPSBcIjAgMFwiO1xuICAgICAgICB2YXIgcCA9IG5ldyBFbGVtZW50KGVsLCB2bWwpLFxuICAgICAgICAgICAgYXR0ciA9IHtcbiAgICAgICAgICAgICAgICBmaWxsOiBcIiMwMDBcIixcbiAgICAgICAgICAgICAgICBzdHJva2U6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgIGZvbnQ6IFIuX2F2YWlsYWJsZUF0dHJzLmZvbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcC5zaGFwZSA9IGVsO1xuICAgICAgICBwLnBhdGggPSBwYXRoO1xuICAgICAgICBwLnRleHRwYXRoID0gbztcbiAgICAgICAgcC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHAuYXR0cnMudGV4dCA9IFN0cih0ZXh0KTtcbiAgICAgICAgcC5hdHRycy54ID0geDtcbiAgICAgICAgcC5hdHRycy55ID0geTtcbiAgICAgICAgcC5hdHRycy53ID0gMTtcbiAgICAgICAgcC5hdHRycy5oID0gMTtcbiAgICAgICAgc2V0RmlsbEFuZFN0cm9rZShwLCBhdHRyKTtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQobyk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHBhdGgpO1xuICAgICAgICB2bWwuY2FudmFzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHNrZXcgPSBjcmVhdGVOb2RlKFwic2tld1wiKTtcbiAgICAgICAgc2tldy5vbiA9IHRydWU7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHNrZXcpO1xuICAgICAgICBwLnNrZXcgPSBza2V3O1xuICAgICAgICBwLnRyYW5zZm9ybShFKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICBSLl9lbmdpbmUuc2V0U2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHZhciBjcyA9IHRoaXMuY2FudmFzLnN0eWxlO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB3aWR0aCA9PSArd2lkdGggJiYgKHdpZHRoICs9IFwicHhcIik7XG4gICAgICAgIGhlaWdodCA9PSAraGVpZ2h0ICYmIChoZWlnaHQgKz0gXCJweFwiKTtcbiAgICAgICAgY3Mud2lkdGggPSB3aWR0aDtcbiAgICAgICAgY3MuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBjcy5jbGlwID0gXCJyZWN0KDAgXCIgKyB3aWR0aCArIFwiIFwiICsgaGVpZ2h0ICsgXCIgMClcIjtcbiAgICAgICAgaWYgKHRoaXMuX3ZpZXdCb3gpIHtcbiAgICAgICAgICAgIFIuX2VuZ2luZS5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsIHRoaXMuX3ZpZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUi5fZW5naW5lLnNldFZpZXdCb3ggPSBmdW5jdGlvbiAoeCwgeSwgdywgaCwgZml0KSB7XG4gICAgICAgIFIuZXZlKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsIHRoaXMsIHRoaXMuX3ZpZXdCb3gsIFt4LCB5LCB3LCBoLCBmaXRdKTtcbiAgICAgICAgdmFyIHBhcGVyU2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpLFxuICAgICAgICAgICAgd2lkdGggPSBwYXBlclNpemUud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQgPSBwYXBlclNpemUuaGVpZ2h0LFxuICAgICAgICAgICAgSCwgVztcbiAgICAgICAgaWYgKGZpdCkge1xuICAgICAgICAgICAgSCA9IGhlaWdodCAvIGg7XG4gICAgICAgICAgICBXID0gd2lkdGggLyB3O1xuICAgICAgICAgICAgaWYgKHcgKiBIIDwgd2lkdGgpIHtcbiAgICAgICAgICAgICAgICB4IC09ICh3aWR0aCAtIHcgKiBIKSAvIDIgLyBIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGggKiBXIDwgaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgeSAtPSAoaGVpZ2h0IC0gaCAqIFcpIC8gMiAvIFc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmlld0JveCA9IFt4LCB5LCB3LCBoLCAhIWZpdF07XG4gICAgICAgIHRoaXMuX3ZpZXdCb3hTaGlmdCA9IHtcbiAgICAgICAgICAgIGR4OiAteCxcbiAgICAgICAgICAgIGR5OiAteSxcbiAgICAgICAgICAgIHNjYWxlOiBwYXBlclNpemVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgZWwudHJhbnNmb3JtKFwiLi4uXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICB2YXIgY3JlYXRlTm9kZTtcbiAgICBSLl9lbmdpbmUuaW5pdFdpbiA9IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgICAgICAgICBpZiAoZG9jLnN0eWxlU2hlZXRzLmxlbmd0aCA8IDMxKSB7XG4gICAgICAgICAgICAgICAgZG9jLmNyZWF0ZVN0eWxlU2hlZXQoKS5hZGRSdWxlKFwiLnJ2bWxcIiwgXCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gbW9yZSByb29tLCBhZGQgdG8gdGhlIGV4aXN0aW5nIG9uZVxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTE5NCUyOFZTLjg1JTI5LmFzcHhcbiAgICAgICAgICAgICAgICBkb2Muc3R5bGVTaGVldHNbMF0uYWRkUnVsZShcIi5ydm1sXCIsIFwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICFkb2MubmFtZXNwYWNlcy5ydm1sICYmIGRvYy5uYW1lc3BhY2VzLmFkZChcInJ2bWxcIiwgXCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiKTtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb2RlID0gZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KCc8cnZtbDonICsgdGFnTmFtZSArICcgY2xhc3M9XCJydm1sXCI+Jyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVOb2RlID0gZnVuY3Rpb24gKHRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYy5jcmVhdGVFbGVtZW50KCc8JyArIHRhZ05hbWUgKyAnIHhtbG5zPVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LmNvbTp2bWxcIiBjbGFzcz1cInJ2bWxcIj4nKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIFIuX2VuZ2luZS5pbml0V2luKFIuX2cud2luKTtcbiAgICBSLl9lbmdpbmUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29uID0gUi5fZ2V0Q29udGFpbmVyLmFwcGx5KDAsIGFyZ3VtZW50cyksXG4gICAgICAgICAgICBjb250YWluZXIgPSBjb24uY29udGFpbmVyLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY29uLmhlaWdodCxcbiAgICAgICAgICAgIHMsXG4gICAgICAgICAgICB3aWR0aCA9IGNvbi53aWR0aCxcbiAgICAgICAgICAgIHggPSBjb24ueCxcbiAgICAgICAgICAgIHkgPSBjb24ueTtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZNTCBjb250YWluZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0gbmV3IFIuX1BhcGVyLFxuICAgICAgICAgICAgYyA9IHJlcy5jYW52YXMgPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICAgICAgY3MgPSBjLnN0eWxlO1xuICAgICAgICB4ID0geCB8fCAwO1xuICAgICAgICB5ID0geSB8fCAwO1xuICAgICAgICB3aWR0aCA9IHdpZHRoIHx8IDUxMjtcbiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IHx8IDM0MjtcbiAgICAgICAgcmVzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHJlcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHdpZHRoID09ICt3aWR0aCAmJiAod2lkdGggKz0gXCJweFwiKTtcbiAgICAgICAgaGVpZ2h0ID09ICtoZWlnaHQgJiYgKGhlaWdodCArPSBcInB4XCIpO1xuICAgICAgICByZXMuY29vcmRzaXplID0gem9vbSAqIDFlMyArIFMgKyB6b29tICogMWUzO1xuICAgICAgICByZXMuY29vcmRvcmlnaW4gPSBcIjAgMFwiO1xuICAgICAgICByZXMuc3BhbiA9IFIuX2cuZG9jLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICByZXMuc3Bhbi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW07cGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjE7XCI7XG4gICAgICAgIGMuYXBwZW5kQ2hpbGQocmVzLnNwYW4pO1xuICAgICAgICBjcy5jc3NUZXh0ID0gUi5mb3JtYXQoXCJ0b3A6MDtsZWZ0OjA7d2lkdGg6ezB9O2hlaWdodDp7MX07ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7Y2xpcDpyZWN0KDAgezB9IHsxfSAwKTtvdmVyZmxvdzpoaWRkZW5cIiwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGlmIChjb250YWluZXIgPT0gMSkge1xuICAgICAgICAgICAgUi5fZy5kb2MuYm9keS5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIGNzLmxlZnQgPSB4ICsgXCJweFwiO1xuICAgICAgICAgICAgY3MudG9wID0geSArIFwicHhcIjtcbiAgICAgICAgICAgIGNzLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShjLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMucmVuZGVyZml4ID0gZnVuY3Rpb24gKCkge307XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgICBSLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUi5ldmUoXCJyYXBoYWVsLmNsZWFyXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcy5pbm5lckhUTUwgPSBFO1xuICAgICAgICB0aGlzLnNwYW4gPSBSLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGhpcy5zcGFuLnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTllbTt0b3A6LTk5OTllbTtwYWRkaW5nOjA7bWFyZ2luOjA7bGluZS1oZWlnaHQ6MTtkaXNwbGF5OmlubGluZTtcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5zcGFuKTtcbiAgICAgICAgdGhpcy5ib3R0b20gPSB0aGlzLnRvcCA9IG51bGw7XG4gICAgfTtcbiAgICBSLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFIuZXZlKFwicmFwaGFlbC5yZW1vdmVcIiwgdGhpcyk7XG4gICAgICAgIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSB0eXBlb2YgdGhpc1tpXSA9PSBcImZ1bmN0aW9uXCIgPyBSLl9yZW1vdmVkRmFjdG9yeShpKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHZhciBzZXRwcm90byA9IFIuc3Q7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIGVscHJvdG8pIGlmIChlbHByb3RvW2hhc10obWV0aG9kKSAmJiAhc2V0cHJvdG9baGFzXShtZXRob2QpKSB7XG4gICAgICAgIHNldHByb3RvW21ldGhvZF0gPSAoZnVuY3Rpb24gKG1ldGhvZG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RuYW1lXS5hcHBseShlbCwgYXJnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKG1ldGhvZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./dev/raphael.vml.js\n')
          },
          "./node_modules/eve-raphael/eve.js": function(module, exports, __webpack_require__) {
            eval('var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\n// \n// Licensed under the Apache License, Version 2.0 (the "License");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n// \n// http://www.apache.org/licenses/LICENSE-2.0\n// \n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an "AS IS" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//  \\\\\n//  Eve 0.5.0 - JavaScript Events Library                       \\\\\n//  \\\\\n//  Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)  \\\\\n//  \\\\\n\n(function (glob) {\n    var version = "0.5.0",\n        has = "hasOwnProperty",\n        separator = /[\\.\\/]/,\n        comaseparator = /\\s*,\\s*/,\n        wildcard = "*",\n        fun = function () {},\n        numsort = function (a, b) {\n            return a - b;\n        },\n        current_event,\n        stop,\n        events = {n: {}},\n        firstDefined = function () {\n            for (var i = 0, ii = this.length; i < ii; i++) {\n                if (typeof this[i] != "undefined") {\n                    return this[i];\n                }\n            }\n        },\n        lastDefined = function () {\n            var i = this.length;\n            while (--i) {\n                if (typeof this[i] != "undefined") {\n                    return this[i];\n                }\n            }\n        },\n        objtos = Object.prototype.toString,\n        Str = String,\n        isArray = Array.isArray || function (ar) {\n            return ar instanceof Array || objtos.call(ar) == "[object Array]";\n        };\n    /*\\\n     * eve\n     [ method ]\n\n     * Fires event with given `name`, given scope and other parameters.\n\n     > Arguments\n\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\n     - scope (object) context for the event handlers\n     - varargs (...) the rest of arguments will be sent to event handlers\n\n     = (object) array of returned values from the listeners. Array has two methods `.firstDefined()` and `.lastDefined()` to get first or last not `undefined` value.\n    \\*/\n        var eve = function (name, scope) {\n            var e = events,\n                oldstop = stop,\n                args = Array.prototype.slice.call(arguments, 2),\n                listeners = eve.listeners(name),\n                z = 0,\n                f = false,\n                l,\n                indexed = [],\n                queue = {},\n                out = [],\n                ce = current_event,\n                errors = [];\n            out.firstDefined = firstDefined;\n            out.lastDefined = lastDefined;\n            current_event = name;\n            stop = 0;\n            for (var i = 0, ii = listeners.length; i < ii; i++) if ("zIndex" in listeners[i]) {\n                indexed.push(listeners[i].zIndex);\n                if (listeners[i].zIndex < 0) {\n                    queue[listeners[i].zIndex] = listeners[i];\n                }\n            }\n            indexed.sort(numsort);\n            while (indexed[z] < 0) {\n                l = queue[indexed[z++]];\n                out.push(l.apply(scope, args));\n                if (stop) {\n                    stop = oldstop;\n                    return out;\n                }\n            }\n            for (i = 0; i < ii; i++) {\n                l = listeners[i];\n                if ("zIndex" in l) {\n                    if (l.zIndex == indexed[z]) {\n                        out.push(l.apply(scope, args));\n                        if (stop) {\n                            break;\n                        }\n                        do {\n                            z++;\n                            l = queue[indexed[z]];\n                            l && out.push(l.apply(scope, args));\n                            if (stop) {\n                                break;\n                            }\n                        } while (l)\n                    } else {\n                        queue[l.zIndex] = l;\n                    }\n                } else {\n                    out.push(l.apply(scope, args));\n                    if (stop) {\n                        break;\n                    }\n                }\n            }\n            stop = oldstop;\n            current_event = ce;\n            return out;\n        };\n        // Undocumented. Debug only.\n        eve._events = events;\n    /*\\\n     * eve.listeners\n     [ method ]\n\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\n\n     > Arguments\n\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\n\n     = (array) array of event handlers\n    \\*/\n    eve.listeners = function (name) {\n        var names = isArray(name) ? name : name.split(separator),\n            e = events,\n            item,\n            items,\n            k,\n            i,\n            ii,\n            j,\n            jj,\n            nes,\n            es = [e],\n            out = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            nes = [];\n            for (j = 0, jj = es.length; j < jj; j++) {\n                e = es[j].n;\n                items = [e[names[i]], e[wildcard]];\n                k = 2;\n                while (k--) {\n                    item = items[k];\n                    if (item) {\n                        nes.push(item);\n                        out = out.concat(item.f || []);\n                    }\n                }\n            }\n            es = nes;\n        }\n        return out;\n    };\n    /*\\\n     * eve.separator\n     [ method ]\n\n     * If for some reasons you dont like default separators (`.` or `/`) you can specify yours\n     * here. Be aware that if you pass a string longer than one character it will be treated as\n     * a list of characters.\n\n     - separator (string) new separator. Empty string resets to default: `.` or `/`.\n    \\*/\n    eve.separator = function (sep) {\n        if (sep) {\n            sep = Str(sep).replace(/(?=[\\.\\^\\]\\[\\-])/g, "\\\\");\n            sep = "[" + sep + "]";\n            separator = new RegExp(sep);\n        } else {\n            separator = /[\\.\\/]/;\n        }\n    };\n    /*\\\n     * eve.on\n     [ method ]\n     **\n     * Binds given event handler with a given name. You can use wildcards `*` for the names:\n     | eve.on("*.under.*", f);\n     | eve("mouse.under.floor"); // triggers f\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     - name (array) if you dont want to use separators, you can use array of strings\n     - f (function) event handler function\n     **\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment. \n     > Example:\n     | eve.on("mouse", eatIt)(2);\n     | eve.on("mouse", scream);\n     | eve.on("mouse", catchIt)(1);\n     * This will ensure that `catchIt` function will be called before `eatIt`.\n     *\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\n     * Note: I assume most of the time you dont need to worry about z-index, but its nice to have this feature just in case.\n    \\*/\n    eve.on = function (name, f) {\n        if (typeof f != "function") {\n            return function () {};\n        }\n        var names = isArray(name) ? (isArray(name[0]) ? name : [name]) : Str(name).split(comaseparator);\n        for (var i = 0, ii = names.length; i < ii; i++) {\n            (function (name) {\n                var names = isArray(name) ? name : Str(name).split(separator),\n                    e = events,\n                    exist;\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    e = e.n;\n                    e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\n                }\n                e.f = e.f || [];\n                for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\n                    exist = true;\n                    break;\n                }\n                !exist && e.f.push(f);\n            }(names[i]));\n        }\n        return function (zIndex) {\n            if (+zIndex == +zIndex) {\n                f.zIndex = +zIndex;\n            }\n        };\n    };\n    /*\\\n     * eve.f\n     [ method ]\n     **\n     * Returns function that will fire given event with optional arguments.\n     * Arguments that will be passed to the result function will be also\n     * concated to the list of final arguments.\n     | el.onclick = eve.f("click", 1, 2);\n     | eve.on("click", function (a, b, c) {\n     |     console.log(a, b, c); // 1, 2, [event object]\n     | });\n     > Arguments\n     - event (string) event name\n     - varargs () and any other arguments\n     = (function) possible event handler function\n    \\*/\n    eve.f = function (event) {\n        var attrs = [].slice.call(arguments, 1);\n        return function () {\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));\n        };\n    };\n    /*\\\n     * eve.stop\n     [ method ]\n     **\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\n    \\*/\n    eve.stop = function () {\n        stop = 1;\n    };\n    /*\\\n     * eve.nt\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     > Arguments\n     **\n     - subname (string) #optional subname of the event\n     **\n     = (string) name of the event, if `subname` is not specified\n     * or\n     = (boolean) `true`, if current events name contains `subname`\n    \\*/\n    eve.nt = function (subname) {\n        var cur = isArray(current_event) ? current_event.join(".") : current_event;\n        if (subname) {\n            return new RegExp("(?:\\\\.|\\\\/|^)" + subname + "(?:\\\\.|\\\\/|$)").test(cur);\n        }\n        return cur;\n    };\n    /*\\\n     * eve.nts\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     **\n     = (array) names of the event\n    \\*/\n    eve.nts = function () {\n        return isArray(current_event) ? current_event : current_event.split(separator);\n    };\n    /*\\\n     * eve.off\n     [ method ]\n     **\n     * Removes given function from the list of event listeners assigned to given name.\n     * If no arguments specified all the events will be cleared.\n     **\n     > Arguments\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n    \\*/\n    /*\\\n     * eve.unbind\n     [ method ]\n     **\n     * See @eve.off\n    \\*/\n    eve.off = eve.unbind = function (name, f) {\n        if (!name) {\n            eve._events = events = {n: {}};\n            return;\n        }\n        var names = isArray(name) ? (isArray(name[0]) ? name : [name]) : Str(name).split(comaseparator);\n        if (names.length > 1) {\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                eve.off(names[i], f);\n            }\n            return;\n        }\n        names = isArray(name) ? name : Str(name).split(separator);\n        var e,\n            key,\n            splice,\n            i, ii, j, jj,\n            cur = [events];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            for (j = 0; j < cur.length; j += splice.length - 2) {\n                splice = [j, 1];\n                e = cur[j].n;\n                if (names[i] != wildcard) {\n                    if (e[names[i]]) {\n                        splice.push(e[names[i]]);\n                    }\n                } else {\n                    for (key in e) if (e[has](key)) {\n                        splice.push(e[key]);\n                    }\n                }\n                cur.splice.apply(cur, splice);\n            }\n        }\n        for (i = 0, ii = cur.length; i < ii; i++) {\n            e = cur[i];\n            while (e.n) {\n                if (f) {\n                    if (e.f) {\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\n                            e.f.splice(j, 1);\n                            break;\n                        }\n                        !e.f.length && delete e.f;\n                    }\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        var funcs = e.n[key].f;\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\n                            funcs.splice(j, 1);\n                            break;\n                        }\n                        !funcs.length && delete e.n[key].f;\n                    }\n                } else {\n                    delete e.f;\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        delete e.n[key].f;\n                    }\n                }\n                e = e.n;\n            }\n        }\n    };\n    /*\\\n     * eve.once\n     [ method ]\n     **\n     * Binds given event handler with a given name to only run once then unbind itself.\n     | eve.once("login", f);\n     | eve("login"); // triggers f\n     | eve("login"); // no listeners\n     * Use @eve to trigger the listener.\n     **\n     > Arguments\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     = (function) same return function as @eve.on\n    \\*/\n    eve.once = function (name, f) {\n        var f2 = function () {\n            eve.off(name, f2);\n            return f.apply(this, arguments);\n        };\n        return eve.on(name, f2);\n    };\n    /*\\\n     * eve.version\n     [ property (string) ]\n     **\n     * Current version of the library.\n    \\*/\n    eve.version = version;\n    eve.toString = function () {\n        return "You are running Eve " + version;\n    };\n    (typeof module != "undefined" && module.exports) ? (module.exports = eve) : ( true ? (!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() { return eve; }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))) : (undefined));\n})(this);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZXZlLXJhcGhhZWwvZXZlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUmFwaGFlbC8uL25vZGVfbW9kdWxlcy9ldmUtcmFwaGFlbC9ldmUuanM/ZDJiNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTMgQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vIFxuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vLyBcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vLyDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgXFxcXFxuLy8g4pSCIEV2ZSAwLjUuMCAtIEphdmFTY3JpcHQgRXZlbnRzIExpYnJhcnkgICAgICAgICAgICAgICAgICAgICAg4pSCIFxcXFxcbi8vIOKUnOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUpCBcXFxcXG4vLyDilIIgQXV0aG9yIERtaXRyeSBCYXJhbm92c2tpeSAoaHR0cDovL2RtaXRyeS5iYXJhbm92c2tpeS5jb20vKSDilIIgXFxcXFxuLy8g4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYIFxcXFxcblxuKGZ1bmN0aW9uIChnbG9iKSB7XG4gICAgdmFyIHZlcnNpb24gPSBcIjAuNS4wXCIsXG4gICAgICAgIGhhcyA9IFwiaGFzT3duUHJvcGVydHlcIixcbiAgICAgICAgc2VwYXJhdG9yID0gL1tcXC5cXC9dLyxcbiAgICAgICAgY29tYXNlcGFyYXRvciA9IC9cXHMqLFxccyovLFxuICAgICAgICB3aWxkY2FyZCA9IFwiKlwiLFxuICAgICAgICBmdW4gPSBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgbnVtc29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYSAtIGI7XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRfZXZlbnQsXG4gICAgICAgIHN0b3AsXG4gICAgICAgIGV2ZW50cyA9IHtuOiB7fX0sXG4gICAgICAgIGZpcnN0RGVmaW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGFzdERlZmluZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKC0taSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tpXSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb2JqdG9zID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcbiAgICAgICAgU3RyID0gU3RyaW5nLFxuICAgICAgICBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhciBpbnN0YW5jZW9mIEFycmF5IHx8IG9ianRvcy5jYWxsKGFyKSA9PSBcIltvYmplY3QgQXJyYXldXCI7XG4gICAgICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZVxuICAgICBbIG1ldGhvZCBdXG5cbiAgICAgKiBGaXJlcyBldmVudCB3aXRoIGdpdmVuIGBuYW1lYCwgZ2l2ZW4gc2NvcGUgYW5kIG90aGVyIHBhcmFtZXRlcnMuXG5cbiAgICAgPiBBcmd1bWVudHNcblxuICAgICAtIG5hbWUgKHN0cmluZykgbmFtZSBvZiB0aGUgKmV2ZW50KiwgZG90IChgLmApIG9yIHNsYXNoIChgL2ApIHNlcGFyYXRlZFxuICAgICAtIHNjb3BlIChvYmplY3QpIGNvbnRleHQgZm9yIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAtIHZhcmFyZ3MgKC4uLikgdGhlIHJlc3Qgb2YgYXJndW1lbnRzIHdpbGwgYmUgc2VudCB0byBldmVudCBoYW5kbGVyc1xuXG4gICAgID0gKG9iamVjdCkgYXJyYXkgb2YgcmV0dXJuZWQgdmFsdWVzIGZyb20gdGhlIGxpc3RlbmVycy4gQXJyYXkgaGFzIHR3byBtZXRob2RzIGAuZmlyc3REZWZpbmVkKClgIGFuZCBgLmxhc3REZWZpbmVkKClgIHRvIGdldCBmaXJzdCBvciBsYXN0IG5vdCBgdW5kZWZpbmVkYCB2YWx1ZS5cbiAgICBcXCovXG4gICAgICAgIHZhciBldmUgPSBmdW5jdGlvbiAobmFtZSwgc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciBlID0gZXZlbnRzLFxuICAgICAgICAgICAgICAgIG9sZHN0b3AgPSBzdG9wLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IGV2ZS5saXN0ZW5lcnMobmFtZSksXG4gICAgICAgICAgICAgICAgeiA9IDAsXG4gICAgICAgICAgICAgICAgZiA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIGwsXG4gICAgICAgICAgICAgICAgaW5kZXhlZCA9IFtdLFxuICAgICAgICAgICAgICAgIHF1ZXVlID0ge30sXG4gICAgICAgICAgICAgICAgb3V0ID0gW10sXG4gICAgICAgICAgICAgICAgY2UgPSBjdXJyZW50X2V2ZW50LFxuICAgICAgICAgICAgICAgIGVycm9ycyA9IFtdO1xuICAgICAgICAgICAgb3V0LmZpcnN0RGVmaW5lZCA9IGZpcnN0RGVmaW5lZDtcbiAgICAgICAgICAgIG91dC5sYXN0RGVmaW5lZCA9IGxhc3REZWZpbmVkO1xuICAgICAgICAgICAgY3VycmVudF9ldmVudCA9IG5hbWU7XG4gICAgICAgICAgICBzdG9wID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAoXCJ6SW5kZXhcIiBpbiBsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkLnB1c2gobGlzdGVuZXJzW2ldLnpJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS56SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlW2xpc3RlbmVyc1tpXS56SW5kZXhdID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ZWQuc29ydChudW1zb3J0KTtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleGVkW3pdIDwgMCkge1xuICAgICAgICAgICAgICAgIGwgPSBxdWV1ZVtpbmRleGVkW3orK11dO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGwuYXBwbHkoc2NvcGUsIGFyZ3MpKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gb2xkc3RvcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIGwgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKFwiekluZGV4XCIgaW4gbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobC56SW5kZXggPT0gaW5kZXhlZFt6XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHF1ZXVlW2luZGV4ZWRbel1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGwpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZVtsLnpJbmRleF0gPSBsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobC5hcHBseShzY29wZSwgYXJncykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9wID0gb2xkc3RvcDtcbiAgICAgICAgICAgIGN1cnJlbnRfZXZlbnQgPSBjZTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFVuZG9jdW1lbnRlZC4gRGVidWcgb25seS5cbiAgICAgICAgZXZlLl9ldmVudHMgPSBldmVudHM7XG4gICAgLypcXFxuICAgICAqIGV2ZS5saXN0ZW5lcnNcbiAgICAgWyBtZXRob2QgXVxuXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHdoaWNoIGdpdmVzIHlvdSBhcnJheSBvZiBhbGwgZXZlbnQgaGFuZGxlcnMgdGhhdCB3aWxsIGJlIHRyaWdnZXJlZCBieSB0aGUgZ2l2ZW4gYG5hbWVgLlxuXG4gICAgID4gQXJndW1lbnRzXG5cbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkXG5cbiAgICAgPSAoYXJyYXkpIGFycmF5IG9mIGV2ZW50IGhhbmRsZXJzXG4gICAgXFwqL1xuICAgIGV2ZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gbmFtZSA6IG5hbWUuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgIGUgPSBldmVudHMsXG4gICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICBrLFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgaixcbiAgICAgICAgICAgIGpqLFxuICAgICAgICAgICAgbmVzLFxuICAgICAgICAgICAgZXMgPSBbZV0sXG4gICAgICAgICAgICBvdXQgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBuYW1lcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBuZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICAgICAgICAgIGUgPSBlc1tqXS5uO1xuICAgICAgICAgICAgICAgIGl0ZW1zID0gW2VbbmFtZXNbaV1dLCBlW3dpbGRjYXJkXV07XG4gICAgICAgICAgICAgICAgayA9IDI7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGstLSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNba107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dCA9IG91dC5jb25jYXQoaXRlbS5mIHx8IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVzID0gbmVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogZXZlLnNlcGFyYXRvclxuICAgICBbIG1ldGhvZCBdXG5cbiAgICAgKiBJZiBmb3Igc29tZSByZWFzb25zIHlvdSBkb27igJl0IGxpa2UgZGVmYXVsdCBzZXBhcmF0b3JzIChgLmAgb3IgYC9gKSB5b3UgY2FuIHNwZWNpZnkgeW91cnNcbiAgICAgKiBoZXJlLiBCZSBhd2FyZSB0aGF0IGlmIHlvdSBwYXNzIGEgc3RyaW5nIGxvbmdlciB0aGFuIG9uZSBjaGFyYWN0ZXIgaXQgd2lsbCBiZSB0cmVhdGVkIGFzXG4gICAgICogYSBsaXN0IG9mIGNoYXJhY3RlcnMuXG5cbiAgICAgLSBzZXBhcmF0b3IgKHN0cmluZykgbmV3IHNlcGFyYXRvci4gRW1wdHkgc3RyaW5nIHJlc2V0cyB0byBkZWZhdWx0OiBgLmAgb3IgYC9gLlxuICAgIFxcKi9cbiAgICBldmUuc2VwYXJhdG9yID0gZnVuY3Rpb24gKHNlcCkge1xuICAgICAgICBpZiAoc2VwKSB7XG4gICAgICAgICAgICBzZXAgPSBTdHIoc2VwKS5yZXBsYWNlKC8oPz1bXFwuXFxeXFxdXFxbXFwtXSkvZywgXCJcXFxcXCIpO1xuICAgICAgICAgICAgc2VwID0gXCJbXCIgKyBzZXAgKyBcIl1cIjtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IC9bXFwuXFwvXS87XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBldmUub25cbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEJpbmRzIGdpdmVuIGV2ZW50IGhhbmRsZXIgd2l0aCBhIGdpdmVuIG5hbWUuIFlvdSBjYW4gdXNlIHdpbGRjYXJkcyDigJxgKmDigJ0gZm9yIHRoZSBuYW1lczpcbiAgICAgfCBldmUub24oXCIqLnVuZGVyLipcIiwgZik7XG4gICAgIHwgZXZlKFwibW91c2UudW5kZXIuZmxvb3JcIik7IC8vIHRyaWdnZXJzIGZcbiAgICAgKiBVc2UgQGV2ZSB0byB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICoqXG4gICAgIC0gbmFtZSAoYXJyYXkpIGlmIHlvdSBkb27igJl0IHdhbnQgdG8gdXNlIHNlcGFyYXRvcnMsIHlvdSBjYW4gdXNlIGFycmF5IG9mIHN0cmluZ3NcbiAgICAgLSBmIChmdW5jdGlvbikgZXZlbnQgaGFuZGxlciBmdW5jdGlvblxuICAgICAqKlxuICAgICA9IChmdW5jdGlvbikgcmV0dXJuZWQgZnVuY3Rpb24gYWNjZXB0cyBhIHNpbmdsZSBudW1lcmljIHBhcmFtZXRlciB0aGF0IHJlcHJlc2VudHMgei1pbmRleCBvZiB0aGUgaGFuZGxlci4gSXQgaXMgYW4gb3B0aW9uYWwgZmVhdHVyZSBhbmQgb25seSB1c2VkIHdoZW4geW91IG5lZWQgdG8gZW5zdXJlIHRoYXQgc29tZSBzdWJzZXQgb2YgaGFuZGxlcnMgd2lsbCBiZSBpbnZva2VkIGluIGEgZ2l2ZW4gb3JkZXIsIGRlc3BpdGUgb2YgdGhlIG9yZGVyIG9mIGFzc2lnbm1lbnQuIFxuICAgICA+IEV4YW1wbGU6XG4gICAgIHwgZXZlLm9uKFwibW91c2VcIiwgZWF0SXQpKDIpO1xuICAgICB8IGV2ZS5vbihcIm1vdXNlXCIsIHNjcmVhbSk7XG4gICAgIHwgZXZlLm9uKFwibW91c2VcIiwgY2F0Y2hJdCkoMSk7XG4gICAgICogVGhpcyB3aWxsIGVuc3VyZSB0aGF0IGBjYXRjaEl0YCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgYGVhdEl0YC5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3YW50IHRvIHB1dCB5b3VyIGhhbmRsZXIgYmVmb3JlIG5vbi1pbmRleGVkIGhhbmRsZXJzLCBzcGVjaWZ5IGEgbmVnYXRpdmUgdmFsdWUuXG4gICAgICogTm90ZTogSSBhc3N1bWUgbW9zdCBvZiB0aGUgdGltZSB5b3UgZG9u4oCZdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHotaW5kZXgsIGJ1dCBpdOKAmXMgbmljZSB0byBoYXZlIHRoaXMgZmVhdHVyZSDigJxqdXN0IGluIGNhc2XigJ0uXG4gICAgXFwqL1xuICAgIGV2ZS5vbiA9IGZ1bmN0aW9uIChuYW1lLCBmKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZiAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gKGlzQXJyYXkobmFtZVswXSkgPyBuYW1lIDogW25hbWVdKSA6IFN0cihuYW1lKS5zcGxpdChjb21hc2VwYXJhdG9yKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gaXNBcnJheShuYW1lKSA/IG5hbWUgOiBTdHIobmFtZSkuc3BsaXQoc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICAgICAgZSA9IGV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgZXhpc3Q7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBlID0gZS5uO1xuICAgICAgICAgICAgICAgICAgICBlID0gZS5oYXNPd25Qcm9wZXJ0eShuYW1lc1tpXSkgJiYgZVtuYW1lc1tpXV0gfHwgKGVbbmFtZXNbaV1dID0ge246IHt9fSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuZiA9IGUuZiB8fCBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGUuZi5sZW5ndGg7IGkgPCBpaTsgaSsrKSBpZiAoZS5mW2ldID09IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIWV4aXN0ICYmIGUuZi5wdXNoKGYpO1xuICAgICAgICAgICAgfShuYW1lc1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoekluZGV4KSB7XG4gICAgICAgICAgICBpZiAoK3pJbmRleCA9PSArekluZGV4KSB7XG4gICAgICAgICAgICAgICAgZi56SW5kZXggPSArekluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5mXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgd2lsbCBmaXJlIGdpdmVuIGV2ZW50IHdpdGggb3B0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqIEFyZ3VtZW50cyB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSByZXN1bHQgZnVuY3Rpb24gd2lsbCBiZSBhbHNvXG4gICAgICogY29uY2F0ZWQgdG8gdGhlIGxpc3Qgb2YgZmluYWwgYXJndW1lbnRzLlxuICAgICB8IGVsLm9uY2xpY2sgPSBldmUuZihcImNsaWNrXCIsIDEsIDIpO1xuICAgICB8IGV2ZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgIHwgICAgIGNvbnNvbGUubG9nKGEsIGIsIGMpOyAvLyAxLCAyLCBbZXZlbnQgb2JqZWN0XVxuICAgICB8IH0pO1xuICAgICA+IEFyZ3VtZW50c1xuICAgICAtIGV2ZW50IChzdHJpbmcpIGV2ZW50IG5hbWVcbiAgICAgLSB2YXJhcmdzICjigKYpIGFuZCBhbnkgb3RoZXIgYXJndW1lbnRzXG4gICAgID0gKGZ1bmN0aW9uKSBwb3NzaWJsZSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgXFwqL1xuICAgIGV2ZS5mID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBhdHRycyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV2ZS5hcHBseShudWxsLCBbZXZlbnQsIG51bGxdLmNvbmNhdChhdHRycykuY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSkpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5zdG9wXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBJcyB1c2VkIGluc2lkZSBhbiBldmVudCBoYW5kbGVyIHRvIHN0b3AgdGhlIGV2ZW50LCBwcmV2ZW50aW5nIGFueSBzdWJzZXF1ZW50IGxpc3RlbmVycyBmcm9tIGZpcmluZy5cbiAgICBcXCovXG4gICAgZXZlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0b3AgPSAxO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5udFxuICAgICBbIG1ldGhvZCBdXG4gICAgICoqXG4gICAgICogQ291bGQgYmUgdXNlZCBpbnNpZGUgZXZlbnQgaGFuZGxlciB0byBmaWd1cmUgb3V0IGFjdHVhbCBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBzdWJuYW1lIChzdHJpbmcpICNvcHRpb25hbCBzdWJuYW1lIG9mIHRoZSBldmVudFxuICAgICAqKlxuICAgICA9IChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBpZiBgc3VibmFtZWAgaXMgbm90IHNwZWNpZmllZFxuICAgICAqIG9yXG4gICAgID0gKGJvb2xlYW4pIGB0cnVlYCwgaWYgY3VycmVudCBldmVudOKAmXMgbmFtZSBjb250YWlucyBgc3VibmFtZWBcbiAgICBcXCovXG4gICAgZXZlLm50ID0gZnVuY3Rpb24gKHN1Ym5hbWUpIHtcbiAgICAgICAgdmFyIGN1ciA9IGlzQXJyYXkoY3VycmVudF9ldmVudCkgPyBjdXJyZW50X2V2ZW50LmpvaW4oXCIuXCIpIDogY3VycmVudF9ldmVudDtcbiAgICAgICAgaWYgKHN1Ym5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFwiKD86XFxcXC58XFxcXC98XilcIiArIHN1Ym5hbWUgKyBcIig/OlxcXFwufFxcXFwvfCQpXCIpLnRlc3QoY3VyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VyO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5udHNcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIENvdWxkIGJlIHVzZWQgaW5zaWRlIGV2ZW50IGhhbmRsZXIgdG8gZmlndXJlIG91dCBhY3R1YWwgbmFtZSBvZiB0aGUgZXZlbnQuXG4gICAgICoqXG4gICAgICoqXG4gICAgID0gKGFycmF5KSBuYW1lcyBvZiB0aGUgZXZlbnRcbiAgICBcXCovXG4gICAgZXZlLm50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkoY3VycmVudF9ldmVudCkgPyBjdXJyZW50X2V2ZW50IDogY3VycmVudF9ldmVudC5zcGxpdChzZXBhcmF0b3IpO1xuICAgIH07XG4gICAgLypcXFxuICAgICAqIGV2ZS5vZmZcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIFJlbW92ZXMgZ2l2ZW4gZnVuY3Rpb24gZnJvbSB0aGUgbGlzdCBvZiBldmVudCBsaXN0ZW5lcnMgYXNzaWduZWQgdG8gZ2l2ZW4gbmFtZS5cbiAgICAgKiBJZiBubyBhcmd1bWVudHMgc3BlY2lmaWVkIGFsbCB0aGUgZXZlbnRzIHdpbGwgYmUgY2xlYXJlZC5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgXFwqL1xuICAgIC8qXFxcbiAgICAgKiBldmUudW5iaW5kXG4gICAgIFsgbWV0aG9kIF1cbiAgICAgKipcbiAgICAgKiBTZWUgQGV2ZS5vZmZcbiAgICBcXCovXG4gICAgZXZlLm9mZiA9IGV2ZS51bmJpbmQgPSBmdW5jdGlvbiAobmFtZSwgZikge1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgIGV2ZS5fZXZlbnRzID0gZXZlbnRzID0ge246IHt9fTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gKGlzQXJyYXkobmFtZVswXSkgPyBuYW1lIDogW25hbWVdKSA6IFN0cihuYW1lKS5zcGxpdChjb21hc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBldmUub2ZmKG5hbWVzW2ldLCBmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuYW1lcyA9IGlzQXJyYXkobmFtZSkgPyBuYW1lIDogU3RyKG5hbWUpLnNwbGl0KHNlcGFyYXRvcik7XG4gICAgICAgIHZhciBlLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgc3BsaWNlLFxuICAgICAgICAgICAgaSwgaWksIGosIGpqLFxuICAgICAgICAgICAgY3VyID0gW2V2ZW50c107XG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gbmFtZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGN1ci5sZW5ndGg7IGogKz0gc3BsaWNlLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpY2UgPSBbaiwgMV07XG4gICAgICAgICAgICAgICAgZSA9IGN1cltqXS5uO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lc1tpXSAhPSB3aWxkY2FyZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZVtuYW1lc1tpXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGljZS5wdXNoKGVbbmFtZXNbaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGUpIGlmIChlW2hhc10oa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BsaWNlLnB1c2goZVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXIuc3BsaWNlLmFwcGx5KGN1ciwgc3BsaWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGN1ci5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBlID0gY3VyW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGUubikge1xuICAgICAgICAgICAgICAgIGlmIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZS5mLmxlbmd0aDsgaiA8IGpqOyBqKyspIGlmIChlLmZbal0gPT0gZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZi5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAhZS5mLmxlbmd0aCAmJiBkZWxldGUgZS5mO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGUubikgaWYgKGUubltoYXNdKGtleSkgJiYgZS5uW2tleV0uZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bmNzID0gZS5uW2tleV0uZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gZnVuY3MubGVuZ3RoOyBqIDwgamo7IGorKykgaWYgKGZ1bmNzW2pdID09IGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jcy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAhZnVuY3MubGVuZ3RoICYmIGRlbGV0ZSBlLm5ba2V5XS5mO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGUuZjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gZS5uKSBpZiAoZS5uW2hhc10oa2V5KSAmJiBlLm5ba2V5XS5mKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZS5uW2tleV0uZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlID0gZS5uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKlxcXG4gICAgICogZXZlLm9uY2VcbiAgICAgWyBtZXRob2QgXVxuICAgICAqKlxuICAgICAqIEJpbmRzIGdpdmVuIGV2ZW50IGhhbmRsZXIgd2l0aCBhIGdpdmVuIG5hbWUgdG8gb25seSBydW4gb25jZSB0aGVuIHVuYmluZCBpdHNlbGYuXG4gICAgIHwgZXZlLm9uY2UoXCJsb2dpblwiLCBmKTtcbiAgICAgfCBldmUoXCJsb2dpblwiKTsgLy8gdHJpZ2dlcnMgZlxuICAgICB8IGV2ZShcImxvZ2luXCIpOyAvLyBubyBsaXN0ZW5lcnNcbiAgICAgKiBVc2UgQGV2ZSB0byB0cmlnZ2VyIHRoZSBsaXN0ZW5lci5cbiAgICAgKipcbiAgICAgPiBBcmd1bWVudHNcbiAgICAgKipcbiAgICAgLSBuYW1lIChzdHJpbmcpIG5hbWUgb2YgdGhlIGV2ZW50LCBkb3QgKGAuYCkgb3Igc2xhc2ggKGAvYCkgc2VwYXJhdGVkLCB3aXRoIG9wdGlvbmFsIHdpbGRjYXJkc1xuICAgICAtIGYgKGZ1bmN0aW9uKSBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICoqXG4gICAgID0gKGZ1bmN0aW9uKSBzYW1lIHJldHVybiBmdW5jdGlvbiBhcyBAZXZlLm9uXG4gICAgXFwqL1xuICAgIGV2ZS5vbmNlID0gZnVuY3Rpb24gKG5hbWUsIGYpIHtcbiAgICAgICAgdmFyIGYyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZXZlLm9mZihuYW1lLCBmMik7XG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZXZlLm9uKG5hbWUsIGYyKTtcbiAgICB9O1xuICAgIC8qXFxcbiAgICAgKiBldmUudmVyc2lvblxuICAgICBbIHByb3BlcnR5IChzdHJpbmcpIF1cbiAgICAgKipcbiAgICAgKiBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuXG4gICAgXFwqL1xuICAgIGV2ZS52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICBldmUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIllvdSBhcmUgcnVubmluZyBFdmUgXCIgKyB2ZXJzaW9uO1xuICAgIH07XG4gICAgKHR5cGVvZiBtb2R1bGUgIT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykgPyAobW9kdWxlLmV4cG9ydHMgPSBldmUpIDogKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kID8gKGRlZmluZShcImV2ZVwiLCBbXSwgZnVuY3Rpb24oKSB7IHJldHVybiBldmU7IH0pKSA6IChnbG9iLmV2ZSA9IGV2ZSkpO1xufSkodGhpcyk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/eve-raphael/eve.js\n')
          }
        },
        swa = {},
        twa.m = rwa,
        twa.c = swa,
        twa.d = function(t, g, e) {
          twa.o(t, g) || Object.defineProperty(t, g, {
            configurable: !1,
            enumerable: !0,
            get: e
          })
        },
        twa.r = function(t) {
          Object.defineProperty(t, "__esModule", {
            value: !0
          })
        },
        twa.n = function(t) {
          var g = t && t.__esModule ?
            function() {
              return t.
              default
            } :
            function() {
              return t
            };
          return twa.d(g, "a", g),
            g
        },
        twa.o = function(t, g) {
          return Object.prototype.hasOwnProperty.call(t, g)
        },
        twa.p = "",
        twa(twa.s = "./dev/raphael.amd.js");

      function twa(t) {
        if (swa[t]) return swa[t].exports;
        var g = swa[t] = {
          i: t,
          l: !1,
          exports: {}
        };
        return rwa[t].call(g.exports, g, g.exports, twa),
          g.l = !0,
          g.exports
      }
      var rwa, swa
    }), window.ScaleRaphael = function(t, l, c) {
    var u = document.getElementById(t);
    u.style.position || (u.style.position = "relative"),
      u.style.width = l + "px",
      u.style.height = c + "px";
    var d, h = "VML" == Raphael.type ? (u.innerHTML = "<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml' id='vmlgroup'></rvml:group>", document.getElementById("vmlgroup")) : (u.innerHTML = "<div id='svggroup'></div>", document.getElementById("svggroup")),
      B = new Raphael(h, l, c);
    return "SVG" == Raphael.type ? B.canvas.setAttribute("viewBox", "0 0 " + l + " " + c) : d = u.getElementsByTagName("div")[0],
      B.changeSize = function(t, g, e, n) {
        n = !n;
        var I = t / l,
          i = g / c,
          C = I < i ? I : i,
          A = parseInt(c * C),
          I = parseInt(l * C);
        if ("VML" == Raphael.type) {
          var a, o = document.getElementsByTagName("textpath");
          for (a in o) {
            var s, r = o[a];
            r.style && (r._fontSize || (s = r.style.font.split("px"), r._fontSize = parseInt(s[0]), r._font = s[1]), r.style.font = r._fontSize * C + "px" + r._font)
          }
          i = I < A ? 1e3 * I / l : 1e3 * A / c,
            i = parseInt(i),
            h.style.width = i + "px",
            h.style.height = i + "px",
            n && (h.style.left = parseInt((t - I) / 2) + "px", h.style.top = parseInt((g - A) / 2) + "px"),
            d.style.overflow = "visible"
        }
        n && (I = t, A = g),
          u.style.width = I + "px",
          u.style.height = A + "px",
          B.setSize(I, A),
          e && (u.style.position = "absolute", u.style.left = parseInt((t - I) / 2) + "px", u.style.top = parseInt((g - A) / 2) + "px")
      },
      B.scaleAll = function(t) {
        B.changeSize(l * t, c * t)
      },
      B.changeSize(l, c),
      B.w = l,
      B.h = c,
      B
  },
  function(n, I) {
    var t;
    "function" == typeof define && define.amd ? define(["underscore", "jquery", "exports"],
      function(t, g, e) {
        n.Backbone = I(n, e, t, g)
      }) : "undefined" != typeof exports ? (t = require("underscore"), I(n, exports, t)) : n.Backbone = I(n, {},
      n._, n.jQuery || n.Zepto || n.ender || n.$)
  }(this,
    function(t, C, y, g) {
      var e = t.Backbone,
        n = [],
        I = n.slice;
      C.VERSION = "1.1.2",
        C.$ = g,
        C.noConflict = function() {
          return t.Backbone = e,
            this
        },
        C.emulateHTTP = !1,
        C.emulateJSON = !1;
      var i = C.Events = {
          on: function(t, g, e) {
            return r(this, "on", t, [g, e]) && g && (this._events || (this._events = {}), (this._events[t] || (this._events[t] = [])).push({
                callback: g,
                context: e,
                ctx: e || this
              })),
              this
          },
          once: function(t, g, e) {
            if (!r(this, "once", t, [g, e]) || !g) return this;
            var n = this,
              I = y.once(function() {
                n.off(t, I),
                  g.apply(this, arguments)
              });
            return I._callback = g,
              this.on(t, I, e)
          },
          off: function(t, g, e) {
            var n, I, i, C, A, a, o, s;
            if (!this._events || !r(this, "off", t, [g, e])) return this;
            if (!t && !g && !e) return this._events = void 0,
              this;
            for (A = 0, a = (C = t ? [t] : y.keys(this._events)).length; A < a; A++)
              if (t = C[A], i = this._events[t]) {
                if (this._events[t] = n = [], g || e)
                  for (o = 0, s = i.length; o < s; o++) I = i[o],
                    (g && g !== I.callback && g !== I.callback._callback || e && e !== I.context) && n.push(I);
                n.length || delete this._events[t]
              }
            return this
          },
          trigger: function(t) {
            if (!this._events) return this;
            var g = I.call(arguments, 1);
            if (!r(this, "trigger", t, g)) return this;
            var e = this._events[t],
              n = this._events.all;
            return e && A(e, g),
              n && A(n, arguments),
              this
          },
          stopListening: function(t, g, e) {
            var n = this._listeningTo;
            if (!n) return this;
            var I, i = !g && !e;
            for (I in e || "object" != typeof g || (e = this), t && ((n = {})[t._listenId] = t), n)(t = n[I]).off(g, e, this),
              (i || y.isEmpty(t._events)) && delete this._listeningTo[I];
            return this
          }
        },
        a = /\s+/,
        r = function(t, g, e, n) {
          if (!e) return !0;
          if ("object" == typeof e) {
            for (var I in e) t[g].apply(t, [I, e[I]].concat(n));
            return !1
          }
          if (a.test(e)) {
            for (var i = e.split(a), C = 0, A = i.length; C < A; C++) t[g].apply(t, [i[C]].concat(n));
            return !1
          }
          return !0
        },
        A = function(t, g) {
          var e, n = -1,
            I = t.length,
            i = g[0],
            C = g[1],
            A = g[2];
          switch (g.length) {
            case 0:
              for (; ++n < I;)(e = t[n]).callback.call(e.ctx);
              return;
            case 1:
              for (; ++n < I;)(e = t[n]).callback.call(e.ctx, i);
              return;
            case 2:
              for (; ++n < I;)(e = t[n]).callback.call(e.ctx, i, C);
              return;
            case 3:
              for (; ++n < I;)(e = t[n]).callback.call(e.ctx, i, C, A);
              return;
            default:
              for (; ++n < I;)(e = t[n]).callback.apply(e.ctx, g);
              return
          }
        };
      y.each({
            listenTo: "on",
            listenToOnce: "once"
          },
          function(n, t) {
            i[t] = function(t, g, e) {
              return ((this._listeningTo || (this._listeningTo = {}))[t._listenId || (t._listenId = y.uniqueId("l"))] = t)[n](g, e = !e && "object" == typeof g ? this : e, this),
                this
            }
          }),
        i.bind = i.on,
        i.unbind = i.off,
        y.extend(C, i);
      var Q = C.Model = function(t, g) {
        var e = t || {};
        g = g || {},
          this.cid = y.uniqueId("c"),
          this.attributes = {},
          g.collection && (this.collection = g.collection),
          g.parse && (e = this.parse(e, g) || {}),
          e = y.defaults({},
            e, y.result(this, "defaults")),
          this.set(e, g),
          this.changed = {},
          this.initialize.apply(this, arguments)
      };
      y.extend(Q.prototype, i, {
        changed: null,
        validationError: null,
        idAttribute: "id",
        initialize: function() {},
        toJSON: function(t) {
          return y.clone(this.attributes)
        },
        sync: function() {
          return C.sync.apply(this, arguments)
        },
        get: function(t) {
          return this.attributes[t]
        },
        escape: function(t) {
          return y.escape(this.get(t))
        },
        has: function(t) {
          return null != this.get(t)
        },
        set: function(t, g, e) {
          var n, I, i, C, A, a, o;
          if (null == t) return this;
          if ("object" == typeof t ? (I = t, e = g) : (I = {})[t] = g, !this._validate(I, e = e || {})) return !1;
          for (n in i = e.unset, A = e.silent, C = [], t = this._changing, this._changing = !0, t || (this._previousAttributes = y.clone(this.attributes), this.changed = {}), o = this.attributes, a = this._previousAttributes, this.idAttribute in I && (this.id = I[this.idAttribute]), I) g = I[n],
            y.isEqual(o[n], g) || C.push(n),
            y.isEqual(a[n], g) ? delete this.changed[n] : this.changed[n] = g,
            i ? delete o[n] : o[n] = g;
          if (!A) {
            C.length && (this._pending = e);
            for (var s = 0,
                r = C.length; s < r; s++) this.trigger("change:" + C[s], this, o[C[s]], e)
          }
          if (t) return this;
          if (!A)
            for (; this._pending;) e = this._pending,
              this._pending = !1,
              this.trigger("change", this, e);
          return this._pending = !1,
            this._changing = !1,
            this
        },
        unset: function(t, g) {
          return this.set(t, void 0, y.extend({},
            g, {
              unset: !0
            }))
        },
        clear: function(t) {
          var g, e = {};
          for (g in this.attributes) e[g] = void 0;
          return this.set(e, y.extend({},
            t, {
              unset: !0
            }))
        },
        hasChanged: function(t) {
          return null == t ? !y.isEmpty(this.changed) : y.has(this.changed, t)
        },
        changedAttributes: function(t) {
          if (!t) return !!this.hasChanged() && y.clone(this.changed);
          var g, e, n = !1,
            I = this._changing ? this._previousAttributes : this.attributes;
          for (e in t) y.isEqual(I[e], g = t[e]) || ((n = n || {})[e] = g);
          return n
        },
        previous: function(t) {
          return null != t && this._previousAttributes ? this._previousAttributes[t] : null
        },
        previousAttributes: function() {
          return y.clone(this._previousAttributes)
        },
        fetch: function(g) {
          void 0 === (g = g ? y.clone(g) : {}).parse && (g.parse = !0);
          var e = this,
            n = g.success;
          return g.success = function(t) {
              if (!e.set(e.parse(t, g), g)) return !1;
              n && n(e, t, g),
                e.trigger("sync", e, t, g)
            },
            v(this, g),
            this.sync("read", this, g)
        },
        save: function(t, g, e) {
          var n, I = this.attributes;
          if (null == t || "object" == typeof t ? (n = t, e = g) : (n = {})[t] = g, e = y.extend({
                validate: !0
              },
              e), n && !e.wait) {
            if (!this.set(n, e)) return !1
          } else if (!this._validate(n, e)) return !1;
          n && e.wait && (this.attributes = y.extend({},
              I, n)),
            void 0 === e.parse && (e.parse = !0);
          var i = this,
            C = e.success;
          return e.success = function(t) {
              i.attributes = I;
              var g = i.parse(t, e);
              if (e.wait && (g = y.extend(n || {},
                  g)), y.isObject(g) && !i.set(g, e)) return !1;
              C && C(i, t, e),
                i.trigger("sync", i, t, e)
            },
            v(this, e),
            "patch" == (g = this.isNew() ? "create" : e.patch ? "patch" : "update") && (e.attrs = n),
            g = this.sync(g, this, e),
            n && e.wait && (this.attributes = I),
            g
        },
        destroy: function(g) {
          g = g ? y.clone(g) : {};

          function e() {
            n.trigger("destroy", n, n.collection, g)
          }
          var n = this,
            I = g.success;
          if (g.success = function(t) {
              (g.wait || n.isNew()) && e(),
                I && I(n, t, g),
                n.isNew() || n.trigger("sync", n, t, g)
            },
            this.isNew()) return g.success(),
            !1;
          v(this, g);
          var t = this.sync("delete", this, g);
          return g.wait || e(),
            t
        },
        url: function() {
          var t = y.result(this, "urlRoot") || y.result(this.collection, "url") || U();
          return this.isNew() ? t : t.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id)
        },
        parse: function(t, g) {
          return t
        },
        clone: function() {
          return new this.constructor(this.attributes)
        },
        isNew: function() {
          return !this.has(this.idAttribute)
        },
        isValid: function(t) {
          return this._validate({},
            y.extend(t || {}, {
              validate: !0
            }))
        },
        _validate: function(t, g) {
          if (!g.validate || !this.validate) return !0;
          t = y.extend({},
            this.attributes, t);
          t = this.validationError = this.validate(t, g) || null;
          return !t || (this.trigger("invalid", this, t, y.extend(g, {
            validationError: t
          })), !1)
        }
      });
      y.each(["keys", "values", "pairs", "invert", "pick", "omit"],
        function(g) {
          Q.prototype[g] = function() {
            var t = I.call(arguments);
            return t.unshift(this.attributes),
              y[g].apply(y, t)
          }
        });
      var o = C.Collection = function(t, g) {
          (g = g || {}).model && (this.model = g.model),
            void 0 !== g.comparator && (this.comparator = g.comparator),
            this._reset(),
            this.initialize.apply(this, arguments),
            t && this.reset(t, y.extend({
                silent: !0
              },
              g))
        },
        G = {
          add: !0,
          remove: !0,
          merge: !0
        },
        s = {
          add: !0,
          remove: !1
        };
      y.extend(o.prototype, i, {
        model: Q,
        initialize: function() {},
        toJSON: function(g) {
          return this.map(function(t) {
            return t.toJSON(g)
          })
        },
        sync: function() {
          return C.sync.apply(this, arguments)
        },
        add: function(t, g) {
          return this.set(t, y.extend({
              merge: !1
            },
            g, s))
        },
        remove: function(t, g) {
          var e, n, I, i, C = !y.isArray(t);
          for (g = g || {},
            e = 0, n = (t = C ? [t] : y.clone(t)).length; e < n; e++)(i = t[e] = this.get(t[e])) && (delete this._byId[i.id], delete this._byId[i.cid], I = this.indexOf(i), this.models.splice(I, 1), this.length--, g.silent || (g.index = I, i.trigger("remove", i, this, g)), this._removeReference(i, g));
          return C ? t[0] : t
        },
        set: function(t, g) {
          (g = y.defaults({},
            g, G)).parse && (t = this.parse(t, g));
          var e, n, I, i, C = !y.isArray(t);
          t = C ? t ? [t] : [] : y.clone(t);
          var A = g.at,
            a = this.model,
            o = this.comparator && null == A && !1 !== g.sort,
            s = y.isString(this.comparator) ? this.comparator : null,
            r = [],
            l = [],
            c = {},
            u = g.add,
            d = g.merge,
            h = g.remove,
            B = !(o || !u || !h) && [];
          for (p = 0, m = t.length; p < m; p++) {
            if (I = (n = t[p] || {}) instanceof Q ? e = n : n[a.prototype.idAttribute || "id"], I = this.get(I)) h && (c[I.cid] = !0),
              d && (n = n === e ? e.attributes : n, g.parse && (n = I.parse(n, g)), I.set(n, g), o && !i && I.hasChanged(s) && (i = !0)),
              t[p] = I;
            else if (u) {
              if (!(e = t[p] = this._prepareModel(n, g))) continue;
              r.push(e),
                this._addReference(e, g)
            }
            e = I || e,
              !B || !e.isNew() && c[e.id] || B.push(e),
              c[e.id] = !0
          }
          if (h) {
            for (p = 0, m = this.length; p < m; ++p) c[(e = this.models[p]).cid] || l.push(e);
            l.length && this.remove(l, g)
          }
          if (r.length || B && B.length)
            if (o && (i = !0), this.length += r.length, null != A)
              for (p = 0, m = r.length; p < m; p++) this.models.splice(A + p, 0, r[p]);
            else {
              B && (this.models.length = 0);
              for (var b = B || r,
                  p = 0,
                  m = b.length; p < m; p++) this.models.push(b[p])
            }
          if (i && this.sort({
              silent: !0
            }), !g.silent) {
            for (p = 0, m = r.length; p < m; p++)(e = r[p]).trigger("add", e, this, g);
            (i || B && B.length) && this.trigger("sort", this, g)
          }
          return C ? t[0] : t
        },
        reset: function(t, g) {
          g = g || {};
          for (var e = 0,
              n = this.models.length; e < n; e++) this._removeReference(this.models[e], g);
          return g.previousModels = this.models,
            this._reset(),
            t = this.add(t, y.extend({
                silent: !0
              },
              g)),
            g.silent || this.trigger("reset", this, g),
            t
        },
        push: function(t, g) {
          return this.add(t, y.extend({
              at: this.length
            },
            g))
        },
        pop: function(t) {
          var g = this.at(this.length - 1);
          return this.remove(g, t),
            g
        },
        unshift: function(t, g) {
          return this.add(t, y.extend({
              at: 0
            },
            g))
        },
        shift: function(t) {
          var g = this.at(0);
          return this.remove(g, t),
            g
        },
        slice: function() {
          return I.apply(this.models, arguments)
        },
        get: function(t) {
          if (null != t) return this._byId[t] || this._byId[t.id] || this._byId[t.cid]
        },
        at: function(t) {
          return this.models[t]
        },
        where: function(e, t) {
          return y.isEmpty(e) ? t ? void 0 : [] : this[t ? "find" : "filter"](function(t) {
            for (var g in e)
              if (e[g] !== t.get(g)) return !1;
            return !0
          })
        },
        findWhere: function(t) {
          return this.where(t, !0)
        },
        sort: function(t) {
          if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
          return t = t || {},
            y.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(y.bind(this.comparator, this)),
            t.silent || this.trigger("sort", this, t),
            this
        },
        pluck: function(t) {
          return y.invoke(this.models, "get", t)
        },
        fetch: function(e) {
          void 0 === (e = e ? y.clone(e) : {}).parse && (e.parse = !0);
          var n = e.success,
            I = this;
          return e.success = function(t) {
              var g = e.reset ? "reset" : "set";
              I[g](t, e),
                n && n(I, t, e),
                I.trigger("sync", I, t, e)
            },
            v(this, e),
            this.sync("read", this, e)
        },
        create: function(t, e) {
          if (e = e ? y.clone(e) : {},
            !(t = this._prepareModel(t, e))) return !1;
          e.wait || this.add(t, e);
          var n = this,
            I = e.success;
          return e.success = function(t, g) {
              e.wait && n.add(t, e),
                I && I(t, g, e)
            },
            t.save(null, e),
            t
        },
        parse: function(t, g) {
          return t
        },
        clone: function() {
          return new this.constructor(this.models)
        },
        _reset: function() {
          this.length = 0,
            this.models = [],
            this._byId = {}
        },
        _prepareModel: function(t, g) {
          if (t instanceof Q) return t;
          t = new((g = g ? y.clone(g) : {}).collection = this).model(t, g);
          return t.validationError ? (this.trigger("invalid", this, t.validationError, g), !1) : t
        },
        _addReference: function(t, g) {
          null != (this._byId[t.cid] = t).id && (this._byId[t.id] = t),
            t.collection || (t.collection = this),
            t.on("all", this._onModelEvent, this)
        },
        _removeReference: function(t, g) {
          this === t.collection && delete t.collection,
            t.off("all", this._onModelEvent, this)
        },
        _onModelEvent: function(t, g, e, n) {
          ("add" !== t && "remove" !== t || e === this) && ("destroy" === t && this.remove(g, n), g && t === "change:" + g.idAttribute && (delete this._byId[g.previous(g.idAttribute)], null != g.id && (this._byId[g.id] = g)), this.trigger.apply(this, arguments))
        }
      });
      y.each(["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample"],
        function(g) {
          o.prototype[g] = function() {
            var t = I.call(arguments);
            return t.unshift(this.models),
              y[g].apply(y, t)
          }
        });
      y.each(["groupBy", "countBy", "sortBy", "indexBy"],
        function(n) {
          o.prototype[n] = function(g, t) {
            var e = y.isFunction(g) ? g : function(t) {
              return t.get(g)
            };
            return y[n](this.models, e, t)
          }
        });
      var n = C.View = function(t) {
          this.cid = y.uniqueId("view"),
            y.extend(this, y.pick(t = t || {},
              c)),
            this._ensureElement(),
            this.initialize.apply(this, arguments),
            this.delegateEvents()
        },
        l = /^(\S+)\s*(.*)$/,
        c = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
      y.extend(n.prototype, i, {
          tagName: "div",
          $: function(t) {
            return this.$el.find(t)
          },
          initialize: function() {},
          render: function() {
            return this
          },
          remove: function() {
            return this.$el.remove(),
              this.stopListening(),
              this
          },
          setElement: function(t, g) {
            return this.$el && this.undelegateEvents(),
              this.$el = t instanceof C.$ ? t : C.$(t),
              this.el = this.$el[0],
              !1 !== g && this.delegateEvents(),
              this
          },
          delegateEvents: function(t) {
            if (!(t = t || y.result(this, "events"))) return this;
            for (var g in this.undelegateEvents(), t) {
              var e, n = t[g];
              (n = !y.isFunction(n) ? this[t[g]] : n) && (g = (e = g.match(l))[1], e = e[2], n = y.bind(n, this), g += ".delegateEvents" + this.cid, "" === e ? this.$el.on(g, n) : this.$el.on(g, e, n))
            }
            return this
          },
          undelegateEvents: function() {
            return this.$el.off(".delegateEvents" + this.cid),
              this
          },
          _ensureElement: function() {
            var t;
            this.el ? this.setElement(y.result(this, "el"), !1) : (t = y.extend({},
              y.result(this, "attributes")), this.id && (t.id = y.result(this, "id")), this.className && (t.class = y.result(this, "className")), t = C.$("<" + y.result(this, "tagName") + ">").attr(t), this.setElement(t, !1))
          }
        }),
        C.sync = function(t, g, e) {
          var n = d[t];
          y.defaults(e = e || {}, {
            emulateHTTP: C.emulateHTTP,
            emulateJSON: C.emulateJSON
          });
          var I, i = {
            type: n,
            dataType: "json"
          };
          e.url || (i.url = y.result(g, "url") || U()),
            null != e.data || !g || "create" !== t && "update" !== t && "patch" !== t || (i.contentType = "application/json", i.data = JSON.stringify(e.attrs || g.toJSON(e))),
            e.emulateJSON && (i.contentType = "application/x-www-form-urlencoded", i.data = i.data ? {
              model: i.data
            } : {}),
            !e.emulateHTTP || "PUT" !== n && "DELETE" !== n && "PATCH" !== n || (i.type = "POST", e.emulateJSON && (i.data._method = n), I = e.beforeSend, e.beforeSend = function(t) {
              if (t.setRequestHeader("X-HTTP-Method-Override", n), I) return I.apply(this, arguments)
            }),
            "GET" === i.type || e.emulateJSON || (i.processData = !1),
            "PATCH" === i.type && u && (i.xhr = function() {
              return new ActiveXObject("Microsoft.XMLHTTP")
            });
          i = e.xhr = C.ajax(y.extend(i, e));
          return g.trigger("request", g, i, e),
            i
        };
      var u = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent),
        d = {
          create: "POST",
          update: "PUT",
          patch: "PATCH",
          delete: "DELETE",
          read: "GET"
        };
      C.ajax = function() {
        return C.$.ajax.apply(C.$, arguments)
      };
      var g = C.Router = function(t) {
          (t = t || {}).routes && (this.routes = t.routes),
            this._bindRoutes(),
            this.initialize.apply(this, arguments)
        },
        h = /\((.*?)\)/g,
        B = /(\(\?)?:\w+/g,
        b = /\*\w+/g,
        p = /[\-{}\[\]+?.,\\\^$|#\s]/g;
      y.extend(g.prototype, i, {
        initialize: function() {},
        route: function(g, e, n) {
          y.isRegExp(g) || (g = this._routeToRegExp(g)),
            y.isFunction(e) && (n = e, e = ""),
            n = n || this[e];
          var I = this;
          return C.history.route(g,
              function(t) {
                t = I._extractParameters(g, t);
                I.execute(n, t),
                  I.trigger.apply(I, ["route:" + e].concat(t)),
                  I.trigger("route", e, t),
                  C.history.trigger("route", I, e, t)
              }),
            this
        },
        execute: function(t, g) {
          t && t.apply(this, g)
        },
        navigate: function(t, g) {
          return C.history.navigate(t, g),
            this
        },
        _bindRoutes: function() {
          if (this.routes) {
            this.routes = y.result(this, "routes");
            for (var t, g = y.keys(this.routes); null != (t = g.pop());) this.route(t, this.routes[t])
          }
        },
        _routeToRegExp: function(t) {
          return t = t.replace(p, "\\$&").replace(h, "(?:$1)?").replace(B,
              function(t, g) {
                return g ? t : "([^/?]+)"
              }).replace(b, "([^?]*?)"),
            new RegExp("^" + t + "(?:\\?([\\s\\S]*))?$")
        },
        _extractParameters: function(t, g) {
          var e = t.exec(g).slice(1);
          return y.map(e,
            function(t, g) {
              return g === e.length - 1 ? t || null : t ? decodeURIComponent(t) : null
            })
        }
      });
      var m = C.History = function() {
          this.handlers = [],
            y.bindAll(this, "checkUrl"),
            "undefined" != typeof window && (this.location = window.location, this.history = window.history)
        },
        F = /^[#\/]|\s+$/g,
        f = /^\/+|\/+$/g,
        X = /msie [\w.]+/,
        x = /\/$/,
        Z = /#.*$/;
      m.started = !1,
        y.extend(m.prototype, i, {
          interval: 50,
          atRoot: function() {
            return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root
          },
          getHash: function(t) {
            t = (t || this).location.href.match(/#(.*)$/);
            return t ? t[1] : ""
          },
          getFragment: function(t, g) {
            return null == t && (this._hasPushState || !this._wantsHashChange || g ? (t = decodeURI(this.location.pathname + this.location.search), g = this.root.replace(x, ""), t.indexOf(g) || (t = t.slice(g.length))) : t = this.getHash()),
              t.replace(F, "")
          },
          start: function(t) {
            if (m.started) throw new Error("Backbone.history has already been started");
            m.started = !0,
              this.options = y.extend({
                  root: "/"
                },
                this.options, t),
              this.root = this.options.root,
              this._wantsHashChange = !1 !== this.options.hashChange,
              this._wantsPushState = !!this.options.pushState,
              this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var g = this.getFragment(),
              e = document.documentMode,
              t = X.exec(navigator.userAgent.toLowerCase()) && (!e || e <= 7);
            this.root = ("/" + this.root + "/").replace(f, "/"),
              t && this._wantsHashChange && (e = C.$('<iframe src="javascript:0" tabindex="-1">'), this.iframe = e.hide().appendTo("body")[0].contentWindow, this.navigate(g)),
              this._hasPushState ? C.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !t ? C.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)),
              this.fragment = g;
            g = this.location;
            if (this._wantsHashChange && this._wantsPushState) {
              if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0),
                this.location.replace(this.root + "#" + this.fragment),
                !0;
              this._hasPushState && this.atRoot() && g.hash && (this.fragment = this.getHash().replace(F, ""), this.history.replaceState({},
                document.title, this.root + this.fragment))
            }
            if (!this.options.silent) return this.loadUrl()
          },
          stop: function() {
            C.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl),
              this._checkUrlInterval && clearInterval(this._checkUrlInterval),
              m.started = !1
          },
          route: function(t, g) {
            this.handlers.unshift({
              route: t,
              callback: g
            })
          },
          checkUrl: function(t) {
            var g = this.getFragment();
            if ((g = g === this.fragment && this.iframe ? this.getFragment(this.getHash(this.iframe)) : g) === this.fragment) return !1;
            this.iframe && this.navigate(g),
              this.loadUrl()
          },
          loadUrl: function(g) {
            return g = this.fragment = this.getFragment(g),
              y.any(this.handlers,
                function(t) {
                  if (t.route.test(g)) return t.callback(g),
                    !0
                })
          },
          navigate: function(t, g) {
            if (!m.started) return !1;
            g && !0 !== g || (g = {
              trigger: !!g
            });
            var e = this.root + (t = this.getFragment(t || ""));
            if (t = t.replace(Z, ""), this.fragment !== t) {
              if ("" === (this.fragment = t) && "/" !== e && (e = e.slice(0, -1)), this._hasPushState) this.history[g.replace ? "replaceState" : "pushState"]({},
                document.title, e);
              else {
                if (!this._wantsHashChange) return this.location.assign(e);
                this._updateHash(this.location, t, g.replace),
                  this.iframe && t !== this.getFragment(this.getHash(this.iframe)) && (g.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, t, g.replace))
              }
              return g.trigger ? this.loadUrl(t) : void 0
            }
          },
          _updateHash: function(t, g, e) {
            e ? (e = t.href.replace(/(javascript:|#).*$/, ""), t.replace(e + "#" + g)) : t.hash = "#" + g
          }
        }),
        C.history = new m;
      Q.extend = o.extend = g.extend = n.extend = m.extend = function(t, g) {
        var e = this,
          n = t && y.has(t, "constructor") ? t.constructor : function() {
            return e.apply(this, arguments)
          };
        y.extend(n, e, g);
        g = function() {
          this.constructor = n
        };
        return g.prototype = e.prototype,
          n.prototype = new g,
          t && y.extend(n.prototype, t),
          n.__super__ = e.prototype,
          n
      };
      var U = function() {
          throw new Error('A "url" property or function must be specified')
        },
        v = function(g, e) {
          var n = e.error;
          e.error = function(t) {
            n && n(g, t, e),
              g.trigger("error", g, t, e)
          }
        };
      return C
    }),
  function(a) {
    var t, o = {
        isMsie: function() {
          return !!/(msie|trident)/i.test(navigator.userAgent) && navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
        },
        isBlankString: function(t) {
          return !t || /^\s*$/.test(t)
        },
        escapeRegExChars: function(t) {
          return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
        },
        isString: function(t) {
          return "string" == typeof t
        },
        isNumber: function(t) {
          return "number" == typeof t
        },
        isArray: a.isArray,
        isFunction: a.isFunction,
        isObject: a.isPlainObject,
        isUndefined: function(t) {
          return void 0 === t
        },
        bind: a.proxy,
        each: function(t, e) {
          a.each(t,
            function(t, g) {
              return e(g, t)
            })
        },
        map: a.map,
        filter: a.grep,
        every: function(e, n) {
          var I = !0;
          return e ? (a.each(e,
            function(t, g) {
              if (!(I = n.call(null, g, t, e))) return !1
            }), !!I) : I
        },
        some: function(e, n) {
          var I = !1;
          return e ? (a.each(e,
            function(t, g) {
              if (I = n.call(null, g, t, e)) return !1
            }), !!I) : I
        },
        mixin: a.extend,
        getUniqueId: (t = 0,
          function() {
            return t++
          }),
        templatify: function(t) {
          return a.isFunction(t) ? t : function() {
            return String(t)
          }
        },
        defer: function(t) {
          setTimeout(t, 0)
        },
        debounce: function(I, i, C) {
          var A, a;
          return function() {
            var t = this,
              g = arguments,
              e = function() {
                A = null,
                  C || (a = I.apply(t, g))
              },
              n = C && !A;
            return clearTimeout(A),
              A = setTimeout(e, i),
              a = n ? I.apply(t, g) : a
          }
        },
        throttle: function(e, n) {
          var I, i, C, A, a = 0,
            o = function() {
              a = new Date,
                C = null,
                A = e.apply(I, i)
            };
          return function() {
            var t = new Date,
              g = n - (t - a);
            return I = this,
              i = arguments,
              g <= 0 ? (clearTimeout(C), C = null, a = t, A = e.apply(I, i)) : C = C || setTimeout(o, g),
              A
          }
        },
        noop: function() {}
      },
      g = {
        nonword: n,
        whitespace: e,
        obj: {
          nonword: I(n),
          whitespace: I(e)
        }
      };

    function e(t) {
      return t.split(/\s+/)
    }

    function n(t) {
      return t.split(/\W+/)
    }

    function I(e) {
      return function(g) {
        return function(t) {
          return e(t[g])
        }
      }
    }
    var i = (o.mixin(C.prototype, {
      set: function(t, g) {
        var e = this.list.tail;
        this.size >= this.maxSize && (this.list.remove(e), delete this.hash[e.key]),
          (e = this.hash[t]) ? (e.val = g, this.list.moveToFront(e)) : (e = new s(t, g), this.list.add(e), this.hash[t] = e, this.size++)
      },
      get: function(t) {
        t = this.hash[t];
        if (t) return this.list.moveToFront(t),
          t.val
      }
    }), o.mixin(A.prototype, {
      add: function(t) {
        this.head && (t.next = this.head, this.head.prev = t),
          this.head = t,
          this.tail = this.tail || t
      },
      remove: function(t) {
        t.prev ? t.prev.next = t.next : this.head = t.next,
          t.next ? t.next.prev = t.prev : this.tail = t.prev
      },
      moveToFront: function(t) {
        this.remove(t),
          this.add(t)
      }
    }), C);

    function C(t) {
      this.maxSize = t || 100,
        this.size = 0,
        this.hash = {},
        this.list = new A
    }

    function A() {
      this.head = this.tail = null
    }

    function s(t, g) {
      this.key = t,
        this.val = g,
        this.prev = this.next = null
    }
    var r, l, c, u, d = function() {
        var I, t;
        try {
          (I = window.localStorage).setItem("~~~", "!"),
            I.removeItem("~~~")
        } catch (t) {
          I = null
        }

        function g(t) {
          this.prefix = ["__", t, "__"].join(""),
            this.ttlKey = "__ttl__",
            this.keyMatcher = new RegExp("^" + this.prefix)
        }
        return t = I && window.JSON ? {
            _prefix: function(t) {
              return this.prefix + t
            },
            _ttlKey: function(t) {
              return this._prefix(t) + this.ttlKey
            },
            get: function(t) {
              return this.isExpired(t) && this.remove(t),
                e(I.getItem(this._prefix(t)))
            },
            set: function(t, g, e) {
              return o.isNumber(e) ? I.setItem(this._ttlKey(t), i(n() + e)) : I.removeItem(this._ttlKey(t)),
                I.setItem(this._prefix(t), i(g))
            },
            remove: function(t) {
              return I.removeItem(this._ttlKey(t)),
                I.removeItem(this._prefix(t)),
                this
            },
            clear: function() {
              for (var t, g = [], e = I.length, n = 0; n < e; n++)(t = I.key(n)).match(this.keyMatcher) && g.push(t.replace(this.keyMatcher, ""));
              for (n = g.length; n--;) this.remove(g[n]);
              return this
            },
            isExpired: function(t) {
              t = e(I.getItem(this._ttlKey(t)));
              return !!(o.isNumber(t) && n() > t)
            }
          } : {
            get: o.noop,
            set: o.noop,
            remove: o.noop,
            clear: o.noop,
            isExpired: o.noop
          },
          o.mixin(g.prototype, t),
          g;

        function n() {
          return (new Date).getTime()
        }

        function i(t) {
          return JSON.stringify(o.isUndefined(t) ? null : t)
        }

        function e(t) {
          return JSON.parse(t)
        }
      }(),
      h = (r = 0, l = {},
        c = 6, u = new i(10), B.setMaxPendingRequests = function(t) {
          c = t
        },
        B.resetCache = function() {
          u = new i(10)
        },
        o.mixin(B.prototype, {
          _get: function(g, t, e) {
            var n, I = this;

            function i(t) {
              e && e(null, t),
                u.set(g, t)
            }

            function C() {
              e && e(!0)
            }(n = l[g]) ? n.done(i).fail(C): r < c ? (r++, l[g] = this._send(g, t).done(i).fail(C).always(function() {
              r--,
              delete l[g],
                I.onDeckRequestArgs && (I._get.apply(I, I.onDeckRequestArgs), I.onDeckRequestArgs = null)
            })) : this.onDeckRequestArgs = [].slice.call(arguments, 0)
          },
          get: function(t, g, e) {
            var n;
            return o.isFunction(g) && (e = g, g = {}),
              (n = u.get(t)) ? o.defer(function() {
                e && e(null, n)
              }) : this._get(t, g, e),
              !!n
          }
        }), B);

    function B(t) {
      var n;
      this._send = (t = t || {}).transport ? (n = t.transport,
          function(t, g) {
            var e = a.Deferred();
            return n(t, g,
                function(t) {
                  o.defer(function() {
                    e.resolve(t)
                  })
                },
                function(t) {
                  o.defer(function() {
                    e.reject(t)
                  })
                }),
              e
          }) : a.ajax,
        this._get = t.rateLimiter ? t.rateLimiter(this._get) : this._get
    }
    var b = (o.mixin(p.prototype, {
      bootstrap: function(t) {
        this.datums = t.datums,
          this.trie = t.trie
      },
      add: function(t) {
        var i = this;
        t = o.isArray(t) ? t : [t],
          o.each(t,
            function(t) {
              var I = i.datums.push(t) - 1,
                t = m(i.datumTokenizer(t));
              o.each(t,
                function(t) {
                  for (var g, e = i.trie,
                      n = t.split(""); g = n.shift();)(e = e.children[g] || (e.children[g] = y())).ids.push(I)
                })
            })
      },
      get: function(t) {
        var I, i = this,
          t = m(this.queryTokenizer(t));
        return o.each(t,
            function(t) {
              var g, e, n;
              if (I && 0 === I.length) return !1;
              for (g = i.trie, e = t.split(""); g && (n = e.shift());) g = g.children[n];
              if (!g || 0 !== e.length) return !(I = []);
              t = g.ids.slice(0),
                I = I ?
                function(t, g) {
                  var e = 0,
                    n = 0,
                    I = [];
                  t = t.sort(i),
                    g = g.sort(i);
                  for (; e < t.length && n < g.length;) t[e] < g[n] ? e++ : (t[e] > g[n] || (I.push(t[e]), e++), n++);
                  return I;

                  function i(t, g) {
                    return t - g
                  }
                }(I, t) : t
            }),
          I ? o.map(function(t) {
              for (var g = {},
                  e = [], n = 0; n < t.length; n++) g[t[n]] || (g[t[n]] = !0, e.push(t[n]));
              return e
            }(I),
            function(t) {
              return i.datums[t]
            }) : []
      },
      reset: function() {
        this.datums = [],
          this.trie = y()
      },
      serialize: function() {
        return {
          datums: this.datums,
          trie: this.trie
        }
      }
    }), p);

    function p(t) {
      (t = t || {}).datumTokenizer && t.queryTokenizer || a.error("datumTokenizer and queryTokenizer are both required"),
        this.datumTokenizer = t.datumTokenizer,
        this.queryTokenizer = t.queryTokenizer,
        this.reset()
    }

    function m(t) {
      return t = o.filter(t,
          function(t) {
            return !!t
          }),
        t = o.map(t,
          function(t) {
            return t.toLowerCase()
          })
    }

    function y() {
      return {
        ids: [],
        children: {}
      }
    }
    var Q, G, F, f = {
      local: function(t) {
        return t.local || null
      },
      prefetch: function(t) {
        var g;
        g = {
            url: null,
            thumbprint: "",
            ttl: 864e5,
            filter: null,
            ajax: {}
          },
          (t = t.prefetch || null) && (t = o.isString(t) ? {
            url: t
          } : t, (t = o.mixin(g, t)).thumbprint = "0.10.2" + t.thumbprint, t.ajax.type = t.ajax.type || "GET", t.ajax.dataType = t.ajax.dataType || "json", t.url || a.error("prefetch requires url to be set"));
        return t
      },
      remote: function(t) {
        var g;
        g = {
            url: null,
            wildcard: "%QUERY",
            replace: null,
            rateLimitBy: "debounce",
            rateLimitWait: 300,
            send: null,
            filter: null,
            ajax: {}
          },
          (t = t.remote || null) && (t = o.isString(t) ? {
            url: t
          } : t, (t = o.mixin(g, t)).rateLimiter = (/^throttle$/i.test(t.rateLimitBy) ?
            function(g) {
              return function(t) {
                return o.throttle(t, g)
              }
            } : function(g) {
              return function(t) {
                return o.debounce(t, g)
              }
            })(t.rateLimitWait), t.ajax.type = t.ajax.type || "GET", t.ajax.dataType = t.ajax.dataType || "json", delete t.rateLimitBy, delete t.rateLimitWait, t.url || a.error("remote requires url to be set"));
        return t
      }
    };

    function X(t) {
      var g;
      t && (t.local || t.prefetch || t.remote) || a.error("one of local, prefetch, or remote is required"),
        this.limit = t.limit || 5,
        this.sorter = (g = t.sorter, o.isFunction(g) ?
          function(t) {
            return t.sort(g)
          } : function(t) {
            return t
          }),
        this.dupDetector = t.dupDetector || x,
        this.local = f.local(t),
        this.prefetch = f.prefetch(t),
        this.remote = f.remote(t),
        this.cacheKey = this.prefetch ? this.prefetch.cacheKey || this.prefetch.url : null,
        this.index = new b({
          datumTokenizer: t.datumTokenizer,
          queryTokenizer: t.queryTokenizer
        }),
        this.storage = this.cacheKey ? new d(this.cacheKey) : null
    }

    function x() {
      return !1
    }
    G = (Q = this).Bloodhound,
      F = {
        data: "data",
        protocol: "protocol",
        thumbprint: "thumbprint"
      },
      (Q.Bloodhound = X).noConflict = function() {
        return Q.Bloodhound = G,
          X
      },
      X.tokenizers = g,
      o.mixin(X.prototype, {
        _loadPrefetch: function(g) {
          var e = this,
            t = (t = this._readFromStorage(g.thumbprint)) ? (this.index.bootstrap(t), a.Deferred().resolve()) : a.ajax(g.url, g.ajax).done(function(t) {
              e.clear(),
                e.add(g.filter ? g.filter(t) : t),
                e._saveToStorage(e.index.serialize(), g.thumbprint, g.ttl)
            });
          return t
        },
        _getFromRemote: function(t, e) {
          var g, n = this;
          return t = t || "",
            g = encodeURIComponent(t),
            g = this.remote.replace ? this.remote.replace(this.remote.url, t) : this.remote.url.replace(this.remote.wildcard, g),
            this.transport.get(g, this.remote.ajax,
              function(t, g) {
                e(t ? [] : n.remote.filter ? n.remote.filter(g) : g)
              })
        },
        _saveToStorage: function(t, g, e) {
          this.storage && (this.storage.set(F.data, t, e), this.storage.set(F.protocol, location.protocol, e), this.storage.set(F.thumbprint, g, e))
        },
        _readFromStorage: function(t) {
          var g = {};
          return this.storage && (g.data = this.storage.get(F.data), g.protocol = this.storage.get(F.protocol), g.thumbprint = this.storage.get(F.thumbprint)),
            t = g.thumbprint !== t || g.protocol !== location.protocol,
            g.data && !t ? g.data : null
        },
        _initialize: function() {
          var t = this,
            g = this.local,
            e = this.prefetch ? this._loadPrefetch(this.prefetch) : a.Deferred().resolve();
          return g && e.done(function() {
              t.add(o.isFunction(g) ? g() : g)
            }),
            this.transport = this.remote ? new h(this.remote) : null,
            this.initPromise = e.promise()
        },
        initialize: function(t) {
          return !this.initPromise || t ? this._initialize() : this.initPromise
        },
        add: function(t) {
          this.index.add(t)
        },
        get: function(t, g) {
          var n = this,
            I = [],
            e = !1;
          I = this.index.get(t),
            (e = (I = this.sorter(I).slice(0, this.limit)).length < this.limit && this.transport ? this._getFromRemote(t,
              function(t) {
                var e = I.slice(0);
                o.each(t,
                    function(g) {
                      return o.some(e,
                          function(t) {
                            return n.dupDetector(g, t)
                          }) || e.push(g),
                        e.length < n.limit
                    }),
                  g && g(n.sorter(e))
              }) : e) || (0 < I.length || !this.transport) && g && g(I)
        },
        clear: function() {
          this.index.reset()
        },
        clearPrefetchCache: function() {
          this.storage && this.storage.clear()
        },
        clearRemoteCache: function() {
          this.transport && h.resetCache()
        },
        ttAdapter: function() {
          return o.bind(this.get, this)
        }
      });
    var Z = {
        wrapper: '<div class="input-dd-container"></div>',
        dropdown: '<span class="tt-dropdown-menu"></span>',
        dataset: '<div class="tt-dataset-%CLASS%"></div>',
        suggestions: '<span class="tt-suggestions"></span>',
        suggestion: '<div class="tt-suggestion"></div>'
      },
      U = {
        wrapper: {},
        hint: {},
        input: {},
        inputWithNoHint: {
          position: "relative",
          verticalAlign: "top"
        },
        dropdown: {},
        suggestions: {
          display: "block"
        },
        suggestion: {
          whiteSpace: "nowrap",
          cursor: "pointer"
        },
        suggestionChild: {
          whiteSpace: "normal"
        },
        ltr: {
          left: "0",
          right: "auto"
        },
        rtl: {
          left: "auto",
          right: " 0"
        }
      };
    o.isMsie() && o.mixin(U.input, {
        backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
      }),
      o.isMsie() && o.isMsie() <= 7 && o.mixin(U.input, {
        marginTop: "-1px"
      });
    var v = (o.mixin(S.prototype, {
      trigger: function(t) {
        var g = [].slice.call(arguments, 1);
        this.$el.trigger("typeahead:" + t, g)
      }
    }), S);

    function S(t) {
      t && t.el || a.error("EventBus initialized without el"),
        this.$el = a(t.el)
    }
    var W, w, g = (W = /\s+/, w = function() {
      var t;
      t = window.setImmediate ?
        function(t) {
          setImmediate(function() {
            t()
          })
        } : function(t) {
          setTimeout(function() {
              t()
            },
            0)
        };
      return t
    }(), {
      onSync: function(t, g, e) {
        return N.call(this, "sync", t, g, e)
      },
      onAsync: function(t, g, e) {
        return N.call(this, "async", t, g, e)
      },
      off: function(t) {
        var g;
        if (!this._callbacks) return this;
        t = t.split(W);
        for (; g = t.shift();) delete this._callbacks[g];
        return this
      },
      trigger: function(t) {
        var g, e, n, I;
        if (!this._callbacks) return this;
        t = t.split(W),
          e = [].slice.call(arguments, 1);
        for (;
          (I = t.shift()) && (g = this._callbacks[I]);) n = H(g.sync, this, [I].concat(e)),
          I = H(g.async, this, [I].concat(e)),
          n() && w(I);
        return this
      }
    });

    function N(t, g, e, n) {
      var I, i, C;
      if (!e) return this;
      for (g = g.split(W), e = n ? (C = n, (i = e).bind ? i.bind(C) : function() {
          i.apply(C, [].slice.call(arguments, 0))
        }) : e, this._callbacks = this._callbacks || {}; I = g.shift();) this._callbacks[I] = this._callbacks[I] || {
          sync: [],
          async: []
        },
        this._callbacks[I][t].push(e);
      return this
    }

    function H(e, n, I) {
      return function() {
        for (var t, g = 0; !t && g < e.length; g += 1) t = !1 === e[g].apply(n, I);
        return !t
      }
    }
    var D, V, Y, R = (D = window.document, V = {
          node: null,
          pattern: null,
          tagName: "strong",
          className: null,
          wordsOnly: !1,
          caseSensitive: !1
        },
        function(n) {
          var I;
          (n = o.mixin({},
            V, n)).node && n.pattern && (n.pattern = o.isArray(n.pattern) ? n.pattern : [n.pattern], I = function(t, g, e) {
              for (var n = [], I = 0; I < t.length; I++) n.push(o.escapeRegExChars(t[I]));
              return e = e ? "\\b(" + n.join("|") + ")\\b" : "(" + n.join("|") + ")",
                g ? new RegExp(e) : new RegExp(e, "i")
            }(n.pattern, n.caseSensitive, n.wordsOnly),
            function t(g, e) {
              var n;
              for (var I = 0; I < g.childNodes.length; I++) 3 === (n = g.childNodes[I]).nodeType ? I += e(n) ? 1 : 0 : t(n, e)
            }(n.node,
              function(t) {
                var g, e;
                (g = I.exec(t.data)) && (wrapperNode = D.createElement(n.tagName), n.className && (wrapperNode.className = n.className), (e = t.splitText(g.index)).splitText(g[0].length), wrapperNode.appendChild(e.cloneNode(!0)), t.parentNode.replaceChild(wrapperNode, e));
                return !!g
              }))
        }),
      T = (Y = {
          9: "tab",
          27: "esc",
          37: "left",
          39: "right",
          13: "enter",
          38: "up",
          40: "down"
        },
        k.normalizeQuery = function(t) {
          return (t || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ")
        },
        o.mixin(k.prototype, g, {
          _onBlur: function() {
            this.resetInputValue(),
              this.trigger("blurred")
          },
          _onFocus: function() {
            this.trigger("focused")
          },
          _onKeydown: function(t) {
            var g = Y[t.which || t.keyCode];
            this._managePreventDefault(g, t),
              g && this._shouldTrigger(g, t) && this.trigger(g + "Keyed", t)
          },
          _onInput: function() {
            this._checkInputValue()
          },
          _managePreventDefault: function(t, g) {
            var e, n, I;
            switch (t) {
              case "tab":
                n = this.getHint(),
                  I = this.getInputValue(),
                  e = n && n !== I && !E(g);
                break;
              case "up":
              case "down":
                e = !E(g);
                break;
              default:
                e = !1
            }
            e && g.preventDefault()
          },
          _shouldTrigger: function(t, g) {
            g = "tab" !== t || !E(g);
            return g
          },
          _checkInputValue: function() {
            var t, g, e = this.getInputValue();
            g = this.query,
              g = (t = k.normalizeQuery(e) === k.normalizeQuery(g)) && this.query.length !== e.length,
              t ? g && this.trigger("whitespaceChanged", this.query) : this.trigger("queryChanged", this.query = e)
          },
          focus: function() {
            this.$input.focus()
          },
          blur: function() {
            this.$input.blur()
          },
          getQuery: function() {
            return this.query
          },
          setQuery: function(t) {
            this.query = t
          },
          getInputValue: function() {
            return this.$input.val()
          },
          setInputValue: function(t, g) {
            this.$input.val(t),
              g ? this.clearHint() : this._checkInputValue()
          },
          resetInputValue: function() {
            this.setInputValue(this.query, !0)
          },
          getHint: function() {
            return this.$hint.val()
          },
          setHint: function(t) {
            this.$hint.val(t)
          },
          clearHint: function() {
            this.setHint("")
          },
          clearHintIfInvalid: function() {
            var t = this.getInputValue(),
              g = this.getHint(),
              g = t !== g && 0 === g.indexOf(t);
            "" !== t && g && !this.hasOverflow() || this.clearHint()
          },
          getLanguageDirection: function() {
            return (this.$input.css("direction") || "ltr").toLowerCase()
          },
          hasOverflow: function() {
            var t = this.$input.width() - 2;
            return this.$overflowHelper.text(this.getInputValue()),
              this.$overflowHelper.width() >= t
          },
          isCursorAtEnd: function() {
            var t = this.$input.val().length,
              g = this.$input[0].selectionStart;
            return o.isNumber(g) ? g === t : !document.selection || ((g = document.selection.createRange()).moveStart("character", -t), t === g.text.length)
          },
          destroy: function() {
            this.$hint.off(".tt"),
              this.$input.off(".tt"),
              this.$hint = this.$input = this.$overflowHelper = null
          }
        }), k);

    function k(t) {
      var g, e, n, I, i = this;
      (t = t || {}).input || a.error("input is missing"),
        g = o.bind(this._onBlur, this),
        e = o.bind(this._onFocus, this),
        n = o.bind(this._onKeydown, this),
        I = o.bind(this._onInput, this),
        this.$hint = a(t.hint),
        this.$input = a(t.input).on("blur.tt", g).on("focus.tt", e).on("keydown.tt", n),
        0 === this.$hint.length && (this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = o.noop),
        o.isMsie() ? this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",
          function(t) {
            Y[t.which || t.keyCode] || o.defer(o.bind(i._onInput, i, t))
          }) : this.$input.on("input.tt", I),
        this.query = this.$input.val(),
        this.$overflowHelper = (I = this.$input, a('<pre aria-hidden="true"></pre>').css({
          position: "absolute",
          visibility: "hidden",
          whiteSpace: "pre",
          fontFamily: I.css("font-family"),
          fontSize: I.css("font-size"),
          fontStyle: I.css("font-style"),
          fontVariant: I.css("font-variant"),
          fontWeight: I.css("font-weight"),
          wordSpacing: I.css("word-spacing"),
          letterSpacing: I.css("letter-spacing"),
          textIndent: I.css("text-indent"),
          textRendering: I.css("text-rendering"),
          textTransform: I.css("text-transform")
        }).insertAfter(I))
    }

    function E(t) {
      return t.altKey || t.ctrlKey || t.metaKey || t.shiftKey
    }
    var O = (L.extractDatasetName = function(t) {
        return a(t).data("ttDataset")
      },
      L.extractValue = function(t) {
        return a(t).data("ttValue")
      },
      L.extractDatum = function(t) {
        return a(t).data("ttDatum")
      },
      o.mixin(L.prototype, g, {
        _render: function(t, g) {
          var e, n, I, i;

          function C() {
            return e.templates.header({
              query: t,
              isEmpty: !n
            })
          }

          function A() {
            return e.templates.footer({
              query: t,
              isEmpty: !n
            })
          }
          this.$el && ((e = this).$el.empty(), !(n = g && g.length) && this.templates.empty ? this.$el.html(e.templates.empty({
            query: t,
            isEmpty: !0
          })).prepend(e.templates.header ? C() : null).append(e.templates.footer ? A() : null) : n && this.$el.html((I = a(Z.suggestions).css(U.suggestions), i = o.map(g,
            function(t) {
              return (t = a(Z.suggestion).append(e.templates.suggestion(t)).data("ttDataset", e.name).data("ttValue", e.displayFn(t)).data("ttDatum", t)).children().each(function() {
                  a(this).css(U.suggestionChild)
                }),
                t
            }), I.append.apply(I, i), e.highlight && R({
            node: I[0],
            pattern: t
          }), I)).prepend(e.templates.header ? C() : null).append(e.templates.footer ? A() : null), this.trigger("rendered"))
        },
        getRoot: function() {
          return this.$el
        },
        update: function(g) {
          var e = this;
          this.query = g,
            this.canceled = !1,
            this.source(g,
              function(t) {
                e.canceled || g !== e.query || e._render(g, t)
              })
        },
        cancel: function() {
          this.canceled = !0
        },
        clear: function() {
          this.cancel(),
            this.$el.empty(),
            this.trigger("rendered")
        },
        isEmpty: function() {
          return this.$el.is(":empty")
        },
        destroy: function() {
          this.$el = null
        }
      }), L);

    function L(t) {
      var g, e;
      (t = t || {}).templates = t.templates || {},
        t.source || a.error("missing source"),
        t.name && !/^[_a-zA-Z0-9-]+$/.test(t.name) && a.error("invalid dataset name: " + t.name),
        this.query = null,
        this.highlight = !!t.highlight,
        this.name = t.name || o.getUniqueId(),
        this.source = t.source,
        this.displayFn = (g = (g = t.display || t.displayKey) || "value", o.isFunction(g) ? g : function(t) {
          return t[g]
        }),
        this.templates = (t = t.templates, e = this.displayFn, {
          empty: t.empty && o.templatify(t.empty),
          header: t.header && o.templatify(t.header),
          footer: t.footer && o.templatify(t.footer),
          suggestion: t.suggestion ||
            function(t) {
              return "<p>" + e(t) + "</p>"
            }
        }),
        this.$el = a(Z.dataset.replace("%CLASS%", this.name))
    }
    var J = (o.mixin(K.prototype, g, {
      _onSuggestionClick: function(t) {
        this.trigger("suggestionClicked", a(t.currentTarget))
      },
      _onSuggestionMouseEnter: function(t) {
        this._removeCursor(),
          this._setCursor(a(t.currentTarget), !0)
      },
      _onSuggestionMouseLeave: function() {
        this._removeCursor()
      },
      _onRendered: function() {
        this.isEmpty = o.every(this.datasets,
            function(t) {
              return t.isEmpty()
            }),
          this.isEmpty ? this._hide() : this.isOpen && this._show(),
          this.trigger("datasetRendered")
      },
      _hide: function() {
        this.$menu.hide()
      },
      _show: function() {
        this.$menu.css("display", "block")
      },
      _getSuggestions: function() {
        return this.$menu.find(".tt-suggestion")
      },
      _getCursor: function() {
        return this.$menu.find(".tt-cursor").first()
      },
      _setCursor: function(t, g) {
        t.first().addClass("tt-cursor"),
          g || this.trigger("cursorMoved")
      },
      _removeCursor: function() {
        this._getCursor().removeClass("tt-cursor")
      },
      _moveCursor: function(t) {
        var g, e;
        this.isOpen && (e = this._getCursor(), g = this._getSuggestions(), this._removeCursor(), -1 !== (t = ((t = g.index(e) + t) + 1) % (g.length + 1) - 1) ? (t < -1 && (t = g.length - 1), this._setCursor(t = g.eq(t)), this._ensureVisible(t)) : this.trigger("cursorRemoved"))
      },
      _ensureVisible: function(t) {
        var g = t.position().top,
          e = g + t.outerHeight(!0),
          n = this.$menu.scrollTop(),
          t = this.$menu.height() + parseInt(this.$menu.css("paddingTop"), 10) + parseInt(this.$menu.css("paddingBottom"), 10);
        g < 0 ? this.$menu.scrollTop(n + g) : t < e && this.$menu.scrollTop(n + (e - t))
      },
      close: function() {
        this.isOpen && (this.isOpen = !1, this._removeCursor(), this._hide(), this.trigger("closed"))
      },
      open: function() {
        this.isOpen || (this.isOpen = !0, this.isEmpty || this._show(), this.trigger("opened"))
      },
      setLanguageDirection: function(t) {
        this.$menu.css("ltr" === t ? U.ltr : U.rtl)
      },
      moveCursorUp: function() {
        this._moveCursor(-1)
      },
      moveCursorDown: function() {
        this._moveCursor(1)
      },
      getDatumForSuggestion: function(t) {
        var g = null;
        return g = t.length ? {
          raw: O.extractDatum(t),
          value: O.extractValue(t),
          datasetName: O.extractDatasetName(t)
        } : g
      },
      getDatumForCursor: function() {
        return this.getDatumForSuggestion(this._getCursor().first())
      },
      getDatumForTopSuggestion: function() {
        return this.getDatumForSuggestion(this._getSuggestions().first())
      },
      update: function(g) {
        o.each(this.datasets,
          function(t) {
            t.update(g)
          })
      },
      empty: function() {
        o.each(this.datasets,
            function(t) {
              t.clear()
            }),
          this.isEmpty = !0
      },
      isVisible: function() {
        return this.isOpen && !this.isEmpty
      },
      destroy: function() {
        this.$menu.off(".tt"),
          this.$menu = null,
          o.each(this.datasets,
            function(t) {
              t.destroy()
            })
      }
    }), K);

    function K(t) {
      var g, e, n, I = this;
      (t = t || {}).menu || a.error("menu is required"),
        this.isOpen = !1,
        this.isEmpty = !0,
        this.datasets = o.map(t.datasets, M),
        g = o.bind(this._onSuggestionClick, this),
        e = o.bind(this._onSuggestionMouseEnter, this),
        n = o.bind(this._onSuggestionMouseLeave, this),
        this.$menu = a(t.menu).on("click.tt", ".tt-suggestion", g).on("mouseenter.tt", ".tt-suggestion", e).on("mouseleave.tt", ".tt-suggestion", n),
        o.each(this.datasets,
          function(t) {
            I.$menu.append(t.getRoot()),
              t.onSync("rendered", I._onRendered, I)
          })
    }

    function M(t) {
      return new O(t)
    }
    var z, j, _, P, q = (z = "ttAttrs", o.mixin($.prototype, {
      _onSuggestionClicked: function(t, g) {
        (g = this.dropdown.getDatumForSuggestion(g)) && this._select(g)
      },
      _onCursorMoved: function() {
        var t = this.dropdown.getDatumForCursor();
        this.input.setInputValue(t.value, !0),
          this.eventBus.trigger("cursorchanged", t.raw, t.datasetName)
      },
      _onCursorRemoved: function() {
        this.input.resetInputValue(),
          this._updateHint()
      },
      _onDatasetRendered: function() {
        this._updateHint()
      },
      _onOpened: function() {
        this._updateHint(),
          this.eventBus.trigger("opened")
      },
      _onClosed: function() {
        this.input.clearHint(),
          this.eventBus.trigger("closed")
      },
      _onFocused: function() {
        this.isActivated = !0,
          this.dropdown.open()
      },
      _onBlurred: function() {
        this.isActivated = !1,
          this.dropdown.empty(),
          this.dropdown.close()
      },
      _onEnterKeyed: function(t, g) {
        var e = this.dropdown.getDatumForCursor(),
          n = this.dropdown.getDatumForTopSuggestion();
        e ? (this._select(e), g.preventDefault()) : this.autoselect && n && (this._select(n), g.preventDefault())
      },
      _onTabKeyed: function(t, g) {
        var e;
        (e = this.dropdown.getDatumForCursor()) ? (this._select(e), g.preventDefault()) : this._autocomplete(!0)
      },
      _onEscKeyed: function() {
        this.dropdown.close(),
          this.input.resetInputValue()
      },
      _onUpKeyed: function() {
        var t = this.input.getQuery();
        this.dropdown.isEmpty && t.length >= this.minLength ? this.dropdown.update(t) : this.dropdown.moveCursorUp(),
          this.dropdown.open()
      },
      _onDownKeyed: function() {
        var t = this.input.getQuery();
        this.dropdown.isEmpty && t.length >= this.minLength ? this.dropdown.update(t) : this.dropdown.moveCursorDown(),
          this.dropdown.open()
      },
      _onLeftKeyed: function() {
        "rtl" === this.dir && this._autocomplete()
      },
      _onRightKeyed: function() {
        "ltr" === this.dir && this._autocomplete()
      },
      _onQueryChanged: function(t, g) {
        this.input.clearHintIfInvalid(),
          g.length >= this.minLength ? this.dropdown.update(g) : this.dropdown.empty(),
          this.dropdown.open(),
          this._setLanguageDirection()
      },
      _onWhitespaceChanged: function() {
        this._updateHint(),
          this.dropdown.open()
      },
      _setLanguageDirection: function() {
        var t;
        this.dir !== (t = this.input.getLanguageDirection()) && (this.dir = t, this.$node.css("direction", t), this.dropdown.setLanguageDirection(t))
      },
      _updateHint: function() {
        var t, g, e = this.dropdown.getDatumForTopSuggestion();
        e && this.dropdown.isVisible() && !this.input.hasOverflow() ? (t = this.input.getInputValue(), g = T.normalizeQuery(t), g = o.escapeRegExChars(g), (e = new RegExp("^(?:" + g + ")(.+$)", "i").exec(e.value)) ? this.input.setHint(t + e[1]) : this.input.clearHint()) : this.input.clearHint()
      },
      _autocomplete: function(t) {
        var g = this.input.getHint(),
          e = this.input.getQuery(),
          t = t || this.input.isCursorAtEnd();
        g && e !== g && t && ((t = this.dropdown.getDatumForTopSuggestion()) && this.input.setInputValue(t.value), this.eventBus.trigger("autocompleted", t.raw, t.datasetName))
      },
      _select: function(t) {
        this.input.setQuery(t.value),
          this.input.setInputValue(t.value, !0),
          this._setLanguageDirection(),
          this.eventBus.trigger("selected", t.raw, t.datasetName),
          this.dropdown.close(),
          o.defer(o.bind(this.dropdown.empty, this.dropdown))
      },
      open: function() {
        this.dropdown.open()
      },
      close: function() {
        this.dropdown.close()
      },
      setVal: function(t) {
        this.isActivated ? this.input.setInputValue(t) : (this.input.setQuery(t), this.input.setInputValue(t, !0)),
          this._setLanguageDirection()
      },
      getVal: function() {
        return this.input.getQuery()
      },
      destroy: function() {
        var t, e;
        this.input.destroy(),
          this.dropdown.destroy(),
          t = this.$node,
          e = t.find(".tt-input"),
          o.each(e.data(z),
            function(t, g) {
              o.isUndefined(t) ? e.removeAttr(g) : e.attr(g, t)
            }),
          e.detach().removeData(z).removeClass("tt-input").insertAfter(t),
          t.remove(),
          this.$node = null
      }
    }), $);

    function $(t) {
      var n, I, g;
      (t = t || {}).input || a.error("missing input"),
        this.isActivated = !1,
        this.autoselect = !!t.autoselect,
        this.minLength = o.isNumber(t.minLength) ? t.minLength : 1,
        this.$node = function(t, g) {
          var e, n, I;
          e = a(t),
            n = a(Z.wrapper).css(U.wrapper),
            I = a(Z.dropdown).css(U.dropdown),
            (t = e.clone().css(U.hint).css(function(t) {
              return {
                backgroundAttachment: t.css("background-attachment"),
                backgroundClip: t.css("background-clip"),
                backgroundColor: t.css("background-color"),
                backgroundImage: t.css("background-image"),
                backgroundOrigin: t.css("background-origin"),
                backgroundPosition: t.css("background-position"),
                backgroundRepeat: t.css("background-repeat"),
                backgroundSize: t.css("background-size")
              }
            }(e))).val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled", !0).attr({
              autocomplete: "off",
              spellcheck: "false"
            }),
            e.data(z, {
              dir: e.attr("dir"),
              autocomplete: e.attr("autocomplete"),
              spellcheck: e.attr("spellcheck"),
              style: e.attr("style")
            }),
            e.addClass("tt-input").attr({
              autocomplete: "off",
              spellcheck: !1
            }).css(g ? U.input : U.inputWithNoHint);
          try {
            e.attr("dir") || e.attr("dir", "auto")
          } catch (t) {}
          return e.wrap(n).parent().prepend(g ? t : null).append(I)
        }(t.input, t.withHint),
        n = this.$node.find(".tt-dropdown-menu"),
        I = this.$node.find(".tt-input"),
        g = this.$node.find(".tt-hint"),
        I.on("blur.tt",
          function(t) {
            var g = document.activeElement,
              e = n.is(g),
              g = 0 < n.has(g).length;
            o.isMsie() && (e || g) && (t.preventDefault(), t.stopImmediatePropagation(), o.defer(function() {
              I.focus()
            }))
          }),
        n.on("mousedown.tt",
          function(t) {
            t.preventDefault()
          }),
        this.eventBus = t.eventBus || new v({
          el: I
        }),
        this.dropdown = new J({
          menu: n,
          datasets: t.datasets
        }).onSync("suggestionClicked", this._onSuggestionClicked, this).onSync("cursorMoved", this._onCursorMoved, this).onSync("cursorRemoved", this._onCursorRemoved, this).onSync("opened", this._onOpened, this).onSync("closed", this._onClosed, this).onAsync("datasetRendered", this._onDatasetRendered, this),
        this.input = new T({
          input: I,
          hint: g
        }).onSync("focused", this._onFocused, this).onSync("blurred", this._onBlurred, this).onSync("enterKeyed", this._onEnterKeyed, this).onSync("tabKeyed", this._onTabKeyed, this).onSync("escKeyed", this._onEscKeyed, this).onSync("upKeyed", this._onUpKeyed, this).onSync("downKeyed", this._onDownKeyed, this).onSync("leftKeyed", this._onLeftKeyed, this).onSync("rightKeyed", this._onRightKeyed, this).onSync("queryChanged", this._onQueryChanged, this).onSync("whitespaceChanged", this._onWhitespaceChanged, this),
        this._setLanguageDirection()
    }
    j = a.fn.typeahead,
      _ = "ttTypeahead",
      P = {
        initialize: function(e, n) {
          return n = o.isArray(n) ? n : [].slice.call(arguments, 1),
            e = e || {},
            this.each(function() {
              var t, g = a(this);
              o.each(n,
                  function(t) {
                    t.highlight = !!e.highlight
                  }),
                t = new q({
                  input: g,
                  eventBus: new v({
                    el: g
                  }),
                  withHint: !!o.isUndefined(e.hint) || !!e.hint,
                  minLength: e.minLength,
                  autoselect: e.autoselect,
                  datasets: n
                }),
                g.data(_, t)
            })
        },
        open: function() {
          return this.each(function() {
            var t = a(this);
            (t = t.data(_)) && t.open()
          })
        },
        close: function() {
          return this.each(function() {
            var t = a(this);
            (t = t.data(_)) && t.close()
          })
        },
        val: function(g) {
          return arguments.length ? this.each(function() {
            var t = a(this);
            (t = t.data(_)) && t.setVal(g)
          }) : function(t) {
            var g;
            (t = t.data(_)) && (g = t.getVal());
            return g
          }(this.first())
        },
        destroy: function() {
          return this.each(function() {
            var t, g = a(this);
            (t = g.data(_)) && (t.destroy(), g.removeData(_))
          })
        }
      },
      a.fn.typeahead = function(t) {
        return P[t] ? P[t].apply(this, [].slice.call(arguments, 1)) : P.initialize.apply(this, arguments)
      },
      a.fn.typeahead.noConflict = function() {
        return a.fn.typeahead = j,
          this
      }
  }(window.jQuery_custom);
var local_json = [{
    city: "New York City",
    state: "New York",
    country: "United States",
    lat: 40.71427,
    lng: -74.00597
  },
  {
    city: "Los Angeles",
    state: "California",
    country: "United States",
    lat: 34.05223,
    lng: -118.24368
  },
  {
    city: "Chicago",
    state: "Illinois",
    country: "United States",
    lat: 41.85003,
    lng: -87.65005
  },
  {
    city: "Brooklyn",
    state: "New York",
    country: "United States",
    lat: 40.6501,
    lng: -73.94958
  },
  {
    city: "Houston",
    state: "Texas",
    country: "United States",
    lat: 29.76328,
    lng: -95.36327
  },
  {
    city: "Toronto",
    state: "Ontario",
    country: "Canada",
    lat: 43.70011,
    lng: -79.4163
  },
  {
    city: "Boston",
    state: "Massachusetts",
    country: "United States",
    lat: 42.35843,
    lng: -71.05977
  },
  {
    city: "San Francisco",
    state: "California",
    country: "United States",
    lat: 37.77493,
    lng: -122.41942
  },
  {
    city: "San Diego",
    state: "California",
    country: "United States",
    lat: 32.71533,
    lng: -117.15726
  },
  {
    city: "Sydney",
    state: "New South Wales",
    country: "Australia",
    lat: -33.86785,
    lng: 151.20732
  },
  {
    city: "Philadelphia",
    state: "Pennsylvania",
    country: "United States",
    lat: 39.95234,
    lng: -75.16379
  },
  {
    city: "Melbourne",
    state: "Victoria",
    country: "Australia",
    lat: -37.814,
    lng: 144.96332
  },
  {
    city: "Dallas",
    state: "Texas",
    country: "United States",
    lat: 32.78306,
    lng: -96.80667
  },
  {
    city: "Detroit",
    state: "Michigan",
    country: "United States",
    lat: 42.33143,
    lng: -83.04575
  },
  {
    city: "London",
    state: "England",
    country: "United Kingdom",
    lat: 51.50853,
    lng: -.12574
  },
  {
    city: "Seattle",
    state: "Washington",
    country: "United States",
    lat: 47.60621,
    lng: -122.33207
  },
  {
    city: "Atlanta",
    state: "Georgia",
    country: "United States",
    lat: 33.749,
    lng: -84.38798
  },
  {
    city: "Phoenix",
    state: "Arizona",
    country: "United States",
    lat: 33.44838,
    lng: -112.07404
  },
  {
    city: "Miami",
    state: "Florida",
    country: "United States",
    lat: 25.77427,
    lng: -80.19366
  },
  {
    city: "Baltimore",
    state: "Maryland",
    country: "United States",
    lat: 39.29038,
    lng: -76.61219
  },
  {
    city: "Portland",
    state: "Oregon",
    country: "United States",
    lat: 45.52345,
    lng: -122.67621
  },
  {
    city: "Montreal",
    state: "Quebec",
    country: "Canada",
    lat: 45.50884,
    lng: -73.58781
  },
  {
    city: "Sacramento",
    state: "California",
    country: "United States",
    lat: 38.58157,
    lng: -121.4944
  },
  {
    city: "San Jose",
    state: "California",
    country: "United States",
    lat: 37.33939,
    lng: -121.89496
  },
  {
    city: "The Bronx",
    state: "New York",
    country: "United States",
    lat: 40.84985,
    lng: -73.86641
  },
  {
    city: "Denver",
    state: "Colorado",
    country: "United States",
    lat: 39.73915,
    lng: -104.9847
  },
  {
    city: "Singapore",
    state: "",
    country: "Singapore",
    lat: 1.28967,
    lng: 103.85007
  },
  {
    city: "Minneapolis",
    state: "Minnesota",
    country: "United States",
    lat: 44.97997,
    lng: -93.26384
  },
  {
    city: "City of London",
    state: "England",
    country: "United Kingdom",
    lat: 51.51279,
    lng: -.09184
  },
  {
    city: "Cleveland",
    state: "Ohio",
    country: "United States",
    lat: 41.4995,
    lng: -81.69541
  },
  {
    city: "Honolulu",
    state: "Hawaii",
    country: "United States",
    lat: 21.30694,
    lng: -157.85833
  },
  {
    city: "San Antonio",
    state: "Texas",
    country: "United States",
    lat: 29.42412,
    lng: -98.49363
  },
  {
    city: "Pittsburgh",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.44062,
    lng: -79.99589
  },
  {
    city: "St. Louis",
    state: "Missouri",
    country: "United States",
    lat: 38.62727,
    lng: -90.19789
  },
  {
    city: "Borough of Queens",
    state: "New York",
    country: "United States",
    lat: 40.68149,
    lng: -73.83652
  },
  {
    city: "Salt Lake City",
    state: "Utah",
    country: "United States",
    lat: 40.76078,
    lng: -111.89105
  },
  {
    city: "Cincinnati",
    state: "Ohio",
    country: "United States",
    lat: 39.162,
    lng: -84.45689
  },
  {
    city: "Mexico City",
    state: "The Federal District",
    country: "Mexico",
    lat: 19.42847,
    lng: -99.12766
  },
  {
    city: "Vancouver",
    state: "British Columbia",
    country: "Canada",
    lat: 49.24966,
    lng: -123.11934
  },
  {
    city: "Milwaukee",
    state: "Wisconsin",
    country: "United States",
    lat: 43.0389,
    lng: -87.90647
  },
  {
    city: "Indianapolis",
    state: "Indiana",
    country: "United States",
    lat: 39.76838,
    lng: -86.15804
  },
  {
    city: "Calgary",
    state: "Alberta",
    country: "Canada",
    lat: 51.05011,
    lng: -114.08529
  },
  {
    city: "Brisbane",
    state: "Queensland",
    country: "Australia",
    lat: -27.46794,
    lng: 153.02809
  },
  {
    city: "Manila",
    state: "Metro Manila",
    country: "Philippines",
    lat: 14.6042,
    lng: 120.9822
  },
  {
    city: "Oklahoma City",
    state: "Oklahoma",
    country: "United States",
    lat: 35.46756,
    lng: -97.51643
  },
  {
    city: "Edmonton",
    state: "Alberta",
    country: "Canada",
    lat: 53.55014,
    lng: -113.46871
  },
  {
    city: "Oakland",
    state: "California",
    country: "United States",
    lat: 37.80437,
    lng: -122.2708
  },
  {
    city: "Columbus",
    state: "Ohio",
    country: "United States",
    lat: 39.96118,
    lng: -82.99879
  },
  {
    city: "Buffalo",
    state: "New York",
    country: "United States",
    lat: 42.88645,
    lng: -78.87837
  },
  {
    city: "Memphis",
    state: "Tennessee",
    country: "United States",
    lat: 35.14953,
    lng: -90.04898
  },
  {
    city: "Austin",
    state: "Texas",
    country: "United States",
    lat: 30.26715,
    lng: -97.74306
  },
  {
    city: "New Orleans",
    state: "Louisiana",
    country: "United States",
    lat: 29.95465,
    lng: -90.07507
  },
  {
    city: "Long Beach",
    state: "California",
    country: "United States",
    lat: 33.76696,
    lng: -118.18923
  },
  {
    city: "Las Vegas",
    state: "Nevada",
    country: "United States",
    lat: 36.17497,
    lng: -115.13722
  },
  {
    city: "Providence",
    state: "Rhode Island",
    country: "United States",
    lat: 41.82399,
    lng: -71.41283
  },
  {
    city: "Rochester",
    state: "New York",
    country: "United States",
    lat: 43.15478,
    lng: -77.61556
  },
  {
    city: "Fort Worth",
    state: "Texas",
    country: "United States",
    lat: 32.72541,
    lng: -97.32085
  },
  {
    city: "Jacksonville",
    state: "Florida",
    country: "United States",
    lat: 30.33218,
    lng: -81.65565
  },
  {
    city: "Saint Paul",
    state: "Minnesota",
    country: "United States",
    lat: 44.94441,
    lng: -93.09327
  },
  {
    city: "Santa Monica",
    state: "California",
    country: "United States",
    lat: 34.01945,
    lng: -118.49119
  },
  {
    city: "Torrance",
    state: "California",
    country: "United States",
    lat: 33.83585,
    lng: -118.34063
  },
  {
    city: "Kansas City",
    state: "Missouri",
    country: "United States",
    lat: 39.09973,
    lng: -94.57857
  },
  {
    city: "Manhattan",
    state: "New York",
    country: "United States",
    lat: 40.78343,
    lng: -73.96625
  },
  {
    city: "Istanbul",
    state: "Istanbul",
    country: "Turkey",
    lat: 41.01384,
    lng: 28.94966
  },
  {
    city: "Seoul",
    state: "Seoul",
    country: "South Korea",
    lat: 37.566,
    lng: 126.9784
  },
  {
    city: "Perth",
    state: "Western Australia",
    country: "Australia",
    lat: -31.95224,
    lng: 115.8614
  },
  {
    city: "Tucson",
    state: "Arizona",
    country: "United States",
    lat: 32.22174,
    lng: -110.92648
  },
  {
    city: "Louisville",
    state: "Kentucky",
    country: "United States",
    lat: 38.25424,
    lng: -85.75941
  },
  {
    city: "Nashville",
    state: "Tennessee",
    country: "United States",
    lat: 36.16589,
    lng: -86.78444
  },
  {
    city: "Hong Kong",
    state: "",
    country: "Hong Kong",
    lat: 22.28552,
    lng: 114.15769
  },
  {
    city: "Berkeley",
    state: "California",
    country: "United States",
    lat: 37.87159,
    lng: -122.27275
  },
  {
    city: "Silver Spring",
    state: "Maryland",
    country: "United States",
    lat: 38.99067,
    lng: -77.02609
  },
  {
    city: "Paris",
    state: "le-de-France",
    country: "France",
    lat: 48.85341,
    lng: 2.3488
  },
  {
    city: "El Paso",
    state: "Texas",
    country: "United States",
    lat: 31.75872,
    lng: -106.48693
  },
  {
    city: "Omaha",
    state: "Nebraska",
    country: "United States",
    lat: 41.25861,
    lng: -95.93779
  },
  {
    city: "Orange",
    state: "California",
    country: "United States",
    lat: 33.78779,
    lng: -117.85311
  },
  {
    city: "Sao Paulo",
    state: "So Paulo",
    country: "Brazil",
    lat: -23.5475,
    lng: -46.63611
  },
  {
    city: "Tulsa",
    state: "Oklahoma",
    country: "United States",
    lat: 36.15398,
    lng: -95.99278
  },
  {
    city: "Athens",
    state: "Attica",
    country: "Greece",
    lat: 37.97945,
    lng: 23.71622
  },
  {
    city: "Dublin",
    state: "Leinster",
    country: "Ireland",
    lat: 53.33306,
    lng: -6.24889
  },
  {
    city: "Richmond",
    state: "Virginia",
    country: "United States",
    lat: 37.55376,
    lng: -77.46026
  },
  {
    city: "Hartford",
    state: "Connecticut",
    country: "United States",
    lat: 41.76371,
    lng: -72.68509
  },
  {
    city: "Winnipeg",
    state: "Manitoba",
    country: "Canada",
    lat: 49.8844,
    lng: -97.14704
  },
  {
    city: "Syracuse",
    state: "New York",
    country: "United States",
    lat: 43.04812,
    lng: -76.14742
  },
  {
    city: "Walnut Creek",
    state: "California",
    country: "United States",
    lat: 37.90631,
    lng: -122.06496
  },
  {
    city: "Fairfax",
    state: "Virginia",
    country: "United States",
    lat: 38.84622,
    lng: -77.30637
  },
  {
    city: "Adelaide",
    state: "South Australia",
    country: "Australia",
    lat: -34.92866,
    lng: 138.59863
  },
  {
    city: "Tacoma",
    state: "Washington",
    country: "United States",
    lat: 47.25288,
    lng: -122.44429
  },
  {
    city: "Staten Island",
    state: "New York",
    country: "United States",
    lat: 40.56233,
    lng: -74.13986
  },
  {
    city: "Ottawa",
    state: "Ontario",
    country: "Canada",
    lat: 45.41117,
    lng: -75.69812
  },
  {
    city: "Auckland",
    state: "Auckland",
    country: "New Zealand",
    lat: -36.86667,
    lng: 174.76667
  },
  {
    city: "Birmingham",
    state: "Alabama",
    country: "United States",
    lat: 33.52066,
    lng: -86.80249
  },
  {
    city: "Tampa",
    state: "Florida",
    country: "United States",
    lat: 27.94752,
    lng: -82.45843
  },
  {
    city: "New Haven",
    state: "Connecticut",
    country: "United States",
    lat: 41.30815,
    lng: -72.92816
  },
  {
    city: "Pasadena",
    state: "California",
    country: "United States",
    lat: 34.14778,
    lng: -118.14452
  },
  {
    city: "Evanston",
    state: "Illinois",
    country: "United States",
    lat: 42.04114,
    lng: -87.69006
  },
  {
    city: "Albuquerque",
    state: "New Mexico",
    country: "United States",
    lat: 35.08449,
    lng: -106.65114
  },
  {
    city: "Orlando",
    state: "Florida",
    country: "United States",
    lat: 28.53834,
    lng: -81.37924
  },
  {
    city: "Mesa",
    state: "Arizona",
    country: "United States",
    lat: 33.42227,
    lng: -111.82264
  },
  {
    city: "Worcester",
    state: "Massachusetts",
    country: "United States",
    lat: 42.26259,
    lng: -71.80229
  },
  {
    city: "Rio de Janeiro",
    state: "Rio de Janeiro",
    country: "Brazil",
    lat: -22.90278,
    lng: -43.2075
  },
  {
    city: "Livingston",
    state: "New Jersey",
    country: "United States",
    lat: 40.79593,
    lng: -74.31487
  },
  {
    city: "Fresno",
    state: "California",
    country: "United States",
    lat: 36.74773,
    lng: -119.77237
  },
  {
    city: "Bucharest",
    state: "Bucureti",
    country: "Romania",
    lat: 44.43225,
    lng: 26.10626
  },
  {
    city: "Toledo",
    state: "Ohio",
    country: "United States",
    lat: 41.66394,
    lng: -83.55521
  },
  {
    city: "Bogota",
    state: "Bogota D.C.",
    country: "Colombia",
    lat: 4.60971,
    lng: -74.08175
  },
  {
    city: "Grand Rapids",
    state: "Michigan",
    country: "United States",
    lat: 42.96336,
    lng: -85.66809
  },
  {
    city: "Ho Chi Minh City",
    state: "Ho Chi Minh City",
    country: "Vietnam",
    lat: 10.82302,
    lng: 106.62965
  },
  {
    city: "Charlotte",
    state: "North Carolina",
    country: "United States",
    lat: 35.22709,
    lng: -80.84313
  },
  {
    city: "Mumbai",
    state: "Maharashtra",
    country: "India",
    lat: 19.07283,
    lng: 72.88261
  },
  {
    city: "Belgrade",
    state: "Central Serbia",
    country: "Serbia",
    lat: 44.80401,
    lng: 20.46513
  },
  {
    city: "Santa Rosa",
    state: "California",
    country: "United States",
    lat: 38.44047,
    lng: -122.71443
  },
  {
    city: "Buenos Aires",
    state: "Buenos Aires F.D.",
    country: "Argentina",
    lat: -34.61315,
    lng: -58.37723
  },
  {
    city: "Colorado Springs",
    state: "Colorado",
    country: "United States",
    lat: 38.83388,
    lng: -104.82136
  },
  {
    city: "Dayton",
    state: "Ohio",
    country: "United States",
    lat: 39.75895,
    lng: -84.19161
  },
  {
    city: "Santa Clara",
    state: "California",
    country: "United States",
    lat: 37.35411,
    lng: -121.95524
  },
  {
    city: "Anaheim",
    state: "California",
    country: "United States",
    lat: 33.83529,
    lng: -117.9145
  },
  {
    city: "Springfield",
    state: "Massachusetts",
    country: "United States",
    lat: 42.10148,
    lng: -72.58981
  },
  {
    city: "Alexandria",
    state: "Virginia",
    country: "United States",
    lat: 38.80484,
    lng: -77.04692
  },
  {
    city: "Glendale",
    state: "California",
    country: "United States",
    lat: 34.14251,
    lng: -118.25508
  },
  {
    city: "Baton Rouge",
    state: "Louisiana",
    country: "United States",
    lat: 30.45075,
    lng: -91.15455
  },
  {
    city: "Riverside",
    state: "California",
    country: "United States",
    lat: 33.95335,
    lng: -117.39616
  },
  {
    city: "Moscow",
    state: "Moscow",
    country: "Russia",
    lat: 55.75222,
    lng: 37.61556
  },
  {
    city: "Newport Beach",
    state: "California",
    country: "United States",
    lat: 33.61891,
    lng: -117.92895
  },
  {
    city: "Newark",
    state: "New Jersey",
    country: "United States",
    lat: 40.73566,
    lng: -74.17237
  },
  {
    city: "Hayward",
    state: "California",
    country: "United States",
    lat: 37.66882,
    lng: -122.0808
  },
  {
    city: "Jakarta",
    state: "Jakarta Raya",
    country: "Indonesia",
    lat: -6.21462,
    lng: 106.84513
  },
  {
    city: "Redwood City",
    state: "California",
    country: "United States",
    lat: 37.48522,
    lng: -122.23635
  },
  {
    city: "Wichita",
    state: "Kansas",
    country: "United States",
    lat: 37.69224,
    lng: -97.33754
  },
  {
    city: "Stockholm",
    state: "Stockholm",
    country: "Sweden",
    lat: 59.33258,
    lng: 18.0649
  },
  {
    city: "Lima",
    state: "Lima",
    country: "Peru",
    lat: -12.04318,
    lng: -77.02824
  },
  {
    city: "Mountain View",
    state: "California",
    country: "United States",
    lat: 37.38605,
    lng: -122.08385
  },
  {
    city: "San Juan",
    state: "San Juan",
    country: "Puerto Rico",
    lat: 18.46633,
    lng: -66.10572
  },
  {
    city: "New Brunswick",
    state: "New Jersey",
    country: "United States",
    lat: 40.48622,
    lng: -74.45182
  },
  {
    city: "Hamilton",
    state: "Ontario",
    country: "Canada",
    lat: 43.25011,
    lng: -79.84963
  },
  {
    city: "Havana",
    state: "Provincia de La Habana",
    country: "Cuba",
    lat: 23.13302,
    lng: -82.38304
  },
  {
    city: "Johannesburg",
    state: "Gauteng",
    country: "South Africa",
    lat: -26.20227,
    lng: 28.04363
  },
  {
    city: "Reno",
    state: "Nevada",
    country: "United States",
    lat: 39.52963,
    lng: -119.8138
  },
  {
    city: "Flint",
    state: "Michigan",
    country: "United States",
    lat: 43.01253,
    lng: -83.68746
  },
  {
    city: "Raleigh",
    state: "North Carolina",
    country: "United States",
    lat: 35.7721,
    lng: -78.63861
  },
  {
    city: "Riyadh",
    state: "Riyadh Province",
    country: "Saudi Arabia",
    lat: 24.68773,
    lng: 46.72185
  },
  {
    city: "Des Moines",
    state: "Iowa",
    country: "United States",
    lat: 41.60054,
    lng: -93.60911
  },
  {
    city: "Lansing",
    state: "Michigan",
    country: "United States",
    lat: 42.73254,
    lng: -84.55553
  },
  {
    city: "Manchester",
    state: "England",
    country: "United Kingdom",
    lat: 53.48095,
    lng: -2.23743
  },
  {
    city: "Morristown",
    state: "New Jersey",
    country: "United States",
    lat: 40.79677,
    lng: -74.48154
  },
  {
    city: "Royal Oak",
    state: "Michigan",
    country: "United States",
    lat: 42.48948,
    lng: -83.14465
  },
  {
    city: "Bakersfield",
    state: "California",
    country: "United States",
    lat: 35.37329,
    lng: -119.01871
  },
  {
    city: "Jersey City",
    state: "New Jersey",
    country: "United States",
    lat: 40.72816,
    lng: -74.07764
  },
  {
    city: "Santa Ana",
    state: "California",
    country: "United States",
    lat: 33.74557,
    lng: -117.86783
  },
  {
    city: "Caracas",
    state: "Distrito Federal",
    country: "Venezuela",
    lat: 10.48801,
    lng: -66.87919
  },
  {
    city: "Little Rock",
    state: "Arkansas",
    country: "United States",
    lat: 34.74648,
    lng: -92.28959
  },
  {
    city: "Tehran",
    state: "Tehrn",
    country: "Iran",
    lat: 35.69439,
    lng: 51.42151
  },
  {
    city: "West Palm Beach",
    state: "Florida",
    country: "United States",
    lat: 26.71534,
    lng: -80.05337
  },
  {
    city: "Ann Arbor",
    state: "Michigan",
    country: "United States",
    lat: 42.27756,
    lng: -83.74088
  },
  {
    city: "West Covina",
    state: "California",
    country: "United States",
    lat: 34.06862,
    lng: -117.93895
  },
  {
    city: "Fort Lauderdale",
    state: "Florida",
    country: "United States",
    lat: 26.12231,
    lng: -80.14338
  },
  {
    city: "Mineola",
    state: "New York",
    country: "United States",
    lat: 40.74927,
    lng: -73.64068
  },
  {
    city: "Charleston",
    state: "South Carolina",
    country: "United States",
    lat: 32.77657,
    lng: -79.93092
  },
  {
    city: "Manhasset",
    state: "New York",
    country: "United States",
    lat: 40.79788,
    lng: -73.69957
  },
  {
    city: "Lisbon",
    state: "Lisbon",
    country: "Portugal",
    lat: 38.71667,
    lng: -9.13333
  },
  {
    city: "Santiago",
    state: "Santiago Metropolitan",
    country: "Chile",
    lat: -33.45694,
    lng: -70.64827
  },
  {
    city: "Pontiac",
    state: "Michigan",
    country: "United States",
    lat: 42.63892,
    lng: -83.29105
  },
  {
    city: "Anchorage",
    state: "Alaska",
    country: "United States",
    lat: 61.21806,
    lng: -149.90028
  },
  {
    city: "Spokane",
    state: "Washington",
    country: "United States",
    lat: 47.65966,
    lng: -117.42908
  },
  {
    city: "Bellflower",
    state: "California",
    country: "United States",
    lat: 33.88168,
    lng: -118.11701
  },
  {
    city: "Norfolk",
    state: "Virginia",
    country: "United States",
    lat: 36.84681,
    lng: -76.28522
  },
  {
    city: "Madison",
    state: "Wisconsin",
    country: "United States",
    lat: 43.07305,
    lng: -89.40123
  },
  {
    city: "Berlin",
    state: "Berlin",
    country: "Germany",
    lat: 52.52437,
    lng: 13.41053
  },
  {
    city: "Sofia",
    state: "Sofia-Capital",
    country: "Bulgaria",
    lat: 42.69751,
    lng: 23.32415
  },
  {
    city: "Palo Alto",
    state: "California",
    country: "United States",
    lat: 37.44188,
    lng: -122.14302
  },
  {
    city: "Fontana",
    state: "California",
    country: "United States",
    lat: 34.09223,
    lng: -117.43505
  },
  {
    city: "Bridgeport",
    state: "Connecticut",
    country: "United States",
    lat: 41.16704,
    lng: -73.20483
  },
  {
    city: "Birmingham",
    state: "England",
    country: "United Kingdom",
    lat: 52.48142,
    lng: -1.89983
  },
  {
    city: "Kuala Lumpur",
    state: "Kuala Lumpur",
    country: "Malaysia",
    lat: 3.1412,
    lng: 101.68653
  },
  {
    city: "Fountain Valley",
    state: "California",
    country: "United States",
    lat: 33.70918,
    lng: -117.95367
  },
  {
    city: "Camden",
    state: "New Jersey",
    country: "United States",
    lat: 39.92595,
    lng: -75.11962
  },
  {
    city: "Arlington",
    state: "Virginia",
    country: "United States",
    lat: 38.88101,
    lng: -77.10428
  },
  {
    city: "Akron",
    state: "Ohio",
    country: "United States",
    lat: 41.08144,
    lng: -81.51901
  },
  {
    city: "Albany",
    state: "New York",
    country: "United States",
    lat: 42.65258,
    lng: -73.75623
  },
  {
    city: "Kuwait City",
    state: "Al Asimah",
    country: "Kuwait",
    lat: 29.36972,
    lng: 47.97833
  },
  {
    city: "Trenton",
    state: "New Jersey",
    country: "United States",
    lat: 40.21705,
    lng: -74.74294
  },
  {
    city: "Delhi",
    state: "NCT",
    country: "India",
    lat: 28.65381,
    lng: 77.22897
  },
  {
    city: "Kolkata",
    state: "Bengal",
    country: "India",
    lat: 22.56263,
    lng: 88.36304
  },
  {
    city: "Barcelona",
    state: "Catalonia",
    country: "Spain",
    lat: 41.38879,
    lng: 2.15899
  },
  {
    city: "Bethesda",
    state: "Maryland",
    country: "United States",
    lat: 38.98067,
    lng: -77.10026
  },
  {
    city: "Santo Domingo",
    state: "Distrito Nacional",
    country: "Dominican Republic",
    lat: 18.50012,
    lng: -69.98857
  },
  {
    city: "Boise",
    state: "Idaho",
    country: "United States",
    lat: 43.6135,
    lng: -116.20345
  },
  {
    city: "Southfield",
    state: "Michigan",
    country: "United States",
    lat: 42.47337,
    lng: -83.22187
  },
  {
    city: "Whittier",
    state: "California",
    country: "United States",
    lat: 33.97918,
    lng: -118.03284
  },
  {
    city: "Oslo",
    state: "Oslo",
    country: "Norway",
    lat: 59.91273,
    lng: 10.74609
  },
  {
    city: "Portsmouth",
    state: "Virginia",
    country: "United States",
    lat: 36.83543,
    lng: -76.29827
  },
  {
    city: "Zagreb",
    state: "Grad Zagreb",
    country: "Croatia",
    lat: 45.81444,
    lng: 15.97798
  },
  {
    city: "Pensacola",
    state: "Florida",
    country: "United States",
    lat: 30.42131,
    lng: -87.21691
  },
  {
    city: "Columbia",
    state: "South Carolina",
    country: "United States",
    lat: 34.00071,
    lng: -81.03481
  },
  {
    city: "New Delhi",
    state: "NCT",
    country: "India",
    lat: 28.63576,
    lng: 77.22445
  },
  {
    city: "Knoxville",
    state: "Tennessee",
    country: "United States",
    lat: 35.96064,
    lng: -83.92074
  },
  {
    city: "Bangkok",
    state: "Bangkok",
    country: "Thailand",
    lat: 13.75398,
    lng: 100.50144
  },
  {
    city: "Burlington",
    state: "Vermont",
    country: "United States",
    lat: 44.47588,
    lng: -73.21207
  },
  {
    city: "Everett",
    state: "Washington",
    country: "United States",
    lat: 47.97898,
    lng: -122.20208
  },
  {
    city: "Madrid",
    state: "Madrid",
    country: "Spain",
    lat: 40.4165,
    lng: -3.70256
  },
  {
    city: "Mississauga",
    state: "Ontario",
    country: "Canada",
    lat: 43.5789,
    lng: -79.6583
  },
  {
    city: "White Plains",
    state: "New York",
    country: "United States",
    lat: 41.03399,
    lng: -73.76291
  },
  {
    city: "Paterson",
    state: "New Jersey",
    country: "United States",
    lat: 40.91677,
    lng: -74.17181
  },
  {
    city: "Newton",
    state: "Massachusetts",
    country: "United States",
    lat: 42.33704,
    lng: -71.20922
  },
  {
    city: "Shreveport",
    state: "Louisiana",
    country: "United States",
    lat: 32.52515,
    lng: -93.75018
  },
  {
    city: "Modesto",
    state: "California",
    country: "United States",
    lat: 37.6391,
    lng: -120.99688
  },
  {
    city: "Stockton",
    state: "California",
    country: "United States",
    lat: 37.9577,
    lng: -121.29078
  },
  {
    city: "Amsterdam",
    state: "North Holland",
    country: "Netherlands",
    lat: 52.37403,
    lng: 4.88969
  },
  {
    city: "Chattanooga",
    state: "Tennessee",
    country: "United States",
    lat: 35.04563,
    lng: -85.30968
  },
  {
    city: "Vallejo",
    state: "California",
    country: "United States",
    lat: 38.10409,
    lng: -122.25664
  },
  {
    city: "Windsor",
    state: "Ontario",
    country: "Canada",
    lat: 42.30008,
    lng: -83.01654
  },
  {
    city: "Greensboro",
    state: "North Carolina",
    country: "United States",
    lat: 36.07264,
    lng: -79.79198
  },
  {
    city: "Nairobi",
    state: "Nairobi Area",
    country: "Kenya",
    lat: -1.28333,
    lng: 36.81667
  },
  {
    city: "Chennai",
    state: "Tamil Nadu",
    country: "India",
    lat: 13.08784,
    lng: 80.27847
  },
  {
    city: "Fort Wayne",
    state: "Indiana",
    country: "United States",
    lat: 41.1306,
    lng: -85.12886
  },
  {
    city: "Bellevue",
    state: "Washington",
    country: "United States",
    lat: 47.61038,
    lng: -122.20068
  },
  {
    city: "Ogden",
    state: "Utah",
    country: "United States",
    lat: 41.223,
    lng: -111.97383
  },
  {
    city: "Santa Barbara",
    state: "California",
    country: "United States",
    lat: 34.42083,
    lng: -119.69819
  },
  {
    city: "Mobile",
    state: "Alabama",
    country: "United States",
    lat: 30.69436,
    lng: -88.04305
  },
  {
    city: "San Bernardino",
    state: "California",
    country: "United States",
    lat: 34.10834,
    lng: -117.28977
  },
  {
    city: "Fayetteville",
    state: "North Carolina",
    country: "United States",
    lat: 35.05266,
    lng: -78.87836
  },
  {
    city: "Harrisburg",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.2737,
    lng: -76.88442
  },
  {
    city: "Monterey Park",
    state: "California",
    country: "United States",
    lat: 34.06251,
    lng: -118.12285
  },
  {
    city: "Rockford",
    state: "Illinois",
    country: "United States",
    lat: 42.27113,
    lng: -89.094
  },
  {
    city: "Rome",
    state: "Latium",
    country: "Italy",
    lat: 41.89193,
    lng: 12.51133
  },
  {
    city: "Elgin",
    state: "Illinois",
    country: "United States",
    lat: 42.03725,
    lng: -88.28119
  },
  {
    city: "Glasgow",
    state: "Scotland",
    country: "United Kingdom",
    lat: 55.86515,
    lng: -4.25763
  },
  {
    city: "Halifax",
    state: "Nova Scotia",
    country: "Canada",
    lat: 44.64533,
    lng: -63.57239
  },
  {
    city: "Lexington",
    state: "Kentucky",
    country: "United States",
    lat: 37.98869,
    lng: -84.47772
  },
  {
    city: "Lowell",
    state: "Massachusetts",
    country: "United States",
    lat: 42.63342,
    lng: -71.31617
  },
  {
    city: "Cedar Rapids",
    state: "Iowa",
    country: "United States",
    lat: 42.00833,
    lng: -91.64407
  },
  {
    city: "Boulder",
    state: "Colorado",
    country: "United States",
    lat: 40.01499,
    lng: -105.27055
  },
  {
    city: "La Jolla",
    state: "California",
    country: "United States",
    lat: 32.84727,
    lng: -117.2742
  },
  {
    city: "Summit",
    state: "New Jersey",
    country: "United States",
    lat: 40.74149,
    lng: -74.35959
  },
  {
    city: "Kingston",
    state: "Kingston",
    country: "Jamaica",
    lat: 17.99702,
    lng: -76.79358
  },
  {
    city: "Frankfurt am Main",
    state: "Hesse",
    country: "Germany",
    lat: 50.11552,
    lng: 8.68417
  },
  {
    city: "Santa Cruz",
    state: "California",
    country: "United States",
    lat: 36.97412,
    lng: -122.0308
  },
  {
    city: "Van Nuys",
    state: "California",
    country: "United States",
    lat: 34.18667,
    lng: -118.44897
  },
  {
    city: "Stamford",
    state: "Connecticut",
    country: "United States",
    lat: 41.05343,
    lng: -73.53873
  },
  {
    city: "Savannah",
    state: "Georgia",
    country: "United States",
    lat: 32.08354,
    lng: -81.09983
  },
  {
    city: "Oceanside",
    state: "California",
    country: "United States",
    lat: 33.19587,
    lng: -117.37948
  },
  {
    city: "Fremont",
    state: "California",
    country: "United States",
    lat: 37.54827,
    lng: -121.98857
  },
  {
    city: "Englewood",
    state: "New Jersey",
    country: "United States",
    lat: 40.89288,
    lng: -73.97264
  },
  {
    city: "London",
    state: "Ontario",
    country: "Canada",
    lat: 42.98339,
    lng: -81.23304
  },
  {
    city: "Guadalajara",
    state: "Jalisco",
    country: "Mexico",
    lat: 20.66682,
    lng: -103.39182
  },
  {
    city: "Taipei",
    state: "Taipei",
    country: "Taiwan",
    lat: 25.04776,
    lng: 121.53185
  },
  {
    city: "Ridgewood",
    state: "New Jersey",
    country: "United States",
    lat: 40.97926,
    lng: -74.11653
  },
  {
    city: "Tokyo",
    state: "Tky",
    country: "Japan",
    lat: 35.6895,
    lng: 139.69171
  },
  {
    city: "Cambridge",
    state: "Massachusetts",
    country: "United States",
    lat: 42.3751,
    lng: -71.10561
  },
  {
    city: "Hanoi",
    state: "Ha Ni",
    country: "Vietnam",
    lat: 21.0245,
    lng: 105.84117
  },
  {
    city: "Saskatoon",
    state: "Saskatchewan",
    country: "Canada",
    lat: 52.11679,
    lng: -106.63452
  },
  {
    city: "Portland",
    state: "Maine",
    country: "United States",
    lat: 43.66147,
    lng: -70.25533
  },
  {
    city: "Edinburgh",
    state: "Scotland",
    country: "United Kingdom",
    lat: 55.95206,
    lng: -3.19648
  },
  {
    city: "Hackensack",
    state: "New Jersey",
    country: "United States",
    lat: 40.88593,
    lng: -74.04347
  },
  {
    city: "Ankara",
    state: "Ankara",
    country: "Turkey",
    lat: 39.91987,
    lng: 32.85427
  },
  {
    city: "Joliet",
    state: "Illinois",
    country: "United States",
    lat: 41.52503,
    lng: -88.08173
  },
  {
    city: "Augusta",
    state: "Georgia",
    country: "United States",
    lat: 33.47097,
    lng: -81.97484
  },
  {
    city: "Jackson",
    state: "Mississippi",
    country: "United States",
    lat: 32.29876,
    lng: -90.18481
  },
  {
    city: "Lubbock",
    state: "Texas",
    country: "United States",
    lat: 33.57786,
    lng: -101.85517
  },
  {
    city: "Waterbury",
    state: "Connecticut",
    country: "United States",
    lat: 41.55815,
    lng: -73.0515
  },
  {
    city: "Durham",
    state: "North Carolina",
    country: "United States",
    lat: 35.99403,
    lng: -78.89862
  },
  {
    city: "Lancaster",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.03788,
    lng: -76.30551
  },
  {
    city: "Springfield",
    state: "Missouri",
    country: "United States",
    lat: 37.21533,
    lng: -93.29824
  },
  {
    city: "Kiev",
    state: "Kyiv City",
    country: "Ukraine",
    lat: 50.45466,
    lng: 30.5238
  },
  {
    city: "Renton",
    state: "Washington",
    country: "United States",
    lat: 47.48288,
    lng: -122.21707
  },
  {
    city: "Pomona",
    state: "California",
    country: "United States",
    lat: 34.05529,
    lng: -117.75228
  },
  {
    city: "Eugene",
    state: "Oregon",
    country: "United States",
    lat: 44.05207,
    lng: -123.08675
  },
  {
    city: "Provo",
    state: "Utah",
    country: "United States",
    lat: 40.23384,
    lng: -111.65853
  },
  {
    city: "Inglewood",
    state: "California",
    country: "United States",
    lat: 33.96168,
    lng: -118.35313
  },
  {
    city: "Framingham",
    state: "Massachusetts",
    country: "United States",
    lat: 42.27926,
    lng: -71.41617
  },
  {
    city: "Scottsdale",
    state: "Arizona",
    country: "United States",
    lat: 33.50921,
    lng: -111.89903
  },
  {
    city: "Saint Petersburg",
    state: "Florida",
    country: "United States",
    lat: 27.77086,
    lng: -82.67927
  },
  {
    city: "Lafayette",
    state: "Louisiana",
    country: "United States",
    lat: 30.22409,
    lng: -92.01984
  },
  {
    city: "Burbank",
    state: "California",
    country: "United States",
    lat: 34.18084,
    lng: -118.30897
  },
  {
    city: "Nashua",
    state: "New Hampshire",
    country: "United States",
    lat: 42.76537,
    lng: -71.46757
  },
  {
    city: "Jeddah",
    state: "Makkah",
    country: "Saudi Arabia",
    lat: 21.54238,
    lng: 39.19797
  },
  {
    city: "Metairie",
    state: "Louisiana",
    country: "United States",
    lat: 29.98409,
    lng: -90.15285
  },
  {
    city: "San Mateo",
    state: "California",
    country: "United States",
    lat: 37.56299,
    lng: -122.32553
  },
  {
    city: "Canberra",
    state: "Australian Capital Territory",
    country: "Australia",
    lat: -35.28346,
    lng: 149.12807
  },
  {
    city: "Corpus Christi",
    state: "Texas",
    country: "United States",
    lat: 27.80058,
    lng: -97.39638
  },
  {
    city: "Arlington Heights",
    state: "Illinois",
    country: "United States",
    lat: 42.08836,
    lng: -87.98063
  },
  {
    city: "Lancaster",
    state: "California",
    country: "United States",
    lat: 34.69804,
    lng: -118.13674
  },
  {
    city: "Quezon City",
    state: "Metro Manila",
    country: "Philippines",
    lat: 14.6488,
    lng: 121.0509
  },
  {
    city: "Upland",
    state: "California",
    country: "United States",
    lat: 34.09751,
    lng: -117.64839
  },
  {
    city: "Hyderabad",
    state: "Andhra Pradesh",
    country: "India",
    lat: 17.38405,
    lng: 78.45636
  },
  {
    city: "Riga",
    state: "Rga",
    country: "Latvia",
    lat: 56.946,
    lng: 24.10589
  },
  {
    city: "Yonkers",
    state: "New York",
    country: "United States",
    lat: 40.93121,
    lng: -73.89875
  },
  {
    city: "Beijing",
    state: "Beijing",
    country: "China",
    lat: 39.9075,
    lng: 116.39723
  },
  {
    city: "Bangalore",
    state: "Karnataka",
    country: "India",
    lat: 12.97194,
    lng: 77.59369
  },
  {
    city: "Hollywood",
    state: "Florida",
    country: "United States",
    lat: 26.0112,
    lng: -80.14949
  },
  {
    city: "Northridge",
    state: "California",
    country: "United States",
    lat: 34.22834,
    lng: -118.53675
  },
  {
    city: "Olympia",
    state: "Washington",
    country: "United States",
    lat: 47.03787,
    lng: -122.9007
  },
  {
    city: "Monterey",
    state: "California",
    country: "United States",
    lat: 36.60024,
    lng: -121.89468
  },
  {
    city: "Kansas City",
    state: "Kansas",
    country: "United States",
    lat: 39.11417,
    lng: -94.62746
  },
  {
    city: "San Salvador",
    state: "San Salvador",
    country: "El Salvador",
    lat: 13.68935,
    lng: -89.18718
  },
  {
    city: "Elmhurst",
    state: "Illinois",
    country: "United States",
    lat: 41.89947,
    lng: -87.94034
  },
  {
    city: "Montgomery",
    state: "Alabama",
    country: "United States",
    lat: 32.36681,
    lng: -86.29997
  },
  {
    city: "Fullerton",
    state: "California",
    country: "United States",
    lat: 33.87029,
    lng: -117.92534
  },
  {
    city: "Munich",
    state: "Bavaria",
    country: "Germany",
    lat: 48.13743,
    lng: 11.57549
  },
  {
    city: "Allentown",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.60843,
    lng: -75.49018
  },
  {
    city: "Copenhagen",
    state: "Capital Region",
    country: "Denmark",
    lat: 55.67594,
    lng: 12.56553
  },
  {
    city: "Hialeah",
    state: "Florida",
    country: "United States",
    lat: 25.8576,
    lng: -80.27811
  },
  {
    city: "Aurora",
    state: "Colorado",
    country: "United States",
    lat: 39.72943,
    lng: -104.83192
  },
  {
    city: "Santiago de los Caballeros",
    state: "Santiago",
    country: "Dominican Republic",
    lat: 19.4517,
    lng: -70.69703
  },
  {
    city: "Vancouver",
    state: "Washington",
    country: "United States",
    lat: 45.63873,
    lng: -122.66149
  },
  {
    city: "Dearborn",
    state: "Michigan",
    country: "United States",
    lat: 42.32226,
    lng: -83.17631
  },
  {
    city: "Victoria",
    state: "British Columbia",
    country: "Canada",
    lat: 48.43294,
    lng: -123.3693
  },
  {
    city: "Helsinki",
    state: "Southern Finland",
    country: "Finland",
    lat: 60.16952,
    lng: 24.93545
  },
  {
    city: "Huntsville",
    state: "Alabama",
    country: "United States",
    lat: 34.73037,
    lng: -86.5861
  },
  {
    city: "Annapolis",
    state: "Maryland",
    country: "United States",
    lat: 38.97845,
    lng: -76.49218
  },
  {
    city: "Newport News",
    state: "Virginia",
    country: "United States",
    lat: 36.97876,
    lng: -76.428
  },
  {
    city: "Mission Viejo",
    state: "California",
    country: "United States",
    lat: 33.60002,
    lng: -117.672
  },
  {
    city: "Wilmington",
    state: "Delaware",
    country: "United States",
    lat: 39.74595,
    lng: -75.54659
  },
  {
    city: "Milano",
    state: "Lombardy",
    country: "Italy",
    lat: 45.46427,
    lng: 9.18951
  },
  {
    city: "Plano",
    state: "Texas",
    country: "United States",
    lat: 33.01984,
    lng: -96.69889
  },
  {
    city: "Plantation",
    state: "Florida",
    country: "United States",
    lat: 26.13421,
    lng: -80.23184
  },
  {
    city: "Ventura",
    state: "California",
    country: "United States",
    lat: 34.27834,
    lng: -119.29317
  },
  {
    city: "Reykjavik",
    state: "Capital Region",
    country: "Iceland",
    lat: 64.13548,
    lng: -21.89541
  },
  {
    city: "Peoria",
    state: "Illinois",
    country: "United States",
    lat: 40.69365,
    lng: -89.58899
  },
  {
    city: "Long Branch",
    state: "New Jersey",
    country: "United States",
    lat: 40.30428,
    lng: -73.99236
  },
  {
    city: "Warsaw",
    state: "Masovian Voivodeship",
    country: "Poland",
    lat: 52.22977,
    lng: 21.01178
  },
  {
    city: "Danbury",
    state: "Connecticut",
    country: "United States",
    lat: 41.39482,
    lng: -73.45401
  },
  {
    city: "Monroe",
    state: "Louisiana",
    country: "United States",
    lat: 32.50931,
    lng: -92.1193
  },
  {
    city: "Sarajevo",
    state: "Federation of Bosnia and Herzegovina",
    country: "Bosnia and Herzegovina",
    lat: 43.84864,
    lng: 18.35644
  },
  {
    city: "Norwalk",
    state: "Connecticut",
    country: "United States",
    lat: 41.1176,
    lng: -73.4079
  },
  {
    city: "Jacksonville",
    state: "North Carolina",
    country: "United States",
    lat: 34.75405,
    lng: -77.43024
  },
  {
    city: "Newark",
    state: "Delaware",
    country: "United States",
    lat: 39.68372,
    lng: -75.74966
  },
  {
    city: "Hinsdale",
    state: "Illinois",
    country: "United States",
    lat: 41.80086,
    lng: -87.93701
  },
  {
    city: "Lincoln",
    state: "Nebraska",
    country: "United States",
    lat: 40.8,
    lng: -96.66696
  },
  {
    city: "Weymouth",
    state: "Massachusetts",
    country: "United States",
    lat: 42.22093,
    lng: -70.93977
  },
  {
    city: "Glendale",
    state: "Arizona",
    country: "United States",
    lat: 33.53865,
    lng: -112.18599
  },
  {
    city: "Poughkeepsie",
    state: "New York",
    country: "United States",
    lat: 41.70037,
    lng: -73.92097
  },
  {
    city: "Arlington",
    state: "Texas",
    country: "United States",
    lat: 32.73569,
    lng: -97.10807
  },
  {
    city: "Marietta",
    state: "Georgia",
    country: "United States",
    lat: 33.9526,
    lng: -84.54993
  },
  {
    city: "Brampton",
    state: "Ontario",
    country: "Canada",
    lat: 43.68341,
    lng: -79.76633
  },
  {
    city: "Charleston",
    state: "West Virginia",
    country: "United States",
    lat: 38.34982,
    lng: -81.63262
  },
  {
    city: "Erie",
    state: "Pennsylvania",
    country: "United States",
    lat: 42.12922,
    lng: -80.08506
  },
  {
    city: "New London",
    state: "Connecticut",
    country: "United States",
    lat: 41.35565,
    lng: -72.09952
  },
  {
    city: "Galveston",
    state: "Texas",
    country: "United States",
    lat: 29.30135,
    lng: -94.7977
  },
  {
    city: "Fairfield",
    state: "California",
    country: "United States",
    lat: 38.24936,
    lng: -122.03997
  },
  {
    city: "Shanghai",
    state: "Shanghai Shi",
    country: "China",
    lat: 31.22222,
    lng: 121.45806
  },
  {
    city: "Columbus",
    state: "Georgia",
    country: "United States",
    lat: 32.46098,
    lng: -84.98771
  },
  {
    city: "Englewood",
    state: "Colorado",
    country: "United States",
    lat: 39.64777,
    lng: -104.98776
  },
  {
    city: "Huntington",
    state: "New York",
    country: "United States",
    lat: 40.86815,
    lng: -73.42568
  },
  {
    city: "Red Bank",
    state: "New Jersey",
    country: "United States",
    lat: 40.34705,
    lng: -74.06431
  },
  {
    city: "Newcastle",
    state: "New South Wales",
    country: "Australia",
    lat: -32.92715,
    lng: 151.77647
  },
  {
    city: "Odessa",
    state: "Texas",
    country: "United States",
    lat: 31.84568,
    lng: -102.36764
  },
  {
    city: "Youngstown",
    state: "Ohio",
    country: "United States",
    lat: 41.09978,
    lng: -80.64952
  },
  {
    city: "Laredo",
    state: "Texas",
    country: "United States",
    lat: 27.50641,
    lng: -99.50754
  },
  {
    city: "Plainfield",
    state: "New Jersey",
    country: "United States",
    lat: 40.61682,
    lng: -74.41727
  },
  {
    city: "West Islip",
    state: "New York",
    country: "United States",
    lat: 40.70621,
    lng: -73.30623
  },
  {
    city: "Canton",
    state: "Ohio",
    country: "United States",
    lat: 40.79895,
    lng: -81.37845
  },
  {
    city: "Towson",
    state: "Maryland",
    country: "United States",
    lat: 39.4015,
    lng: -76.60191
  },
  {
    city: "Visalia",
    state: "California",
    country: "United States",
    lat: 36.33023,
    lng: -119.29206
  },
  {
    city: "Warren",
    state: "Ohio",
    country: "United States",
    lat: 41.23756,
    lng: -80.81842
  },
  {
    city: "Dubai",
    state: "Dubai",
    country: "United Arab Emirates",
    lat: 25.25817,
    lng: 55.30472
  },
  {
    city: "Bristol",
    state: "England",
    country: "United Kingdom",
    lat: 51.45523,
    lng: -2.59665
  },
  {
    city: "Karachi",
    state: "Sindh",
    country: "Pakistan",
    lat: 24.9056,
    lng: 67.0822
  },
  {
    city: "Oak Park",
    state: "Illinois",
    country: "United States",
    lat: 41.88503,
    lng: -87.7845
  },
  {
    city: "Liverpool",
    state: "England",
    country: "United Kingdom",
    lat: 53.41058,
    lng: -2.97794
  },
  {
    city: "Port-au-Prince",
    state: "Ouest",
    country: "Haiti",
    lat: 18.53917,
    lng: -72.335
  },
  {
    city: "Smithtown",
    state: "New York",
    country: "United States",
    lat: 40.85593,
    lng: -73.20067
  },
  {
    city: "Salem",
    state: "Oregon",
    country: "United States",
    lat: 44.9429,
    lng: -123.0351
  },
  {
    city: "Cape Town",
    state: "Western Cape",
    country: "South Africa",
    lat: -33.92584,
    lng: 18.42322
  },
  {
    city: "Beaumont",
    state: "Texas",
    country: "United States",
    lat: 30.08605,
    lng: -94.10185
  },
  {
    city: "Lahore",
    state: "Punjab",
    country: "Pakistan",
    lat: 31.54972,
    lng: 74.34361
  },
  {
    city: "Evansville",
    state: "Indiana",
    country: "United States",
    lat: 37.97476,
    lng: -87.55585
  },
  {
    city: "Takoma Park",
    state: "Maryland",
    country: "United States",
    lat: 38.97789,
    lng: -77.00748
  },
  {
    city: "Decatur",
    state: "Georgia",
    country: "United States",
    lat: 33.77483,
    lng: -84.29631
  },
  {
    city: "Billings",
    state: "Montana",
    country: "United States",
    lat: 45.78329,
    lng: -108.50069
  },
  {
    city: "Guatemala City",
    state: "Guatemala",
    country: "Guatemala",
    lat: 14.64072,
    lng: -90.51327
  },
  {
    city: "Chula Vista",
    state: "California",
    country: "United States",
    lat: 32.64005,
    lng: -117.0842
  },
  {
    city: "Passaic",
    state: "New Jersey",
    country: "United States",
    lat: 40.85677,
    lng: -74.12848
  },
  {
    city: "Salem",
    state: "Massachusetts",
    country: "United States",
    lat: 42.51954,
    lng: -70.89672
  },
  {
    city: "Hamburg",
    state: "Hamburg",
    country: "Germany",
    lat: 53.57532,
    lng: 10.01534
  },
  {
    city: "Manchester",
    state: "New Hampshire",
    country: "United States",
    lat: 42.99564,
    lng: -71.45479
  },
  {
    city: "Oak Lawn",
    state: "Illinois",
    country: "United States",
    lat: 41.71087,
    lng: -87.75811
  },
  {
    city: "Kirkland",
    state: "Washington",
    country: "United States",
    lat: 47.68149,
    lng: -122.20874
  },
  {
    city: "Cairo",
    state: "Al Qhirah",
    country: "Egypt",
    lat: 30.06263,
    lng: 31.24967
  },
  {
    city: "Budapest",
    state: "Budapest",
    country: "Hungary",
    lat: 47.49801,
    lng: 19.03991
  },
  {
    city: "Gainesville",
    state: "Florida",
    country: "United States",
    lat: 29.65163,
    lng: -82.32483
  },
  {
    city: "Saginaw",
    state: "Michigan",
    country: "United States",
    lat: 43.41947,
    lng: -83.95081
  },
  {
    city: "Guayaquil",
    state: "Guayas",
    country: "Ecuador",
    lat: -2.20584,
    lng: -79.90795
  },
  {
    city: "Reading",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.33565,
    lng: -75.92687
  },
  {
    city: "Virginia Beach",
    state: "Virginia",
    country: "United States",
    lat: 36.85293,
    lng: -75.97798
  },
  {
    city: "Topeka",
    state: "Kansas",
    country: "United States",
    lat: 39.04833,
    lng: -95.67804
  },
  {
    city: "Doha",
    state: "Ad Dawah",
    country: "Qatar",
    lat: 25.27932,
    lng: 51.52245
  },
  {
    city: "Charlottesville",
    state: "Virginia",
    country: "United States",
    lat: 38.02931,
    lng: -78.47668
  },
  {
    city: "Kalamazoo",
    state: "Michigan",
    country: "United States",
    lat: 42.29171,
    lng: -85.58723
  },
  {
    city: "Monterrey",
    state: "Nuevo Len",
    country: "Mexico",
    lat: 25.67506,
    lng: -100.31846
  },
  {
    city: "Teaneck",
    state: "New Jersey",
    country: "United States",
    lat: 40.8976,
    lng: -74.01597
  },
  {
    city: "Cheverly",
    state: "Maryland",
    country: "United States",
    lat: 38.92817,
    lng: -76.91581
  },
  {
    city: "Falls Church",
    state: "Virginia",
    country: "United States",
    lat: 38.88233,
    lng: -77.17109
  },
  {
    city: "Scranton",
    state: "Pennsylvania",
    country: "United States",
    lat: 41.40897,
    lng: -75.66241
  },
  {
    city: "Winston-Salem",
    state: "North Carolina",
    country: "United States",
    lat: 36.09986,
    lng: -80.24422
  },
  {
    city: "Santa Maria",
    state: "California",
    country: "United States",
    lat: 34.95303,
    lng: -120.43572
  },
  {
    city: "Regina",
    state: "Saskatchewan",
    country: "Canada",
    lat: 50.45008,
    lng: -104.6178
  },
  {
    city: "Hamilton",
    state: "Waikato",
    country: "New Zealand",
    lat: -37.78333,
    lng: 175.28333
  },
  {
    city: "Bayamon",
    state: "Bayamn",
    country: "Puerto Rico",
    lat: 18.39856,
    lng: -66.15572
  },
  {
    city: "Dhaka",
    state: "Dhaka",
    country: "Bangladesh",
    lat: 23.7104,
    lng: 90.40744
  },
  {
    city: "Belfast",
    state: "N Ireland",
    country: "United Kingdom",
    lat: 54.58333,
    lng: -5.93333
  },
  {
    city: "Kathmandu",
    state: "Central Region",
    country: "Nepal",
    lat: 27.70169,
    lng: 85.3206
  },
  {
    city: "Ljubljana",
    state: "Ljubljana",
    country: "Slovenia",
    lat: 46.05108,
    lng: 14.50513
  },
  {
    city: "Durban",
    state: "KwaZulu-Natal",
    country: "South Africa",
    lat: -29.8579,
    lng: 31.0292
  },
  {
    city: "Rockville",
    state: "Maryland",
    country: "United States",
    lat: 39.084,
    lng: -77.15276
  },
  {
    city: "Medellin",
    state: "Antioquia",
    country: "Colombia",
    lat: 6.25184,
    lng: -75.56359
  },
  {
    city: "Springfield",
    state: "Illinois",
    country: "United States",
    lat: 39.80172,
    lng: -89.64371
  },
  {
    city: "Elizabeth",
    state: "New Jersey",
    country: "United States",
    lat: 40.66399,
    lng: -74.2107
  },
  {
    city: "La Mesa",
    state: "California",
    country: "United States",
    lat: 32.76783,
    lng: -117.02308
  },
  {
    city: "Princeton",
    state: "New Jersey",
    country: "United States",
    lat: 40.34872,
    lng: -74.65905
  },
  {
    city: "Izmir",
    state: "zmir",
    country: "Turkey",
    lat: 38.41273,
    lng: 27.13838
  },
  {
    city: "San Jose",
    state: "San Jos",
    country: "Costa Rica",
    lat: 9.93333,
    lng: -84.08333
  },
  {
    city: "Beverly",
    state: "Massachusetts",
    country: "United States",
    lat: 42.55843,
    lng: -70.88005
  },
  {
    city: "Schenectady",
    state: "New York",
    country: "United States",
    lat: 42.81424,
    lng: -73.93957
  },
  {
    city: "Bay Shore",
    state: "New York",
    country: "United States",
    lat: 40.7251,
    lng: -73.24539
  },
  {
    city: "Sarasota",
    state: "Florida",
    country: "United States",
    lat: 27.33643,
    lng: -82.53065
  },
  {
    city: "Malden",
    state: "Massachusetts",
    country: "United States",
    lat: 42.4251,
    lng: -71.06616
  },
  {
    city: "Green Bay",
    state: "Wisconsin",
    country: "United States",
    lat: 44.51916,
    lng: -88.01983
  },
  {
    city: "Wilmington",
    state: "North Carolina",
    country: "United States",
    lat: 34.22573,
    lng: -77.94471
  },
  {
    city: "Overland Park",
    state: "Kansas",
    country: "United States",
    lat: 38.98223,
    lng: -94.67079
  },
  {
    city: "Roanoke",
    state: "Virginia",
    country: "United States",
    lat: 37.27097,
    lng: -79.94143
  },
  {
    city: "Saint Petersburg",
    state: "St.-Petersburg",
    country: "Russia",
    lat: 59.93863,
    lng: 30.31413
  },
  {
    city: "Stony Brook",
    state: "New York",
    country: "United States",
    lat: 40.92565,
    lng: -73.14094
  },
  {
    city: "Port Jefferson",
    state: "New York",
    country: "United States",
    lat: 40.94649,
    lng: -73.06927
  },
  {
    city: "Mount Kisco",
    state: "New York",
    country: "United States",
    lat: 41.20426,
    lng: -73.72708
  },
  {
    city: "Bethlehem",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.62593,
    lng: -75.37046
  },
  {
    city: "Panama",
    state: "Panam",
    country: "Panama",
    lat: 8.9936,
    lng: -79.51973
  },
  {
    city: "Hobart",
    state: "Tasmania",
    country: "Australia",
    lat: -42.87936,
    lng: 147.32941
  },
  {
    city: "Greenville",
    state: "South Carolina",
    country: "United States",
    lat: 34.85262,
    lng: -82.39401
  },
  {
    city: "Christchurch",
    state: "Canterbury",
    country: "New Zealand",
    lat: -43.53333,
    lng: 172.63333
  },
  {
    city: "Wolverhampton",
    state: "England",
    country: "United Kingdom",
    lat: 52.58547,
    lng: -2.12296
  },
  {
    city: "St. John's",
    state: "Newfoundland and Labrador",
    country: "Canada",
    lat: 47.56494,
    lng: -52.70931
  },
  {
    city: "Fort Collins",
    state: "Colorado",
    country: "United States",
    lat: 40.58526,
    lng: -105.08442
  },
  {
    city: "Park Ridge",
    state: "Illinois",
    country: "United States",
    lat: 42.01114,
    lng: -87.84062
  },
  {
    city: "Miami Beach",
    state: "Florida",
    country: "United States",
    lat: 25.79065,
    lng: -80.13005
  },
  {
    city: "Greenwich",
    state: "Connecticut",
    country: "United States",
    lat: 41.02649,
    lng: -73.62846
  },
  {
    city: "Mount Clemens",
    state: "Michigan",
    country: "United States",
    lat: 42.59726,
    lng: -82.87798
  },
  {
    city: "Vienna",
    state: "Vienna",
    country: "Austria",
    lat: 48.20849,
    lng: 16.37208
  },
  {
    city: "Berwyn",
    state: "Illinois",
    country: "United States",
    lat: 41.85059,
    lng: -87.79367
  },
  {
    city: "Burlingame",
    state: "California",
    country: "United States",
    lat: 37.5841,
    lng: -122.36608
  },
  {
    city: "Cali",
    state: "Valle del Cauca",
    country: "Colombia",
    lat: 3.43722,
    lng: -76.5225
  },
  {
    city: "McAllen",
    state: "Texas",
    country: "United States",
    lat: 26.20341,
    lng: -98.23001
  },
  {
    city: "Winfield",
    state: "Illinois",
    country: "United States",
    lat: 41.8617,
    lng: -88.1609
  },
  {
    city: "Rockville Centre",
    state: "New York",
    country: "United States",
    lat: 40.65871,
    lng: -73.64124
  },
  {
    city: "Leicester",
    state: "England",
    country: "United Kingdom",
    lat: 52.6386,
    lng: -1.13169
  },
  {
    city: "Colombo",
    state: "Western",
    country: "Sri Lanka",
    lat: 6.93194,
    lng: 79.84778
  },
  {
    city: "Elk Grove Village",
    state: "Illinois",
    country: "United States",
    lat: 42.00392,
    lng: -87.97035
  },
  {
    city: "Jamaica",
    state: "New York",
    country: "United States",
    lat: 40.69149,
    lng: -73.80569
  },
  {
    city: "Las Cruces",
    state: "New Mexico",
    country: "United States",
    lat: 32.31232,
    lng: -106.77834
  },
  {
    city: "Nottingham",
    state: "England",
    country: "United Kingdom",
    lat: 52.9536,
    lng: -1.15047
  },
  {
    city: "Fort Myers",
    state: "Florida",
    country: "United States",
    lat: 26.62168,
    lng: -81.84059
  },
  {
    city: "Newburgh",
    state: "New York",
    country: "United States",
    lat: 41.50343,
    lng: -74.01042
  },
  {
    city: "Columbia",
    state: "Maryland",
    country: "United States",
    lat: 39.24038,
    lng: -76.83942
  },
  {
    city: "Brussels",
    state: "Brussels Capital",
    country: "Belgium",
    lat: 50.85045,
    lng: 4.34878
  },
  {
    city: "Beirut",
    state: "Beyrouth",
    country: "Lebanon",
    lat: 33.88894,
    lng: 35.49442
  },
  {
    city: "Winchester",
    state: "Massachusetts",
    country: "United States",
    lat: 42.45232,
    lng: -71.137
  },
  {
    city: "Quebec",
    state: "Quebec",
    country: "Canada",
    lat: 46.81228,
    lng: -71.21454
  },
  {
    city: "Warwick",
    state: "Rhode Island",
    country: "United States",
    lat: 41.7001,
    lng: -71.41617
  },
  {
    city: "Escondido",
    state: "California",
    country: "United States",
    lat: 33.11921,
    lng: -117.08642
  },
  {
    city: "Oxnard",
    state: "California",
    country: "United States",
    lat: 34.1975,
    lng: -119.17705
  },
  {
    city: "Rotterdam",
    state: "South Holland",
    country: "Netherlands",
    lat: 51.9225,
    lng: 4.47917
  },
  {
    city: "Carmichael",
    state: "California",
    country: "United States",
    lat: 38.61713,
    lng: -121.32828
  },
  {
    city: "Tyler",
    state: "Texas",
    country: "United States",
    lat: 32.35126,
    lng: -95.30106
  },
  {
    city: "Abilene",
    state: "Texas",
    country: "United States",
    lat: 32.44874,
    lng: -99.73314
  },
  {
    city: "Melrose",
    state: "Massachusetts",
    country: "United States",
    lat: 42.45843,
    lng: -71.06616
  },
  {
    city: "Ypsilanti",
    state: "Michigan",
    country: "United States",
    lat: 42.24115,
    lng: -83.61299
  },
  {
    city: "Lynwood",
    state: "California",
    country: "United States",
    lat: 33.93029,
    lng: -118.21146
  },
  {
    city: "San Luis Obispo",
    state: "California",
    country: "United States",
    lat: 35.28275,
    lng: -120.65962
  },
  {
    city: "Aberdeen",
    state: "Scotland",
    country: "United Kingdom",
    lat: 57.14369,
    lng: -2.09814
  },
  {
    city: "Tbilisi",
    state: "T'bilisi",
    country: "Georgia",
    lat: 41.69411,
    lng: 44.83368
  },
  {
    city: "Bethpage",
    state: "New York",
    country: "United States",
    lat: 40.74427,
    lng: -73.48207
  },
  {
    city: "Cardiff",
    state: "Wales",
    country: "United Kingdom",
    lat: 51.48,
    lng: -3.18
  },
  {
    city: "Chandler",
    state: "Arizona",
    country: "United States",
    lat: 33.30616,
    lng: -111.84125
  },
  {
    city: "Montevideo",
    state: "Montevideo",
    country: "Uruguay",
    lat: -34.90328,
    lng: -56.18816
  },
  {
    city: "Edison",
    state: "New Jersey",
    country: "United States",
    lat: 40.51872,
    lng: -74.4121
  },
  {
    city: "Brownsville",
    state: "Texas",
    country: "United States",
    lat: 25.90175,
    lng: -97.49748
  },
  {
    city: "Woodland Hills",
    state: "California",
    country: "United States",
    lat: 34.16834,
    lng: -118.60592
  },
  {
    city: "Stuttgart",
    state: "Baden-Wrttemberg",
    country: "Germany",
    lat: 48.78232,
    lng: 9.17702
  },
  {
    city: "Surrey",
    state: "British Columbia",
    country: "Canada",
    lat: 49.10635,
    lng: -122.82509
  },
  {
    city: "Rapid City",
    state: "South Dakota",
    country: "United States",
    lat: 44.08054,
    lng: -103.23101
  },
  {
    city: "La Crosse",
    state: "Wisconsin",
    country: "United States",
    lat: 43.80136,
    lng: -91.23958
  },
  {
    city: "Amarillo",
    state: "Texas",
    country: "United States",
    lat: 35.222,
    lng: -101.8313
  },
  {
    city: "Tel Aviv",
    state: "Tel Aviv",
    country: "Israel",
    lat: 32.08088,
    lng: 34.78057
  },
  {
    city: "Simi Valley",
    state: "California",
    country: "United States",
    lat: 34.26945,
    lng: -118.78148
  },
  {
    city: "Lake Forest",
    state: "Illinois",
    country: "United States",
    lat: 42.25863,
    lng: -87.84062
  },
  {
    city: "Hammond",
    state: "Indiana",
    country: "United States",
    lat: 41.58337,
    lng: -87.50004
  },
  {
    city: "Landstuhl",
    state: "Rheinland-Pfalz",
    country: "Germany",
    lat: 49.41306,
    lng: 7.57021
  },
  {
    city: "Edina",
    state: "Minnesota",
    country: "United States",
    lat: 44.88969,
    lng: -93.34995
  },
  {
    city: "Bellingham",
    state: "Washington",
    country: "United States",
    lat: 48.75955,
    lng: -122.48822
  },
  {
    city: "Bronxville",
    state: "New York",
    country: "United States",
    lat: 40.93815,
    lng: -73.83208
  },
  {
    city: "New Bedford",
    state: "Massachusetts",
    country: "United States",
    lat: 41.63622,
    lng: -70.9342
  },
  {
    city: "Bergen",
    state: "Hordaland",
    country: "Norway",
    lat: 60.39299,
    lng: 5.32415
  },
  {
    city: "Middletown",
    state: "Connecticut",
    country: "United States",
    lat: 41.56232,
    lng: -72.65065
  },
  {
    city: "Nyack",
    state: "New York",
    country: "United States",
    lat: 41.09065,
    lng: -73.91791
  },
  {
    city: "Lawton",
    state: "Oklahoma",
    country: "United States",
    lat: 34.60869,
    lng: -98.39033
  },
  {
    city: "Lagos",
    state: "Lagos",
    country: "Nigeria",
    lat: 6.45306,
    lng: 3.39583
  },
  {
    city: "Dover",
    state: "Delaware",
    country: "United States",
    lat: 39.15817,
    lng: -75.52437
  },
  {
    city: "Makati City",
    state: "Metro Manila",
    country: "Philippines",
    lat: 14.55027,
    lng: 121.03269
  },
  {
    city: "Chisinau",
    state: "Chiinu",
    country: "Moldova",
    lat: 47.00556,
    lng: 28.8575
  },
  {
    city: "Sioux Falls",
    state: "South Dakota",
    country: "United States",
    lat: 43.54997,
    lng: -96.70033
  },
  {
    city: "Bryn Mawr",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.30396,
    lng: -80.08672
  },
  {
    city: "Salinas",
    state: "California",
    country: "United States",
    lat: 36.67774,
    lng: -121.6555
  },
  {
    city: "Odessa",
    state: "Odessa",
    country: "Ukraine",
    lat: 46.47747,
    lng: 30.73262
  },
  {
    city: "Waukegan",
    state: "Illinois",
    country: "United States",
    lat: 42.36363,
    lng: -87.84479
  },
  {
    city: "Townsville",
    state: "Queensland",
    country: "Australia",
    lat: -19.26639,
    lng: 146.8057
  },
  {
    city: "Ahmedabad",
    state: "Gujart",
    country: "India",
    lat: 23.02579,
    lng: 72.58726
  },
  {
    city: "Aurora",
    state: "Illinois",
    country: "United States",
    lat: 41.76058,
    lng: -88.32007
  },
  {
    city: "Santa Fe",
    state: "New Mexico",
    country: "United States",
    lat: 35.68698,
    lng: -105.9378
  },
  {
    city: "Appleton",
    state: "Wisconsin",
    country: "United States",
    lat: 44.26193,
    lng: -88.41538
  },
  {
    city: "Iowa City",
    state: "Iowa",
    country: "United States",
    lat: 41.66113,
    lng: -91.53017
  },
  {
    city: "North York",
    state: "Ontario",
    country: "Canada",
    lat: 43.76681,
    lng: -79.4163
  },
  {
    city: "Hampton",
    state: "Virginia",
    country: "United States",
    lat: 37.02987,
    lng: -76.34522
  },
  {
    city: "Richmond Hill",
    state: "Ontario",
    country: "Canada",
    lat: 43.87111,
    lng: -79.43725
  },
  {
    city: "New Rochelle",
    state: "New York",
    country: "United States",
    lat: 40.91149,
    lng: -73.78235
  },
  {
    city: "Pasadena",
    state: "Texas",
    country: "United States",
    lat: 29.69106,
    lng: -95.2091
  },
  {
    city: "Port-of-Spain",
    state: "City of Port of Spain",
    country: "Trinidad and Tobago",
    lat: 10.66668,
    lng: -61.51889
  },
  {
    city: "Lake Charles",
    state: "Louisiana",
    country: "United States",
    lat: 30.21309,
    lng: -93.2044
  },
  {
    city: "West Chester",
    state: "Pennsylvania",
    country: "United States",
    lat: 39.96066,
    lng: -75.60549
  },
  {
    city: "Merced",
    state: "California",
    country: "United States",
    lat: 37.30216,
    lng: -120.48297
  },
  {
    city: "Belleville",
    state: "New Jersey",
    country: "United States",
    lat: 40.79371,
    lng: -74.15014
  },
  {
    city: "Loma Linda",
    state: "California",
    country: "United States",
    lat: 34.04835,
    lng: -117.26115
  },
  {
    city: "Frederick",
    state: "Maryland",
    country: "United States",
    lat: 39.41427,
    lng: -77.41054
  },
  {
    city: "Concord",
    state: "Massachusetts",
    country: "United States",
    lat: 42.46037,
    lng: -71.34895
  },
  {
    city: "Macon",
    state: "Georgia",
    country: "United States",
    lat: 32.84069,
    lng: -83.6324
  },
  {
    city: "Etobicoke",
    state: "Ontario",
    country: "Canada",
    lat: 43.65421,
    lng: -79.56711
  },
  {
    city: "New Britain",
    state: "Connecticut",
    country: "United States",
    lat: 41.66121,
    lng: -72.77954
  },
  {
    city: "Great Falls",
    state: "Montana",
    country: "United States",
    lat: 47.50024,
    lng: -111.30081
  },
  {
    city: "Casper",
    state: "Wyoming",
    country: "United States",
    lat: 42.86663,
    lng: -106.31308
  },
  {
    city: "Melrose Park",
    state: "Illinois",
    country: "United States",
    lat: 41.90059,
    lng: -87.85673
  },
  {
    city: "Northampton",
    state: "Massachusetts",
    country: "United States",
    lat: 42.32509,
    lng: -72.6412
  },
  {
    city: "Boca Raton",
    state: "Florida",
    country: "United States",
    lat: 26.35869,
    lng: -80.0831
  },
  {
    city: "Irving",
    state: "Texas",
    country: "United States",
    lat: 32.81402,
    lng: -96.94889
  },
  {
    city: "Wiesbaden",
    state: "Hesse",
    country: "Germany",
    lat: 50.08258,
    lng: 8.24932
  },
  {
    city: "Toms River",
    state: "New Jersey",
    country: "United States",
    lat: 39.95373,
    lng: -74.19792
  },
  {
    city: "Downers Grove",
    state: "Illinois",
    country: "United States",
    lat: 41.80892,
    lng: -88.01117
  },
  {
    city: "Zurich",
    state: "Zurich",
    country: "Switzerland",
    lat: 47.36667,
    lng: 8.55
  },
  {
    city: "Hoboken",
    state: "New Jersey",
    country: "United States",
    lat: 40.74399,
    lng: -74.03236
  },
  {
    city: "Racine",
    state: "Wisconsin",
    country: "United States",
    lat: 42.72613,
    lng: -87.78285
  },
  {
    city: "Rochester",
    state: "Minnesota",
    country: "United States",
    lat: 44.02163,
    lng: -92.4699
  },
  {
    city: "Gary",
    state: "Indiana",
    country: "United States",
    lat: 41.59337,
    lng: -87.34643
  },
  {
    city: "South Bend",
    state: "Indiana",
    country: "United States",
    lat: 41.68338,
    lng: -86.25001
  },
  {
    city: "Red Deer",
    state: "Alberta",
    country: "Canada",
    lat: 52.26682,
    lng: -113.802
  },
  {
    city: "Reston",
    state: "Virginia",
    country: "United States",
    lat: 38.96872,
    lng: -77.3411
  },
  {
    city: "Bremerton",
    state: "Washington",
    country: "United States",
    lat: 47.56732,
    lng: -122.63264
  },
  {
    city: "Alexandria",
    state: "Louisiana",
    country: "United States",
    lat: 31.31129,
    lng: -92.44514
  },
  {
    city: "Norristown",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.1215,
    lng: -75.3399
  },
  {
    city: "Bangor",
    state: "Maine",
    country: "United States",
    lat: 44.80118,
    lng: -68.77781
  },
  {
    city: "Palm Springs",
    state: "California",
    country: "United States",
    lat: 33.8303,
    lng: -116.54529
  },
  {
    city: "New Hyde Park",
    state: "New York",
    country: "United States",
    lat: 40.7351,
    lng: -73.68791
  },
  {
    city: "Neptune City",
    state: "New Jersey",
    country: "United States",
    lat: 40.20011,
    lng: -74.02792
  },
  {
    city: "Atlantic City",
    state: "New Jersey",
    country: "United States",
    lat: 39.36428,
    lng: -74.42293
  },
  {
    city: "Rome",
    state: "Georgia",
    country: "United States",
    lat: 34.25704,
    lng: -85.16467
  },
  {
    city: "Los Gatos",
    state: "California",
    country: "United States",
    lat: 37.22661,
    lng: -121.97468
  },
  {
    city: "Kitchener",
    state: "Ontario",
    country: "Canada",
    lat: 43.42537,
    lng: -80.5112
  },
  {
    city: "Apple Valley",
    state: "California",
    country: "United States",
    lat: 34.50083,
    lng: -117.18588
  },
  {
    city: "Salisbury",
    state: "Maryland",
    country: "United States",
    lat: 38.36067,
    lng: -75.59937
  },
  {
    city: "Tijuana",
    state: "Baja California",
    country: "Mexico",
    lat: 32.5027,
    lng: -117.00371
  },
  {
    city: "Abu Dhabi",
    state: "Abu Dhabi",
    country: "United Arab Emirates",
    lat: 24.46667,
    lng: 54.36667
  },
  {
    city: "Oakville",
    state: "Ontario",
    country: "Canada",
    lat: 43.45011,
    lng: -79.68292
  },
  {
    city: "Ponce",
    state: "Ponce",
    country: "Puerto Rico",
    lat: 18.01108,
    lng: -66.61406
  },
  {
    city: "San Leandro",
    state: "California",
    country: "United States",
    lat: 37.72493,
    lng: -122.15608
  },
  {
    city: "Duluth",
    state: "Minnesota",
    country: "United States",
    lat: 46.78327,
    lng: -92.10658
  },
  {
    city: "Burlington",
    state: "Ontario",
    country: "Canada",
    lat: 43.38621,
    lng: -79.83713
  },
  {
    city: "Mayfield Heights",
    state: "Ohio",
    country: "United States",
    lat: 41.51922,
    lng: -81.4579
  },
  {
    city: "Leominster",
    state: "Massachusetts",
    country: "United States",
    lat: 42.52509,
    lng: -71.75979
  },
  {
    city: "Subiaco",
    state: "Western Australia",
    country: "Australia",
    lat: -31.9485,
    lng: 115.8268
  },
  {
    city: "Yakima",
    state: "Washington",
    country: "United States",
    lat: 46.60207,
    lng: -120.5059
  },
  {
    city: "Martinez",
    state: "California",
    country: "United States",
    lat: 38.01937,
    lng: -122.13413
  },
  {
    city: "Pretoria",
    state: "Gauteng",
    country: "South Africa",
    lat: -25.74486,
    lng: 28.18783
  },
  {
    city: "Addis Ababa",
    state: "ds beba",
    country: "Ethiopia",
    lat: 9.02497,
    lng: 38.74689
  },
  {
    city: "Fargo",
    state: "North Dakota",
    country: "United States",
    lat: 46.87719,
    lng: -96.7898
  },
  {
    city: "Biloxi",
    state: "Mississippi",
    country: "United States",
    lat: 30.39603,
    lng: -88.88531
  },
  {
    city: "Jerusalem",
    state: "Jerusalem District",
    country: "Israel",
    lat: 31.76904,
    lng: 35.21633
  },
  {
    city: "York",
    state: "Pennsylvania",
    country: "United States",
    lat: 39.9626,
    lng: -76.72774
  },
  {
    city: "Somerville",
    state: "New Jersey",
    country: "United States",
    lat: 40.57427,
    lng: -74.60988
  },
  {
    city: "Redlands",
    state: "California",
    country: "United States",
    lat: 34.05557,
    lng: -117.18254
  },
  {
    city: "Suffern",
    state: "New York",
    country: "United States",
    lat: 41.11482,
    lng: -74.14959
  },
  {
    city: "Burnaby",
    state: "British Columbia",
    country: "Canada",
    lat: 49.26636,
    lng: -122.95263
  },
  {
    city: "Tashkent",
    state: "Toshkent Shahri",
    country: "Uzbekistan",
    lat: 41.26465,
    lng: 69.21627
  },
  {
    city: "Medford",
    state: "Oregon",
    country: "United States",
    lat: 42.32652,
    lng: -122.87559
  },
  {
    city: "Midland",
    state: "Texas",
    country: "United States",
    lat: 31.99735,
    lng: -102.07791
  },
  {
    city: "Rijeka",
    state: "Primorsko-Goranska",
    country: "Croatia",
    lat: 45.34306,
    lng: 14.40917
  },
  {
    city: "Tallahassee",
    state: "Florida",
    country: "United States",
    lat: 30.43826,
    lng: -84.28073
  },
  {
    city: "Killeen",
    state: "Texas",
    country: "United States",
    lat: 31.11712,
    lng: -97.7278
  },
  {
    city: "Oshawa",
    state: "Ontario",
    country: "Canada",
    lat: 43.90012,
    lng: -78.84957
  },
  {
    city: "Burnsville",
    state: "Minnesota",
    country: "United States",
    lat: 44.76774,
    lng: -93.27772
  },
  {
    city: "Willingboro",
    state: "New Jersey",
    country: "United States",
    lat: 40.02789,
    lng: -74.86905
  },
  {
    city: "Gosford",
    state: "New South Wales",
    country: "Australia",
    lat: -33.4244,
    lng: 151.34399
  },
  {
    city: "Cork",
    state: "Munster",
    country: "Ireland",
    lat: 51.89797,
    lng: -8.47061
  },
  {
    city: "Davenport",
    state: "Iowa",
    country: "United States",
    lat: 41.52364,
    lng: -90.57764
  },
  {
    city: "Plainview",
    state: "New York",
    country: "United States",
    lat: 40.77649,
    lng: -73.46735
  },
  {
    city: "Lawrenceville",
    state: "Georgia",
    country: "United States",
    lat: 33.95621,
    lng: -83.98796
  },
  {
    city: "Belleville",
    state: "Illinois",
    country: "United States",
    lat: 38.52005,
    lng: -89.98399
  },
  {
    city: "Lima",
    state: "Ohio",
    country: "United States",
    lat: 40.74255,
    lng: -84.10523
  },
  {
    city: "Melbourne",
    state: "Florida",
    country: "United States",
    lat: 28.08363,
    lng: -80.60811
  },
  {
    city: "Manchester",
    state: "Connecticut",
    country: "United States",
    lat: 41.77593,
    lng: -72.52148
  },
  {
    city: "Corona",
    state: "California",
    country: "United States",
    lat: 33.87529,
    lng: -117.56644
  },
  {
    city: "Hilo",
    state: "Hawaii",
    country: "United States",
    lat: 19.72972,
    lng: -155.09
  },
  {
    city: "Chester",
    state: "Pennsylvania",
    country: "United States",
    lat: 39.84956,
    lng: -75.35575
  },
  {
    city: "Wellington",
    state: "Wellington",
    country: "New Zealand",
    lat: -41.28664,
    lng: 174.77557
  },
  {
    city: "Kankakee",
    state: "Illinois",
    country: "United States",
    lat: 41.12003,
    lng: -87.86115
  },
  {
    city: "Glens Falls",
    state: "New York",
    country: "United States",
    lat: 43.30952,
    lng: -73.64401
  },
  {
    city: "Naperville",
    state: "Illinois",
    country: "United States",
    lat: 41.78586,
    lng: -88.14729
  },
  {
    city: "Cebu City",
    state: "Central Visayas",
    country: "Philippines",
    lat: 10.31672,
    lng: 123.89071
  },
  {
    city: "Reading",
    state: "England",
    country: "United Kingdom",
    lat: 51.45625,
    lng: -.97113
  },
  {
    city: "Palos Heights",
    state: "Illinois",
    country: "United States",
    lat: 41.66809,
    lng: -87.79644
  },
  {
    city: "Minsk",
    state: "Minsk",
    country: "Belarus",
    lat: 53.9,
    lng: 27.56667
  },
  {
    city: "Leeds",
    state: "England",
    country: "United Kingdom",
    lat: 53.79648,
    lng: -1.54785
  },
  {
    city: "Fort Hood",
    state: "Texas",
    country: "United States",
    lat: 31.13489,
    lng: -97.77561
  },
  {
    city: "East Los Angeles",
    state: "California",
    country: "United States",
    lat: 34.0239,
    lng: -118.17202
  },
  {
    city: "Stanford",
    state: "California",
    country: "United States",
    lat: 37.42411,
    lng: -122.16608
  },
  {
    city: "Guangzhou",
    state: "Guangdong",
    country: "China",
    lat: 23.11667,
    lng: 113.25
  },
  {
    city: "Henderson",
    state: "Nevada",
    country: "United States",
    lat: 36.0397,
    lng: -114.98194
  },
  {
    city: "Beverly Hills",
    state: "California",
    country: "United States",
    lat: 34.07362,
    lng: -118.40036
  },
  {
    city: "Robbinsdale",
    state: "Minnesota",
    country: "United States",
    lat: 45.03219,
    lng: -93.33856
  },
  {
    city: "Redding",
    state: "California",
    country: "United States",
    lat: 40.58654,
    lng: -122.39168
  },
  {
    city: "Meridian",
    state: "Mississippi",
    country: "United States",
    lat: 32.36431,
    lng: -88.70366
  },
  {
    city: "Brasilia",
    state: "Federal",
    country: "Brazil",
    lat: -15.77972,
    lng: -47.92972
  },
  {
    city: "Columbia",
    state: "Missouri",
    country: "United States",
    lat: 38.95171,
    lng: -92.33407
  },
  {
    city: "Fort Walton Beach",
    state: "Florida",
    country: "United States",
    lat: 30.40576,
    lng: -86.61884
  },
  {
    city: "Federal Way",
    state: "Washington",
    country: "United States",
    lat: 47.32232,
    lng: -122.31262
  },
  {
    city: "Jackson",
    state: "Tennessee",
    country: "United States",
    lat: 35.61452,
    lng: -88.81395
  },
  {
    city: "East Meadow",
    state: "New York",
    country: "United States",
    lat: 40.71399,
    lng: -73.55902
  },
  {
    city: "Fall River",
    state: "Massachusetts",
    country: "United States",
    lat: 41.70149,
    lng: -71.15505
  },
  {
    city: "Idaho Falls",
    state: "Idaho",
    country: "United States",
    lat: 43.46658,
    lng: -112.03414
  },
  {
    city: "Irvine",
    state: "California",
    country: "United States",
    lat: 33.66946,
    lng: -117.82311
  },
  {
    city: "Roseville",
    state: "California",
    country: "United States",
    lat: 38.75212,
    lng: -121.28801
  },
  {
    city: "Harvey",
    state: "Illinois",
    country: "United States",
    lat: 41.61003,
    lng: -87.64671
  },
  {
    city: "Daly City",
    state: "California",
    country: "United States",
    lat: 37.70577,
    lng: -122.46192
  },
  {
    city: "Fairbanks",
    state: "Alaska",
    country: "United States",
    lat: 64.83778,
    lng: -147.71639
  },
  {
    city: "Grosse Pointe",
    state: "Michigan",
    country: "United States",
    lat: 42.38615,
    lng: -82.91186
  },
  {
    city: "Pembroke Pines",
    state: "Florida",
    country: "United States",
    lat: 26.00315,
    lng: -80.22394
  },
  {
    city: "Temple",
    state: "Texas",
    country: "United States",
    lat: 31.09823,
    lng: -97.34278
  },
  {
    city: "Denton",
    state: "Texas",
    country: "United States",
    lat: 33.21484,
    lng: -97.13307
  },
  {
    city: "Flagstaff",
    state: "Arizona",
    country: "United States",
    lat: 35.19807,
    lng: -111.65127
  },
  {
    city: "Garden Grove",
    state: "California",
    country: "United States",
    lat: 33.77391,
    lng: -117.94145
  },
  {
    city: "Okinawa",
    state: "Okinawa",
    country: "Japan",
    lat: 26.33583,
    lng: 127.80139
  },
  {
    city: "Geelong",
    state: "Victoria",
    country: "Australia",
    lat: -38.14711,
    lng: 144.36069
  },
  {
    city: "Geneve",
    state: "Geneva",
    country: "Switzerland",
    lat: 46.20222,
    lng: 6.14569
  },
  {
    city: "San Pedro",
    state: "California",
    country: "United States",
    lat: 33.73585,
    lng: -118.29229
  },
  {
    city: "Brighton",
    state: "England",
    country: "United Kingdom",
    lat: 50.82838,
    lng: -.13947
  },
  {
    city: "Wheat Ridge",
    state: "Colorado",
    country: "United States",
    lat: 39.7661,
    lng: -105.07721
  },
  {
    city: "Yuba City",
    state: "California",
    country: "United States",
    lat: 39.14045,
    lng: -121.61691
  },
  {
    city: "Boynton Beach",
    state: "Florida",
    country: "United States",
    lat: 26.52535,
    lng: -80.06643
  },
  {
    city: "Bedford",
    state: "England",
    country: "United Kingdom",
    lat: 52.13459,
    lng: -.46632
  },
  {
    city: "Sumter",
    state: "South Carolina",
    country: "United States",
    lat: 33.92044,
    lng: -80.34147
  },
  {
    city: "Manassas",
    state: "Virginia",
    country: "United States",
    lat: 38.75095,
    lng: -77.47527
  },
  {
    city: "Woodbury",
    state: "New Jersey",
    country: "United States",
    lat: 39.83817,
    lng: -75.15268
  },
  {
    city: "Murray",
    state: "Utah",
    country: "United States",
    lat: 40.66689,
    lng: -111.88799
  },
  {
    city: "Methuen",
    state: "Massachusetts",
    country: "United States",
    lat: 42.7262,
    lng: -71.19089
  },
  {
    city: "Klang",
    state: "Selangor",
    country: "Malaysia",
    lat: 3.03333,
    lng: 101.45
  },
  {
    city: "Brockton",
    state: "Massachusetts",
    country: "United States",
    lat: 42.08343,
    lng: -71.01838
  },
  {
    city: "Glen Cove",
    state: "New York",
    country: "United States",
    lat: 40.86232,
    lng: -73.63374
  },
  {
    city: "Almaty",
    state: "Almaty Qalasy",
    country: "Kazakhstan",
    lat: 43.25654,
    lng: 76.92848
  },
  {
    city: "Layton",
    state: "Utah",
    country: "United States",
    lat: 41.06022,
    lng: -111.97105
  },
  {
    city: "Fayetteville",
    state: "Arkansas",
    country: "United States",
    lat: 36.06258,
    lng: -94.15743
  },
  {
    city: "Warren",
    state: "Michigan",
    country: "United States",
    lat: 42.47754,
    lng: -83.0277
  },
  {
    city: "Decatur",
    state: "Illinois",
    country: "United States",
    lat: 39.84031,
    lng: -88.9548
  },
  {
    city: "Kingston",
    state: "Ontario",
    country: "Canada",
    lat: 44.22976,
    lng: -76.48098
  },
  {
    city: "Flemington",
    state: "New Jersey",
    country: "United States",
    lat: 40.51233,
    lng: -74.85933
  },
  {
    city: "Champaign",
    state: "Illinois",
    country: "United States",
    lat: 40.11642,
    lng: -88.24338
  },
  {
    city: "Tamuning-Tumon-Harmon Village",
    state: "Tamuning",
    country: "Guam",
    lat: 13.48773,
    lng: 144.78138
  },
  {
    city: "Springfield",
    state: "Ohio",
    country: "United States",
    lat: 39.92423,
    lng: -83.80882
  },
  {
    city: "Holland",
    state: "Michigan",
    country: "United States",
    lat: 42.78752,
    lng: -86.10893
  },
  {
    city: "Asheville",
    state: "North Carolina",
    country: "United States",
    lat: 35.60095,
    lng: -82.55402
  },
  {
    city: "Daytona Beach",
    state: "Florida",
    country: "United States",
    lat: 29.21081,
    lng: -81.02283
  },
  {
    city: "Greeley",
    state: "Colorado",
    country: "United States",
    lat: 40.42331,
    lng: -104.70913
  },
  {
    city: "Lynn",
    state: "Massachusetts",
    country: "United States",
    lat: 42.46676,
    lng: -70.94949
  },
  {
    city: "Montebello",
    state: "California",
    country: "United States",
    lat: 34.00946,
    lng: -118.10535
  },
  {
    city: "Vilnius",
    state: "Vilniaus Apskritis",
    country: "Lithuania",
    lat: 54.68916,
    lng: 25.2798
  },
  {
    city: "Markham",
    state: "Ontario",
    country: "Canada",
    lat: 43.86682,
    lng: -79.2663
  },
  {
    city: "Mount Holly",
    state: "New Jersey",
    country: "United States",
    lat: 39.99289,
    lng: -74.78766
  },
  {
    city: "Lafayette",
    state: "Indiana",
    country: "United States",
    lat: 40.4167,
    lng: -86.87529
  },
  {
    city: "Georgetown",
    state: "Demerara-Mahaica",
    country: "Guyana",
    lat: 6.80448,
    lng: -58.15527
  },
  {
    city: "Chihuahua",
    state: "Chihuahua",
    country: "Mexico",
    lat: 28.63528,
    lng: -106.08889
  },
  {
    city: "Chico",
    state: "California",
    country: "United States",
    lat: 39.72849,
    lng: -121.83748
  },
  {
    city: "Busan",
    state: "Busan",
    country: "South Korea",
    lat: 35.10278,
    lng: 129.04028
  },
  {
    city: "Norman",
    state: "Oklahoma",
    country: "United States",
    lat: 35.22257,
    lng: -97.43948
  },
  {
    city: "Dunedin",
    state: "Otago",
    country: "New Zealand",
    lat: -45.87416,
    lng: 170.50361
  },
  {
    city: "Johnstown",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.32674,
    lng: -78.92197
  },
  {
    city: "Downey",
    state: "California",
    country: "United States",
    lat: 33.94001,
    lng: -118.13257
  },
  {
    city: "Longview",
    state: "Texas",
    country: "United States",
    lat: 32.5007,
    lng: -94.74049
  },
  {
    city: "Curitiba",
    state: "Paran",
    country: "Brazil",
    lat: -25.42778,
    lng: -49.27306
  },
  {
    city: "Longview",
    state: "Washington",
    country: "United States",
    lat: 46.13817,
    lng: -122.93817
  },
  {
    city: "Fort Bragg",
    state: "North Carolina",
    country: "United States",
    lat: 35.139,
    lng: -79.00603
  },
  {
    city: "Skopje",
    state: "Karpo",
    country: "Macedonia",
    lat: 41.99646,
    lng: 21.43141
  },
  {
    city: "Binghamton",
    state: "New York",
    country: "United States",
    lat: 42.09869,
    lng: -75.91797
  },
  {
    city: "Tallinn",
    state: "Harju",
    country: "Estonia",
    lat: 59.43696,
    lng: 24.75353
  },
  {
    city: "Spartanburg",
    state: "South Carolina",
    country: "United States",
    lat: 34.94957,
    lng: -81.93205
  },
  {
    city: "Varna",
    state: "Varna",
    country: "Bulgaria",
    lat: 43.21667,
    lng: 27.91667
  },
  {
    city: "Meriden",
    state: "Connecticut",
    country: "United States",
    lat: 41.53815,
    lng: -72.80704
  },
  {
    city: "Grand Forks",
    state: "North Dakota",
    country: "United States",
    lat: 47.92526,
    lng: -97.03285
  },
  {
    city: "Antioch",
    state: "California",
    country: "United States",
    lat: 38.00492,
    lng: -121.80579
  },
  {
    city: "Puyallup",
    state: "Washington",
    country: "United States",
    lat: 47.18538,
    lng: -122.2929
  },
  {
    city: "Pine Bluff",
    state: "Arkansas",
    country: "United States",
    lat: 34.22843,
    lng: -92.0032
  },
  {
    city: "Portsmouth",
    state: "New Hampshire",
    country: "United States",
    lat: 43.07176,
    lng: -70.76255
  },
  {
    city: "Vineland",
    state: "New Jersey",
    country: "United States",
    lat: 39.48623,
    lng: -75.02573
  },
  {
    city: "Tampere",
    state: "Western Finland",
    country: "Finland",
    lat: 61.49911,
    lng: 23.78712
  },
  {
    city: "Managua",
    state: "Managua",
    country: "Nicaragua",
    lat: 12.13282,
    lng: -86.2504
  },
  {
    city: "Pocatello",
    state: "Idaho",
    country: "United States",
    lat: 42.8713,
    lng: -112.44553
  },
  {
    city: "Fridley",
    state: "Minnesota",
    country: "United States",
    lat: 45.08608,
    lng: -93.26328
  },
  {
    city: "Yangon",
    state: "Yangon",
    country: "Myanmar",
    lat: 16.80528,
    lng: 96.15611
  },
  {
    city: "Gothenburg",
    state: "Vstra Gtaland",
    country: "Sweden",
    lat: 57.70716,
    lng: 11.96679
  },
  {
    city: "Coral Springs",
    state: "Florida",
    country: "United States",
    lat: 26.27119,
    lng: -80.2706
  },
  {
    city: "Saint Cloud",
    state: "Minnesota",
    country: "United States",
    lat: 45.5608,
    lng: -94.16249
  },
  {
    city: "Westminster",
    state: "California",
    country: "United States",
    lat: 33.75918,
    lng: -118.00673
  },
  {
    city: "Chicago Heights",
    state: "Illinois",
    country: "United States",
    lat: 41.50615,
    lng: -87.6356
  },
  {
    city: "Bryan",
    state: "Texas",
    country: "United States",
    lat: 30.67436,
    lng: -96.36996
  },
  {
    city: "North Bay",
    state: "Ontario",
    country: "Canada",
    lat: 46.3168,
    lng: -79.46633
  },
  {
    city: "Split",
    state: "Splitsko-Dalmatinska",
    country: "Croatia",
    lat: 43.50891,
    lng: 16.43915
  },
  {
    city: "Bishop",
    state: "California",
    country: "United States",
    lat: 37.36354,
    lng: -118.39511
  },
  {
    city: "Castro Valley",
    state: "California",
    country: "United States",
    lat: 37.6941,
    lng: -122.08635
  },
  {
    city: "Glendora",
    state: "California",
    country: "United States",
    lat: 34.13612,
    lng: -117.86534
  },
  {
    city: "Thousand Oaks",
    state: "California",
    country: "United States",
    lat: 34.17056,
    lng: -118.83759
  },
  {
    city: "Puebla",
    state: "Puebla",
    country: "Mexico",
    lat: 19.04334,
    lng: -98.20193
  },
  {
    city: "Exeter",
    state: "New Hampshire",
    country: "United States",
    lat: 42.98148,
    lng: -70.94783
  },
  {
    city: "Thunder Bay",
    state: "Ontario",
    country: "Canada",
    lat: 48.38202,
    lng: -89.25018
  },
  {
    city: "Jackson",
    state: "Michigan",
    country: "United States",
    lat: 42.24587,
    lng: -84.40135
  },
  {
    city: "Elmira",
    state: "New York",
    country: "United States",
    lat: 42.0898,
    lng: -76.80773
  },
  {
    city: "Walla Walla",
    state: "Washington",
    country: "United States",
    lat: 46.06458,
    lng: -118.34302
  },
  {
    city: "Panama City",
    state: "Florida",
    country: "United States",
    lat: 30.15946,
    lng: -85.65983
  },
  {
    city: "Blacktown",
    state: "New South Wales",
    country: "Australia",
    lat: -33.76667,
    lng: 150.91667
  },
  {
    city: "Valletta",
    state: "Il-Belt Valletta",
    country: "Malta",
    lat: 35.89972,
    lng: 14.51472
  },
  {
    city: "Stoneham",
    state: "Massachusetts",
    country: "United States",
    lat: 42.4801,
    lng: -71.0995
  },
  {
    city: "Baghdad",
    state: "Mayorality of Baghdad",
    country: "Iraq",
    lat: 33.34058,
    lng: 44.40088
  },
  {
    city: "Pittsfield",
    state: "Massachusetts",
    country: "United States",
    lat: 42.45008,
    lng: -73.24538
  },
  {
    city: "Dammam",
    state: "Eastern Province",
    country: "Saudi Arabia",
    lat: 26.43442,
    lng: 50.10326
  },
  {
    city: "Highland Park",
    state: "Illinois",
    country: "United States",
    lat: 42.18169,
    lng: -87.80034
  },
  {
    city: "Iasi",
    state: "Iai",
    country: "Romania",
    lat: 47.16667,
    lng: 27.6
  },
  {
    city: "Oceanside",
    state: "New York",
    country: "United States",
    lat: 40.63871,
    lng: -73.64013
  },
  {
    city: "Southampton",
    state: "England",
    country: "United Kingdom",
    lat: 50.90395,
    lng: -1.40428
  },
  {
    city: "Altoona",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.51868,
    lng: -78.39474
  },
  {
    city: "Culver City",
    state: "California",
    country: "United States",
    lat: 34.02112,
    lng: -118.39647
  },
  {
    city: "Eau Claire",
    state: "Wisconsin",
    country: "United States",
    lat: 44.81135,
    lng: -91.49849
  },
  {
    city: "Baku",
    state: "Baki",
    country: "Azerbaijan",
    lat: 40.37767,
    lng: 49.89201
  },
  {
    city: "Utica",
    state: "New York",
    country: "United States",
    lat: 43.1009,
    lng: -75.23266
  },
  {
    city: "Kettering",
    state: "Ohio",
    country: "United States",
    lat: 39.6895,
    lng: -84.16883
  },
  {
    city: "Pune",
    state: "Maharashtra",
    country: "India",
    lat: 18.51957,
    lng: 73.85535
  },
  {
    city: "Troy",
    state: "New York",
    country: "United States",
    lat: 42.72841,
    lng: -73.69179
  },
  {
    city: "Pueblo",
    state: "Colorado",
    country: "United States",
    lat: 38.25445,
    lng: -104.60914
  },
  {
    city: "Casablanca",
    state: "Grand Casablanca",
    country: "Morocco",
    lat: 33.58831,
    lng: -7.61138
  },
  {
    city: "Lethbridge",
    state: "Alberta",
    country: "Canada",
    lat: 49.69999,
    lng: -112.81856
  },
  {
    city: "Richland",
    state: "Washington",
    country: "United States",
    lat: 46.28569,
    lng: -119.28446
  },
  {
    city: "Niskayuna",
    state: "New York",
    country: "United States",
    lat: 42.7798,
    lng: -73.84568
  },
  {
    city: "Woodland",
    state: "California",
    country: "United States",
    lat: 38.67852,
    lng: -121.7733
  },
  {
    city: "Turlock",
    state: "California",
    country: "United States",
    lat: 37.49466,
    lng: -120.84659
  },
  {
    city: "Agana Heights Village",
    state: "Agana Heights",
    country: "Guam",
    lat: 13.46559,
    lng: 144.74795
  },
  {
    city: "Marrero",
    state: "Louisiana",
    country: "United States",
    lat: 29.89937,
    lng: -90.10035
  },
  {
    city: "Lawrence",
    state: "Kansas",
    country: "United States",
    lat: 38.97167,
    lng: -95.23525
  },
  {
    city: "Luxembourg",
    state: "Luxembourg",
    country: "Luxembourg",
    lat: 49.61167,
    lng: 6.13
  },
  {
    city: "San Gabriel",
    state: "California",
    country: "United States",
    lat: 34.09611,
    lng: -118.10583
  },
  {
    city: "Hyannis",
    state: "Massachusetts",
    country: "United States",
    lat: 41.65289,
    lng: -70.2828
  },
  {
    city: "Parkersburg",
    state: "West Virginia",
    country: "United States",
    lat: 39.26674,
    lng: -81.56151
  },
  {
    city: "Doylestown",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.31011,
    lng: -75.12989
  },
  {
    city: "Garden City",
    state: "Michigan",
    country: "United States",
    lat: 42.32559,
    lng: -83.33104
  },
  {
    city: "Ipswich",
    state: "England",
    country: "United Kingdom",
    lat: 52.05917,
    lng: 1.15545
  },
  {
    city: "Munster",
    state: "Indiana",
    country: "United States",
    lat: 41.56448,
    lng: -87.51254
  },
  {
    city: "Plymouth",
    state: "Massachusetts",
    country: "United States",
    lat: 41.95844,
    lng: -70.66726
  },
  {
    city: "Watertown",
    state: "New York",
    country: "United States",
    lat: 43.97478,
    lng: -75.91076
  },
  {
    city: "Covina",
    state: "California",
    country: "United States",
    lat: 34.09001,
    lng: -117.89034
  },
  {
    city: "Laguna Hills",
    state: "California",
    country: "United States",
    lat: 33.5956,
    lng: -117.70031
  },
  {
    city: "Cheyenne",
    state: "Wyoming",
    country: "United States",
    lat: 41.13998,
    lng: -104.82025
  },
  {
    city: "Creve Coeur",
    state: "Missouri",
    country: "United States",
    lat: 38.66089,
    lng: -90.42262
  },
  {
    city: "Holyoke",
    state: "Massachusetts",
    country: "United States",
    lat: 42.20426,
    lng: -72.6162
  },
  {
    city: "Arcadia",
    state: "California",
    country: "United States",
    lat: 34.13973,
    lng: -118.03534
  },
  {
    city: "Quincy",
    state: "Massachusetts",
    country: "United States",
    lat: 42.25288,
    lng: -71.00227
  },
  {
    city: "Bloomington",
    state: "Indiana",
    country: "United States",
    lat: 39.16532,
    lng: -86.52639
  },
  {
    city: "New Westminster",
    state: "British Columbia",
    country: "Canada",
    lat: 49.20678,
    lng: -122.91092
  },
  {
    city: "Clovis",
    state: "California",
    country: "United States",
    lat: 36.82523,
    lng: -119.70292
  },
  {
    city: "San Rafael",
    state: "California",
    country: "United States",
    lat: 37.97353,
    lng: -122.53109
  },
  {
    city: "Livonia",
    state: "Michigan",
    country: "United States",
    lat: 42.36837,
    lng: -83.35271
  },
  {
    city: "Napa",
    state: "California",
    country: "United States",
    lat: 38.29714,
    lng: -122.28553
  },
  {
    city: "Manhattan",
    state: "Kansas",
    country: "United States",
    lat: 39.18361,
    lng: -96.57167
  },
  {
    city: "Webster",
    state: "Texas",
    country: "United States",
    lat: 29.53773,
    lng: -95.11826
  },
  {
    city: "Nicosia",
    state: "Lefkosia",
    country: "Cyprus",
    lat: 35.16667,
    lng: 33.36667
  },
  {
    city: "Huntington",
    state: "West Virginia",
    country: "United States",
    lat: 38.41925,
    lng: -82.44515
  },
  {
    city: "Cairns",
    state: "Queensland",
    country: "Australia",
    lat: -16.92304,
    lng: 145.76625
  },
  {
    city: "Waukesha",
    state: "Wisconsin",
    country: "United States",
    lat: 43.01168,
    lng: -88.23148
  },
  {
    city: "Perth Amboy",
    state: "New Jersey",
    country: "United States",
    lat: 40.50677,
    lng: -74.26542
  },
  {
    city: "American Fork",
    state: "Utah",
    country: "United States",
    lat: 40.3769,
    lng: -111.79576
  },
  {
    city: "Lyon",
    state: "Rhne-Alpes",
    country: "France",
    lat: 45.74846,
    lng: 4.84671
  },
  {
    city: "Heidelberg",
    state: "Baden-Wrttemberg",
    country: "Germany",
    lat: 49.40768,
    lng: 8.69079
  },
  {
    city: "Nanjing",
    state: "Jiangsu Sheng",
    country: "China",
    lat: 32.06167,
    lng: 118.77778
  },
  {
    city: "Riverdale",
    state: "Georgia",
    country: "United States",
    lat: 33.57261,
    lng: -84.41326
  },
  {
    city: "Garfield Heights",
    state: "Ohio",
    country: "United States",
    lat: 41.417,
    lng: -81.60596
  },
  {
    city: "Watsonville",
    state: "California",
    country: "United States",
    lat: 36.91023,
    lng: -121.75689
  },
  {
    city: "Marquette",
    state: "Michigan",
    country: "United States",
    lat: 46.54354,
    lng: -87.39542
  },
  {
    city: "Florence",
    state: "South Carolina",
    country: "United States",
    lat: 34.19543,
    lng: -79.76256
  },
  {
    city: "Pawtucket",
    state: "Rhode Island",
    country: "United States",
    lat: 41.87871,
    lng: -71.38256
  },
  {
    city: "Waterville",
    state: "Maine",
    country: "United States",
    lat: 44.55201,
    lng: -69.63171
  },
  {
    city: "Warner Robins",
    state: "Georgia",
    country: "United States",
    lat: 32.62098,
    lng: -83.5999
  },
  {
    city: "Stoughton",
    state: "Massachusetts",
    country: "United States",
    lat: 42.1251,
    lng: -71.10227
  },
  {
    city: "Lawrence",
    state: "Massachusetts",
    country: "United States",
    lat: 42.70704,
    lng: -71.16311
  },
  {
    city: "South Miami",
    state: "Florida",
    country: "United States",
    lat: 25.7076,
    lng: -80.29338
  },
  {
    city: "West Hills",
    state: "California",
    country: "United States",
    lat: 34.19731,
    lng: -118.64398
  },
  {
    city: "Gold Coast",
    state: "Queensland",
    country: "Australia",
    lat: -28.00029,
    lng: 153.43088
  },
  {
    city: "Ballarat",
    state: "Victoria",
    country: "Australia",
    lat: -37.56622,
    lng: 143.84957
  },
  {
    city: "Mount Vernon",
    state: "New York",
    country: "United States",
    lat: 40.9126,
    lng: -73.83708
  },
  {
    city: "Plymouth",
    state: "England",
    country: "United Kingdom",
    lat: 50.37153,
    lng: -4.14305
  },
  {
    city: "Minot",
    state: "North Dakota",
    country: "United States",
    lat: 48.23251,
    lng: -101.29627
  },
  {
    city: "Littleton",
    state: "Colorado",
    country: "United States",
    lat: 39.61332,
    lng: -105.01665
  },
  {
    city: "Prague",
    state: "Praha",
    country: "Czech Republic",
    lat: 50.08804,
    lng: 14.42076
  },
  {
    city: "Urbana",
    state: "Illinois",
    country: "United States",
    lat: 40.11059,
    lng: -88.20727
  },
  {
    city: "Midland",
    state: "Michigan",
    country: "United States",
    lat: 43.61558,
    lng: -84.24721
  },
  {
    city: "Amman",
    state: "Amman",
    country: "Jordan",
    lat: 31.95522,
    lng: 35.94503
  },
  {
    city: "Bozeman",
    state: "Montana",
    country: "United States",
    lat: 45.67965,
    lng: -111.03856
  },
  {
    city: "Medan",
    state: "North Sumatra",
    country: "Indonesia",
    lat: 3.58333,
    lng: 98.66667
  },
  {
    city: "Worcester",
    state: "England",
    country: "United Kingdom",
    lat: 52.18935,
    lng: -2.22001
  },
  {
    city: "Sioux City",
    state: "Iowa",
    country: "United States",
    lat: 42.49999,
    lng: -96.40031
  },
  {
    city: "Hamilton",
    state: "Ohio",
    country: "United States",
    lat: 39.3995,
    lng: -84.56134
  },
  {
    city: "Artesia",
    state: "California",
    country: "United States",
    lat: 33.86585,
    lng: -118.08312
  },
  {
    city: "Kingston",
    state: "New York",
    country: "United States",
    lat: 41.92704,
    lng: -73.99736
  },
  {
    city: "Mission Hills",
    state: "California",
    country: "United States",
    lat: 34.68609,
    lng: -120.43683
  },
  {
    city: "Bedford",
    state: "Texas",
    country: "United States",
    lat: 32.84402,
    lng: -97.14307
  },
  {
    city: "Newcastle upon Tyne",
    state: "England",
    country: "United Kingdom",
    lat: 54.97328,
    lng: -1.61396
  },
  {
    city: "Penticton",
    state: "British Columbia",
    country: "Canada",
    lat: 49.48062,
    lng: -119.58584
  },
  {
    city: "Newmarket",
    state: "Ontario",
    country: "Canada",
    lat: 44.05011,
    lng: -79.46631
  },
  {
    city: "St. Catharines",
    state: "Ontario",
    country: "Canada",
    lat: 43.17126,
    lng: -79.24267
  },
  {
    city: "Maywood",
    state: "Illinois",
    country: "United States",
    lat: 41.8792,
    lng: -87.84312
  },
  {
    city: "Elkhart",
    state: "Indiana",
    country: "United States",
    lat: 41.68199,
    lng: -85.97667
  },
  {
    city: "Quito",
    state: "Pichincha",
    country: "Ecuador",
    lat: -.22985,
    lng: -78.52495
  },
  {
    city: "Wichita Falls",
    state: "Texas",
    country: "United States",
    lat: 33.91371,
    lng: -98.49339
  },
  {
    city: "Mankato",
    state: "Minnesota",
    country: "United States",
    lat: 44.16358,
    lng: -93.9994
  },
  {
    city: "Alameda",
    state: "California",
    country: "United States",
    lat: 37.76521,
    lng: -122.24164
  },
  {
    city: "Darby",
    state: "Pennsylvania",
    country: "United States",
    lat: 39.91845,
    lng: -75.25907
  },
  {
    city: "Porto",
    state: "Porto",
    country: "Portugal",
    lat: 41.14961,
    lng: -8.61099
  },
  {
    city: "Johnson City",
    state: "New York",
    country: "United States",
    lat: 42.11563,
    lng: -75.95881
  },
  {
    city: "Mount Vernon",
    state: "Washington",
    country: "United States",
    lat: 48.42122,
    lng: -122.33405
  },
  {
    city: "Wilkes-Barre",
    state: "Pennsylvania",
    country: "United States",
    lat: 41.24591,
    lng: -75.88131
  },
  {
    city: "Victoria",
    state: "Texas",
    country: "United States",
    lat: 28.80527,
    lng: -97.0036
  },
  {
    city: "Norwich",
    state: "England",
    country: "United Kingdom",
    lat: 52.62783,
    lng: 1.29834
  },
  {
    city: "Ciudad Juarez",
    state: "Chihuahua",
    country: "Mexico",
    lat: 31.73333,
    lng: -106.48333
  },
  {
    city: "Woodbridge",
    state: "Virginia",
    country: "United States",
    lat: 38.65817,
    lng: -77.2497
  },
  {
    city: "Saratoga Springs",
    state: "New York",
    country: "United States",
    lat: 43.08313,
    lng: -73.78457
  },
  {
    city: "Hillsboro",
    state: "Oregon",
    country: "United States",
    lat: 45.52289,
    lng: -122.98983
  },
  {
    city: "Naples",
    state: "Florida",
    country: "United States",
    lat: 26.14204,
    lng: -81.79481
  },
  {
    city: "Newburyport",
    state: "Massachusetts",
    country: "United States",
    lat: 42.81259,
    lng: -70.87728
  },
  {
    city: "Williamsport",
    state: "Pennsylvania",
    country: "United States",
    lat: 41.24119,
    lng: -77.00108
  },
  {
    city: "Alton",
    state: "Illinois",
    country: "United States",
    lat: 38.8906,
    lng: -90.18428
  },
  {
    city: "Patchogue",
    state: "New York",
    country: "United States",
    lat: 40.76565,
    lng: -73.01511
  },
  {
    city: "Geneva",
    state: "Illinois",
    country: "United States",
    lat: 41.88753,
    lng: -88.30535
  },
  {
    city: "Valdosta",
    state: "Georgia",
    country: "United States",
    lat: 30.8327,
    lng: -83.27849
  },
  {
    city: "Fortaleza",
    state: "Cear",
    country: "Brazil",
    lat: -3.71722,
    lng: -38.54306
  },
  {
    city: "Faisalabad",
    state: "Punjab",
    country: "Pakistan",
    lat: 31.41667,
    lng: 73.08333
  },
  {
    city: "Falmouth",
    state: "Massachusetts",
    country: "United States",
    lat: 41.5515,
    lng: -70.61475
  },
  {
    city: "East Point",
    state: "Georgia",
    country: "United States",
    lat: 33.67955,
    lng: -84.43937
  },
  {
    city: "Constanta",
    state: "Constana",
    country: "Romania",
    lat: 44.18073,
    lng: 28.63432
  },
  {
    city: "Lodi",
    state: "California",
    country: "United States",
    lat: 38.1302,
    lng: -121.27245
  },
  {
    city: "Hoffman Estates",
    state: "Illinois",
    country: "United States",
    lat: 42.04281,
    lng: -88.0798
  },
  {
    city: "Painesville",
    state: "Ohio",
    country: "United States",
    lat: 41.72449,
    lng: -81.24566
  },
  {
    city: "Ithaca",
    state: "New York",
    country: "United States",
    lat: 42.44063,
    lng: -76.49661
  },
  {
    city: "Chelmsford",
    state: "England",
    country: "United Kingdom",
    lat: 51.73575,
    lng: .46958
  },
  {
    city: "North Vancouver",
    state: "British Columbia",
    country: "Canada",
    lat: 49.31636,
    lng: -123.06934
  },
  {
    city: "Ada",
    state: "Oklahoma",
    country: "United States",
    lat: 34.77453,
    lng: -96.67834
  },
  {
    city: "Clearwater",
    state: "Florida",
    country: "United States",
    lat: 27.96585,
    lng: -82.8001
  },
  {
    city: "Oregon City",
    state: "Oregon",
    country: "United States",
    lat: 45.35734,
    lng: -122.60676
  },
  {
    city: "Whangarei",
    state: "Northland",
    country: "New Zealand",
    lat: -35.73167,
    lng: 174.32391
  },
  {
    city: "Flowood",
    state: "Mississippi",
    country: "United States",
    lat: 32.30959,
    lng: -90.13898
  },
  {
    city: "Krakow",
    state: "Lesser Poland Voivodeship",
    country: "Poland",
    lat: 50.06143,
    lng: 19.93658
  },
  {
    city: "Port Arthur",
    state: "Texas",
    country: "United States",
    lat: 29.89883,
    lng: -93.92878
  },
  {
    city: "Southampton",
    state: "New York",
    country: "United States",
    lat: 40.88427,
    lng: -72.38953
  },
  {
    city: "Gastonia",
    state: "North Carolina",
    country: "United States",
    lat: 35.26208,
    lng: -81.1873
  },
  {
    city: "Watford",
    state: "England",
    country: "United Kingdom",
    lat: 51.65531,
    lng: -.39602
  },
  {
    city: "Sherbrooke",
    state: "Quebec",
    country: "Canada",
    lat: 45.40008,
    lng: -71.89908
  },
  {
    city: "Wailuku",
    state: "Hawaii",
    country: "United States",
    lat: 20.89111,
    lng: -156.50472
  },
  {
    city: "Oxford",
    state: "England",
    country: "United Kingdom",
    lat: 51.75222,
    lng: -1.25596
  },
  {
    city: "Edmonds",
    state: "Washington",
    country: "United States",
    lat: 47.81065,
    lng: -122.37736
  },
  {
    city: "Derby",
    state: "England",
    country: "United Kingdom",
    lat: 52.92277,
    lng: -1.47663
  },
  {
    city: "Houma",
    state: "Louisiana",
    country: "United States",
    lat: 29.59577,
    lng: -90.71953
  },
  {
    city: "North Bergen",
    state: "New Jersey",
    country: "United States",
    lat: 40.80427,
    lng: -74.01208
  },
  {
    city: "Gainesville",
    state: "Georgia",
    country: "United States",
    lat: 34.29788,
    lng: -83.82407
  },
  {
    city: "State College",
    state: "Pennsylvania",
    country: "United States",
    lat: 40.7934,
    lng: -77.86
  },
  {
    city: "Baguio",
    state: "Cordillera Administrative Region",
    country: "Philippines",
    lat: 16.41639,
    lng: 120.59306
  },
  {
    city: "Montclair",
    state: "California",
    country: "United States",
    lat: 34.07751,
    lng: -117.68978
  },
  {
    city: "Valencia",
    state: "California",
    country: "United States",
    lat: 34.44361,
    lng: -118.60953
  },
  {
    city: "Syosset",
    state: "New York",
    country: "United States",
    lat: 40.82621,
    lng: -73.50207
  },
  {
    city: "Wheeling",
    state: "West Virginia",
    country: "United States",
    lat: 40.06396,
    lng: -80.72091
  },
  {
    city: "Kelowna",
    state: "British Columbia",
    country: "Canada",
    lat: 49.88307,
    lng: -119.48568
  },
  {
    city: "Bowling Green",
    state: "Kentucky",
    country: "United States",
    lat: 36.99032,
    lng: -86.4436
  },
  {
    city: "Nanaimo",
    state: "British Columbia",
    country: "Canada",
    lat: 49.16638,
    lng: -123.94003
  },
  {
    city: "Beaufort",
    state: "South Carolina",
    country: "United States",
    lat: 32.43158,
    lng: -80.66983
  },
  {
    city: "Attleboro",
    state: "Massachusetts",
    country: "United States",
    lat: 41.94454,
    lng: -71.28561
  },
  {
    city: "Niagara Falls",
    state: "New York",
    country: "United States",
    lat: 43.0945,
    lng: -79.05671
  },
  {
    city: "Hanford",
    state: "California",
    country: "United States",
    lat: 36.32745,
    lng: -119.64568
  },
  {
    city: "San Angelo",
    state: "Texas",
    country: "United States",
    lat: 31.46377,
    lng: -100.43704
  },
  {
    city: "Brunswick",
    state: "Maine",
    country: "United States",
    lat: 43.91452,
    lng: -69.96533
  },
  {
    city: "Trenton",
    state: "Michigan",
    country: "United States",
    lat: 42.13949,
    lng: -83.17826
  },
  {
    city: "Muskegon",
    state: "Michigan",
    country: "United States",
    lat: 43.23418,
    lng: -86.24839
  },
  {
    city: "Evergreen Park",
    state: "Illinois",
    country: "United States",
    lat: 41.72059,
    lng: -87.70172
  },
  {
    city: "DeKalb",
    state: "Illinois",
    country: "United States",
    lat: 41.92947,
    lng: -88.75036
  },
  {
    city: "Haarlem",
    state: "North Holland",
    country: "Netherlands",
    lat: 52.38084,
    lng: 4.63683
  },
  {
    city: "Greenwood",
    state: "South Carolina",
    country: "United States",
    lat: 34.1954,
    lng: -82.16179
  },
  {
    city: "Rotorua",
    state: "Bay of Plenty",
    country: "New Zealand",
    lat: -38.13874,
    lng: 176.24516
  },
  {
    city: "West Allis",
    state: "Wisconsin",
    country: "United States",
    lat: 43.01668,
    lng: -88.00703
  },
  {
    city: "Tirana",
    state: "Tiran",
    country: "Albania",
    lat: 41.3275,
    lng: 19.81889
  },
  {
    city: "Cambridge",
    state: "England",
    country: "United Kingdom",
    lat: 52.2,
    lng: .11667
  },
  {
    city: "Roseburg",
    state: "Oregon",
    country: "United States",
    lat: 43.2165,
    lng: -123.34174
  },
  {
    city: "Janesville",
    state: "Wisconsin",
    country: "United States",
    lat: 42.68279,
    lng: -89.01872
  },
  {
    city: "El Centro",
    state: "California",
    country: "United States",
    lat: 32.792,
    lng: -115.56305
  },
  {
    city: "Lucknow",
    state: "Uttar Pradesh",
    country: "India",
    lat: 26.83928,
    lng: 80.92313
  },
  {
    city: "Camarillo",
    state: "California",
    country: "United States",
    lat: 34.21639,
    lng: -119.0376
  },
  {
    city: "Rochester Hills",
    state: "Michigan",
    country: "United States",
    lat: 42.65837,
    lng: -83.14993
  },
  {
    city: "Hanover",
    state: "New Hampshire",
    country: "United States",
    lat: 43.70229,
    lng: -72.28954
  },
  {
    city: "Grand Junction",
    state: "Colorado",
    country: "United States",
    lat: 39.06387,
    lng: -108.55065
  },
  {
    city: "Oak Ridge",
    state: "Tennessee",
    country: "United States",
    lat: 36.01036,
    lng: -84.26964
  },
  {
    city: "Waterloo",
    state: "Iowa",
    country: "United States",
    lat: 42.49276,
    lng: -92.34296
  },
  {
    city: "Daegu",
    state: "Daegu",
    country: "South Korea",
    lat: 35.87028,
    lng: 128.59111
  },
  {
    city: "Port Chester",
    state: "New York",
    country: "United States",
    lat: 41.00176,
    lng: -73.66568
  },
  {
    city: "Pristina",
    state: "Komuna e Prishtins",
    country: "Kosovo",
    lat: 42.67272,
    lng: 21.16688
  },
  {
    city: "Thessaloniki",
    state: "Central Macedonia",
    country: "Greece",
    lat: 40.64362,
    lng: 22.93086
  },
  {
    city: "Opelika",
    state: "Alabama",
    country: "United States",
    lat: 32.64541,
    lng: -85.37828
  },
  {
    city: "Dubuque",
    state: "Iowa",
    country: "United States",
    lat: 42.50056,
    lng: -90.66457
  },
  {
    city: "Myrtle Beach",
    state: "South Carolina",
    country: "United States",
    lat: 33.68906,
    lng: -78.88669
  },
  {
    city: "Westerville",
    state: "Ohio",
    country: "United States",
    lat: 40.12617,
    lng: -82.92907
  },
  {
    city: "Lakeland",
    state: "Florida",
    country: "United States",
    lat: 28.03947,
    lng: -81.9498
  },
  {
    city: "Harlingen",
    state: "Texas",
    country: "United States",
    lat: 26.19063,
    lng: -97.6961
  },
  {
    city: "Waltham",
    state: "Massachusetts",
    country: "United States",
    lat: 42.37649,
    lng: -71.23561
  },
  {
    city: "Harare",
    state: "Harare",
    country: "Zimbabwe",
    lat: -17.82772,
    lng: 31.05337
  },
  {
    city: "Caguas",
    state: "Caguas",
    country: "Puerto Rico",
    lat: 18.23412,
    lng: -66.0485
  },
  {
    city: "Fairview Park",
    state: "Ohio",
    country: "United States",
    lat: 41.44144,
    lng: -81.8643
  },
  {
    city: "Middlesbrough",
    state: "England",
    country: "United Kingdom",
    lat: 54.57623,
    lng: -1.23483
  },
  {
    city: "Antwerpen",
    state: "Flemish Region",
    country: "Belgium",
    lat: 51.21989,
    lng: 4.40346
  },
  {
    city: "Stratford",
    state: "New Jersey",
    country: "United States",
    lat: 39.82678,
    lng: -75.01545
  },
  {
    city: "Cordoba",
    state: "Crdoba",
    country: "Argentina",
    lat: -31.4135,
    lng: -64.18105
  },
  {
    city: "Fort Knox",
    state: "Kentucky",
    country: "United States",
    lat: 37.89113,
    lng: -85.96363
  },
  {
    city: "Manama",
    state: "Manama",
    country: "Bahrain",
    lat: 26.21536,
    lng: 50.5832
  },
  {
    city: "Corvallis",
    state: "Oregon",
    country: "United States",
    lat: 44.56457,
    lng: -123.26204
  },
  {
    city: "Nampa",
    state: "Idaho",
    country: "United States",
    lat: 43.54072,
    lng: -116.56346
  },
  {
    city: "Mackay",
    state: "Queensland",
    country: "Australia",
    lat: -21.15345,
    lng: 149.16554
  },
  {
    city: "Suva",
    state: "Central",
    country: "Fiji",
    lat: -18.14161,
    lng: 178.44149
  },
  {
    city: "Peterborough",
    state: "New Hampshire",
    country: "United States",
    lat: 42.87064,
    lng: -71.95175
  },
  {
    city: "Jonesboro",
    state: "Arkansas",
    country: "United States",
    lat: 35.8423,
    lng: -90.70428
  },
  {
    city: "Sault Ste. Marie",
    state: "Ontario",
    country: "Canada",
    lat: 46.51677,
    lng: -84.33325
  },
  {
    city: "Normal",
    state: "Illinois",
    country: "United States",
    lat: 40.5142,
    lng: -88.99063
  },
  {
    city: "Richmond",
    state: "British Columbia",
    country: "Canada",
    lat: 49.17003,
    lng: -123.13683
  },
  {
    city: "Snellville",
    state: "Georgia",
    country: "United States",
    lat: 33.85733,
    lng: -84.01991
  },
  {
    city: "Gloucester",
    state: "England",
    country: "United Kingdom",
    lat: 51.86568,
    lng: -2.2431
  },
  {
    city: "Winter Haven",
    state: "Florida",
    country: "United States",
    lat: 28.02224,
    lng: -81.73286
  },
  {
    city: "Kenosha",
    state: "Wisconsin",
    country: "United States",
    lat: 42.58474,
    lng: -87.82119
  },
  {
    city: "Athens",
    state: "Georgia",
    country: "United States",
    lat: 33.96095,
    lng: -83.37794
  },
  {
    city: "Tuscaloosa",
    state: "Alabama",
    country: "United States",
    lat: 33.20984,
    lng: -87.56917
  },
  {
    city: "Murfreesboro",
    state: "Tennessee",
    country: "United States",
    lat: 35.84562,
    lng: -86.39027
  },
  {
    city: "Des Plaines",
    state: "Illinois",
    country: "United States",
    lat: 42.03336,
    lng: -87.8834
  },
  {
    city: "Traverse City",
    state: "Michigan",
    country: "United States",
    lat: 44.76306,
    lng: -85.62063
  },
  {
    city: "Farmington Hills",
    state: "Michigan",
    country: "United States",
    lat: 42.48531,
    lng: -83.37716
  },
  {
    city: "Muncie",
    state: "Indiana",
    country: "United States",
    lat: 40.19338,
    lng: -85.38636
  },
  {
    city: "Florence",
    state: "Alabama",
    country: "United States",
    lat: 34.79981,
    lng: -87.67725
  },
  {
    city: "Valencia",
    state: "Carabobo",
    country: "Venezuela",
    lat: 10.16202,
    lng: -68.00765
  },
  {
    city: "Poole",
    state: "England",
    country: "United Kingdom",
    lat: 50.71667,
    lng: -2
  },
  {
    city: "Gaithersburg",
    state: "Maryland",
    country: "United States",
    lat: 39.14344,
    lng: -77.20137
  },
  {
    city: "Dalton",
    state: "Georgia",
    country: "United States",
    lat: 34.7698,
    lng: -84.97022
  },
  {
    city: "Newport",
    state: "Rhode Island",
    country: "United States",
    lat: 41.4901,
    lng: -71.31283
  },
  {
    city: "Laguna Beach",
    state: "California",
    country: "United States",
    lat: 33.54225,
    lng: -117.78311
  },
  {
    city: "Ulaanbaatar",
    state: "Ulaanbaatar",
    country: "Mongolia",
    lat: 47.90771,
    lng: 106.88324
  },
  {
    city: "Banja Luka",
    state: "Republika Srpska",
    country: "Bosnia and Herzegovina",
    lat: 44.77583,
    lng: 17.18556
  },
  {
    city: "Leonardtown",
    state: "Maryland",
    country: "United States",
    lat: 38.29124,
    lng: -76.63579
  },
  {
    city: "Danville",
    state: "Virginia",
    country: "United States",
    lat: 36.58597,
    lng: -79.39502
  },
  {
    city: "Fort Smith",
    state: "Arkansas",
    country: "United States",
    lat: 35.38592,
    lng: -94.39855
  },
  {
    city: "Rahway",
    state: "New Jersey",
    country: "United States",
    lat: 40.60816,
    lng: -74.27765
  },
  {
    city: "Albany",
    state: "Georgia",
    country: "United States",
    lat: 31.57851,
    lng: -84.15574
  },
  {
    city: "Owensboro",
    state: "Kentucky",
    country: "United States",
    lat: 37.77422,
    lng: -87.11333
  },
  {
    city: "Dundee",
    state: "Scotland",
    country: "United Kingdom",
    lat: 56.46913,
    lng: -2.97489
  },
  {
    city: "Port Angeles",
    state: "Washington",
    country: "United States",
    lat: 48.11815,
    lng: -123.43074
  },
  {
    city: "Greenville",
    state: "North Carolina",
    country: "United States",
    lat: 35.61266,
    lng: -77.36635
  },
  {
    city: "Rock Springs",
    state: "Wyoming",
    country: "United States",
    lat: 41.58746,
    lng: -109.2029
  },
  {
    city: "Franklin",
    state: "Indiana",
    country: "United States",
    lat: 39.48061,
    lng: -86.05499
  },
  {
    city: "Troy",
    state: "Michigan",
    country: "United States",
    lat: 42.60559,
    lng: -83.14993
  },
  {
    city: "Chengdu",
    state: "Sichuan",
    country: "China",
    lat: 30.66667,
    lng: 104.06667
  },
  {
    city: "Saint Charles",
    state: "Missouri",
    country: "United States",
    lat: 38.78394,
    lng: -90.48123
  },
  {
    city: "Hays",
    state: "Kansas",
    country: "United States",
    lat: 38.87918,
    lng: -99.32677
  },
  {
    city: "Carrollton",
    state: "Texas",
    country: "United States",
    lat: 32.95373,
    lng: -96.89028
  },
  {
    city: "Carbondale",
    state: "Illinois",
    country: "United States",
    lat: 37.72727,
    lng: -89.21675
  },
  {
    city: "Chesapeake",
    state: "Virginia",
    country: "United States",
    lat: 36.81904,
    lng: -76.27494
  },
  {
    city: "Rome",
    state: "New York",
    country: "United States",
    lat: 43.21285,
    lng: -75.45573
  },
  {
    city: "Grande Prairie",
    state: "Alberta",
    country: "Canada",
    lat: 55.16667,
    lng: -118.80271
  },
  {
    city: "Chertsey",
    state: "England",
    country: "United Kingdom",
    lat: 51.38812,
    lng: -.50782
  },
  {
    city: "Merrillville",
    state: "Indiana",
    country: "United States",
    lat: 41.48281,
    lng: -87.33281
  },
  {
    city: "Sydney",
    state: "Nova Scotia",
    country: "Canada",
    lat: 46.1351,
    lng: -60.1831
  },
  {
    city: "Stratford",
    state: "Ontario",
    country: "Canada",
    lat: 43.36679,
    lng: -80.94972
  },
  {
    city: "Poway",
    state: "California",
    country: "United States",
    lat: 32.96282,
    lng: -117.03586
  }
];
!
function() {
  var l = "https://astro-charts.com",
    t = l + "/client/common/widget/css/widget.css";
  $("link[href='" + t + "']").length || $("<link>", {
      rel: "stylesheet",
      type: "text/css",
      href: t
    }).appendTo("head"),
    $("<link>", {
      rel: "stylesheet",
      type: "text/css",
      href: "https://fonts.googleapis.com/css?family=Gilda+Display|Josefin+Sans"
    }).appendTo("head");
  AstroChart = function(t, g, e, n) {
    return this.init(t, g, e, n)
  };
  t = "#3C3744";
  AstroChart.config = {
      defaultSkin: "fancy",
      mediaPath: l + "/client/common/images/signs/",
      textPath: l + "/client/common/images/signs/",
      signset: ["aries.svg", "taurus.svg", "gemini.svg", "cancer.svg", "leo.svg", "virgo.svg", "libra.svg", "scorpio.svg", "sagittarius.svg", "capricorn.svg", "aquarius.svg", "pisces.svg"],
      skins: {
        fancy: {
          borders: [{
              lineWidth: 0,
              radius: 200,
              color: "white",
              alpha: 1,
              fill: t
            },
            {
              lineWidth: 1,
              radius: 172,
              color: t,
              alpha: 1,
              fill: "white"
            },
            {
              lineWidth: 1,
              radius: 162,
              color: "white",
              alpha: 1,
              fill: "white"
            }
          ],
          indicators: [{
              lineWidth: 0,
              startAt: 162,
              endAt: 161,
              color: t,
              alpha: 1,
              num_marks: 60,
              skip_5: !0
            },
            {
              lineWidth: 1,
              startAt: 162,
              endAt: 161,
              color: t,
              alpha: 1,
              num_marks: 180,
              is_dot_circle: !0,
              fill: t,
              dot_radius: .3
            },
            {
              lineWidth: 2,
              startAt: 200,
              endAt: 172,
              color: "white",
              alpha: 1,
              num_marks: 12
            }
          ],
          house_attrs: !1,
          sign_attrs: {
            radius: 178,
            offset: 3.4,
            widthv: 75,
            heightv: 75,
            radius_flip: 8,
            alpha: 1,
            is_text: !0,
            mediaPath: "sign-names-white/up-bend/"
          },
          planet_attrs: {
            radius: 144,
            offset_i: 10,
            w: 21,
            h: 21,
            alpha: 1,
            color: t,
            dots: {
              fill: "white",
              alpha: 1,
              strokewidth: 1,
              width: 2,
              radius: 126
            }
          },
          aspects_attrs: {
            simple_lines: !1,
            aspect_color: !1,
            stroke_width: 1
          },
          chart_attrs: {
            renderRadius: 200
          },
          hatch: {
            line_w: 2,
            alpha: 1,
            color: t,
            length: 5,
            offset: 18
          }
        },
        fancy_houses: {
          borders: [{
              lineWidth: 0,
              radius: 200,
              color: "white",
              alpha: 1,
              fill: t
            },
            {
              lineWidth: 1,
              radius: 172,
              color: t,
              alpha: 1,
              fill: "white"
            },
            {
              lineWidth: 1,
              radius: 162,
              color: "white",
              alpha: 1,
              fill: "white"
            },
            {
              lineWidth: 1,
              radius: 53,
              color: t,
              alpha: .6,
              fill: "white"
            },
            {
              lineWidth: 1,
              radius: 35,
              color: t,
              alpha: .6,
              fill: "white"
            }
          ],
          indicators: [{
              lineWidth: 0,
              startAt: 162,
              endAt: 161,
              color: t,
              alpha: 1,
              num_marks: 60,
              skip_5: !0
            },
            {
              lineWidth: 1,
              startAt: 162,
              endAt: 161,
              color: t,
              alpha: 1,
              num_marks: 180,
              is_dot_circle: !0,
              fill: t,
              dot_radius: .3
            },
            {
              lineWidth: 2,
              startAt: 200,
              endAt: 172,
              color: "white",
              alpha: 1,
              num_marks: 12
            }
          ],
          house_attrs: {
            indicators: [{
                lineWidth: 1,
                startAt: 55,
                endAt: 35,
                color: "black",
                alpha: .8,
                num_marks: 12
              },
              {
                lineWidth: 1,
                startAt: 55,
                endAt: 162,
                color: "black",
                alpha: .6,
                is_dotted: !0,
                num_marks: 12
              }
            ],
            houseText: {
              startAt: 44,
              color: "#444",
              size: 11,
              font: "Josefin Sans",
              alpha: 1
            }
          },
          sign_attrs: {
            radius: 178,
            offset: 3.4,
            widthv: 75,
            heightv: 75,
            radius_flip: 8,
            alpha: 1,
            is_text: !0,
            mediaPath: "sign-names-white/up-bend/"
          },
          planet_attrs: {
            radius: 144,
            offset_i: 10,
            w: 21,
            h: 21,
            alpha: 1,
            color: t,
            dots: {
              fill: "white",
              alpha: 1,
              strokewidth: 1,
              width: 2,
              radius: 126
            }
          },
          aspects_attrs: {
            simple_lines: !1,
            aspect_color: !1,
            stroke_width: 1
          },
          chart_attrs: {
            renderRadius: 200
          },
          hatch: {
            line_w: 2,
            alpha: 1,
            color: t,
            length: 5,
            offset: 18
          }
        },
        small_birth: {
          borders: [{
              lineWidth: 1.3,
              radius: 41,
              color: t,
              alpha: .8,
              fill: "transparent"
            },
            {
              lineWidth: 1.3,
              radius: 28,
              color: t,
              alpha: .8,
              fill: "transparent"
            }
          ],
          indicators: [],
          house_attrs: !1,
          sign_attrs: !1,
          planet_attrs: {
            radius: 64,
            offset_i: 14,
            w: 30,
            h: 30,
            alpha: .9,
            color: t,
            dots: {
              fill: t,
              alpha: 1,
              strokewidth: 1,
              width: 2,
              radius: 28
            }
          },
          aspects_attrs: {
            simple_lines: !1,
            aspect_radius: 28
          },
          chart_attrs: {
            renderRadius: 98
          },
          hatch: {
            line_w: 2,
            alpha: .7,
            color: t,
            length: 5,
            offset: -20
          },
          shifts: {
            margin: .3,
            spacing: .4
          }
        }
      }
    },
    AstroChart.prototype = {
      init: function(t, g, e) {
        return this.skin = AstroChart.config.skins[g.skin],
          this.skin || (this.skin = AstroChart.config.skins[AstroChart.config.defaultSkin]),
          this.renderRadius = this.skin.chart_attrs.renderRadius,
          this.rotateAngle = e,
          this.ifHouses = g.ifHouses,
          this.ifHouses && (this.houses = g.houses),
          this.paper = t,
          this.render(),
          this
      },
      render: function() {
        this.paper.clear();
        for (var t = 0; t < this.skin.borders.length; t++) this.fullCircleAt(this.renderRadius, this.renderRadius, this.skin.borders[t]);
        this.skin.sign_attrs && this.drawImages(this.skin.sign_attrs);
        for (t = 0; t < this.skin.indicators.length; t++) this.drawMark(this.skin.indicators[t]);
        this.ifHouses && this.drawHouses()
      },
      fullCircleAt: function(t, g, e) {
        this.paper.circle(t, g, e.radius).attr({
          stroke: e.color,
          "stroke-opacity": e.alpha,
          "stroke-width": e.lineWidth,
          fill: e.fill
        })
      },
      drawImages: function(t) {
        var g = AstroChart.config.mediaPath,
          e = AstroChart.config.signset,
          n = t.widthv,
          I = t.heightv;
        "mediaPath" in t && (g += t.mediaPath);
        var i = t.offset + this.rotateAngle / 180 * Math.PI;
        if (t.is_text)
          for (var C = [-75, -45, -15, 15, 45, 75, 105, 135, 165, 195, 225, 255], A = Math.ceil(this.rotateAngle / 30), a = 0; a < e.length; a++) {
            var o = t.radius,
              s = C[a],
              r = 12 - a,
              l = g + e[e.length - a - 1];
            6 <= A ? (A < r || r < A - 6) && (s += 180, l = l.replace("up-bend", "down-bend"), o += t.radius_flip) : A < r && r < A + 6 && (s += 180, l = l.replace("up-bend", "down-bend"), o += t.radius_flip);
            var c = (d = this.getXYcircleArray(o, 12, this.renderRadius, this.renderRadius, i)).xValues[a] - n / 2,
              u = d.yValues[a] - I / 2;
            this.paper.image(l, c, u, n, I).attr({
              opacity: t.alpha
            }).rotate(s + this.rotateAngle)
          } else
            for (var d = this.getXYcircleArray(t.radius, 12, this.renderRadius, this.renderRadius, i), a = 0; a < e.length; a++) c = d.xValues[a] - n / 2,
              u = d.yValues[a] - I / 2,
              this.paper.image(g + e[e.length - a - 1], c, u, n, I).attr({
                opacity: t.alpha
              })
      },
      drawMark: function(t) {
        for (var g = t.startAt,
            e = t.endAt,
            n = 0; n < t.num_marks; n++) {
          var I = (90 - 360 / t.num_marks * n) * Math.PI / 180,
            i = this.renderRadius + g * Math.cos(I),
            C = this.renderRadius - g * Math.sin(I),
            A = this.renderRadius + e * Math.cos(I),
            I = this.renderRadius - e * Math.sin(I);
          t.is_dot_circle ? this.paper.circle(i, C, t.dot_radius).attr({
            stroke: t.color,
            "stroke-opacity": t.alpha,
            "stroke-width": t.lineWidth,
            fill: t.fill
          }) : t.skip_5 && n % 5 == 0 || this.paper.path("M" + i + "," + C + "L" + A + "," + I).attr({
            stroke: t.color,
            "stroke-opacity": t.alpha,
            "stroke-dasharray": !!t.is_dotted && "- ",
            "stroke-width": t.lineWidth
          }).rotate(this.rotateAngle, this.renderRadius, this.renderRadius)
        }
      },
      getXYcircleArray: function(t, g, e, n, I) {
        for (var i = {},
            C = {},
            A = 0; A < g; A++) i[A] = e + t * Math.cos(2 * Math.PI * A / g + I),
          C[A] = n + t * Math.sin(2 * Math.PI * A / g + I);
        return {
          xValues: i,
          yValues: C
        }
      },
      drawHouses: function() {
        for (var t = this.skin.house_attrs,
            g = 0; g < this.houses.length; g++) {
          for (var e = 0; e < t.indicators.length; e++) {
            var n = t.indicators[e],
              I = n.startAt,
              i = n.endAt,
              C = this.houses[g] * Math.PI / 180,
              A = this.renderRadius + I * Math.cos(C),
              a = this.renderRadius - I * Math.sin(C),
              I = this.renderRadius + i * Math.cos(C),
              i = this.renderRadius - i * Math.sin(C);
            this.paper.path("M" + A + "," + a + "L" + I + "," + i).attr({
              stroke: n.color,
              "stroke-opacity": n.alpha,
              "stroke-dasharray": !!n.is_dotted && "- ",
              "stroke-width": n.lineWidth
            }).rotate(this.rotateAngle, this.renderRadius, this.renderRadius)
          }
          var o = g + 1 == this.houses.length;
          o = (o = (o = this.houses[o ? 0 : g + 1] * Math.PI / 180) < C ? (C - 2 * Math.PI + o) / 2 : (C + o) / 2) - this.rotateAngle * Math.PI / 180 + Math.PI,
            A = this.renderRadius + t.houseText.startAt * Math.cos(o),
            a = this.renderRadius - t.houseText.startAt * Math.sin(o);
          this.paper.text(A, a, g + 1).attr({
            "font-size": t.houseText.size,
            fill: t.houseText.color,
            "font-family": t.houseText.font,
            opacity: t.houseText.alpha
          })
        }
      }
    },
    Planet = function(t, g) {
      return this.init(t, g)
    },
    Planet.prototype = {
      init: function(t, g) {
        this.name = t,
          this.cap_name = this.getCapName(),
          this.validImages = ["ascendant", "ceres", "chiron", "juno", "jupiter", "mars", "mc", "mercury", "moon", "neptune", "north node", "pallas", "pluto", "saturn", "sun", "uranus", "venus", "vesta", "lilith"],
          this.imgp = l + "/client/common/images/planets/" + this.getImageName() + ".svg",
          this.sign = new Sign(g.sign),
          this.degree = g.degree,
          this.full_degree = parseInt(g.full_degree);
        t = parseInt(60 * (g.full_degree - Math.floor(g.full_degree)));
        this.minute = t || 0,
          this.shift = 0,
          this.imgo = null,
          this.dot = null,
          this.hatch = null,
          this.full_name = this.getFullName(),
          this.retro = !!g.retro
      },
      getCapName: function() {
        return "mc" == this.name ? "MC" : "north node" == this.name ? "North Node" : this.name.charAt(0).toUpperCase() + this.name.slice(1)
      },
      getFullName: function() {
        return this.cap_name + " in " + this.degree + "&deg; " + this.sign.cap_name
      },
      getImageName: function() {
        return -1 != $.inArray(this.name, this.validImages) ? this.name : "empty"
      },
      getRadian: function() {
        return this.full_degree * Math.PI / 180
      },
      getXY: function(t, g, e, n) {
        n = this.getRadian() - n + Math.PI;
        return {
          x: g + t * Math.cos(n),
          y: e - t * Math.sin(n)
        }
      },
      getXYwShift: function(t, g, e, n, I) {
        I = (I = null == I ? this.shift : I) * Math.PI / 180,
          I = this.getRadian() - (n + I) + Math.PI;
        return {
          x: g + t * Math.cos(I),
          y: e - t * Math.sin(I)
        }
      }
    },
    BirthHoroscope = function(t) {
      return this.init(t)
    },
    BirthHoroscope.prototype = {
      init: function(t) {
        this.planets = {},
          this.aspects = [];
        var e = this;
        if ($.each(t.planets,
            function(t, g) {
              $(e.planets).attr(g[0].toLowerCase(), new Planet(g[0].toLowerCase(), {
                sign: g[1].toLowerCase(),
                degree: g[2],
                full_degree: g[3],
                retro: g[4]
              }))
            }), this.dots = {},
          this.planets.ascendant ? (this.rotateAngle = this.planets.ascendant.full_degree, this.rotateRadian = this.planets.ascendant.getRadian(), this.birthTime = !0) : (this.rotateAngle = 0, this.rotateRadian = 0, this.birthTime = !1), t.planets_subset ? this.planets = _.pick(this.planets, t.planets_subset) : this.planets = _.omit(this.planets, ["lilith", "pholus", "ceres", "vesta", "juno", "pallas"]), this.houses = [], "houses" in t)
          for (var g = 0; g < t.houses.length; g++) this.houses.push(parseInt(t.houses[g]));
        this.custom_orbs = t.custom_orbs ? JSON.parse(t.custom_orbs).birth : null,
          this.findAspects(),
          t.aspects_subset && this.get_subset_aspects(t.aspects_subset)
      },
      create: function(t) {
        g = "master_paper" in t ? this.paper = t.master_paper : this.paper = new ScaleRaphael(t.paper, t.w, t.h);
        var g = new AstroChart(g, {
              skin: t.skin_name,
              houses: this.houses,
              ifHouses: t.ifHouses
            },
            this.rotateAngle),
          t = {
            paper: g.paper,
            xstart: g.renderRadius,
            ystart: g.renderRadius,
            skin: g.skin,
            pimg: g.skin.planet_attrs,
            hatch: g.skin.hatch
          };
        this.set_shifts(),
          this.drawPlanets(t, this.planets),
          this.drawAspects(t)
      },
      drawPlanets: function(t, g) {
        for (pname in g) {
          var e = g[pname],
            n = e.getXY(t.skin.planet_attrs.dots.radius, t.xstart, t.ystart, this.rotateRadian),
            I = t.paper.circle(n.x, n.y, t.skin.planet_attrs.dots.width).attr({
              stroke: t.skin.planet_attrs.color,
              "stroke-opacity": t.skin.planet_attrs.dots.alpha,
              "stroke-width": t.skin.planet_attrs.dots.strokewidth,
              fill: t.skin.planet_attrs.dots.fill
            });
          this.dots[pname] = I,
            e.dot = I;
          var i = e.getXYwShift(t.pimg.radius, t.xstart - t.pimg.offset_i, t.ystart - t.pimg.offset_i, this.rotateRadian),
            n = i.x,
            I = i.y,
            i = "white" == t.skin.planet_attrs.color ? e.imgp.replace("planets/", "planets/white/") : e.imgp,
            n = t.paper.image(i, n, I, t.pimg.w, t.pimg.h).attr({
              opacity: t.pimg.alpha
            });
          (e.img = n).planet = e,
            n.xs = t.xstart,
            n.ys = t.ystart;
          I = e.getXY(t.pimg.radius + t.hatch.offset, t.xstart, t.ystart, this.rotateRadian),
            n = e.getXY(t.pimg.radius + t.hatch.offset - t.hatch.length, t.xstart, t.ystart, this.rotateRadian),
            n = t.paper.path("M" + I.x + "," + I.y + "L" + n.x + "," + n.y).attr({
              stroke: t.hatch.color,
              "stroke-opacity": t.hatch.alpha,
              "stroke-width": t.hatch.line_w
            });
          e.hatch = n
        }
      },
      drawAspects: function(t) {
        for (var g = this.aspects,
            e = 0; e < g.length; e++) g[e].drawAspect(t)
      },
      createSmall: function(t, g, e) {
        var n = 175,
          I = 175;
        "small_synastry" == (e = e || "small_birth") && (n = 300, I = 280),
        "small" == e && (n = 200, I = 250);
        I = Raphael(t, n, I),
          e = new AstroChart(I, {
              skin: e
            },
            this.rotateAngle),
          e = {
            radius: e.skin.planet_attrs.radius,
            paper: e.paper,
            skin: e.skin,
            xstart: e.renderRadius,
            ystart: e.renderRadius,
            pimg: e.skin.planet_attrs,
            hatch: e.skin.hatch
          };
        this.drawPlanetsSmall(e, g),
          this.drawLimitedAspects(e, g)
      },
      drawPlanetsSmall: function(t, g) {
        var e, g = _.pick(this.planets, g),
          n = this.get_shifts_dict(g, t.skin.shifts.margin, t.skin.shifts.spacing);
        for (e in g) {
          var I = n[e],
            i = this.planets[e],
            C = i.getXY(t.skin.planet_attrs.dots.radius, t.xstart, t.ystart, this.rotateRadian),
            C = (t.paper.circle(C.x, C.y, t.skin.planet_attrs.dots.width).attr({
              stroke: t.skin.planet_attrs.color,
              "stroke-opacity": t.skin.planet_attrs.dots.alpha,
              "stroke-width": t.skin.planet_attrs.dots.strokewidth,
              fill: t.skin.planet_attrs.dots.fill
            }), i.getXYwShift(t.pimg.radius, t.xstart - t.pimg.offset_i, t.ystart - t.pimg.offset_i, this.rotateRadian, I)),
            I = C.x,
            C = C.y;
          t.paper.image(i.imgp, I, C, t.pimg.w, t.pimg.h).attr({
              opacity: t.pimg.alpha
            }),
            t.hatch && (I = i.getXY(t.pimg.radius + t.hatch.offset, t.xstart, t.ystart, this.rotateRadian), C = i.getXY(t.pimg.radius + t.hatch.offset - t.hatch.length, t.xstart, t.ystart, this.rotateRadian), C = t.paper.path("M" + I.x + "," + I.y + "L" + C.x + "," + C.y).attr({
              stroke: t.hatch.color,
              "stroke-opacity": t.hatch.alpha,
              "stroke-width": t.hatch.line_w
            }), i.hatch = C)
        }
      },
      drawLimitedAspects: function(t, g) {
        for (var e = 0; e < this.aspects.length; e++) {
          var n, I, i = this.aspects[e];
          _.contains(g, i.planet1.name) && _.contains(g, i.planet2.name) && (n = i.planet1.getXY(t.skin.aspects_attrs.aspect_radius, t.xstart, t.ystart, this.rotateRadian), I = i.planet2.getXY(t.skin.aspects_attrs.aspect_radius, t.xstart, t.ystart, this.rotateRadian), i.drawAspect_wCoor(t.paper, n, I))
        }
      },
      findAspects: function() {
        var t, g = [],
          e = [];
        for (pname in this.planets) {
          var n = this.planets[pname];
          g.push(n.full_degree),
            e.push(n)
        }
        for (t in Aspect.TYPES)
          for (var I = Aspect.TYPES[t], i = 0; i < g.length; i++)
            for (var C = i + 1; C < g.length; C++) {
              var A, a = Math.abs(g[i] - g[C]);
              A = this.custom_orbs && Number.isInteger(this.custom_orbs[t]) ? this.custom_orbs[t] : I.orb;
              this.determineAspect(I.angle, a, t, e[i], e[C], A)
            }
        this.aspects.reverse()
      },
      determineAspect: function(t, g, e, n, I, i) {
        var C = Math.abs(t - g),
          g = Math.abs(t - (360 - Math.abs(g)));
        if (C <= i) var A = new Aspect(e, n, I, C);
        else {
          if (!(g <= i)) return !1;
          A = new Aspect(e, n, I, g)
        }
        e = ["Saturn", "Uranus", "Neptune", "Pluto"];
        if (_.contains(e, n.cap_name) && _.contains(e, I.cap_name) && !(C < 4 || g < 4)) return !1;
        e = ["Lilith", "Ceres", "Chiron", "Juno", "MC", "North Node", "Pallas", "Vesta"];
        if ((_.contains(e, n.cap_name) || _.contains(e, I.cap_name)) && !(C < 5 || g < 5)) return !1;
        e = ["Sun", "Mercury"];
        if (_.contains(e, n.cap_name) && _.contains(e, I.cap_name) && !(C < 4 || g < 4)) return !1;
        e = ["Sun", "Venus"];
        return (!_.contains(e, n.cap_name) || !_.contains(e, I.cap_name) || C < 7 || g < 7) && (this.aspects.push(A), A)
      },
      get_important_aspects: function() {
        var g = ["conjunction", "square", "trine", "opposition", "sextile"],
          t = _.filter(this.aspects,
            function(t) {
              return _.contains(g, t.atype)
            });
        return _.sortBy(t, "orb")
      },
      get_extended_aspects: function() {
        var g = ["conjunction", "square", "trine", "opposition", "sextile"],
          t = _.filter(this.aspects,
            function(t) {
              return !_.contains(g, t.atype)
            });
        return _.sortBy(t, "orb")
      },
      get_subset_aspects: function(t) {
        for (var g = [], e = 0; e < this.aspects.length; e++) {
          var n = this.aspects[e];
          _.contains(t, n.atype) && g.push(n)
        }
        this.aspects = g
      },
      set_up_dicts: function() {
        for (var g in this.aspect_dict = {},
            this.planet_dict = {},
            Aspect.TYPES) {
          var t = _.filter(this.aspects,
            function(t) {
              return t.atype == g
            });
          this.aspect_dict[g] = t
        }
        for (var e in this.planets) {
          var n = _.filter(this.aspects,
            function(t) {
              return t.planet1.name == e || t.planet2.name == e
            });
          this.planet_dict[e] = n
        }
      },
      get_aspect_patterns: function() {
        this.set_up_dicts();
        var t = [];
        return t = (t = (t = (t = (t = (t = (t = t.concat(this.determine_stellium())).concat(this.determine_trine())).concat(this.determine_pentagram())).concat(this.determine_square())).concat(this.determine_rectangle())).concat(this.determine_yod())).concat(this.determine_cradle())
      },
      getHigher: function(t, g) {
        t = (t = this.planets[t].full_degree) - (g = this.planets[g].full_degree),
          g = 0 < t ? t - 360 : 360 + t;
        return 0 < (Math.abs(t) < Math.abs(g) ? t : g)
      },
      get_paired_planet: function(t, g) {
        return (g != t.planet1.name ? t.planet1 : t.planet2).name
      },
      simplify_list: function(t) {
        for (var g = []; 0 < t.length;) {
          for (var e = t[0], n = t.slice(1), I = -1; e.length > I;) {
            for (var I = e.length,
                i = [], C = 0; C < n.length; C++) {
              var A = n[C];
              0 < _.intersection(e, A).length ? e = _.union(e, A) : i.push(A)
            }
            n = i
          }
          g.push(e),
            t = n
        }
        return g
      },
      is_duplicate_pattern: function(t, g) {
        for (var e = 0; e < t.length; e++) {
          for (var n = t[e], I = !1, i = 0; i < g.planets.length; i++) {
            var C = g.planets[i];
            if (!_.contains(n.planets, C)) {
              I = !1;
              break
            }
            I = !0
          }
          if (I) return !0
        }
        return !1
      },
      add_or_adjust_if_conj_pattern: function(t, g) {
        for (var e = !1,
            n = !1,
            I = 0; I < t.length; I++) {
          for (var i = t[I], C = 0; C < g.planets.length; C++) {
            var A = g.planets[C];
            if (!_.contains(i.planets, A)) {
              var a = _.filter(this.planet_dict[A],
                function(t) {
                  return "conjunction" == t.atype
                });
              if (!(e = _.find(a,
                  function(t) {
                    t = (t.planet1.name != A ? t.planet1 : t.planet2).name;
                    return _.contains(i.planets, t)
                  }))) break
            }
          }
          if (e) {
            t[I].planets = _.union(t[I].planets, g.planets),
              n = t[I];
            break
          }
        }
        return e || t.push(g),
          [t, n]
      },
      determine_rectangle: function() {
        var t, g = "opposition",
          e = this.planet_dict,
          n = [];
        for (t in this.planets) {
          var I = _.filter(e[t],
            function(t) {
              return "sextile" == t.atype
            });
          if (0 < _.filter(e[t],
              function(t) {
                return t.atype == g
              }).length)
            for (var i = 0; i < I.length; i++)
              for (var C = I[i], A = this.get_paired_planet(C, t), a = _.filter(e[A],
                  function(t) {
                    return t.atype == g
                  }), o = 0; o < a.length; o++)
                for (var s = a[o], r = this.get_paired_planet(s, A), l = _.filter(e[r],
                    function(t) {
                      return "sextile" == t.atype
                    }), c = 0; c < l.length; c++)
                  for (var u = l[c], d = this.get_paired_planet(u, r), h = _.filter(e[d],
                      function(t) {
                        return t.atype == g
                      }), B = 0; B < h.length; B++) {
                    var b = h[B];
                    t == this.get_paired_planet(b, d) && (b = new Aspect_Pattern([t, A, r, d], "Rectangle"), this.is_duplicate_pattern(n, b) || (n = this.add_or_adjust_if_conj_pattern(n, b)[0]))
                  }
        }
        return n
      },
      determine_yod: function() {
        var t, g = this.planet_dict,
          e = [];
        for (t in this.planets) {
          var n = _.filter(g[t],
            function(t) {
              return "quincunx" == t.atype
            });
          if (1 < n.length)
            for (var I = 0; I < n.length; I++)
              for (var i = n[I], C = this.get_paired_planet(i, t), A = _.filter(g[C],
                  function(t) {
                    return "sextile" == t.atype
                  }), a = 0; a < A.length; a++)
                for (var o = A[a], s = this.get_paired_planet(o, C), r = I + 1; r < n.length; r++) {
                  var l, c = n[r];
                  c.planet1.name != s && c.planet2.name != s || (c = new Aspect_Pattern([t, C, s], "Yod"), this.is_duplicate_pattern(e, c) || (e = (l = this.add_or_adjust_if_conj_pattern(e, c))[0]), l[1] && 0 < l[1].point.length ? (_.contains(l[1].point, t) || l[1].point.push(t), o.orb < l[1].sextiles.orb && (l[1].sextiles = {
                    sextile: [C, s],
                    orb: o.orb
                  })) : (c.point = [t], c.sextiles = {
                    sextile: [C, s],
                    orb: o.orb
                  }))
                }
        }
        return e
      },
      determine_cradle: function() {
        var t, g = "sextile",
          e = this.planet_dict,
          n = [];
        for (t in this.planets)
          for (var I = _.filter(e[t],
              function(t) {
                return "opposition" == t.atype
              }), i = _.filter(e[t],
              function(t) {
                return t.atype == g
              }), C = 0; C < I.length; C++)
            for (var A = I[C], a = this.get_paired_planet(A, t), o = _.filter(e[a],
                function(t) {
                  return t.atype == g
                }), s = 0; s < o.length; s++)
              for (var r = o[s], l = this.get_paired_planet(r, a), c = _.filter(e[l],
                  function(t) {
                    return t.atype == g
                  }), u = 0; u < c.length; u++) {
                var d = c[u],
                  h = this.get_paired_planet(d, l);
                if (h != a)
                  for (var B = 0; B < i.length; B++) {
                    var b, p = i[B];
                    h != p.planet1.name && h != p.planet2.name || (p = new Aspect_Pattern([t, a, l, h], "Cradle"), this.is_duplicate_pattern(n, p) || (n = (b = this.add_or_adjust_if_conj_pattern(n, p))[0]), b[1] && 0 < b[1].sextiles.length ? (_.contains(b[1].sextiles, r) || b[1].sextiles.push(r), _.contains(b[1].sextiles, d) || b[1].sextiles.push(d)) : p.sextiles = [r, d])
                  }
              }
        return n
      },
      determine_square: function() {
        var t = this.aspect_dict,
          g = "opposition",
          e = "square",
          n = [],
          I = [],
          i = g in t ? t[g] : [],
          t = e in t ? t[e] : [],
          t = i.concat(t);
        n.length = 0,
          _.each(t,
            function(t) {
              I.push([t.planet1.name, t.planet2.name])
            });
        for (var C = this.simplify_list(I), A = 0; A < C.length; A++) {
          var a, o, s = C[A];
          3 < s.length ? 0 < (a = this.determine_grand_cross_in_cluster(s, g, e)).length ? n = n.concat(a) : 0 < (a = this.determine_grand_square_in_cluster(s, g, e)).length ? n = n.concat(a) : 0 < (o = this.determine_t_square_in_cluster(s, g, e)).length ? n = n.concat(o) : (0 < (a = this.determine_multi_square_in_cluster(s, e)).length && (n = n.concat(a)), 0 < (a = this.determine_multi_opp_in_cluster(s, g)).length && (n = n.concat(a))) : 2 < s.length && 0 < (o = this.determine_t_square_in_cluster(s, g, e)).length && (n = n.concat(o))
        }
        return n
      },
      determine_grand_cross_in_cluster: function(t, g, e) {
        for (var n = [], I = this.planet_dict, i = 0; i < t.length; i++) {
          var C = t[i],
            A = _.filter(I[C],
              function(t) {
                return t.atype == g
              }),
            a = _.filter(I[C],
              function(t) {
                return t.atype == e
              });
          if (0 < A.length && 1 < a.length)
            for (var o = 0; o < a.length; o++) {
              var s = a[o],
                r = this.get_paired_planet(s, C),
                s = _.filter(I[r],
                  function(t) {
                    return t.atype == g
                  }),
                l = _.filter(I[r],
                  function(t) {
                    return t.atype == e
                  });
              if (0 < s.length && 1 < l.length)
                for (var c = 0; c < l.length; c++) {
                  var u = l[c],
                    d = this.get_paired_planet(u, r);
                  if (d != C) {
                    var u = _.filter(I[d],
                        function(t) {
                          return t.atype == g
                        }),
                      h = _.filter(I[d],
                        function(t) {
                          return t.atype == e
                        });
                    if (0 < u.length && 1 < h.length)
                      if (0 < _.filter(u,
                          function(t) {
                            return t.planet1.name == C || t.planet2.name == C
                          }).length)
                        for (var B = 0; B < h.length; B++) {
                          var b = h[B],
                            p = this.get_paired_planet(b, d);
                          if (p != r) {
                            var b = _.filter(I[p],
                                function(t) {
                                  return t.atype == g
                                }),
                              m = _.filter(I[p],
                                function(t) {
                                  return t.atype == e
                                });
                            if (0 < b.length && 1 < m.length)
                              if (0 < _.filter(b,
                                  function(t) {
                                    return t.planet1.name == r || t.planet2.name == r
                                  }).length)
                                for (var y = 0; y < m.length; y++) {
                                  var Q = m[y],
                                    Q = this.get_paired_planet(Q, p);
                                  C == Q && (Q = new Aspect_Pattern([C, r, d, p], "Grand Cross"), this.is_duplicate_pattern(n, Q) || (n = this.add_or_adjust_if_conj_pattern(n, Q)[0]))
                                }
                          }
                        }
                  }
                }
            }
        }
        return n
      },
      determine_grand_square_in_cluster: function(t, g, e) {
        for (var n = this.planet_dict,
            I = [], i = 0; i < t.length; i++) {
          var C = t[i],
            A = _.filter(n[C],
              function(t) {
                return t.atype == e
              });
          if (1 < A.length)
            for (var a = 0; a < A.length; a++) {
              var o = A[a],
                s = this.get_paired_planet(o, C),
                r = _.filter(n[s],
                  function(t) {
                    return t.atype == e
                  }),
                l = 0 < this.getHigher(C, s);
              if (1 < r.length && l)
                for (var c = 0; c < r.length; c++) {
                  var u = r[c],
                    d = this.get_paired_planet(u, s);
                  if (d != C) {
                    var h = _.filter(n[d],
                      function(t) {
                        return t.atype == e
                      });
                    if (l = 0 < this.getHigher(s, d), 1 < h.length && l)
                      for (var B = 0; B < h.length; B++) {
                        var b = h[B],
                          p = this.get_paired_planet(b, d);
                        if (p != s) {
                          var m = _.filter(n[p],
                              function(t) {
                                return t.atype == e
                              }),
                            l = 0 < this.getHigher(d, p);
                          if (1 < m.length && l)
                            for (var y = 0; y < m.length; y++) {
                              var Q = m[y];
                              C == this.get_paired_planet(Q, p) && (Q = new Aspect_Pattern([C, s, d, p], "Grand Square"), this.is_duplicate_pattern(I, Q) || (I = this.add_or_adjust_if_conj_pattern(I, Q)[0]))
                            }
                        }
                      }
                  }
                }
            }
        }
        return I
      },
      determine_t_square_in_cluster: function(t, g, e) {
        for (var n = this.planet_dict,
            I = [], i = 0; i < t.length; i++) {
          var C = t[i],
            A = _.filter(n[C],
              function(t) {
                return t.atype == e
              }),
            a = _.filter(n[C],
              function(t) {
                return t.atype == g
              });
          if (0 < A.length && 0 < a.length)
            for (var o = 0; o < A.length; o++)
              for (var s = A[o], r = this.get_paired_planet(s, C), l = _.filter(n[r],
                  function(t) {
                    return t.atype == e
                  }), c = 0; c < l.length; c++) {
                var u = l[c],
                  d = this.get_paired_planet(u, r);
                if (d != C) {
                  o_of_p2 = _.filter(n[d],
                    function(t) {
                      return t.atype == g
                    });
                  for (var h = 0; h < o_of_p2.length; h++) {
                    var B = o_of_p2[h];
                    this.get_paired_planet(B, d) == C && (B = new Aspect_Pattern([C, r, d], "T-Square"), this.is_duplicate_pattern(I, B) || (I = this.add_or_adjust_if_conj_pattern(I, B)[0]))
                  }
                }
              }
        }
        return I
      },
      determine_multi_square_in_cluster: function(t, g) {
        for (var e, n = [], I = [], i = this.planet_dict, C = t.slice(), A = !1, a = 0; a < t.length; a++) {
          var o = t[a];
          2 < (n = _.filter(i[o],
            function(t) {
              return t.atype == g
            })).length ? A = !0 : 0 != n.length || -1 < (o = C.indexOf(o)) && C.splice(o, 1)
        }
        return A && (e = new Aspect_Pattern(C, "Multiple Planet Square"), I.push(e)),
          I
      },
      determine_multi_opp_in_cluster: function(t, g) {
        for (var e, n = [], I = [], i = this.planet_dict, C = t.slice(), A = !1, a = 0; a < t.length; a++) {
          var o = t[a];
          2 < (n = _.filter(i[o],
            function(t) {
              return t.atype == g
            })).length ? A = !0 : 0 != n.length || -1 < (o = C.indexOf(o)) && C.splice(o, 1)
        }
        return A && (e = new Aspect_Pattern(C, "Multiple Planet Opposition"), I.push(e)),
          I
      },
      determine_trine: function() {
        var t = [];
        t.length = 0;
        var g, e = this.determine_grand_trine();
        return 0 < e.length && (t = t.concat(e)) && ((g = (g = this.determine_star_of_david(e)) || this.determine_sextile()) && (t = t.concat(g)), e = this.determine_kite(e), t = t.concat(e)),
          t
      },
      determine_grand_trine: function() {
        var t, g = this.planet_dict,
          e = [];
        for (t in e.length = 0, this.planets)
          for (var n = _.filter(g[t],
              function(t) {
                return "trine" == t.atype
              }), I = 0; I < n.length; I++)
            for (var i = n[I], C = this.get_paired_planet(i, t), A = _.filter(g[C],
                function(t) {
                  return "trine" == t.atype
                }), a = 0; a < A.length; a++)
              for (var o = A[a], s = this.get_paired_planet(o, C), r = _.filter(g[s],
                  function(t) {
                    return "trine" == t.atype
                  }), l = 0; l < r.length; l++) {
                var c = r[l];
                this.get_paired_planet(c, s) == t && (c = new Aspect_Pattern([t, C, s], "Grand Trine"), this.is_duplicate_pattern(e, c) || (e = this.add_or_adjust_if_conj_pattern(e, c)[0]))
              }
        return e
      },
      determine_kite: function(t) {
        for (var g = [], e = "sextile", n = this.planet_dict, I = [], i = g.length = 0; i < t.length; i++)
          for (var C = t[i].planets, A = 0; A < C.length; A++)
            for (var a = C[A], o = _.filter(n[a],
                function(t) {
                  return t.atype == e
                }), s = 0; s < o.length; s++) {
              var r = o[s],
                l = this.get_paired_planet(r, a);
              if (this.getHigher(a, l))
                for (var c = _.filter(n[l],
                    function(t) {
                      return t.atype == e
                    }), u = 0; u < c.length; u++) {
                  var d = c[u],
                    h = this.get_paired_planet(d, l);
                  if (a != h && _.contains(C, h) && this.getHigher(l, h)) {
                    (f = C.slice(0)).push(l);
                    for (var B = new Aspect_Pattern(f, "Kite"), b = !1, p = _.filter(n[h],
                        function(t) {
                          return t.atype == e
                        }), m = 0; m < p.length; m++) {
                      var y = p[m],
                        Q = this.get_paired_planet(y, h);
                      if (Q != l && this.getHigher(h, Q))
                        for (var G = _.filter(n[Q],
                            function(t) {
                              return t.atype == e
                            }), F = 0; F < G.length; F++) {
                          var f, X = G[F],
                            X = this.get_paired_planet(X, Q);
                          this.getHigher(Q, X) && _.contains(C, X) && (f = C.slice(0), f = _.union(f, [l, Q]), B = new Aspect_Pattern(f, "Castle"), b = !0, this.is_duplicate_pattern(g, B) || (g = this.add_or_adjust_if_conj_pattern(g, B)[0]))
                        }
                    }
                    b || I.push(B)
                  }
                }
            }
        for (u = 0; u < I.length; u++) this.is_duplicate_pattern(g, I[u]) || (g = this.add_or_adjust_if_conj_pattern(g, I[u])[0]);
        return g
      },
      determine_star_of_david: function(t) {
        var g = [],
          e = this.planet_dict;
        if (g.length = 0, 1 < t.length)
          for (var n = 0; n < t.length; n++)
            for (var I = t[n].planets, i = I[0], C = _.filter(e[i],
                function(t) {
                  return "sextile" == t.atype
                }), A = n + 1; A < t.length; A++)
              for (var a = t[A].planets, o = 0; o < C.length; o++) {
                var s = C[o],
                  s = this.get_paired_planet(s, i);
                _.contains(a, s) && (s = I.concat(a).slice(0), s = new Aspect_Pattern(s, "Star of David"), this.is_duplicate_pattern(g, s) || (g = this.add_or_adjust_if_conj_pattern(g, s)[0]))
              }
        return g
      },
      determine_stellium: function() {
        var t = this.aspect_dict,
          g = "conjunction",
          e = [],
          n = [],
          g = g in t ? t[g] : [];
        _.each(g,
          function(t) {
            n.push([t.planet1.name, t.planet2.name])
          });
        for (var I = this.simplify_list(n), i = 0; i < I.length; i++) {
          var C = I[i];
          3 < C.length && (C = new Aspect_Pattern(C, "Stellium"), e.push(C))
        }
        return e
      },
      determine_sextile: function() {
        var t, g = "sextile",
          e = this.planet_dict,
          n = [];
        for (t in n.length = 0, this.planets) {
          var I = _.filter(e[t],
            function(t) {
              return t.atype == g
            });
          if (1 < I.length)
            for (var i = 0; i < I.length; i++) {
              var C = I[i],
                A = this.get_paired_planet(C, t),
                a = _.filter(e[A],
                  function(t) {
                    return t.atype == g
                  });
              if (1 < a.length && this.getHigher(t, A))
                for (var o = 0; o < a.length; o++) {
                  var s = a[o],
                    r = this.get_paired_planet(s, A),
                    l = _.filter(e[r],
                      function(t) {
                        return t.atype == g
                      });
                  if (1 < l.length && this.getHigher(A, r))
                    for (var c = 0; c < l.length; c++) {
                      var u = l[c],
                        d = this.get_paired_planet(u, r),
                        h = _.filter(e[d],
                          function(t) {
                            return t.atype == g
                          });
                      if (1 < h.length && this.getHigher(r, d))
                        for (var B = 0; B < h.length; B++) {
                          var b = h[B],
                            p = this.get_paired_planet(b, d),
                            m = _.filter(e[p],
                              function(t) {
                                return t.atype == g
                              });
                          if (1 < m.length && this.getHigher(d, p))
                            for (var y = 0; y < m.length; y++) {
                              var Q = m[y],
                                G = this.get_paired_planet(Q, p),
                                F = _.filter(e[G],
                                  function(t) {
                                    return t.atype == g
                                  });
                              if (1 < F.length && this.getHigher(p, G))
                                for (var f = 0; f < F.length; f++) {
                                  var X = F[f];
                                  t == this.get_paired_planet(X, G) && (X = new Aspect_Pattern([t, A, r, d, p, G], "Grand Sextile"), this.is_duplicate_pattern(n, X) || (n = this.add_or_adjust_if_conj_pattern(n, X)[0]))
                                }
                            }
                        }
                    }
                }
            }
        }
        return n
      },
      determine_pentagram: function() {
        var t, g = "quincunx",
          e = this.planet_dict,
          n = [];
        for (t in n.length = 0, this.planets) {
          var I = _.filter(e[t],
            function(t) {
              return t.atype == g
            });
          if (1 < I.length)
            for (var i = 0; i < I.length; i++) {
              var C = I[i],
                A = this.get_paired_planet(C, t),
                a = _.filter(e[A],
                  function(t) {
                    return t.atype == g
                  });
              if (1 < a.length && this.getHigher(t, A))
                for (var o = 0; o < a.length; o++) {
                  var s = a[o],
                    r = this.get_paired_planet(s, A),
                    l = _.filter(e[r],
                      function(t) {
                        return t.atype == g
                      });
                  if (1 < l.length && this.getHigher(A, r))
                    for (var c = 0; c < l.length; c++) {
                      var u = l[c],
                        d = this.get_paired_planet(u, r),
                        h = _.filter(e[d],
                          function(t) {
                            return t.atype == g
                          });
                      if (1 < h.length && this.getHigher(r, d))
                        for (var B = 0; B < h.length; B++) {
                          var b = h[B],
                            p = this.get_paired_planet(b, d),
                            m = _.filter(e[p],
                              function(t) {
                                return t.atype == g
                              });
                          if (1 < m.length && this.getHigher(d, p))
                            for (var y = 0; y < m.length; y++) {
                              var Q = m[y],
                                Q = this.get_paired_planet(Q, p);
                              t == Q && (Q = new Aspect_Pattern([t, A, r, d, p, Q], "Pentagram"), this.is_duplicate_pattern(n, Q) || (n = this.add_or_adjust_if_conj_pattern(n, Q)[0]))
                            }
                        }
                    }
                }
            }
        }
        return n
      },
      get_orb_between_radians: function(t, g) {
        var e = Math.abs(t - g),
          g = Math.abs(2 * Math.PI - Math.abs(t - g));
        return e < g ? e : g
      },
      get_rad_dict: function(t) {
        var g, e = {};
        for (g in t) {
          var n = t[g].getRadian();
          e[g] = n
        }
        return e
      },
      get_planets_sorted_by_rad: function(t) {
        var g, e = [];
        for (g in t) {
          var n = t[g].getRadian();
          e.push([g, n])
        }
        return e = e.sort(function(t, g) {
          return t[1] < g[1] ? -1 : t[1] > g[1] ? 1 : 0
        })
      },
      get_shiftsets: function(t, g) {
        var e = !1,
          n = [],
          I = 0;
        for (n.length = 0; I < t.length;) {
          var i, C, A, a = t[I][0],
            o = t[I][1],
            s = I == t.length - 1;
          (s ? (i = t[0][0], C = -1 * t[0][1], Math.abs(2 * Math.PI - C - o)) : (i = t[I + 1][0], C = t[I + 1][1], Math.abs(C - o))) < g ? s && 1 < n.length && _.contains(n[0], i) ? e ? (A = n[n.length - 1], n[0] = A.concat(n[0]), n.splice(n.length - 1, 1)) : n[0] = [a].concat(n[0]) : e ? (A = n[n.length - 1]).push(i) : (n.push([a, i]), e = !0) : (e || n.push([a.toString()]), e = !1),
            I += 1
        }
        return n
      },
      merge_sets_recursive: function(t, g, e, n) {
        for (var I = !1,
            i = [], C = 0; C < t.length; C++) {
          var A = t[C],
            a = this.get_pgroup_attrs(A, g, 0 == C),
            o = a[0],
            s = a[1],
            a = this.get_shifted_pos(o, 0, n, s),
            s = this.get_shifted_pos(o, A.length - 1, n, s);
          i.push([a, s])
        }
        for (var r = 0; r < i.length;) {
          var l, c, u = i[r][1],
            u = r == i.length - 1 ? (l = i[0][0], c = 0, this.get_orb_between_radians(u, l)) : (l = i[r + 1][0], c = r + 1, Math.abs(l - u));
          u < e ? (t[c] = t[r].concat(t[c]), i[c][0] = i[r][0], t.splice(r, 1), i.splice(r, 1), I = !0) : r += 1
        }
        return [t, I]
      },
      isodd: function(t) {
        return t % 2
      },
      get_shifted_pos: function(t, g, e, n) {
        return (g - t) * e + n
      },
      get_pgroup_attrs: function(t, g, e) {
        var n = t.length,
          I = 0,
          i = this.isodd(n) ? Math.floor(n / 2) : Math.floor(n / 2) - .5,
          C = !1;
        if (e) {
          for (var A = !1,
              a = !1,
              o = 0; o < t.length; o++) 0 <= (s = g[t[o]]) && s < Math.PI / 2 && (A = !0),
            s < 2 * Math.PI && s >= 3 * Math.PI / 2 && (a = !0);
          A && a && (C = !0)
        }
        for (o = 0; o < t.length; o++) {
          var s = g[t[o]];
          C && s > Math.PI && (s -= 2 * Math.PI),
            I += s
        }
        return [i, I / n]
      },
      get_shifts_dict: function(t, g, e) {
        var n = {},
          I = this.get_rad_dict(t),
          t = this.get_planets_sorted_by_rad(t),
          i = !0;
        if (1 < (A = this.get_shiftsets(t, g)).length)
          for (; i;) var C = this.merge_sets_recursive(A, I, g, e),
            A = C[0],
            i = C[1];
        for (var a = 0; a < A.length; a++)
          for (var o = A[a], s = this.get_pgroup_attrs(o, I, 0 == a), r = s[0], l = s[1], c = 0; c < o.length; c++) {
            var u = o[c],
              d = this.get_shifted_pos(r, c, e, l),
              d = (d = I[u] - d) < -2 * Math.PI ? d + 2 * Math.PI : d;
            d *= 180 / Math.PI,
              n[u] = d
          }
        return n
      },
      set_shifts: function() {
        var t, g = this.get_shifts_dict(this.planets, .16, .15);
        for (t in g) this.planets[t].shift = g[t];
        return g
      }
    },
    Aspect = function(t, g, e, n) {
      return this.init(t, g, e, n)
    },
    Aspect.TYPES = {
      trine: {
        angle: 120,
        orb: 8
      },
      conjunction: {
        angle: 0,
        orb: 8
      },
      opposition: {
        angle: 180,
        orb: 8
      },
      square: {
        angle: 90,
        orb: 7
      },
      sextile: {
        angle: 60,
        orb: 6
      }
    },
    Aspect.prototype = {
      init: function(t, g, e, n) {
        this.planet1 = g,
          this.planet2 = e,
          this.atype = t,
          this.orb = n,
          this.strength = this.getStrength(n),
          this.stroke_color = this.getColor(),
          this.opacity = 1,
          this.stroke_width = this.getStrokeWidth(),
          this.full_name = this.getFullName(),
          this.img_name = this.getImageName()
      },
      getStrength: function(t) {
        return this.orb < 4 ? this.orb < 2 ? "exact" : "strong" : "weak"
      },
      drawAspect: function(t) {
        var g = t.skin.aspects_attrs.simple_lines ? t.skin.aspects_attrs.aspect_color : this.stroke_color,
          e = (t.skin.aspects_attrs.simple_lines ? t.skin.aspects_attrs : this).stroke_width;
        t.paper.path("M" + this.planet1.dot.attrs.cx + "," + this.planet1.dot.attrs.cy + "L" + this.planet2.dot.attrs.cx + "," + this.planet2.dot.attrs.cy).attr({
          stroke: g,
          "stroke-opacity": this.opacity,
          "stroke-width": e
        })
      },
      drawAspect_wCoor: function(t, g, e) {
        t.path("M" + g.x + "," + g.y + "L" + e.x + "," + e.y).attr({
          stroke: this.stroke_color,
          "stroke-opacity": this.opacity,
          "stroke-width": this.stroke_width
        })
      },
      getColor: function() {
        switch (this.atype) {
          case "square":
            return "#f92539";
          case "conjunction":
            return "#fff";
          case "opposition":
            return "#257af9";
          case "sextile":
            return "#a238fb";
          case "trine":
            return "#48a966";
          case "quincunx":
            return "#f3e43a";
          default:
            return "#c6c9c6"
        }
      },
      getStrokeWidth: function() {
        switch (this.strength) {
          case "exact":
            return 3;
          case "strong":
            return 2;
          default:
            return 1
        }
      },
      getFullName: function() {
        return this.planet1.cap_name + " " + this.atype.charAt(0).toUpperCase() + this.atype.slice(1) + " " + this.planet2.cap_name
      },
      getImageName: function() {
        return "novile" == this.atype || "septile" == this.atype ? "empty" : this.atype
      }
    },
    Sign = function(t) {
      return this.init(t)
    },
    Sign.TYPES = ["Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagittarius", "Capricorn", "Aquarius", "Pisces"],
    Sign.prototype = {
      init: function(t) {
        this.name = t,
          this.cap_name = this.name.charAt(0).toUpperCase() + this.name.slice(1)
      }
    },
    Aspect_Pattern = function(t, g) {
      return this.init(t, g)
    },
    Aspect_Pattern.prototype = {
      init: function(t, g) {
        return this.planets = t,
          this.type = g,
          this
      }
    };
  var c = Backbone.View.extend({
      initialize: function() {
        var t = this.settings = {
          showHouses: !0,
          showDeclination: !1,
          showSidereal: !1,
          planets: !1,
          aspects: !1,
          house_key: "p"
        };
        this.drawChart(),
          this.setupViews(t)
      },
      drawChart: function() {
        var t = this.settings,
          g = new URL(window.location.href).searchParams.get("skin") || "fancy_houses",
          t = {
            planets: window.birth_planets,
            houses: window.houses,
            paper: "raphael_birth",
            w: 400,
            h: 400,
            skin_name: g,
            ifHouses: t.showHouses,
            planets_subset: t.planets,
            aspects_subset: t.aspects,
            custom_orbs: '{"birth":"","synastry":""}'
          };
        this.horoscope = new BirthHoroscope(t);
        this.horoscope.create(t),
          this.resizeChart()
      },
      setupViews: function(t) {
        this.planet_view = new g({
          planets: this.horoscope.planets,
          settings: t
        });
        t = this.horoscope.get_important_aspects();
        this.aspect_view = new e(t, []),
          this.horoscope.patterns = this.horoscope.get_aspect_patterns(),
          this.pattern_view = new n(this.horoscope)
      },
      resizeChart: function() {
        function t() {
          var t, g = $("#chart_display")[0],
            e = $(g).width();
          e < 400 ? (t = e, $("#chart_display").css("min-height", t)) : (t = $(g).height(), $("#chart_display").css("min-height", "auto"), e = 400 <= t ? t : t = 400),
            n.horoscope.paper.changeSize(e, t, !0, !1)
        }
        var n = this;
        t(),
          $(window).resize(function() {
            t()
          })
      }
    }),
    g = Backbone.View.extend({
      el: "#planet_view_birth",
      planet_template: _.template("    <div id='<%= name %>' class='planet'>      <img class='pl_icon' src='<%= imgp %>'>      <div class='p_attr'>        <div class='p_name'><%= cap_name %> </div> in        <div class='p_pos'><%= degree %>&deg; <%= minute %>'</div>        <div class='p_sign'><%= sign.cap_name %> </div>        <div class='p_ret'><% if (retro) { %> (r) <% } %></div>      </div>    </div>"),
      initialize: function(t) {
        var g = t.planets,
          t = this.$el.find(".planet_brief_box")[0];
        (t = $(t)).html("");
        var e, n = "";
        for (e in g) n += this.planet_template(g[e]);
        t.append(n)
      }
    }),
    e = Backbone.View.extend({
      el: "#aspect_view_birth",
      aspect_template: _.template("    <div class='as_container'><img class='as_icon' src='" + l + "/client/common/images/aspects/<%= img_name %>.svg'>      <div class='as_text'><div class='aspect_b_link'><%= full_name %></div>        <div class='aspect_b_orb'>orb: <%= orb %> &deg;</div></div>    </div>"),
      initialize: function(t, g) {
        var e = this.$el.find(".aspect_brief_box");
        e.html("");
        for (var n = "",
            I = 0; I < t.length; I++) {
          var i = t[I];
          n += this.aspect_template(i)
        }
        e.append(n)
      }
    }),
    n = Backbone.View.extend({
      el: "#pattern_view_birth",
      pattern_template: _.template("    <div class='aspect_pattern_box'>      <div class='ap_raphael' id='ap_<%= index %>'></div>      <div class='ap_info'>        <div class='ap_type'><%= type %></div>        <div class='ap_planets'>          <% _.each(planets, function(planet){ %>            <%= planet %><br/>          <% }); %>        </div>      </div>  </div>"),
      initialize: function(t) {
        var g = t.patterns,
          e = t.planets,
          n = this.$el.find(".inner_ibox");
        if (n.html(""), 0 < g.length)
          for (var I = 0; I < g.length; I++) {
            for (var i = g[I], C = [], A = 0; A < i.planets.length; A++) {
              var a = e[i.planets[A]].full_name;
              C.push(a)
            }
            var o = {
                index: I,
                planets: C,
                type: i.type
              },
              o = this.pattern_template(o);
            n.append(o)
          } else this.$el.attr("style", "display:none !important");
        for (A = 0; A < g.length; A++) t.createSmall("ap_" + A, t.patterns[A].planets)
      }
    });
  isLeapYear = function(t) {
      return t % 400 == 0 || t % 100 != 0 && t % 4 == 0
    },
    day2month = function(t, g, e) {
      return month_max = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
        !(2 != g || 29 != t || !isLeapYear(e)) || t <= month_max[g - 1]
    },
    get_date_str = function(t, g, e, n, I, i) {
      var C = "";
      return 12 < n && (n -= 12),
        C += {
          1: "January",
          2: "February",
          3: "March",
          4: "April",
          5: "May",
          6: "June",
          7: "July",
          8: "August",
          9: "September",
          10: "October",
          11: "November",
          12: "December"
        } [g] + " " + t + ", " + e + " at " + n + ":" + (I = I < 10 ? "0" + I : I) + " " + i
    };
  $(document).ready(function() {
    $("#widget_container").append('    <div class="widget-container widget-birthchart">        <div id="birth_form" class="new-form tools-forms new-form">            <h1>Create Your Birth Chart</h1>            <div class="new_box">              <div class="error" id="error"></div>              <section>                <input class="default-input full-width-input name" name="name" placeholder="Your name" autocomplete="new-password" />              </section>              <section>                <input class="default-input full-width-input geolocationwidget" placeholder="Enter your city, state, country" autocomplete="new-password"/>              </section>              <input name="pk" class="hidden_input pk" type="hidden">              <input name="lat" class="hidden_input lat" type="hidden">              <input name="lng" class="hidden_input lng" type="hidden">              <input name="place" class="hidden_input place" type="hidden">              <input name="date" class="hidden_input date" type="hidden">              <section class="date-container">                <div>                  <div class="date-group">                    <label for="month" style="display:none">Month</label>                    <input class="default-input form-control input month center-align" placeholder="MM" maxlength="2" pattern="d*" name="month" autocomplete="new-password" />                    <span class="date-slash">/</span>                    <label for="day" style="display:none">Day</label>                    <input class="default-input form-control input day center-align" placeholder="DD" maxlength="2" pattern="d*" name="day" autocomplete="new-password" />                    <span class="date-slash">/</span>                    <label for="year" style="display:none">Year</label>                    <input class="default-input form-control input year center-align" placeholder="YYYY" maxlength="4" pattern="d*" name="year" autocomplete="new-password" />                  </div>                  <div class="time-group">                    <label for="hour" style="display:none">Hour</label>                    <input class="center-align default-input hour" placeholder="hh" maxlength="2" pattern="d*" name="hour" autocomplete="new-password" />                    <span class="time-colon">:</span>                    <label for="min" style="display:none">Min</label>                    <input class="center-align default-input min" placeholder="mm" maxlength="2" pattern="d*" name="min" autocomplete="new-password" />                    <div class="form_set ampm_form_set">                        <div>                            <label class="radio">                                <input type="radio" name="timeRadio" value="am" data-toggle="radio" data-radiocheck-toggle="radio" />                                <span class="radio__label">AM</span>                            </label>                            <label class="radio">                                <input type="radio" name="timeRadio" value="pm" data-toggle="radio" checked="" data-radiocheck-toggle="radio" checked="checked"/>                                <span class="radio__label">PM</span>                            </label>                        </div>                    </div>                  </div>                </div>            </section>            <div class="form-group">              <button id="submit_chart_birth" class="btn btn-primary btn-hg btn-submit">Create Your Chart</button>            </div>          </div>        </div>        <div id="chart-area" class="chart-container">            <div class="chart_display_wrapper">              <div class="chart_display" id="chart_display">                <div id="raphael_birth"></div>              </div>            </div>            <div class="chart_details">                <div class="section-title"><h4>Chart Details</h4></div>                <div class="tab_details">                    <div class="h_attrs"> Name: <span id="chart_name"></span></div>                    <div class="h_attrs"> Birthday: <span id="chart_date"> </span></div>                    <div class="h_attrs"> Place of Birth: <span id="chart_place"> </span></div>                </div>            </div>            <div class="ibox ibox_wide" id="planet_view_birth">                <div class="section-title"><h4>Planets</h4></div>                  <div class="inner_ibox">                    <div class="planet_brief_box"></div>                </div>            </div>            <div class="ibox ibox_wide" id="aspect_view_birth">                <div class="section-title"><h4>Aspects</h4></div>                <div class="inner_ibox">                  <div class="aspect_brief_box">                  </div>                </div>            </div>            <div class="ibox ibox_wide" id="pattern_view_birth">                <div class="section-title"><h4>Chart Patterns</h4></div>                <div class="inner_ibox"></div>            </div>            <div class="bc_links"><a target="_blank" id="bc_1" href="https://astro-charts.com/">View your full chart ></a></div>        </div>    </div>');
    var e, t = function(t) {
      return t
    };
    Bloodhound.tokenizers.pass = t,
      Bloodhound.tokenizers.obj.pass = (e = t,
        function(g) {
          return function(t) {
            return e(t[g])
          }
        });
    t = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.obj.whitespace("city"),
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      local: local_json,
      remote: l + "/tools/get_geo_loc_external/?%QUERY",
      limit: 4
    });
    t.initialize();

    function n(t) {
      var g = t.city + ", ";
      return "" != t.state && 0 < t.state.length && (g = g + t.state + ", "),
        g += t.country
    }
    window.jQuery_custom(".geolocationwidget").typeahead({
      minLength: 1,
      highlight: !0
    }, {
      name: "all-places",
      displayKey: n,
      source: t.ttAdapter(),
      templates: {
        suggestion: _.template("<p><strong><%= city %></strong>, <%= state %>, <%= country %></p>")
      }
    });
    this.curr_loc = !1,
      window.jQuery_custom(".geolocationwidget").bind("typeahead:selected",
        function(t, g) {
          window.birth_curr_loc = g,
            $(".place").val(n(g)),
            $(".lat").val(g.lat),
            $(".lng").val(g.lng)
        }),
      $("#submit_chart_birth").click(function(t) {
        
        t.preventDefault();
        console.log("beginning...after t.preventDefault()")
        var g = $(".name").val(),
      
          e = $(".day").val(),
          n = $(".month").val(),
          I = $(".year").val(),
          i = $(".hour").val(),
          C = $(".min").val(),
          A = $(".lng").val(),
          a = $(".lat").val(),
          o = $(".place").val(),
          s = !0,
          t = !1;
         console.log("this is g = ", g);
        $("#error").html("Check for errors in your form. "),
          g.length < 1 ? ($("#error").show().append("Please enter name. "), $(".name").parent().addClass("has-error"), s = !1) : $(".name").parent().removeClass("has-error"),
          window.birth_curr_loc ? $(".geolocationwidget").parents(".form-group").removeClass("has-error") : (s = !1, $("#error").show().append("Please select city or nearest city from list."), $(".geolocationwidget").parents(".form-group").addClass("has-error")),
          e = parseInt(e),
          n = parseInt(n),
          I = parseInt(I),
          i = parseInt(i),
          C = parseInt(C),
          isNaN(i) && (i = 12),
          isNaN(C) && (C = 0),
          isNaN(e) || 31 < e || e < 1 ? (s = !1, $(".day").parent().addClass("has-error")) : $(".day").parent().removeClass("has-error"),
          isNaN(n) || 12 < n || n < 1 ? (s = !1, $(".month").parent().addClass("has-error")) : $(".month").parent().removeClass("has-error"),
          isNaN(I) || I < 1e3 ? t = !(s = !1) : (I < 1 || 3002 < I) && (t = !(s = !1), $("#error").append("The year is outside of the accepted range. ")),
          t ? $(".year").parent().addClass("has-error") : $(".year").parent().removeClass("has-error"),
          s && (day2month(e, n, I) || ($("#error").append("The day is out of range for the month. "), s = !1)),
          12 < i ? (s = !1, $(".hour").parent().addClass("has-error"), $("#error").append("Hour must be below 12. Use am/pm to mark time of day. ")) : $(".hour").parent().removeClass("has-error"),
          59 < C ? (s = !1, $(".min").parent().addClass("has-error")) : $(".min").parent().removeClass("has-error"),
          "" == i && (i = "12"),
          "" == C && (C = "00");
        t = $("input[name=timeRadio]:checked").val();
      
        "pm" == t && 12 != i && (i += 12),
          "am" == t && 12 == i && (i = 0);
        var r = function() {
          console.log("middle")
          return r = $("#bc_astro").is(":visible") && "hidden" != $("#bc_astro").css("visibility")
        };
        s ? ($("#error").hide(), s = I + "-" + n + "-" + e + " " + i + "-" + C, C = get_date_str(e, n, I, i, C, t), $("#bc_1").attr("href", "https://astro-charts.com/tools/new/birth-chart/"), t = window.location.hostname, window.location.path && (t += window.location.path), t = "date=" + s + "&lat=" + a + "&lng=" + A + "&path=" + t, r()
        
             ? $.getJSON(l + "/tools/get_widget_planets/?" + t,
          function(t) {
            console.log("t[0] = what?", t[0])
            console.log("t[1] = what?", t[1])
            console.log("t[1] = wtf");
            window.birth_planets = t[0],
              window.houses = t[1];
            new c;
            $("#chart-area").show(),
              $("#birth_form").hide(),
              (t = $("#bc_astro").attr("skin")) && "astrobracelet" == t && (t = $("#bc_1").attr("href"), $("<br/><p>Your Chart Link:</p><pre class='defaultcode js-copytextarea'>" + t + "</pre>").insertBefore(".bc_links"))
          })
             : $("#birth_form").html("<p>Error: Please visit <a href='https://astro-charts.com'>astro-charts.com</a> for more details.</p>"), $("#chart_name").html(g), $("#chart_date").html(C), $("#chart_place").html(o), $("html, body").animate({
            scrollTop: $("#widget_container").offset().top
          },
          10)) : $("#error").show()
          console.log("end...$'#error').show()")
          console.log("t[0] = what?", t[0])
            console.log("t[1] = what?", t[1])
            console.log("t", t)

      })
      
  })
}();
